{"version":3,"sources":["services/cardService/cardService.js","services/boardService.js","logo.svg","services/utils.js","services/socketService.js","assets/icons/opus2.png","cmps/BoardHeader/MemberPreview.jsx","cmps/BoardPreview.jsx","pages/BoardHub.jsx","pages/Home.jsx","store/actions/boardActions.js","cmps/CardCmps/CardPreviewDueDate.jsx","cmps/CardCmps/CardDueDateSetter.jsx","cmps/CardCmps/CardNewChecklist.jsx","cmps/CardCmps/CardSidebar.jsx","cmps/CardCmps/CardDescription.jsx","cmps/CardCmps/CardDetailsHeader.jsx","cmps/CardCmps/CardLabels.jsx","cmps/CardCmps/CardChecklistTodo.jsx","cmps/CardCmps/CardChecklist.jsx","cmps/CardCmps/CardChecklistList.jsx","cmps/Sidebar/ActivityLog.jsx","cmps/CardCmps/CardAddComment.jsx","cmps/Sidebar/LabelEditModal.jsx","cmps/Sidebar/LabelPalette.jsx","cmps/CardCmps/CardMember.jsx","cmps/CardCmps/CardMembersList.jsx","services/cloudService.js","cmps/CardCmps/CardImgUpload.jsx","cmps/CardCmps/CardDetailsAttachment.jsx","cmps/CardCmps/CardImagesList.jsx","cmps/CardCmps/CoverSelector.jsx","cmps/CardCmps/CardDetails.jsx","cmps/AddMemberModal.jsx","cmps/BoardHeader/MemberList.jsx","cmps/BoardHeader/Label.jsx","cmps/BoardHeader/FilterByLabel.jsx","cmps/BoardHeader/Filter.jsx","cmps/BoardHeader/BoardHeader.jsx","store/actions/userActions.js","cmps/CardCmps/CardPreviewActions.jsx","cmps/CardCmps/CardPreview.jsx","cmps/NewItem.jsx","store/actions/groupActions.js","cmps/GroupCmps/GroupMenu.jsx","cmps/Group.jsx","cmps/GroupCmps/AddNewGroup.jsx","cmps/GroupList.jsx","cmps/Notify.jsx","cmps/Sidebar/SidebarHeader.jsx","cmps/Sidebar/AboutBoard.jsx","cmps/Sidebar/ChangeBackground.jsx","assets/imgs/backgrounds/bg-1.jpg","cmps/Sidebar/SideArchive.jsx","cmps/Sidebar/LabelPanel.jsx","cmps/Sidebar/Sidebar.jsx","pages/Board.jsx","cmps/BoardHeader/NewBoardColor.jsx","assets/bgColors/bgColors.js","cmps/BoardHeader/AddNewBoard.jsx","assets/icons/snorelax.png","cmps/Navbar.jsx","pages/Login.jsx","App.js","serviceWorker.js","store/reducers/boardReducer.js","store/reducers/userReducer.js","store/reducers/rootReducer.js","store/store.js","index.js","services/httpService.js","services/storageService.js","services/userService.js"],"names":["cardService","addCard","createImage","imgRef","type","id","utils","makeId","src","title","createdAt","Date","now","board","cardTxt","groupId","a","newBoard","JSON","parse","stringify","newCard","description","archivedAt","members","labels","dueDate","attachments","byMember","groups","map","group","cards","push","boardService","updateBoard","add","query","filterBy","httpService","get","remove","boardId","delete","getBoardById","filter","addNewBoard","createActivity","partialActivity","user","userService","getLoggedInUser","activity","txt","commentTxt","_id","fullname","imgUrl","card","post","addedBoard","put","boardToReturn","newGroup","toLowerCase","includes","length","currLabels","find","label","searchedLabel","currLabel","boardName","boardColor","console","log","isArchived","createdBy","fullName","style","fontClr","bgImg","module","exports","getUniqueHeaders","items","key","uniqueItems","forEach","item","getRandomColor","opacity","strHtml","calculatePercentToHex","chars","i","charAt","getRandomInteger","possible","Math","floor","random","max","min","percentage","round","toString","socket","setup","io","terminate","on","eventName","cb","off","emit","data","MemberPreview","props","className","name","newName","split","toUpperCase","getInitials","BoardPreview","toDateString","lastEdited","activities","onClick","onSelect","backgroundImage","color","member","BoardHub","boards","header","history","CircularProgress","Home","state","view","templates","setViewFromParams","match","params","setState","onSelectBoard","onSelectTemplate","templateId","setView","idx","this","prevProps","prevState","BottomNavigation","value","onChange","event","newValue","showLabels","BottomNavigationAction","icon","onSwitching","index","containerStyle","height","Component","loadBoard","dispatch","addActivity","unshift","updateCard","newActivity","groupIdx","findIndex","cardIdx","addLabel","newLabel","removeLabel","labelId","labelIdx","splice","updateLabel","updatedlabel","onSetFilterBy","filteredBoard","setStyle","text","CardPreviewDueDate","Fragment","daysRemaining","date","month","toLocaleString","day","getDate","parsedDate","abs","year","getFullYear","displayTime","hour","toLocaleTimeString","dueDateClass","fontSize","CardDueDateSetter","isPopperOpen","anchor","setDefaultDate","openModal","closeModal","onSetDueDate","ev","formDate","target","timestamp","getTime","submitDueDate","onUpdateDueDate","onRemoveDueDate","getDisplayDateBtn","displayDate","ref","Button","parseDate","timeArray","getMonth","getHours","getMinutes","React","createRef","current","Popover","anchorOrigin","vertical","horizontal","transformOrigin","open","anchorEl","onClose","onBackdropClick","noValidate","TextField","onBlur","InputLabelProps","shrink","CardNewChecklist","isEditing","txtValue","setEditing","setNotEditing","onSubmit","preventDefault","checklist","onUpdate","getNewChecklistDisplay","autoFocus","onMouseDown","CardSidebar","anchorRef","toggleCoverSelector","onArchiveCard","toggleLabelPallete","toggleDisplayMembers","isUploading","disabled","size","toggleUploadDropzone","onUpdateChecklists","CardDescription","setDescriptionFromProps","onSave","onUpdateDesc","getDescriptionTxt","getIsEditing","placeholder","CardDetailsHeader","onChangeText","headerTxt","CardLabels","cardLabels","onClickLabel","boardLabel","boardLabels","preview","isFull","displayLabel","CardChecklistTodo","isDone","isNew","removeText","getNewTodoDisplay","getTodoClassName","doneClass","getTextBox","Checkbox","checked","onCheck","onRemove","updateChecklist","updateTodo","todo","checkStatus","getActivityTxt","stopPropagation","activityTxt","displayCompleted","CardChecklist","tasksCompleted","totalTasks","showDialog","setTasksStatus","todos","toggleDisplayCompleted","getDisplayCheckedBtn","btnContent","onRemoveChecklist","closeDialog","openDialog","getPercentCompleted","onUpdateChecklist","newTodo","todoIdx","LinearProgress","variant","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","CardChecklistList","checklists","ActivityLog","displayMode","slice","to","timeago","CardAddComment","onAddComment","getNewCommentDisplay","placeholer","Accordion","expanded","classes","root","AccordionSummary","aria-controls","AccordionDetails","LabelEditModal","action","setLabelEditId","onRemoveLabel","IconButton","defaultValue","required","hidden","defaultChecked","htmlFor","_LabelPalette","labelEditId","onAddLabel","labelName","newColor","onEditLabel","labelColor","updatedLabel","onToggleLabelToCard","cardLabel","mapDispatchToProps","LabelPalette","connect","boardReducer","CardMember","isUserChecked","initials","boardMember","cardMembers","Boolean","toggleMember","Avatar","width","CardMembersList","boardMembers","filterBoardMembers","filteredMembers","onSelectBoardMember","shouldAdd","cardMember","updateCardMembers","toggleList","cloudService","uploadImg","file","UPLOAD_URL","formData","FormData","append","fetch","method","body","res","json","secure_url","CardImgUpload","setUploading","submitImage","setFormValues","newItem","onAddImage","files","acceptedFiles","cancelButtonText","submitButtonText","maxFileSize","isOpen","toggleOpen","handleChange","showPreviews","showFileNamesInPreview","CardDetailsAttachment","att","updateAttFromProps","attachment","bool","then","Promise","resolve","CardImagesList","CoverSelector","cover","setCoverFromProps","colors","onSelectCover","onRemoveCover","getImageEls","imageEls","el","getColorEls","backgroundColor","_CardDetails","groupName","commentsOnly","isLabelPaletteShowing","isCardMemeberShown","isUploadZoneOpen","isCoverSelectorShown","getCardDetails","cardId","onCloseCard","toggleCommentsOnly","toggleLabelPalette","getLabels","openEditLabelsModal","submitCard","onUpdateHeader","getCardDetailsMembers","cardMembersEl","onUpdateCardMembers","onUpdateCover","newImg","onUpdateAttachments","newAttachment","newChecklist","getFilteredActivities","cardActivities","getCardCover","Object","keys","aria-label","switchGroup","CardDetails","withRouter","_AddMemberModal","searchLetters","toggleUser","removeMember","addToMembers","getMembers","search","allExistingUsers","ClickAwayListener","onClickAway","onCloseModal","autoCorrect","autoComplete","toLocaleLowerCase","userToPush","memberIdx","AddMemberModal","allUsers","userReducer","users","MemberList","isModalShown","onShowModal","img","Label","isChecked","onFilterByLabel","_FilterByLabel","currFilter","onResetFilter","toggleModal","FilterByLabel","Filter","isLabelModalShown","onFilter","handleLabel","_BoardHeader","loadAllUsers","onToggleSidebar","getUsersFromDb","BoardHeader","_CardPreviewActions","offsetTop","offsetLeft","isMemberListOpen","onKeyPress","toggleCardMembersMenu","getParentPos","pos","parentElement","getBoundingClientRect","top","left","cardCover","getCurrTitle","position","cardStyle","attrs","CardPreviewActions","_CardPreview","onSetEditing","onSetNotEditing","onOpenCardActions","getCardPreviewStyle","bgColor","getCardPreviewMembers","getCardPreviewAttachments","cardAtt","getCardPreviewHoldDesc","cardDesc","getCardPreviewComments","cardComm","onOpenCardDetails","url","window","location","href","assign","getCardPreviewChecklist","doneTodos","totalTodos","getCardPreviewAttrs","every","onToggleLabels","toggleFullLabels","draggableId","provided","innerRef","draggableProps","dragHandleProps","fullLabel","CardPreview","NewItem","onKeyDown","placeHolderTxt","addBtnTxt","addItemTxt","onAdd","require","_GroupMenu","archiveAllCards","onArchiveAllCards","toggleMenu","archiveGroup","onArchiveGroup","newCards","GroupMenu","_Group","currGroupName","currGroupId","isMenuShown","isChangeGroupShown","onAddCard","getAddItemTxt","isShown","closeChangeGroupName","onOpenChangeGroupName","handleChangeGroupName","setNewGroupName","spellCheck","onFocus","select","droppableId","droppableProps","trim","newGroupName","replace","Group","_AddNewGroup","newGroupTitle","onAddNewGroup","closeNewGroup","groupTitle","groupToPush","AddNewGroup","GroupList","isNewGroupShown","onAddGroup","direction","Notify","SidebarHeader","titleTxt","onSetMenuOpt","Divider","_AboutBoard","isEditDesc","currDesc","setCurrDesc","onEditDesc","isShowing","Drawer","BackdropProps","hideBackdrop","resize","cols","rows","cursor","AboutBoard","_ChangeBackground","onSetBoardStyle","bgClr","backgroundRepeat","backgroundSize","ChangeBackground","_SideArchive","isShowingCards","archive","archivedCards","archivedGroups","loadArchive","onUnArchiveCard","onDeleteCard","deleteCard","onUnArchiveGroup","updateGroup","SideArchive","_LabelPanel","LabelPanel","_Sidebar","selectedMenuOpt","DynamicCmp","isSidebarShowing","ListItem","button","ListItemIcon","ListItemText","Sidebar","_Board","prevBoard","remoteUpdate","differ","detailedDiff","added","deleted","updated","toast","success","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","getBoardFromParams","socketService","error","setTimeout","updatedBoard","Board","NewBoardColor","isSelected","onSetColor","allBoardColors","_AddNewBoard","selectedColor","newBoardName","AddNewBoard","boardColors","Navbar","isNewBoardModalShown","showLove","alert","snorelax","alt","Login","fade","useSpring","from","transform","leave","div","_App","onDragEnd","result","destination","source","startGroupIndex","endGroupIndex","currGroup","currCard","newCardsGroup","Array","newGroups","updatePosition","destinationGroup","formerGroup","formerCardIndex","newCardsArray","newGroupsOrder","loginDefault","configure","path","component","newBoardPositioning","App","hostname","initialState","localLoggedinUser","sessionStorage","loggedInUser","rootReducer","combineReducers","userId","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message","axios","Axios","create","withCredentials","ajax","endpoint","dir","response","status","loadFromStorage","val","localStorage","getItem","saveToStorage","login","logout","signup","getUsers","storageService","getById","update","_handleLogin","userCred","username","clear","setItem"],"mappings":"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","file":"static/js/main.ea2fb978.chunk.js","sourcesContent":["\r\nimport { utils } from '../utils'\r\nimport { boardService } from '../boardService';\r\n\r\nexport const cardService = {\r\n    addCard,\r\n    createImage\r\n}\r\n\r\n\r\nfunction createImage(imgRef) {\r\n    const attachment = {\r\n        type: 'img',\r\n        id: utils.makeId(),\r\n        src: imgRef,\r\n        title: 'Image',\r\n        createdAt: Date.now()\r\n    }\r\n    return attachment\r\n\r\n}\r\n\r\nasync function addCard(board, cardTxt, groupId) {\r\n    const newBoard = JSON.parse(JSON.stringify(board))\r\n    const newCard = {\r\n        id: utils.makeId(),\r\n        title: cardTxt,\r\n        description: '',\r\n        archivedAt: null,\r\n        members: [],\r\n        labels: [],\r\n        createdAt: Date.now(),\r\n        dueDate: null,\r\n        attachments: null,\r\n        byMember: {\r\n            // add user info here from session storage:\r\n            //                         \"byMember\": {\r\n            //                             \"_id\": \"u101\",\r\n            //                             \"username\": \"Tal\",\r\n            //                             \"fullname\": \"Tal Tarablus\",\r\n            //                             \"imgUrl\": \"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg\"\r\n            //                         },\r\n        }\r\n    }\r\n    newBoard.groups.map(group => {\r\n        if (group.id === groupId) {\r\n            group.cards.push(newCard)\r\n            return group\r\n        }\r\n        return group\r\n    })\r\n    await boardService.updateBoard(newBoard)\r\n    return newBoard\r\n}\r\n","import httpService from './httpService';\r\nimport userService from './userService';\r\nimport socketService from './socketService';\r\nimport { utils } from './utils'\r\n\r\nexport const boardService = {\r\n    add,\r\n    query,\r\n    remove,\r\n    getBoardById,\r\n    updateBoard,\r\n    filter,\r\n    addNewBoard,\r\n    createActivity\r\n};\r\n\r\nfunction createActivity(partialActivity) {\r\n    // This fn needs to receive an object with the card id and title and the text in theh following format:\r\n    // send to this fn:\r\n    // txt\r\n    // card id\r\n    // card title\r\n    // comment txt as blank\r\n\r\n        const user = userService.getLoggedInUser()\r\n\r\n        const activity = {\r\n            \"id\": utils.makeId(),\r\n            \"txt\": partialActivity.txt,\r\n            \"commentTxt\": partialActivity.commentTxt,\r\n            \"createdAt\": Date.now(),\r\n            \"byMember\": {\r\n                \"_id\": user._id,\r\n                \"fullName\": user.fullname,\r\n                \"imgUrl\": user.imgUrl\r\n            }\r\n        }\r\n        if (!partialActivity.card) return activity\r\n        \r\n        activity.card = {\r\n            \"id\": partialActivity.card.id,\r\n            \"title\": partialActivity.card.title\r\n        }\r\n\r\n        return activity\r\n\r\n    }\r\n\r\n    function query(filterBy) {\r\n        //   var queryStr = (!filterBy)? '' : `?name=${filterBy.name}&sort=anaAref`\r\n        //   return httpService.get(`board${queryStr}`);\r\n        return httpService.get('board')\r\n    }\r\n\r\n    function getBoardById(boardId) {\r\n        return httpService.get(`board/${boardId}`)\r\n    }\r\n    function remove(boardId) {\r\n        return httpService.delete(`board/${boardId}`);\r\n    }\r\n    async function add(board) {\r\n        const addedBoard = await httpService.post(`board`, board);\r\n        return addedBoard\r\n    }\r\n\r\n    async function updateBoard(board) {\r\n        const boardId = board._id\r\n        return await httpService.put(`board/${boardId}`, board)\r\n    }\r\n    async function switchGroup(board, card, oldGroupId, targetGroupId, targetCardIdx) {\r\n        const newBoard = JSON.parse(JSON.stringify(board))\r\n        newBoard.groups = newBoard.groups.map(group => {\r\n            if (group.id === targetGroupId) return [...group.splice(0, targetCardIdx), card, ...group.splice(targetCardIdx + 1)]\r\n            if (group.id === oldGroupId) return group.filter(currCard => currCard.id !== card.id)\r\n            return group\r\n        })\r\n        return await updateBoard(newBoard)\r\n    }\r\n\r\n    async function filter(boardId, filterBy) {\r\n\r\n        const boardToReturn = await getBoardById(boardId)\r\n        // text in card filter\r\n        if (filterBy.txt) {\r\n            boardToReturn.groups = boardToReturn.groups.map(group => {\r\n                const newGroup = { ...group }\r\n                newGroup.cards = newGroup.cards.filter(card => {\r\n                    return card.title.toLowerCase().includes(filterBy.txt)\r\n                })\r\n                return newGroup\r\n            })\r\n        }\r\n\r\n        // multiple labels filter\r\n        if (filterBy.labels && filterBy.labels.length) {\r\n            const currLabels = filterBy.labels\r\n            boardToReturn.groups = boardToReturn.groups.map(group => {\r\n                const newGroup = { ...group }\r\n                newGroup.cards = newGroup.cards.filter(card => {\r\n                    if (card.labels &&\r\n                        card.labels.find(label => {\r\n                            const searchedLabel = label.id\r\n                            // if the searched label equals to the current labels from the label-filter array\r\n                            if (searchedLabel === currLabels.find(currLabel => currLabel === searchedLabel)) {\r\n                                return label\r\n                            }\r\n                        })) {\r\n                        return card\r\n                    }\r\n                })\r\n                return newGroup\r\n            })\r\n        }\r\n        return boardToReturn\r\n    }\r\n\r\n\r\n    async function addNewBoard(boardName, boardColor){\r\n        console.log(boardName);\r\n        console.log(boardColor);\r\n        console.log('Finish backend to push new board');\r\n\r\n        const newBoard = {\r\n            _id: utils.makeId(),\r\n            title: boardName,\r\n            isArchived: false,\r\n            createdAt: Date.now,\r\n            createdBy: {\r\n                _id: 'u101',\r\n                fullName: 'Abi Abambi',\r\n                imgUrl: 'http://some-img'\r\n            },\r\n            style: {\r\n                id: utils.makeId(),\r\n                fontClr: '#f9f9f9',\r\n                bgImg: null\r\n            },\r\n            members:[],\r\n            groups:[{\r\n                id: utils.makeId(),\r\n                style: {},\r\n                title: 'Add New List Title',\r\n                archivedAt: false,\r\n                cards: [{\r\n                    id: utils.makeId(),\r\n                    title: 'Add New Card Title',\r\n                    description: \"description\",\r\n                    archivedAt: false,\r\n                    labels: []\r\n                }]\r\n            }]\r\n        }\r\n\r\n        // push new board to board collection and forword user to the new route\r\n    }","module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","export const utils = {\r\n    getUniqueHeaders,\r\n    getRandomColor,\r\n    getRandomInteger,\r\n    makeId\r\n}\r\n\r\n\r\nfunction makeId(length = 10) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n\r\nfunction getUniqueHeaders(items, key) {\r\n    let uniqueItems = []\r\n    items.forEach(item => {\r\n        if (!uniqueItems.includes(item[key])) uniqueItems.push(item[key])\r\n    });\r\n    return uniqueItems\r\n}\r\n\r\nfunction getRandomColor(opacity = 100) {\r\n    let strHtml = '#';\r\n    strHtml += calculatePercentToHex(opacity)\r\n    let chars = '0123456789abcdef';\r\n    for (let i = 0; i < 3; i++) {\r\n        strHtml += chars.charAt(getRandomInteger(chars.length));\r\n    }\r\n    return strHtml;\r\n}\r\n\r\nfunction getRandomInteger(max, min = 0) {\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nfunction calculatePercentToHex(percentage) {\r\n    const val = Math.round(percentage / 100 * 255)\r\n    const hexString = val.toString(16);\r\n    return hexString\r\n}","import io from 'socket.io-client';\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030';\r\n\r\nlet socket;\r\n\r\nexport default {\r\n  setup,\r\n  terminate,\r\n  on,\r\n  off,\r\n  emit\r\n};\r\n\r\nfunction setup() {\r\n  socket = io(BASE_URL);\r\n}\r\n\r\nfunction terminate() {\r\n  socket = null;\r\n}\r\n\r\nfunction on(eventName, cb) {\r\n  socket.on(eventName, cb);\r\n}\r\n\r\nfunction off(eventName, cb) {\r\n  socket.off(eventName, cb);\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n  socket.emit(eventName, data);\r\n}\r\n","module.exports = \"data:image/png;base64,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\"","\r\nimport React from 'react'\r\n\r\nexport function MemberPreview(props) {\r\n\r\n    function getInitials(name){\r\n        const newName = name.split(' ')\r\n        const firstLetter = newName[0].charAt(0).toUpperCase()\r\n        const secondLetter = newName[1].charAt(0).toUpperCase()\r\n        const initials = firstLetter + secondLetter\r\n        return initials  \r\n    }\r\n\r\n    return (\r\n        <div className=\"member-preview\">\r\n            {getInitials(props.name)}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { MemberPreview } from './BoardHeader/MemberPreview'\r\n\r\n\r\nexport function BoardPreview(props) {\r\n    const board = props.board\r\n\r\n    const createdAt = new Date (board.createdAt).toDateString()\r\n    const lastEdited = new Date (board.activities[0].createdAt).toDateString() || \"1123\"\r\n\r\n    return (\r\n        <div className=\"board-preview\">\r\n            <div className=\"board-image\" onClick={() => props.onSelect(board._id)} style={{ backgroundImage: board.style.bgImg }}>\r\n                <div className=\"board-overlay\">\r\n                <h3 style={{ color: board.style.fontClr }}>{board.title}</h3>\r\n                </div>\r\n            </div>\r\n            <div className=\"board-details\">\r\n                <div className=\"board-description\">\r\n                    {board.description}\r\n                </div>\r\n                <div className=\"board-members\">\r\n                    {board.members.map(member => <MemberPreview key={member._id} name={member.fullName} imgUrl={member.imgUrl}/>)}\r\n                </div>\r\n                <div className=\"board-creator\">\r\n                    Board created by {board.createdBy.fullName} on {createdAt}\r\n                </div>\r\n                <div className=\"board-last-edited\">\r\n                    Last edited on {lastEdited}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { CircularProgress } from '@material-ui/core'\r\nimport { BoardPreview } from '../cmps/BoardPreview'\r\nimport React from 'react'\r\n\r\nexport function BoardHub(props) {\r\n    if (!props.boards) return <div className=\"board-hub\"><CircularProgress /></div>\r\n    return (\r\n\r\n        <div className=\"board-hub\">\r\n            \r\n            <header>\r\n                <h1>{props.header}</h1>\r\n            </header>\r\n            <section>\r\n                {props.boards.map(board => <BoardPreview key={board._id} history={props.history} onSelect={props.onSelect} board={board} />)}\r\n            </section>\r\n\r\n        \r\n        </div>\r\n    )\r\n}\r\n","import { BottomNavigation, BottomNavigationAction } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport { boardService } from '../services/boardService';\r\nimport DeveloperBoardIcon from '@material-ui/icons/DeveloperBoard';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport { BoardHub } from './BoardHub';\r\n\r\n\r\nexport class Home extends Component {\r\n\r\n    state = {\r\n        view: 0,\r\n        boards: null,\r\n        templates: null\r\n    }\r\n\r\n    async componentDidMount() {\r\n        \r\n        this.setViewFromParams()\r\n        const boards = await boardService.query()\r\n        this.setState({ boards })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.match.params.view !== this.props.match.params.view) {\r\n            this.setViewFromParams()\r\n        }\r\n    }\r\n    \r\n    setViewFromParams = () => {\r\n        const view = this.props.match.params.view\r\n        \r\n        if (view === 'templates') return this.setState({view:1})\r\n        return this.setState({view:0})\r\n    }\r\n\r\n    onSelectBoard = (boardId) => {\r\n        this.props.history.push(`/board/${boardId}`)\r\n    }\r\n\r\n\r\n    onSelectTemplate = (templateId) => {\r\n\r\n    }\r\n\r\n    setView = (idx ) => {\r\n        if (!idx) {\r\n            this.props.history.push('/board')\r\n        } else {\r\n            this.props.history.push('/templates')\r\n        }\r\n    }\r\n   \r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <BottomNavigation\r\n                className=\"home-nav\"\r\n                    value={this.state.view}\r\n                    onChange={(event, newValue) => {\r\n                        this.setView(newValue);\r\n                    }}\r\n                    showLabels\r\n                >\r\n                    <BottomNavigationAction label=\"Boards\" icon={<DashboardIcon />} />\r\n                    <BottomNavigationAction label=\"Templates\" icon={<DeveloperBoardIcon />} />\r\n                </BottomNavigation>\r\n                <SwipeableViews onSwitching={this.setView} index={this.state.view} containerStyle={{ height: '100vh' }}>\r\n                    <BoardHub boards={this.state.boards} onSelect={this.onSelectBoard} header=\"Boards\" />\r\n                    <BoardHub boards={this.state.boards} header=\"Templates\" />\r\n                </SwipeableViews>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { boardService } from \"../../services/boardService\";\r\n\r\n\r\nexport function loadBoard(boardId) {\r\n  return async dispatch => {\r\n    try {\r\n      const board = await boardService.getBoardById(boardId);\r\n      dispatch({ type: 'SET_BOARD', board });\r\n    } catch (err) {\r\n      console.log('boardAction: error in board action', err);\r\n      throw err;\r\n    }\r\n  };\r\n}\r\n\r\n\r\nexport function addActivity(board, activity) {\r\n  \r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      newBoard.activities.unshift(activity)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error removing board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function toggleFullLabels() {\r\n  return dispatch => {\r\n    dispatch({ type: 'TOGGLE_FULL_LABEL' })\r\n  }\r\n}\r\n\r\n\r\n// check that it updates the db\r\nexport function updateCard(board, newCard,newActivity) {\r\n  \r\n  return async dispatch => {\r\n    try {\r\n      // replicate board\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      // find the group idx\r\n      const groupIdx = newBoard.groups.findIndex(group => group.cards.find(card => card.id === newCard.id))\r\n      // find the card idx\r\n      const cardIdx = newBoard.groups[groupIdx].cards.findIndex(card => card.id === newCard.id)\r\n      // replace the card content\r\n      newBoard.groups[groupIdx].cards[cardIdx] = newCard\r\n\r\n      // add activity\r\n\r\n      if (newActivity) {\r\n        const activity = boardService.createActivity(newActivity)\r\n        newBoard.activities.unshift(activity)\r\n      }\r\n\r\n\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n      // newBoard = boardService.updateBoard(newBoard) // updating the DB\r\n\r\n    } catch (err) {\r\n      console.log('error updating card', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function addLabel(board, newLabel) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      newLabel.id = makeId()\r\n      newBoard.labels.push(newLabel)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error adding label', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeLabel(board, labelId) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const labelIdx = newBoard.labels.findIndex(label => label.id === labelId)\r\n      newBoard.labels.splice(labelIdx, 1)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error removing label', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updateLabel(board, updatedlabel) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      newBoard.labels = newBoard.labels.map(label => {\r\n        if (label.id === updatedlabel.id) label = updatedlabel\r\n        return label\r\n      })\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating label', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function deleteCard(board, cardId) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.cards.find(card => card.id === cardId))\r\n      const cardIdx = newBoard.groups[groupIdx].cards.findIndex(card => card.id === cardId)\r\n      newBoard.groups[groupIdx].cards.splice(cardIdx, 1)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error deleting card', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updateGroup(board, newGroup) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.id === newGroup.id)\r\n      newBoard.groups[groupIdx] = newGroup;\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating group', err)\r\n    }\r\n  }\r\n}\r\n\r\n// // backup to filter\r\nexport function onSetFilterBy(board, filterBy) {\r\n  return async dispatch => {\r\n    try {\r\n      const filteredBoard = await boardService.filter(board._id, filterBy)\r\n      dispatch({ type: 'FILTER_BY', filterBy })\r\n      dispatch({ type: 'SET_BOARD', board: filteredBoard })\r\n    } catch (err) {\r\n      console.log('error setting filter group', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function onAddNewGroup(board, groupTitle) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupToPush = {\r\n        id: makeId(),\r\n        title: groupTitle,\r\n        cards: [],\r\n        archivedAt: false,\r\n        style: {}\r\n      }\r\n      newBoard.groups.push(groupToPush)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard)\r\n    } catch (err) {\r\n      console.log('error adding new group', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updatePosition(newBoardPositioning) {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch({ type: 'SET_BOARD', board: newBoardPositioning })\r\n      let newBoard = JSON.parse(JSON.stringify(newBoardPositioning))\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updateBoard(board) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function setStyle(style) {\r\n  return async dispatch => {\r\n    dispatch({ type: 'SET_STYLE', style })\r\n  }\r\n}\r\n\r\nexport function onArchiveGroup(groupId, board) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.id === groupId)\r\n      newBoard.groups[groupIdx].archivedAt = Date.now()\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error archiving group', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function onArchiveAllCards(groupId, board) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.id === groupId)\r\n      const newCards = newBoard.groups[groupIdx].cards.map(card => {\r\n        const newCard = JSON.parse(JSON.stringify(card))\r\n        newCard.archivedAt = Date.now()\r\n        return newCard\r\n      });\r\n      newBoard.groups[groupIdx].cards = newCards\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error archiving cards', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function setNewGroupName(groupId, groupName, board) {\r\n  return async dispatch => {\r\n    try {\r\n      const groupIdx = board.groups.findIndex(group => group.id === groupId)\r\n      if (groupName === board.groups[groupIdx].title || !groupName.trim()) return\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const newGroupName = groupName.replace(/\\s+/g, \" \")\r\n      newBoard.groups[groupIdx].title = newGroupName.trim()\r\n      dispatch({\r\n        type: 'SET_BOARD',\r\n        board: newBoard\r\n      })\r\n      await boardService.updateBoard(newBoard)\r\n    } catch (err) {\r\n      console.log('error setting group name', err)\r\n    }\r\n  }\r\n}\r\n\r\n// finish\r\nexport function addNewBoard(boardName, boardColor = null) {\r\n  return async dispatch => {\r\n    const newBoard = await boardService.addNewBoard(boardName, boardColor)\r\n\r\n  }\r\n}\r\n\r\n// finish\r\nexport function addToMembers({ _id, fullName, imgUrl }, board) {\r\n  return async dispatch => {\r\n    const userToPush = {\r\n      _id,\r\n      fullName,\r\n      imgUrl\r\n    }\r\n\r\n    let newBoard = JSON.parse(JSON.stringify(board))\r\n    newBoard.members.unshift(userToPush)\r\n    dispatch({ type: 'SET_BOARD', board: newBoard })\r\n    await boardService.updateBoard(newBoard) // updating the DB\r\n\r\n    // update the backend as well after the dispatch\r\n\r\n  }\r\n}\r\n\r\n// finish\r\nexport function removeMember(id, board) {\r\n  return async dispatch => {\r\n\r\n    let newBoard = JSON.parse(JSON.stringify(board))\r\n    const memberIdx = newBoard.members.findIndex(member => member._id === id)\r\n    newBoard.members.splice(memberIdx, 1)\r\n    dispatch({ type: 'SET_BOARD', board: newBoard })\r\n    await boardService.updateBoard(newBoard) // updating the DB\r\n\r\n    // update the backend as well after the dispatch\r\n\r\n  }\r\n}\r\n\r\nexport function switchGroup() { }\r\n\r\n// =============================================\r\n\r\nfunction makeId(length = 8) {\r\n  let text = '';\r\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  for (let i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\n","import React from 'react'\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\r\n\r\nexport function CardPreviewDueDate(props) {\r\n    if (!props.dueDate) return <React.Fragment />\r\n    let daysRemaining = (props.dueDate - Date.now()) / 1000 / 60 / 60 / 24\r\n    \r\n    const date = new Date(props.dueDate)\r\n    \r\n    let month = date.toLocaleString(\"en-US\", { month: \"short\" })\r\n    let day = date.getDate()\r\n    \r\n    let parsedDate = `${month} ${day}`\r\n    if (Math.abs(daysRemaining) > 365) {\r\n        let year = date.getFullYear()\r\n        parsedDate += `, ${year}`\r\n    }\r\n    if (props.displayTime) {\r\n        let hour = date.toLocaleTimeString()\r\n        parsedDate += ` at ${hour}`\r\n     \r\n    }\r\n\r\n    let dueDateClass = 'card-preview-due-date-container card-preview-due-date-container-'\r\n    switch (true) {\r\n        case (daysRemaining > 7):\r\n            dueDateClass += 'long'\r\n            break\r\n        case (daysRemaining > 3):\r\n            dueDateClass += 'near'\r\n            break\r\n        case (daysRemaining >= 0):\r\n            dueDateClass += 'close'\r\n            break\r\n        default:\r\n            dueDateClass += 'overdue'\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={dueDateClass}>\r\n            <AccessTimeIcon fontSize=\"inherit\" />\r\n            {parsedDate}\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport { Button, Popover, TextField } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { DatePicker } from '@material-ui/pickers'\r\nimport { CardPreviewDueDate } from './CardPreviewDueDate';\r\nimport ScheduleIcon from '@material-ui/icons/Schedule';\r\n\r\nexport class CardDueDateSetter extends Component {\r\n\r\n    state = {\r\n        date: null,\r\n        isPopperOpen: false,\r\n        anchor: null\r\n    }\r\n    componentDidMount() {\r\n        this.anchor = React.createRef();\r\n        this.setState({ anchor: this.anchor })\r\n        this.setDefaultDate()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.dueDate !== this.props.dueDate) return this.setDefaultDate()\r\n    }\r\n\r\n    setDefaultDate = () => {\r\n        this.setState({ date: this.props.dueDate })\r\n    }\r\n    openModal = () => {\r\n        this.setState({ isPopperOpen: true })\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.setState({ isPopperOpen: false })\r\n    }\r\n\r\n    onSetDueDate = (ev) => {\r\n        const formDate = ev.target.value\r\n        const timestamp = new Date(formDate).getTime()\r\n        this.setState({ date: timestamp })\r\n    }\r\n\r\n    submitDueDate = () => {\r\n        this.props.onUpdateDueDate(this.state.date)\r\n    }\r\n\r\n    onRemoveDueDate = (ev) => {\r\n        this.setState({ date: null }, this.submitDueDate)\r\n        this.closeModal()\r\n    }\r\n\r\n    getDisplayDateBtn = () => {\r\n        if (!this.props.displayDate) return <Button className=\"set-due-date-btn\" onClick={this.openModal} ref={this.anchor}><ScheduleIcon /><span>Set Due Date</span></Button>\r\n\r\n        return (\r\n            <div onClick={this.openModal} ref={this.anchor} className=\"set-due-date-expanded\">\r\n                <CardPreviewDueDate dueDate={this.state.date} displayTime={this.props.displayTime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    parseDate = () => {\r\n        // 2020-09-26T04:52\r\n        let date = new Date(this.state.date)\r\n        if (!this.state.date) date = new Date(Date.now())\r\n        let year = date.getFullYear()\r\n        let month = (date.getMonth() + 1)\r\n        let day = date.getDate()\r\n        let hour = date.getHours()\r\n        let minute = date.getMinutes()\r\n        let timeArray = [year, month, day, hour, minute]\r\n        timeArray = timeArray.map(i => {\r\n            i = i.toString()\r\n            if (i.length === 1) i = `0${i}`\r\n            return i\r\n        })\r\n        const parsedDate = `${year}-${timeArray[1]}-${timeArray[2]}T${timeArray[3]}:${timeArray[4]}`\r\n        return parsedDate\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.anchor) return <React.Fragment />\r\n        return (\r\n            <div className=\"due-date-container\">\r\n                {this.getDisplayDateBtn()}\r\n                {(!this.state.anchor.current) ? <React.Fragment /> :\r\n                    <Popover\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'left',\r\n                        }}\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={this.state.isPopperOpen}\r\n                        anchorEl={this.state.anchor.current}\r\n                        onClose={this.closeModal}\r\n                        onBackdropClick={this.closeModal}\r\n                    >\r\n                        <form noValidate>\r\n                            <TextField\r\n                                onBlur={this.submitDueDate}\r\n                                onChange={this.onSetDueDate}\r\n                                id=\"datetime-local\"\r\n                                label=\"Set Due Date\"\r\n                                type=\"datetime-local\"\r\n                                value={this.parseDate()}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                            />\r\n                        </form>\r\n                        <div className=\"remove-date-btn-container\">\r\n                            <button className=\"cancel-btn\" onClick={this.onRemoveDueDate}>Remove Due Date</button>\r\n                        </div>\r\n                    </Popover>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\n\r\nexport class CardNewChecklist extends Component {\r\n\r\n    state = {\r\n        isEditing: false,\r\n        txtValue: ''\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n    onChange = (ev) => {\r\n        this.setState({ txtValue: ev.target.value })\r\n    }\r\n\r\n    onSubmit = async(ev) => {\r\n        console.log('onsubmit')\r\n        ev.preventDefault()\r\n        if (!this.state.txtValue) return this.setNotEditing()\r\n        const checklist = {\r\n                id: utils.makeId(),\r\n                \"title\": this.state.txtValue,\r\n                \"todos\": []             \r\n        }\r\n        // const activity =  this.props.addActivity(`added the checklist ${this.state.txtValue}`)\r\n        const activity = `added the checklist ${this.state.txtValue}`\r\n        this.props.onUpdate(checklist,activity)\r\n        this.setState({txtValue:''})\r\n        this.setNotEditing()\r\n    }\r\n    \r\n    \r\n    getNewChecklistDisplay = () => {\r\n        if (this.state.isEditing) return (\r\n            <form className=\"new-checklist-form\" onBlur={this.setNotEditing}  onSubmit={this.onSubmit} > \r\n                <input type=\"text\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                <button className=\"save-btn\" onMouseDown={this.onSubmit}>Save</button>\r\n            </form>\r\n        )\r\n        return (\r\n            <Button onClick={this.setEditing}><CheckBoxOutlinedIcon /><span>New Checklist</span></Button>\r\n        )\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.getNewChecklistDisplay()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { CardDueDateSetter } from \"./CardDueDateSetter\"\r\nimport React from 'react'\r\nimport { CardNewChecklist } from \"./CardNewChecklist\"\r\nimport { Button, CircularProgress } from \"@material-ui/core\"\r\nimport ArchiveOutlinedIcon from '@material-ui/icons/ArchiveOutlined';\r\n// import ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport LabelOutlinedIcon from '@material-ui/icons/LabelOutlined';\r\nimport PeopleAltOutlinedIcon from '@material-ui/icons/PeopleAltOutlined';\r\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined';\r\nimport WebAssetOutlinedIcon from '@material-ui/icons/WebAssetOutlined';\r\n\r\nexport function CardSidebar(props) {\r\n\r\n    return (\r\n        <div className=\"card-sidebar\">\r\n            {/* <Button><ArrowForwardIcon /><span>Move Card</span></Button> */}\r\n            <Button ref={props.anchorRef} onClick={props.toggleCoverSelector}><WebAssetOutlinedIcon /><span>Cover</span></Button>\r\n            <CardDueDateSetter dueDate={props.dueDate} onUpdateDueDate={props.onUpdateDueDate} />\r\n            <Button onClick={props.onArchiveCard}><ArchiveOutlinedIcon /> <span>Archive Card</span></Button>\r\n            <Button onClick={props.toggleLabelPallete}><LabelOutlinedIcon /><span>Labels</span></Button>\r\n            <Button ref={props.anchorRef} onClick={props.toggleDisplayMembers}><PeopleAltOutlinedIcon /><span>Members</span></Button>\r\n            {(props.isUploading) ? <Button disabled><CircularProgress size='14px' /></Button> : <Button onClick={props.toggleUploadDropzone}><ImageOutlinedIcon /> Upload Image</Button>}\r\n            <CardNewChecklist addActivity={props.addActivity} onUpdate={props.onUpdateChecklists} />\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport SubjectIcon from '@material-ui/icons/Subject';\r\n\r\nexport class CardDescription extends Component {\r\n\r\n    state = {\r\n        description: '',\r\n        isEditing: false\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.setDescriptionFromProps()\r\n    }\r\n\r\n    setDescriptionFromProps = () => {\r\n        let description = this.props.description\r\n        if (!description) description = ''\r\n        this.setState({ description })\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const description = ev.target.value\r\n        this.setState({ description })\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    onSave = () => {\r\n        this.props.onUpdateDesc(this.state.description)\r\n        this.setNotEditing()\r\n    }\r\n\r\n    getDescriptionTxt = () => {\r\n        if (!this.state.description) return 'Add a more detailed description…'\r\n        return this.state.description\r\n    }\r\n    getIsEditing = () => {\r\n        if (!this.state.isEditing) return (\r\n            <pre className=\"item-details-description-text-display\" onClick={this.setEditing}>{this.getDescriptionTxt()}</pre>\r\n        )\r\n        return (\r\n            <div className='item-details-description-text-edit-container'>\r\n                <textarea value={this.state.description} autoFocus onChange={this.onChange} onBlur={this.onSave} placeholder=\"Enter a more details description here...\" />\r\n                <button onClick={this.onSave} className=\"save-btn\">Save</button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // \r\n    render() {\r\n        // if (!this.state.isReady) return <div>Loading...</div>\r\n        return (\r\n            <div className=\"item-details-description\">\r\n                {/* <input value={this.state.description} onChange={this.onChange} placeholder=\"Enter a more details description here...\" /> */}\r\n                <SubjectIcon />\r\n                <div>\r\n                <h3>Description</h3>\r\n                {this.getIsEditing()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nexport class CardDetailsHeader extends Component {\r\n\r\n    state = {\r\n        txt: '',\r\n        isEditing: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const txt=this.props.headerTxt\r\n        this.setState({txt})\r\n    }\r\n\r\n    onChangeText = (ev) => {\r\n        const txt = ev.target.value\r\n        this.setState({txt})\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.txt) return\r\n        this.setNotEditing()\r\n        this.props.onUpdate(this.state.txt)\r\n        \r\n    }\r\n\r\n    setEditing = () => {\r\n        console.log('setEditing')\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    getIsEditing = () => {\r\n        if (this.state.isEditing) return (\r\n            <form onBlur={this.setNotEditing} onSubmit={this.onSubmit}>\r\n                <input name=\"header\" type=\"text\" autoFocus value={this.state.txt} onChange={this.onChangeText}/>\r\n            </form>\r\n        )\r\n        return <div onClick={this.setEditing}><h2>{this.state.txt}</h2></div>\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.getIsEditing()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\nexport function CardLabels(props) {\r\n    if (!props.cardLabels) return <React.Fragment />\r\n\r\n    function displayLabel(label) {\r\n        const boardLabel = props.boardLabels.find(boardLabel => boardLabel.id === label.id)\r\n        if (!props.preview) return (\r\n            <div className={`card-details-label ${boardLabel.color}`}>\r\n                <div className=\"card-details-mask\">\r\n                    {boardLabel.name}\r\n                </div>\r\n            </div>\r\n        )\r\n        if (props.isFull) return (\r\n            <div className={`card-preview-full-label ${boardLabel.color}`}>\r\n                <div>\r\n                    {boardLabel.name}\r\n                    </div>\r\n                <div className=\"card-preview-label-mask\" />\r\n                \r\n            </div>\r\n        )\r\n        return (\r\n            <div className={`card-preview-collapsed-label ${boardLabel.color}`}>\r\n                <div className=\"card-preview-label-mask\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"card-preview-labels\">\r\n            {props.cardLabels.map((label, idx) => {\r\n                return <div onClick={props.onClickLabel} key={idx} > {displayLabel(label)} </div>\r\n            })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport { Button, Checkbox } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\n\r\nexport class CardChecklistTodo extends Component {\r\n\r\n    state = {\r\n        isDone: false,\r\n        isEditing: false,\r\n        txtValue: '',\r\n        isNew: false\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    removeText = () => {\r\n        this.setState({txtValue:''})\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.title !== this.props.title || prevProps.isDone !== this.props.isDone) this.updateTodo()\r\n    }\r\n\r\n    componentDidMount() {\r\n        \r\n        if (this.props.isNew) this.setState({ isNew: true })\r\n        this.updateTodo()\r\n    }\r\n\r\n    getNewTodoDisplay = () => {\r\n        if (this.state.isEditing) {\r\n            return (\r\n            <form onBlur={this.setNotEditing} onSubmit={this.onSubmit}>\r\n                <input className=\"checkbox-text-edit\" type=\"text\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                <button className=\"save-btn\" type=\"submit\">Save</button>\r\n            </form>\r\n        )}\r\n        return (\r\n            <Button className=\"checklist-add-todo\" onClick={this.setEditing}>\r\n                Add an item\r\n            </Button>\r\n        )\r\n    }\r\n    \r\n    getTodoClassName = () => {\r\n        const doneClass = (this.state.isDone) ? 'todo-done' : 'todo-not-done'\r\n        return `checklist-todo-title ${doneClass}`\r\n    }\r\n    getTextBox = () => {\r\n        if (this.state.isEditing) return (\r\n            <React.Fragment>\r\n                <Checkbox checked={this.state.isDone} onChange={this.onCheck} />\r\n                <form onBlur={this.setNotEditing} onSubmit={this.onSubmit}>\r\n                    <input className=\"checkbox-text-edit\" type=\"text\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                    <button className=\"save-btn\" type=\"submit\">Save</button>\r\n                </form>\r\n            </React.Fragment>\r\n        )\r\n        return (\r\n            <React.Fragment>\r\n                <Checkbox checked={this.state.isDone} onChange={this.onCheck} />\r\n                <div className={this.getTodoClassName()} onClick={this.setEditing}>\r\n                    {this.state.txtValue}\r\n                    <Button onClick={this.onRemove}>\r\n                        <DeleteOutlineOutlinedIcon fontSize=\"inherit\" />\r\n                    </Button>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        \r\n        ev.preventDefault()\r\n        // this.setNotEditing()\r\n        this.updateChecklist()\r\n\r\n    }\r\n\r\n    updateTodo = () => {\r\n        \r\n        const todo = this.props.todo\r\n        if (!todo) return\r\n        const txtValue = todo.title\r\n        const isDone = todo.isDone\r\n\r\n        this.setState({ isDone, txtValue })\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        \r\n        this.setState({ txtValue: ev.target.value })\r\n    }\r\n\r\n    onCheck = (ev) => {\r\n        \r\n        // let txt = ''\r\n        let checkStatus = ev.target.checked\r\n        // if (checkStatus) {\r\n        //     txt = `completed ${this.state.txtValue}`\r\n        // } else {\r\n        //     txt = `marked ${this.state.txtValue} incomplete`\r\n        // }\r\n        \r\n        this.setState({ isDone: checkStatus}, () => {\r\n             this.updateChecklist()\r\n        })\r\n    }\r\n\r\n    getActivityTxt = () => {\r\n        let txt;\r\n        if (this.state.isDone) {\r\n            txt = `completed ${this.state.txtValue}`\r\n        } else {\r\n            txt = `marked ${this.state.txtValue} incomplete`\r\n        }\r\n        return txt\r\n    }\r\n    onRemove = (ev) => {\r\n        ev.stopPropagation()\r\n        this.setState({ txtValue: '' }, this.updateChecklist)\r\n    }\r\n\r\n    updateChecklist = () => {\r\n        \r\n            let id;\r\n            if (this.props.todo) {\r\n                id = this.props.todo.id\r\n            } else {\r\n                id = utils.makeId()\r\n            }\r\n            const todo = {\r\n                id,\r\n                isDone: this.state.isDone,\r\n                title: this.state.txtValue\r\n            }\r\n            \r\n            const activityTxt = this.getActivityTxt()\r\n            if (this.state.isNew) {\r\n                this.props.onUpdate(todo)\r\n                this.setState({txtValue:''})\r\n            } else {\r\n                this.props.onUpdate(todo,activityTxt)\r\n            }\r\n        }\r\n    \r\n\r\n    render() {\r\n        if (!this.props.displayCompleted && this.state.isDone) return <React.Fragment />\r\n        return (\r\n            <div className=\"checklist-todo\">\r\n\r\n                {(this.state.isNew) ? this.getNewTodoDisplay() : this.getTextBox()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, LinearProgress } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { CardChecklistTodo } from './CardChecklistTodo'\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\nexport class CardChecklist extends Component {\r\n\r\n    state = {\r\n        tasksCompleted: 0,\r\n        totalTasks: 0,\r\n        displayCompleted: true,\r\n        showDialog: false\r\n        \r\n    }\r\n\r\n    componentDidMount() {        \r\n        this.setTasksStatus()\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.checklist !== prevProps.checklist) this.setTasksStatus()\r\n    }\r\n\r\n\r\n    setTasksStatus = () => {\r\n        let tasksCompleted = 0\r\n        let totalTasks = 0\r\n\r\n        this.props.checklist.todos.forEach(todo => {\r\n            if (todo.isDone) tasksCompleted += 1\r\n            totalTasks += 1\r\n        });\r\n\r\n        this.setState({ tasksCompleted, totalTasks })\r\n    }\r\n\r\n    toggleDisplayCompleted = () => {\r\n        if (this.state.displayCompleted) return this.setState({ displayCompleted: false })\r\n        return this.setState({ displayCompleted: true })\r\n    }\r\n\r\n    getDisplayCheckedBtn = () => {\r\n        if (!this.state.tasksCompleted) return <React.Fragment />\r\n        let btnContent;\r\n        if (this.state.displayCompleted) {\r\n            btnContent = 'Hide Completed Items'\r\n        } else {\r\n            btnContent = `Show Checked Items (${this.state.tasksCompleted})`\r\n        }\r\n\r\n        return (\r\n            <Button onClick={this.toggleDisplayCompleted}>{btnContent}</Button>\r\n        )\r\n    }\r\n\r\n    onRemoveChecklist = async() => {\r\n        const checklist = {...this.props.checklist}\r\n        checklist.title = ''\r\n        let activityTxt= `removed ${this.props.checklist.title}`\r\n        this.props.onUpdate(checklist,activityTxt)\r\n        this.closeDialog()\r\n\r\n    }\r\n\r\n\r\n    openDialog = () => {\r\n        this.setState({ showDialog: true })\r\n    }\r\n\r\n    closeDialog = () => {\r\n        this.setState({ showDialog: false })\r\n    }\r\n\r\n    getPercentCompleted = () => {\r\n        const percent = Math.round((this.state.tasksCompleted / this.state.totalTasks) * 100)\r\n        return percent\r\n    }\r\n\r\n    onUpdateChecklist = (newTodo,activityTxt) => {\r\n        // take the updated todo and insert it into the list\r\n        let todos = [...this.props.checklist.todos]\r\n        // find the todo index\r\n        const todoIdx = todos.findIndex(todo => todo.id === newTodo.id)\r\n        // if new title is blank - remove todo\r\n        if (!newTodo.title) {\r\n            todos.splice(todoIdx,1)\r\n        } else if (todoIdx <0) { //if the index is less than 0 - this is a new item\r\n            todos.push(newTodo)\r\n        } else {\r\n            todos[todoIdx] =  newTodo\r\n        }\r\n        const checklist = {...this.props.checklist}\r\n        checklist.todos = todos\r\n        this.props.onUpdate(checklist,activityTxt)\r\n    }\r\n\r\n    render() {\r\n        // if (!this.state.totalTasks) return <React.Fragment />\r\n        return (\r\n            <div className=\"checklist\">\r\n                <div className=\"checklist-title-container\">\r\n                    <CheckBoxOutlinedIcon />\r\n                    <div className=\"checklist-title\">{this.props.checklist.title}</div>\r\n                    <div className=\"checklist-title-btns\">\r\n                    {this.getDisplayCheckedBtn()}\r\n                    <Button onClick={this.openDialog}>Remove</Button>\r\n                    </div>\r\n                </div>\r\n                {((this.state.totalTasks) ? (\r\n                    <div className=\"checklist-progress\">\r\n                    <div className=\"checklist-progress-numbers\">%{this.getPercentCompleted()}</div>\r\n                    <LinearProgress value={this.getPercentCompleted()} variant=\"determinate\" /> \r\n                    </div>\r\n                    ) : <React.Fragment />)\r\n                }\r\n                <main className=\"checklist-main\">\r\n                    {this.props.checklist.todos.map(todo => <CardChecklistTodo key={todo.id} displayCompleted={this.state.displayCompleted} todo={todo} onUpdate={this.onUpdateChecklist}/>)}\r\n                    <CardChecklistTodo isNew={true} onUpdate={this.onUpdateChecklist}/>\r\n                </main>\r\n                <Dialog onClose={this.closeDialog} open={this.state.showDialog}>\r\n                    <DialogTitle id=\"alert-dialog-title\">{\"Remove this checklist?\"}</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id=\"alert-dialog-description\">\r\n                            Deleting a checklist is permanent and there is no way to get it back.\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.closeDialog} color=\"primary\">\r\n                            Disagree\r\n                        </Button>\r\n                        <Button onClick={this.onRemoveChecklist} color=\"primary\" autoFocus>\r\n                            Agree\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { CardChecklist } from './CardChecklist'\r\n\r\n\r\nexport function CardChecklistList(props) {\r\n    if (!props.checklists || !props.checklists.length) return <React.Fragment />\r\n    return (\r\n        <div className=\"checklists-container\">\r\n           {props.checklists.map(checklist => <CardChecklist key={checklist.id} checklist={checklist} addActivity={props.addActivity} onUpdate={props.onUpdate}/>)} \r\n            {/* <CardChecklistTodo  */}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport * as timeago from 'timeago.js';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\n\r\nexport function ActivityLog({ boardId, displayMode, activities }) {\r\n    if (!activities) return <div>Loading...</div>;\r\n    if (activities && activities.length > 15) activities = activities.slice(0, 14);\r\n    return (\r\n        <ul className=\"activity-log\">\r\n            {activities.map(activity => {\r\n                return <li key={activity.id}>\r\n                    <MemberPreview name={activity.byMember.fullName} />\r\n                    <pre>\r\n                        <div>\r\n                            <Link to={`/board/${boardId}`}>{activity.byMember.fullName + ' '}</Link>\r\n                            <span>{activity.commentTxt ? 'commented:' : activity.txt + ' '}</span>\r\n                            {activity.commentTxt && <div className=\"comment-txt\">\r\n                                {activity.commentTxt}\r\n                            </div>}\r\n                            {displayMode !== 'card' && <span>\r\n                                {'in '}\r\n                                <Link to={`/board/${boardId}/${activity.card.id}/`}>\r\n                                    {activity.card.title}\r\n                                </Link>\r\n                            </span>}\r\n                        </div>\r\n                        <span className=\"time-ago\">{timeago.format(activity.createdAt)}</span>\r\n                    </pre>\r\n                </li>\r\n            })}\r\n        </ul>\r\n    )\r\n}\r\n","import { Accordion, AccordionDetails, AccordionSummary, Button } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\n\r\n\r\nexport class CardAddComment extends Component {\r\n\r\n    state = {\r\n        isEditing: false,\r\n        txtValue: ''\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n    onChange = (ev) => {\r\n        this.setState({ txtValue: ev.target.value })\r\n    }\r\n\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (this.state.txtValue) {\r\n            this.props.onAddComment(this.state.txtValue)\r\n            this.setNotEditing()\r\n            this.setState({txtValue:''})\r\n        }\r\n    }\r\n\r\n    onBlur = () => {\r\n        if (!this.state.txtValue) return this.setNotEditing()\r\n        \r\n    }\r\n\r\n    onSave = (ev) => {\r\n        this.setNotEditing()\r\n        this.onSubmit(ev)\r\n    }\r\n\r\n    getNewCommentDisplay = () => {\r\n        if (this.state.isEditing) return (\r\n            <div className=\"add-comment-editing-container\">\r\n                <form onBlur={this.onBlur} onSubmit={this.onSubmit}>\r\n                    <input className=\"add-comment-input\" type=\"text\" placeholer=\"Write a comment...\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                </form>\r\n            </div>\r\n        )\r\n        return (\r\n            <div className=\"add-comment-editing-closed\">Write a comment...</div>\r\n        )\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"editing-section-container\" >\r\n            <Accordion expanded={this.state.isEditing} onClick={this.setEditing}  classes={{expanded:'editing-container-expanded', root:'editing-container-collapsed'}}>\r\n                <AccordionSummary\r\n                          aria-controls=\"panel1a-content\"\r\n                          id=\"panel1a-header\"\r\n                        >\r\n                {this.getNewCommentDisplay()}\r\n                </AccordionSummary>\r\n                <AccordionDetails>\r\n          <div>\r\n          <button className=\"save-btn\" disabled={!this.state.txtValue.length} onClick={this.onSave}>Save</button>\r\n          </div>\r\n        </AccordionDetails>\r\n            </Accordion>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport { IconButton } from '@material-ui/core';\r\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\r\n\r\nexport function LabelEditModal({ label, action, setLabelEditId, onRemoveLabel, card }) {\r\n    const colors = ['green', 'yellow', 'orange', 'red', 'purple', 'blue', 'grey', 'black'];\r\n    return (\r\n        <div className=\"label-edit-modal\">\r\n            <IconButton className=\"close-modal\" size=\"small\"\r\n                onClick={() => setLabelEditId()}>\r\n                <CloseOutlinedIcon />\r\n            </IconButton>\r\n            <form onSubmit={(ev) => action(ev, label)}>\r\n                <input type=\"text\" name=\"labelName\"\r\n                    defaultValue={label ? label.name : ''}\r\n                    placeholder=\"Enter label's name...\" />\r\n                <div className=\"color-pallete\">\r\n                    {colors.map(color => <React.Fragment key={color}>\r\n                        <input required hidden type=\"radio\" id={color} name=\"newColor\"\r\n                            value={color}\r\n                            defaultChecked={label ? color === label.color : 'grey'} />\r\n                        <label htmlFor={color}>\r\n                            <div className={`color-picker ${color}`}></div>\r\n                        </label>\r\n                    </React.Fragment>)}\r\n                </div>\r\n                <div className=\"save-cancel-btns\">\r\n                    <button className=\"save-btn\">Save</button>\r\n                    {label && <button className=\"cancel-btn\" onClick={() => onRemoveLabel(label.id)}>Delete</button>}\r\n                </div>\r\n            </form>\r\n        </div >\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { IconButton } from '@material-ui/core';\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { addLabel, updateLabel, removeLabel, updateCard } from '../../store/actions/boardActions.js';\r\nimport { LabelEditModal } from './LabelEditModal.jsx';\r\n\r\n\r\nclass _LabelPalette extends Component {\r\n    state = {\r\n        labelEditId: null\r\n    }\r\n    setLabelEditId = (labelEditId = null) => {\r\n        this.setState({ labelEditId });\r\n    }\r\n    onAddLabel = (ev) => {\r\n        ev.preventDefault();\r\n        const newLabel = {\r\n            name: ev.target.labelName.value,\r\n            color: ev.target.newColor.value\r\n        }\r\n        this.props.addLabel(this.props.board, newLabel);\r\n        this.setLabelEditId();\r\n    }\r\n    onEditLabel = (ev, label) => {\r\n        ev.preventDefault();\r\n        const labelName = ev.target.labelName.value;\r\n        const labelColor = ev.target.newColor.value;\r\n        const updatedLabel = { ...label, name: labelName, color: labelColor }\r\n        this.props.updateLabel(this.props.board, updatedLabel);\r\n        this.setLabelEditId();\r\n    }\r\n    onRemoveLabel = (labelId) => {\r\n        this.props.removeLabel(this.props.board, labelId);\r\n        this.setLabelEditId();\r\n    }\r\n    onToggleLabelToCard = (card, labelId) => {\r\n        // console.log('card\\'s labels before:', card.labels);\r\n        const labelIdx = card.labels.findIndex(label => label.id === labelId);\r\n        card.labels = (labelIdx === -1)\r\n        ? [...card.labels, { id: labelId }]\r\n        : [...card.labels.slice(0, labelIdx), ...card.labels.slice(labelIdx + 1)];\r\n        // console.log('card\\'s labels after:', card.labels);\r\n        \r\n        const activity = this.props.createActivity('updated a label')\r\n        this.props.updateCard(this.props.board, card, activity);\r\n    }\r\n    render() {\r\n        const { board, card } = this.props;\r\n        return (\r\n            board.labels\r\n                ? <ul className=\"label-palette\">\r\n                    {board.labels.map(label => <li key={label.id} className=\"label\">\r\n                        <div className={`label-color ${label.color}`}\r\n                            onClick={card\r\n                                ? () => this.onToggleLabelToCard(card, label.id)\r\n                                : () => this.setLabelEditId(\r\n                                    this.state.labelEditId === label.id\r\n                                        ? null\r\n                                        : label.id\r\n                                )}>\r\n                            <span className=\"label-text\">{label.name}</span>\r\n                            {card && card.labels.find(cardLabel => cardLabel.id === label.id) && <CheckIcon fontSize=\"small\" />}\r\n                        </div>\r\n                        <IconButton className=\"edit-label-btn\" onClick={() => this.setLabelEditId(\r\n                            this.state.labelEditId === label.id\r\n                                ? null\r\n                                : label.id\r\n                        )}>\r\n                            <EditOutlinedIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                        {!card && <IconButton className=\"remove-label-btn\" onClick={() => this.onRemoveLabel(label.id)}>\r\n                            <DeleteOutlinedIcon fontSize=\"small\" />\r\n                        </IconButton>}\r\n                        {this.state.labelEditId === label.id && <LabelEditModal\r\n                            label={label}\r\n                            action={this.onEditLabel}\r\n                            onRemoveLabel={this.onRemoveLabel}\r\n                            setLabelEditId={this.setLabelEditId} />}\r\n                    </li>)}\r\n                    <li className=\"label add-label\">\r\n                        <div className=\"label-color add-label\"\r\n                            onClick={() => this.setLabelEditId(\r\n                                this.state.labelEditId === 'addLabel'\r\n                                    ? null\r\n                                    : 'addLabel'\r\n                            )}>\r\n                            Create a new label\r\n                        </div>\r\n                        {this.state.labelEditId === 'addLabel' && <LabelEditModal\r\n                            action={this.onAddLabel}\r\n                            setLabelEditId={this.setLabelEditId} />}\r\n                    </li>\r\n                </ul>\r\n                : <div>Loading...</div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    addLabel,\r\n    updateLabel,\r\n    removeLabel,\r\n    updateCard\r\n};\r\nexport const LabelPalette = connect(mapStateToProps, mapDispatchToProps)(_LabelPalette);\r\n","import { Avatar } from '@material-ui/core'\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport React from 'react'\r\n\r\nexport function CardMember(props) {\r\n\r\n    const splitName = props.boardMember.fullName.split(' ')\r\n    const initials = splitName.map(name => name[0])\r\n\r\n    let isUserChecked;\r\n    if (!props.cardMembers || !props.cardMembers.length ) {\r\n        isUserChecked = false\r\n    }   else {\r\n        isUserChecked = Boolean(props.cardMembers.find(member => member._id === props.boardMember._id))\r\n    }\r\n    \r\n    return (\r\n        <div onClick={() => {props.toggleMember(props.boardMember,!isUserChecked)}} className=\"board-member\">\r\n            <Avatar>{initials}</Avatar>\r\n            <div>{props.boardMember.fullName}</div>\r\n            {(isUserChecked) ? <CheckIcon /> : <div style={{width:'24px'}}/>}\r\n        </div>\r\n    )\r\n}\r\n","import { CircularProgress, Popover } from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport React, { Component } from 'react'\r\nimport { CardMember } from './CardMember';\r\n\r\nexport class CardMembersList extends Component {\r\n\r\n    state = {\r\n        boardMembers: [],\r\n        filter: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.filterBoardMembers()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.boardMembers !== this.props.boardMembers || prevProps.card.members !== this.props.card.members || prevState.filter !== this.state.filter) this.filterBoardMembers()\r\n    }\r\n\r\n    filterBoardMembers = () => {\r\n        const filteredMembers = this.props.boardMembers.filter(member => member.fullName.toLowerCase().includes(this.state.filter.toLowerCase()))\r\n\r\n        this.setState({ boardMembers: filteredMembers })\r\n    }\r\n\r\n    onChange =(ev) => {\r\n        this.setState({filter:ev.target.value})\r\n    }\r\n\r\n    onSelectBoardMember = (member,shouldAdd) => {\r\n        let txt = ''\r\n        console.log(member,shouldAdd)\r\n        const card = {...this.props.card}\r\n        if (shouldAdd) {\r\n            card.members.push(member)\r\n            txt = `added ${member.fullName}`\r\n        } else {\r\n            card.members = card.members.filter(cardMember => cardMember._id !== member._id)\r\n            txt = `removed ${member.fullName}`\r\n        }\r\n        this.props.updateCardMembers(card,txt)\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.boardMembers) return <CircularProgress />\r\n        return (\r\n            <div>\r\n                <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'center',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'right',\r\n                    }}\r\n                    open={true}\r\n                    anchorEl={this.props.anchorEl.current}\r\n                    onClose={this.props.toggleList}\r\n                    onBackdropClick={this.props.toggleList}\r\n                >\r\n                    <div className=\"card-members-list\">\r\n                        <div className=\"card-members-list-header\">\r\n                            <div>Members</div>\r\n                            <CloseIcon onClick={this.props.toggleList} />\r\n                        </div>\r\n                        \r\n                        <input type=\"text\" value={this.state.filter} onChange={this.onChange} className=\"filter\" />\r\n                        <div className=\"board-members\">\r\n                            <h5>Board Members</h5>\r\n                            {this.state.boardMembers.map(member => {\r\n                                return <CardMember key={member._id} boardMember={member} cardMembers={this.props.card.members} toggleMember={this.onSelectBoardMember}/>\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </Popover>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","export const cloudService = {\r\n    uploadImg\r\n}\r\nasync function uploadImg(file) {\r\n    \r\n    const CLOUD_NAME = \"dyslqd6pn\"\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n    const formData = new FormData();\r\n    // const file = ev.target.files[0]\r\n    console.log(file)\r\n    formData.append('file', file)\r\n    formData.append('upload_preset', 'ld9rlgmy');\r\n    try {\r\n        const res = await fetch(UPLOAD_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        const data = await res.json()\r\n        return data.secure_url\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { cloudService } from '../../services/cloudService'\r\nimport {DropzoneDialog} from 'material-ui-dropzone'\r\n\r\nexport class CardImgUpload extends Component {\r\n\r\n    state = {\r\n        item: null\r\n    }\r\n\r\n    uploadImg = async (file) => {\r\n        console.log(file)\r\n        await this.props.setUploading()\r\n        const imgUrl = await cloudService.uploadImg(file)\r\n        this.setState({item:imgUrl},this.submitImage)\r\n\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevState.item !== this.state.item) {\r\n            // this.submitImage()\r\n            // console.log(this.state.item)\r\n        }\r\n    }\r\n\r\n    setFormValues = (newItem) => {\r\n        // newItem.src = this.state.item.src\r\n        // console.log(newItem)\r\n        // newItem._id = this.state.item._id\r\n        // newItem.createdAt = this.state.item.createdAt\r\n        // this.setState({ item: newItem }, this.onSubmit)\r\n        \r\n    }\r\n\r\n    submitImage = async() => {\r\n        // if no item - do nothing\r\n        if (!this.state.item) return\r\n        // else - wait for the image to be added to the array\r\n        await this.props.onAddImage(this.state.item)\r\n        // set the state back to null\r\n        this.setState({item:null})\r\n    }\r\n    handleChange(files){\r\n        console.log(files)\r\n        this.uploadImg(files[0])\r\n      }\r\n    render(){\r\n        return (\r\n            <DropzoneDialog\r\n            acceptedFiles={['image/*']}\r\n            cancelButtonText={\"cancel\"}\r\n            submitButtonText={\"submit\"}\r\n            maxFileSize={500000}\r\n            open={this.props.isOpen}\r\n            onClose={() => this.props.toggleOpen()}\r\n            onSave={(files) => {\r\n              console.log('Files:', files);\r\n              this.handleChange(files)\r\n              this.props.toggleOpen();\r\n            }}\r\n            showPreviews={true}\r\n            showFileNamesInPreview={false}\r\n          />\r\n        )\r\n      }\r\n\r\n    // render() {\r\n    //     if (!this.state.item) return (\r\n            \r\n    //             <div className=\"file-upload-form\">\r\n    //                 <form>\r\n    //                     <input type=\"file\" id=\"myFile\" name=\"filename\" placeholder=\"Upload Image\" onChange={this.uploadImg} />\r\n                        \r\n    //                 </form>\r\n    //             </div>\r\n            \r\n    //     )\r\n    //     return (<div className=\"file-upload-form \"><button disabled>Upload Image</button></div>)\r\n    // }\r\n}\r\n","import React, { Component } from 'react'\r\nimport * as timeago from 'timeago.js';\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\nimport {  IconButton } from '@material-ui/core';\r\n\r\nexport class CardDetailsAttachment extends Component {\r\n    state = {\r\n        isEditing: false,\r\n        att: null,\r\n        title: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(this)\r\n        this.updateAttFromProps()\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.attachment !== prevProps.attachment) {\r\n            this.updateAttFromProps()\r\n        }\r\n        if (this.state.att !== prevState.att) {\r\n            console.log(this.state.att)\r\n        }\r\n    }\r\n    \r\n    updateAttFromProps = () => {\r\n        const att = {...this.props.attachment}\r\n        const title = this.props.attachment.title \r\n        console.log(att,title)\r\n        this.setState({ att, title })\r\n    }\r\n\r\n    setEditing = (bool) => {\r\n        if (bool) return this.setState({isEditing:true})\r\n        return this.setState({isEditing:false})\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        this.setState({title:ev.target.value})\r\n    }\r\n\r\n    onRemove = (ev) => {\r\n        // if the update function receives a blank title - it removes the item\r\n        this.setState({title:''},() => {\r\n            this.updateCard().then(() => {\r\n                this.setState({att:null})\r\n            })\r\n        }\r\n            )\r\n\r\n    }\r\n\r\n    onSubmit = (ev) =>{\r\n        ev.preventDefault()\r\n        this.updateCard()\r\n    }\r\n\r\n    updateCard = () => {\r\n        return new Promise(resolve => {\r\n\r\n            const att = {...this.state.att}\r\n            att.title = this.state.title\r\n            // console.log()\r\n            this.props.onUpdate(att)\r\n            this.setEditing(false)\r\n            resolve()\r\n        })\r\n        \r\n    }\r\n\r\n    render() {\r\n        \r\n        const att = this.state.att\r\n        if (!att) return <React.Fragment />\r\n        return (\r\n            <div className=\"card-attachment\">\r\n                <div className=\"att-image\" style={{ backgroundImage: `url(${att.src})` }} />\r\n                <div className=\"att-details-container\">\r\n                    <div className=\"att-title\">\r\n                        {(this.state.isEditing) ? \r\n                        <form onSubmit={this.onSubmit} onBlur={() => {this.setEditing(false)}}><input autoFocus onChange={this.onChange} type=\"text\" value={this.state.title} required /></form> \r\n                        :<h5 onClick={() => {this.setEditing(true)}}>{this.state.title}</h5> }\r\n                    </div>\r\n                    <div className=\"att-date-added\">\r\n                        {timeago.format(att.createdAt)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"att-remove\">\r\n                    <IconButton onClick={this.onRemove}>\r\n                        <DeleteOutlineOutlinedIcon />\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { CardDetailsAttachment } from './CardDetailsAttachment'\r\n\r\nexport function CardImagesList(props) {\r\n    // console.log(props)\r\n    \r\n    if (!props.attachments) return <React.Fragment />\r\n    return (\r\n        <div className=\"card-attachments-container\">\r\n            {props.attachments.map(att => <CardDetailsAttachment key={att.id} onUpdate={props.onUpdate} attachment={att} />)}\r\n        </div>\r\n    )\r\n}\r\n","import { Popover } from '@material-ui/core'\r\nimport { CloseOutlined } from '@material-ui/icons'\r\nimport React, { Component } from 'react'\r\n\r\n\r\nexport class CoverSelector extends Component {\r\n\r\n    state = {\r\n        cover: null\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        \r\n        this.setCoverFromProps()\r\n    }\r\n\r\n    setCoverFromProps = () => {\r\n        let cover = this.props.card.cover\r\n        if (!cover) cover = { id: null, value: null }\r\n        this.setState({ cover })\r\n\r\n    }\r\n    colors = [\r\n        { id: 101, value: '#f9f9f9' },\r\n        { id: 102, value: '#F2D600' },\r\n        { id: 103, value: '#FF9F1A' },\r\n        { id: 104, value: '#f9f9f9' },\r\n        { id: 105, value: '#EB5A46' },\r\n        { id: 106, value: '#C377E0' },\r\n        { id: 107, value: '#028ad8' },\r\n        { id: 108, value: '#a7a7a7' }\r\n    ]\r\n\r\n    onSelectCover = async(value) => {\r\n        \r\n        let cover={\r\n            id : value.id,\r\n            color : value.value,\r\n            src : value.src\r\n        }\r\n        this.setState({cover},\r\n            this.props.onUpdate(cover))\r\n    }\r\n\r\n    onRemoveCover = () => {\r\n        this.setState({cover:null}, () => {\r\n            console.log(this.state.cover)\r\n            this.props.onUpdate(this.state.cover)\r\n        })\r\n    }\r\n\r\n    getImageEls = () => {\r\n        const att = this.props.card.attachments\r\n        \r\n        if (!att) return <React.Fragment />\r\n        const imageEls = att.map(el => {\r\n            let txt = \"single-image-choice\"\r\n            if (this.state.cover.id === el.id) {\r\n                txt += ' selected'\r\n            }\r\n            return <div key={el.id} className={txt} onClick={() => this.onSelectCover(el)} style={{ backgroundImage: `url(${el.src})` }}></div>\r\n        })\r\n        \r\n        return <React.Fragment><h6>Images</h6><div className=\"image-choice\">{imageEls}</div></React.Fragment>\r\n    }\r\n\r\n    getColorEls = () => {\r\n        const colorEls = this.colors.map(el => {\r\n            let txt = \"color-choice\"\r\n            if (this.state.cover.id === el.id) {\r\n                txt += ' selected'\r\n            }\r\n\r\n            return <div key={el.id} className={txt} onClick={() => this.onSelectCover(el)} style={{ backgroundColor: el.value }}></div>\r\n        })\r\n        return colorEls\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.cover) return <React.Fragment />\r\n        return (\r\n            <Popover\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                open={true}\r\n                anchorEl={this.props.anchorEl.current}\r\n                onClose={this.props.toggleList}\r\n                onBackdropClick={this.props.toggleList}\r\n            >\r\n                <div className=\"cover-selector-container\">\r\n                    <div className=\"cover-selector-header\">\r\n                        <h5>Cover</h5>\r\n                        <CloseOutlined onClick={this.props.toggleList} />\r\n                    </div>\r\n                    <div className=\"cover-selector-colors\">\r\n                        <h6>Colors</h6>\r\n                        <div className=\"color-selection\">\r\n                            {this.getColorEls()}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"cover-selector-images\">\r\n                        {this.getImageEls()}\r\n                    </div>\r\n                    <div className=\"cover-remove-container\">\r\n                        <button className=\"cancel-btn\" onClick={this.onRemoveCover}>Remove Container</button>\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n\r\n        )\r\n    }\r\n}\r\n","import { Avatar, Button, CircularProgress, IconButton, Popover } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { updateCard, loadBoard, switchGroup, addActivity } from '../../store/actions/boardActions';\r\nimport { CardSidebar } from './CardSidebar';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { CardDescription } from './CardDescription';\r\nimport { CardDetailsHeader } from './CardDetailsHeader';\r\nimport { CardLabels } from './CardLabels';\r\nimport { CardDueDateSetter } from './CardDueDateSetter';\r\nimport { CardChecklistList } from './CardChecklistList';\r\nimport { ActivityLog } from '../Sidebar/ActivityLog';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport { CardAddComment } from './CardAddComment';\r\nimport { boardService } from '../../services/boardService';\r\nimport { LabelPalette } from '../Sidebar/LabelPalette';\r\nimport { CardMembersList } from './CardMembersList';\r\nimport { CardImgUpload } from './CardImgUpload';\r\nimport { cardService } from '../../services/cardService/cardService';\r\nimport { CardImagesList } from './CardImagesList';\r\nimport { CoverSelector } from './CoverSelector';\r\n\r\nclass _CardDetails extends Component {\r\n\r\n    state = {\r\n        groupId: null,\r\n        groupName: '',\r\n        card: null,\r\n        commentsOnly: false,\r\n        isLabelPaletteShowing: false,\r\n        isCardMemeberShown: false,\r\n        isUploadZoneOpen: false,\r\n        isUploading: false,\r\n        isCoverSelectorShown: false\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.cardId !== this.props.cardId) {\r\n            this.getCardDetails()\r\n        }\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n    componentDidMount() {\r\n\r\n        if (!this.props.board || Object.keys(!this.props.board)) {\r\n\r\n            this.props.loadBoard(this.props.boardId).then(() => {\r\n                return this.getCardDetails()\r\n            })\r\n        }\r\n        // this.getCardDetails()\r\n    }\r\n\r\n\r\n    getCardDetails = () => {\r\n\r\n        this.props.board.groups.forEach(group => {\r\n            group.cards.forEach(card => {\r\n                if (card.id === this.props.cardId) {\r\n                    const groupId = group.id\r\n                    const groupName = group.title\r\n                    this.setState({ groupId, groupName, card })\r\n                    return\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    onCloseCard = () => {\r\n        // const url = window.location.href\r\n        // const regex = /\\/board\\/.+\\//i\r\n        // const targetUrl = url.match(regex)[0]\r\n        this.props.history.push(`/board/${this.props.boardId}`)\r\n    }\r\n\r\n    toggleCommentsOnly = () => {\r\n        if (this.state.commentsOnly) return this.setState({ commentsOnly: false })\r\n        return this.setState({ commentsOnly: true })\r\n    }\r\n    toggleLabelPalette = () => {\r\n        this.setState({ isLabelPaletteShowing: !this.state.isLabelPaletteShowing })\r\n    }\r\n    toggleDisplayMembers = () => {\r\n        if (this.state.isCardMemeberShown) return this.setState({ isCardMemeberShown: false })\r\n        return this.setState({ isCardMemeberShown: true })\r\n    }\r\n    toggleUploadDropzone = () => {\r\n        if (this.state.isUploadZoneOpen) return this.setState({ isUploadZoneOpen: false })\r\n        return this.setState({ isUploadZoneOpen: true })\r\n    }\r\n    toggleCoverSelector = () => {\r\n        if (this.state.isCoverSelectorShown) return this.setState({ isCoverSelectorShown: false })\r\n        return this.setState({ isCoverSelectorShown: true })\r\n    }\r\n    getLabels = () => {\r\n        const labels = this.state.card.labels\r\n        if (labels && labels.length) return (\r\n            <div className=\"card-details-label-container\">\r\n                <h5>Labels</h5>\r\n                <CardLabels onClickLabel={this.openEditLabelsModal}\r\n                    cardLabels={labels}\r\n                    boardLabels={this.props.board.labels}\r\n                    preview={false}\r\n                />\r\n            </div>\r\n        )\r\n        return <React.Fragment />\r\n    }\r\n\r\n    createActivity = (txt) => {\r\n        const activity = {\r\n            \"txt\": txt,\r\n            \"commentTxt\": '',\r\n            \"card\": {\r\n                \"id\": this.state.card.id,\r\n                \"title\": this.state.card.title\r\n            }\r\n        }\r\n\r\n        return boardService.createActivity(activity)\r\n    }\r\n\r\n    onArchiveCard = async () => {\r\n        let card = { ...this.state.card }\r\n        card.archivedAt = Date.now()\r\n        const activity = this.createActivity('archived')\r\n        await this.submitCard(card, activity)\r\n        this.onCloseCard()\r\n    }\r\n\r\n    onUpdateDueDate = async (dueDate) => {\r\n        let card = { ...this.state.card }\r\n        card.dueDate = dueDate\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated due date')\r\n            await this.submitCard(card, activity)\r\n\r\n        })\r\n    }\r\n\r\n    onAddComment = (txt) => {\r\n        const activity = {\r\n            \"txt\": \"\",\r\n            \"commentTxt\": txt,\r\n            \"card\": {\r\n                \"id\": this.state.card.id,\r\n                \"title\": this.state.card.title\r\n            }\r\n        }\r\n        const newActivity = boardService.createActivity(activity)\r\n        this.props.addActivity(this.props.board, newActivity)\r\n\r\n    }\r\n\r\n    onUpdateHeader = async (txt) => {\r\n        let card = { ...this.state.card }\r\n        card.title = txt\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated the title')\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n    getCardDetailsMembers = () => {\r\n        const cardMembers = this.state.card.members\r\n        if (!cardMembers || !cardMembers.length) return <React.Fragment />\r\n\r\n        const cardMembersEl = cardMembers.map((member, idx) => {\r\n            const splitName = member.fullName.split(' ')\r\n            const initials = splitName.map(name => name[0])\r\n            return <div key={100 + idx} className=\"card-details-member\"><Avatar>{initials}</Avatar></div>\r\n        })\r\n        return <div className=\"card-details-members\"><h5>Members</h5><div>{cardMembersEl}</div></div>\r\n    }\r\n\r\n\r\n    submitCard = (card, activity) => {\r\n\r\n        return new Promise(resolve => {\r\n            this.props.updateCard(this.props.board, card, activity).then(() => resolve())\r\n\r\n        })\r\n    }\r\n\r\n    onUpdateCardMembers = async (card, txt) => {\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity(txt)\r\n            await this.submitCard(card, activity)\r\n        })\r\n    }\r\n\r\n    onUpdateCover = (cover) => {\r\n        const card = { ...this.state.card }\r\n        card.cover = cover\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated the cover')\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n    onUpdateDesc = async (description) => {\r\n        const card = { ...this.state.card }\r\n        card.description = description\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated the description')\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n\r\n    setUploading = () => {\r\n        return new Promise(resolve => {\r\n            this.setState({ isUploading: true }, resolve(true))\r\n        })\r\n    }\r\n\r\n    onAddImage = (imgRef) => {\r\n        const newImg = cardService.createImage(imgRef)\r\n        const card = { ...this.state.card }\r\n        if (!card.attachments) card.attachments = []\r\n        card.attachments.push(newImg)\r\n        const activity = this.createActivity('added an image')\r\n        this.setState({ card }, async () => {\r\n            await this.submitCard(card, activity)\r\n            this.setState({ isUploading: false })\r\n        })\r\n\r\n    }\r\n\r\n    onUpdateAttachments = async (newAttachment) => {\r\n        const card = { ...this.state.card }\r\n        const idx = card.attachments.findIndex(att => att.id === newAttachment.id)\r\n\r\n        if (!newAttachment.title.length) {\r\n\r\n            card.attachments.splice(idx, 1)\r\n        } else {\r\n            card.attachments[idx] = newAttachment\r\n        }\r\n\r\n        const activity = (newAttachment.title.length) ? this.createActivity('edited the title of an image') : this.createActivity('removed an image')\r\n\r\n        this.setState({ card }, () => {\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n\r\n\r\n    onUpdateChecklists = (newChecklist, activityTxt) => {\r\n\r\n        const card = { ...this.state.card }\r\n        if (!card.checklists) card.checklists = []\r\n        // updating\r\n        const checklistIdx = card.checklists.findIndex(checklist => checklist.id === newChecklist.id)\r\n        if (checklistIdx >= 0) {\r\n            card.checklists = card.checklists.map(checklist => {\r\n                if (checklist.id === newChecklist.id) return newChecklist\r\n                return checklist\r\n            })\r\n        } else {\r\n            card.checklists.push(newChecklist)\r\n        }\r\n\r\n        // removing excess checklists\r\n        card.checklists = card.checklists.filter(checklist => {\r\n            if (checklist.title) return checklist\r\n        })\r\n\r\n        this.setState({ card }, () => {\r\n            if (activityTxt) {\r\n                let activity = this.createActivity(activityTxt)\r\n\r\n                this.submitCard(card, activity)\r\n            } else {\r\n                this.submitCard(card)\r\n            }\r\n        })\r\n    }\r\n\r\n    getFilteredActivities = () => {\r\n        const card = this.state.card\r\n        let cardActivities = this.props.board.activities.filter(activity => activity.card.id === card.id)\r\n        if (this.state.commentsOnly) cardActivities = cardActivities.filter(activity => {\r\n            if (activity.commentTxt.length) return activity\r\n        })\r\n        return cardActivities\r\n    }\r\n\r\n    getCardCover = () => {\r\n        const cover = this.state.card.cover\r\n        if (!cover) return <React.Fragment />\r\n\r\n        if (!cover.src) return (\r\n            // if there is no src - this is a color\r\n            <div className=\"card-details-cover-color\" style={{ backgroundColor: cover.color }} />\r\n        )\r\n        return (\r\n            <div className=\"card-details-cover-image\" style={{ backgroundImage: `url(${cover.src})` }} />\r\n        )\r\n    }\r\n    render() {\r\n        const card = this.state.card\r\n        if (!card) return <div className=\"card-details-background\"><div className=\"card-details-container\"><CircularProgress /></div></div>\r\n        return (\r\n            <div className=\"card-details-background\">\r\n                <div className=\"card-details-container\">\r\n                    {this.getCardCover()}\r\n                    <div className=\"close-button\">\r\n                        <IconButton onClick={this.onCloseCard} aria-label=\"close\">\r\n                            <CloseIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <div className=\"card-details-header-container\">\r\n\r\n                        <div className=\"card-details-title-container\">\r\n                            <CardDetailsHeader headerTxt={card.title} onUpdate={this.onUpdateHeader} />\r\n                            <small>in list <span>{this.state.groupName}</span></small>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-details-attrs\">\r\n                        {this.getCardDetailsMembers()}\r\n                        {this.getLabels()}\r\n                        <div>\r\n                            {(this.state.card.dueDate ? <h5>Due Date</h5> : <React.Fragment />)}\r\n                            <CardDueDateSetter onUpdateDueDate={this.onUpdateDueDate} dueDate={card.dueDate} displayDate={true} displayTime={true} />\r\n                        </div>\r\n                    </div>\r\n                    <section>\r\n                        <main className=\"card-details-main\">\r\n                            <CardDescription onUpdateDesc={this.onUpdateDesc} description={card.description} />\r\n                            <CardImagesList onUpdate={this.onUpdateAttachments} attachments={this.state.card.attachments} />\r\n                            <CardChecklistList checklists={card.checklists} onUpdate={this.onUpdateChecklists} />\r\n                            <CardImgUpload onAddImage={this.onAddImage} setUploading={this.setUploading} toggleOpen={this.toggleUploadDropzone} isOpen={this.state.isUploadZoneOpen} />\r\n                            <div className=\"card-details-activity-log\">\r\n                                <div className=\"card-details-activities-title\">\r\n                                    <ListIcon />\r\n                                    <h5>Activities</h5>\r\n                                    <Button onClick={this.toggleCommentsOnly}>{(this.state.commentsOnly) ? 'Show Details' : 'Hide Details'}</Button>\r\n                                </div>\r\n                                <CardAddComment onAddComment={this.onAddComment} />\r\n\r\n                                <ActivityLog\r\n                                    boardId={this.props.board._id}\r\n                                    displayMode=\"card\"\r\n                                    activities={this.getFilteredActivities()} />\r\n                            </div>\r\n                        </main>\r\n                        <aside className=\"card-details-sidebar\" ref={this.ref}>\r\n                            <CardSidebar anchorRef={this.ref} addActivity={this.createActivity} isUploading={this.state.isUploading} toggleCoverSelector={this.toggleCoverSelector} toggleUploadDropzone={this.toggleUploadDropzone} toggleDisplayMembers={this.toggleDisplayMembers} dueDate={card.dueDate} toggleLabelPallete={this.toggleLabelPalette} onUpdateDueDate={this.onUpdateDueDate} onArchiveCard={this.onArchiveCard} onUpdateChecklists={this.onUpdateChecklists} />\r\n                        </aside>\r\n                    </section>\r\n                </div>\r\n                {/* {this.state.isLabelPaletteShowing && <LabelPalette card={card} />} */}\r\n                <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'center',\r\n                        horizontal: 'center',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'center',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.isLabelPaletteShowing}\r\n                    anchorEl={this.ref}\r\n                    onClose={this.toggleLabelPalette}\r\n                    onBackdropClick={this.toggleLabelPalette}>\r\n                    <LabelPalette createActivity={this.createActivity} card={card} />\r\n                </Popover>\r\n                { this.state.isCardMemeberShown && <CardMembersList updateCardMembers={this.onUpdateCardMembers} anchorEl={this.ref} toggleList={this.toggleDisplayMembers} boardMembers={this.props.board.members} card={this.state.card} cardMembers={card.members} />}\r\n                { this.state.isCoverSelectorShown && <CoverSelector card={this.state.card} anchorEl={this.ref} onUpdate={this.onUpdateCover} toggleList={this.toggleCoverSelector} />}\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    switchGroup,\r\n    updateCard,\r\n    addActivity\r\n\r\n};\r\n\r\nexport const CardDetails = connect(mapStateToProps, mapDispatchToProps)(connect(withRouter)(_CardDetails));\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { MemberPreview } from './BoardHeader/MemberPreview'\r\nimport { ClickAwayListener } from '@material-ui/core';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { addToMembers, removeMember } from '../store/actions/boardActions';\r\n\r\n\r\nexport class _AddMemberModal extends Component {\r\n\r\n    state = {\r\n        searchLetters: ''\r\n    }\r\n\r\n    toggleUser=(user)=>{\r\n        if (!this.props.members.find(member => member._id === user._id)) {\r\n            this.props.addToMembers(user, this.props.board)\r\n        } else this.props.removeMember(user._id, this.props.board)\r\n    }\r\n \r\n    getMembers=(id)=>{\r\n        return this.props.members.find(member => {\r\n            if (member._id === id) return true\r\n            else return false\r\n        })\r\n    }\r\n\r\n    handleChange = ({ target }) =>{\r\n        const search = target.value\r\n        this.setState({ searchLetters: search })\r\n    }\r\n\r\n    render() {\r\n        \r\n        const { members, allExistingUsers } = this.props\r\n        \r\n        if(!members) return <div>loading</div>\r\n        return (\r\n            <ClickAwayListener onClickAway={this.props.onCloseModal}>\r\n                <div className=\"add-member-modal\">\r\n                    <h3>Members</h3>\r\n                    <input type=\"search\" onChange={this.handleChange} name=\"search-member\" id=\"\" autoCorrect=\"off\" autoComplete=\"off\"/>\r\n                    <div className=\"add-members-container\">\r\n                        {!this.state.searchLetters? \r\n                            allExistingUsers.map(user => {\r\n                                return <div key={user._id} className=\"member-container\" onClick={() => this.toggleUser(user)}>\r\n                                    <MemberPreview name={user.fullName} /> \r\n                                    <p>{user.fullName}</p>\r\n                                    {this.getMembers(user._id) && <div><CheckIcon /></div>}\r\n                                </div>\r\n                            }) : allExistingUsers.map(user => {\r\n                                // filtering through the all users array\r\n                                if (user.fullName.toLowerCase().includes(this.state.searchLetters.toLocaleLowerCase())){\r\n                                return <div key={user._id} className=\"member-container\" onClick={() => this.toggleUser(user)}>\r\n                                    <MemberPreview name={user.fullName} />\r\n                                    <p>{user.fullName}</p>\r\n                                    {this.getMembers(user._id) && <div><CheckIcon /></div>}\r\n                                    </div>\r\n                                }\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        members: state.boardReducer.board.members,\r\n        allUsers: state.userReducer.users\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    // loadAllUsers\r\n    addToMembers,\r\n    removeMember\r\n};\r\nexport const AddMemberModal = connect(mapStateToProps, mapDispatchToProps)(_AddMemberModal);\r\n","import React, { Component } from 'react'\r\nimport { MemberPreview } from './MemberPreview';\r\nimport { AddMemberModal } from '../AddMemberModal';\r\nimport { render } from '@testing-library/react';\r\n\r\nexport class MemberList extends Component {\r\n\r\n    state = {\r\n        isModalShown: false\r\n    }\r\n\r\n    onShowModal = () => {\r\n        this.setState({ isModalShown: true })\r\n    }\r\n    \r\n    onCloseModal = () => {        \r\n        this.setState({ isModalShown: false })\r\n    }\r\n    \r\n    render(){\r\n        const { members } = this.props\r\n        if (!members) return <h4>loading</h4>\r\n\r\n        return (\r\n            <div className=\"members-container\">\r\n                <div className=\"member-preview\" onClick={() => this.onShowModal()}>+</div>\r\n                <div className=\"add-member-modal-container\">\r\n                    {this.state.isModalShown && <AddMemberModal onCloseModal={this.onCloseModal} allExistingUsers={this.props.allUsers} />}\r\n                </div>\r\n                {\r\n                    members.map(member => {\r\n                        return <MemberPreview key={member._id}\r\n                            name={member.fullName} \r\n                            img={member.imgUrl}\r\n                            />\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport CheckIcon from '@material-ui/icons/Check';\r\n\r\nexport class Label extends Component {\r\n\r\n    render() {\r\n        const { isChecked } = this.props\r\n        return (\r\n            <div className=\"label-inner-container\"\r\n                onClick={() => this.props.onFilterByLabel(this.props.id)}>\r\n                <div className={`label ${this.props.color}`}></div>  \r\n                <p>{this.props.name}</p>\r\n                {isChecked && <div><CheckIcon /></div>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Label } from './Label'\r\nimport { onSetFilterBy } from '../../store/actions/boardActions'\r\nimport { ClickAwayListener } from '@material-ui/core'\r\nexport class _FilterByLabel extends Component {\r\n\r\n    onFilterByLabel=(labelId)=>{\r\n        // if theres filter and it is txt\r\n        if (this.props.currFilter && this.props.currFilter.filterBy.txt) return\r\n\r\n        let labels = []\r\n        // if theres filter and is of labels type\r\n        if (this.props.currFilter && this.props.currFilter.filterBy.labels) {\r\n            labels = [...this.props.currFilter.filterBy.labels]\r\n            // if you the idx is -1, than add it to the labels array\r\n            const labelIdx = labels.findIndex(label => label === labelId)\r\n            if (labelIdx !== -1) {labels.splice(labelIdx,1)}\r\n            else if (labelIdx === -1) {labels.push(labelId)}\r\n        } else {\r\n            labels.push(labelId)\r\n        }\r\n        this.props.onSetFilterBy(this.props.board, { labels })\r\n    }\r\n\r\n    isChecked(labelId){\r\n        // check if there are currently labels in the filter\r\n        if (!this.props.currFilter || !this.props.currFilter.filterBy.labels) return\r\n        let labels = [...this.props.currFilter.filterBy.labels]\r\n        const labelIdx = labels.findIndex(label => label === labelId)\r\n        if(labelIdx !== -1) return true\r\n        else return false\r\n    }\r\n\r\n    onResetFilter = () => {\r\n        const labels = []\r\n        this.props.onSetFilterBy(this.props.board, { labels })\r\n    }\r\n\r\n    render() {\r\n        const { labels } = this.props.board\r\n        return (\r\n            <ClickAwayListener onClickAway={this.props.toggleModal}>\r\n            <div className=\"label-filter\">\r\n                <h3>Labels</h3>\r\n                <div className=\"labels-container\">\r\n\r\n                    <div className=\"label-inner-container\"\r\n                        onClick={() => this.onResetFilter()}>\r\n                        <div className={`label grey`}></div>\r\n                        <p>No labels</p>\r\n                    </div>\r\n                    \r\n                    {labels.map(label => {\r\n                        return <Label name={label.name} \r\n                        color={label.color} \r\n                        id={label.id} \r\n                        key={ label.id }\r\n                        onFilterByLabel={  this.onFilterByLabel }\r\n                        isChecked={this.isChecked(label.id) }\r\n                        />\r\n                    })}\r\n                </div>\r\n            </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        currFilter: state.boardReducer.filterBy\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onSetFilterBy\r\n};\r\n\r\nexport const FilterByLabel = connect(mapStateToProps, mapDispatchToProps)(_FilterByLabel);\r\n","import React, { Component } from 'react'\r\nimport { FilterByLabel } from './FilterByLabel'\r\n\r\n\r\nexport class Filter extends Component {\r\n\r\n    state = {\r\n        isLabelModalShown: false\r\n    }\r\n\r\n    handleChange = async ({ target }) => {\r\n        // fix this\r\n        await this.setState({ search: { txt: target.value } })\r\n        // send action\r\n        this.props.onFilter(this.state.search)\r\n    }\r\n\r\n    handleLabel = async () => {\r\n\r\n    }\r\n\r\n    toggleModal = () => {\r\n        this.setState({ isLabelModalShown: !this.state.isLabelModalShown })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"search-filter-container\">\r\n                    <div className=\"input-container\">\r\n                        <input type=\"search\" id=\"search\" autoCorrect=\"off\" autoComplete=\"off\"\r\n                            className=\"search-bar\"\r\n                            onChange={this.handleChange} />\r\n\r\n                        <div className=\"search-icon-container\"><span className=\"material-icons\">search</span></div>\r\n\r\n                    </div>\r\n\r\n                    <div className=\"board-header-btn filter-btn\" onClick={this.toggleModal} ><span className=\"material-icons\">sort</span></div>\r\n                    {this.state.isLabelModalShown && \r\n                    <FilterByLabel toggleModal={this.toggleModal} \r\n                    />}\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n     }\r\n\r\n}\r\n\r\n\r\n","// this contains:\r\n// Board name\r\n// Board Members\r\n// Filter (search)\r\n// Link to Statistics\r\n// Menu hamburger\r\n\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { MemberList } from './MemberList';\r\nimport { Filter } from './Filter';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport userService from '../../services/userService'\r\nimport { loadAllUsers } from '../../store/actions/userActions';\r\n\r\n\r\n\r\nexport class _BoardHeader extends Component {\r\n\r\n    async componentDidMount() {\r\n        await this.props.loadAllUsers()\r\n    }\r\n    \r\n    render() {\r\n        \r\n        return (\r\n                <div className=\"boards-header-container\" >\r\n                    <h3>{this.props.title}</h3>\r\n                    <div className=\"members-container\">\r\n                        <MemberList members={this.props.members} allUsers={this.props.allUsers}/>\r\n                    </div>\r\n\r\n\r\n                    <Filter onFilter={this.props.onFilter} />\r\n                    <div className=\"board-header-btn\" onClick={() => this.props.onToggleSidebar(true)}>\r\n                        <p>Show Menu</p>\r\n                    </div>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        allUsers: state.userReducer.users\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadAllUsers\r\n};\r\n\r\nexport const BoardHeader = connect(mapStateToProps, mapDispatchToProps)(_BoardHeader);\r\n","import userService from '../../services/userService'\r\n\r\n\r\nexport function loadAllUsers(){\r\n    return async dispatch=>{\r\n        const users = await userService.getUsersFromDb()\r\n        dispatch({ type: 'SET_USERS', users })\r\n    }\r\n}","// Edit card preivew - should have edit labels, change memebers change due date and archive\r\nimport React, { Component } from 'react'\r\n\r\nimport {Button, Dialog } from '@material-ui/core';\r\nimport { CardLabels } from './CardLabels';\r\nimport { CardPreviewDueDate } from './CardPreviewDueDate';\r\nimport ArchiveOutlinedIcon from '@material-ui/icons/ArchiveOutlined';\r\nimport { connect } from 'react-redux';\r\nimport { addActivity, updateCard } from '../../store/actions/boardActions';\r\nimport { boardService } from '../../services/boardService';\r\nimport { CardDueDateSetter } from './CardDueDateSetter';\r\nimport { CardMembersList } from './CardMembersList';\r\nimport PeopleAltOutlinedIcon from '@material-ui/icons/PeopleAltOutlined';\r\n\r\nclass _CardPreviewActions extends Component {\r\n\r\n    state = {\r\n        isOpen: false,\r\n        offsetTop: null,\r\n        offsetLeft: null,\r\n        width: null,\r\n        txtValue: '',\r\n        isMemberListOpen: false\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n    submitCard = async (card) => {\r\n        return new Promise(resolve => {\r\n            this.props.updateCard(this.props.board, card).then(() => {\r\n                this.onClose()\r\n                resolve()\r\n            })\r\n        })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.props.onClose()\r\n    }\r\n    componentDidMount() {\r\n        console.log(this.props)\r\n        this.getParentPos()\r\n        this.getCurrTitle()\r\n    }\r\n\r\n    onUpdateDueDate = async (dueDate) => {\r\n        let card = { ...this.props.props.card }\r\n        card.dueDate = dueDate\r\n        await this.submitCard(card)\r\n        this.addActivity('updated due date')\r\n    }\r\n\r\n    onUpdateHeader = async () => {\r\n        let card = { ...this.props.props.card }\r\n        console.log(card)\r\n        card.title = this.state.txtValue\r\n         \r\n        await this.submitCard(card)\r\n        this.addActivity('updated the title')\r\n\r\n    }\r\n\r\n    addActivity = async (txt) => {\r\n        const card = this.props.props.card\r\n        const activity = {\r\n            \"txt\": txt,\r\n            \"commentTxt\": '',\r\n            \"card\": {\r\n                \"id\": card.id,\r\n                \"title\": card.title\r\n            }\r\n        }\r\n\r\n        const newActivity = boardService.createActivity(activity)\r\n        await this.props.addActivity(this.props.board, newActivity)\r\n        return true\r\n\r\n    }\r\n    onChange = (ev) => {\r\n        const txtValue = ev.target.value\r\n        this.setState({ txtValue })\r\n    }\r\n\r\n    onKeyPress = (ev) => {\r\n        if (ev.key === 'Enter') return this.onUpdateHeader()\r\n    }\r\n\r\n    toggleCardMembersMenu = () => {\r\n        if (this.state.isMemberListOpen) return this.setState({isMemberListOpen:false})\r\n        this.setState({isMemberListOpen:true})\r\n    }\r\n    onArchiveCard = async () => {\r\n        let card = { ...this.props.props.card }\r\n        card.archivedAt = Date.now()\r\n         await this.submitCard(card)\r\n         this.addActivity('archived')\r\n    }\r\n\r\n    onUpdateCardMembers = async (card) => {\r\n        \r\n        this.setState({ card }, async() => {\r\n            await this.submitCard(card)\r\n            this.addActivity('edited the card members')\r\n        })\r\n    }\r\n\r\n\r\n    getParentPos = () => {\r\n        const pos = this.props.anchorEl.current.parentElement.getBoundingClientRect()\r\n        this.setState({ offsetTop: pos.top, offsetLeft: pos.left, width: pos.width })\r\n    }\r\n\r\n    getCurrTitle() {\r\n        const txtValue = this.props.props.card.title\r\n        this.setState({ txtValue })\r\n    }\r\n    getCardCover = () => {\r\n\r\n        const cardCover = this.props.props.card.cover\r\n        if (!cardCover) return <React.Fragment />\r\n        if (!cardCover.src) return (\r\n            // if there is no src - this is a color\r\n            <div className=\"card-preview-cover-color\" style={{backgroundColor:cardCover.color}} />\r\n        )\r\n        return (\r\n            <div className=\"card-preview-cover-image\" style={{backgroundImage:`url(${cardCover.src})`}} /> \r\n        )\r\n    }\r\n\r\n\r\n    render() {\r\n        if (!this.state.offsetTop || !this.state.offsetLeft) return <div></div>\r\n        const props = this.props.props\r\n        return (\r\n\r\n            <Dialog onClose={this.props.onClose} open={true} >\r\n                <div  className=\"card-edit-container\" onClick={(ev) => ev.stopPropagation()} style={{\r\n                    left: `${this.state.offsetLeft}px`,\r\n                    top: `${this.state.offsetTop}px`,\r\n                    position: 'fixed'\r\n                }}>\r\n                    \r\n                    {(this.state.isMemberListOpen) ? <CardMembersList anchorEl={this.ref} updateCardMembers={this.onUpdateCardMembers} toggleList={this.toggleCardMembersMenu} boardMembers={this.props.board.members} card={props.card}/> : <React.Fragment />}\r\n                    \r\n                    <div className=\"card-edit-left\">\r\n\r\n                        <div className=\"card-preview\" style={{ width: `${this.state.width}px` }}>\r\n                            {this.getCardCover()}\r\n                            {this.props.cardStyle}\r\n                            <CardLabels\r\n                                cardLabels={props.card.labels}\r\n                                boardLabels={props.board.labels}\r\n                                preview={true}\r\n                            />\r\n                            <form>\r\n                                <textarea className=\"card-preview-header card-preview-title-edit\" autoFocus onKeyPress={this.onKeyPress} onChange={this.onChange} value={this.state.txtValue} />\r\n                            </form>\r\n\r\n                            <div className=\"card-preview-attrs\">\r\n                                <CardPreviewDueDate dueDate={props.card.dueDate} />\r\n                                {this.props.attrs}\r\n                            </div>\r\n                        </div>\r\n                        <button className=\"save-btn\" onClick={this.onUpdateHeader}>Save</button>\r\n                    </div>\r\n                    <div  className=\"card-edit-right\">\r\n                        <div className=\"card-preview-edit-actions-container\">\r\n                            <Button onClick={this.onArchiveCard}><ArchiveOutlinedIcon /> <span>Archive Card</span></Button>\r\n                            <CardDueDateSetter dueDate={props.dueDate} onUpdateDueDate={this.onUpdateDueDate} />\r\n                            <Button ref={this.ref} onClick={this.toggleCardMembersMenu}><PeopleAltOutlinedIcon /><span>Members</span></Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </Dialog>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateCard,\r\n    addActivity\r\n\r\n};\r\n\r\nexport const CardPreviewActions = connect(mapStateToProps, mapDispatchToProps)(_CardPreviewActions);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport SubjectOutlinedIcon from '@material-ui/icons/SubjectOutlined';\r\nimport AttachFileOutlinedIcon from '@material-ui/icons/AttachFileOutlined';\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\nimport { toggleFullLabels } from '../../store/actions/boardActions';\r\nimport { CardLabels } from './CardLabels';\r\nimport { CardPreviewDueDate } from './CardPreviewDueDate';\r\nimport ChatBubbleOutlineRoundedIcon from '@material-ui/icons/ChatBubbleOutlineRounded';\r\nimport { Draggable } from 'react-beautiful-dnd'\r\nimport { CardPreviewActions } from './CardPreviewActions';\r\nimport { Avatar } from '@material-ui/core';\r\n\r\n\r\nclass _CardPreview extends Component {\r\n\r\n    state = {\r\n        isEditing: false\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n    onSetEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    onSetNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    onOpenCardActions = (ev) => {\r\n        ev.stopPropagation()\r\n        this.onSetEditing()\r\n    }\r\n    getCardPreviewStyle = () => {\r\n        const cardStyle = this.props.card.style\r\n        if (!cardStyle || !Object.keys(cardStyle)) return <div></div>\r\n        if (cardStyle.bgColor) return <div className=\"card-preview-style\" style={{ backgroundColor: cardStyle.bgColor }}></div>\r\n        return <div></div>\r\n    }\r\n\r\n    getCardPreviewMembers = () => {\r\n        const cardMembers = this.props.card.members\r\n        if (!cardMembers || !cardMembers.length) return <React.Fragment />\r\n        \r\n        const cardMembersEl =  cardMembers.map((member, idx) => {\r\n            const splitName = member.fullName.split(' ')\r\n            const initials = splitName.map(name => name[0])\r\n            return <div key={100 + idx} className=\"card-preview-member\"><Avatar>{initials}</Avatar></div>\r\n        })\r\n        return <div className=\"card-preview-members\">{cardMembersEl}</div>\r\n    }\r\n\r\n    getCardPreviewAttachments = () => {\r\n        const cardAtt = this.props.card.attachments\r\n        if (!cardAtt || !Object.keys(cardAtt) || !cardAtt.length) return null\r\n        return <div key=\"0\" className=\"card-preview-attr\"><AttachFileOutlinedIcon style={{ fontSize: 16 }} /></div>\r\n    }\r\n\r\n    getCardPreviewHoldDesc = () => {\r\n        const cardDesc = this.props.card.description\r\n        if (!cardDesc || !Object.keys(cardDesc)) return null\r\n        return <div key=\"1\" className=\"card-preview-attr\"><SubjectOutlinedIcon style={{ fontSize: 16 }} /></div>\r\n    }\r\n\r\n    getCardPreviewComments = () => {\r\n        let cardComm = this.props.board.activities.filter(activity => activity.card.id === this.props.card.id)\r\n        cardComm = cardComm.filter(activity => {\r\n            if (activity.commentTxt) return activity\r\n            return null\r\n        })\r\n        if (!cardComm || !cardComm.length) return null\r\n\r\n        return <div key=\"3\" className=\"card-preview-attr\"><ChatBubbleOutlineRoundedIcon style={{ fontSize: 16 }} /> {cardComm.length}</div>\r\n    }\r\n\r\n    onOpenCardDetails = () => {\r\n        // to later be switched to using history\r\n    \r\n        let url = window.location.href\r\n        if (url.charAt(url.length - 1) !== '/') url += '/'\r\n        url += `${this.props.card.id}`\r\n        window.location.assign(url)\r\n        \r\n    }\r\n\r\n\r\n    getCardPreviewChecklist = () => {\r\n        const checklists = this.props.card.checklists\r\n        if (!checklists || !checklists.length) return null\r\n\r\n        let doneTodos = 0\r\n        let totalTodos = 0\r\n\r\n        let doneClass = ''\r\n\r\n        checklists.forEach(checklist => {\r\n            checklist.todos.forEach(todo => {\r\n                if (todo.isDone) {\r\n                    doneTodos += 1\r\n                }\r\n                totalTodos += 1\r\n            })\r\n        })\r\n\r\n        if (!totalTodos) return null\r\n        if (doneTodos === totalTodos) {\r\n            doneClass = \" card-preview-checklist-counter-done\"\r\n        }\r\n        return <div key=\"2\" className={`card-preview-attr card-preview-checklist-counter${doneClass}`}><CheckBoxOutlinedIcon style={{ fontSize: 16 }} /> <span>{doneTodos}/{totalTodos}</span> </div>\r\n    }\r\n\r\n    getCardPreviewAttrs = () => {\r\n        // test all attributes\r\n        const attrs = [\r\n            this.getCardPreviewAttachments(),\r\n            this.getCardPreviewHoldDesc(),\r\n            this.getCardPreviewChecklist(),\r\n            this.getCardPreviewComments()\r\n        ]\r\n        // if at least one of them is true OR there are members assing to this card - render the card-preview-attrs div\r\n        if (this.getCardPreviewMembers() || !attrs.every(item => !item)) {\r\n            return (<div className=\"card-preview-attrs\">\r\n                {attrs.map((att, idx) => {\r\n                    if (att) return att\r\n                    return <React.Fragment key={idx} />\r\n                })}\r\n            </div>)\r\n        }\r\n    }\r\n\r\n    getCardCover = () => {\r\n\r\n        const cardCover = this.props.card.cover\r\n        if (!cardCover) return <React.Fragment />\r\n        if (!cardCover.src) return (\r\n            // if there is no src - this is a color\r\n            <div className=\"card-preview-cover-color\" style={{backgroundColor:cardCover.color}} />\r\n        )\r\n        return (\r\n            <div className=\"card-preview-cover-image\" style={{backgroundImage:`url(${cardCover.src})`}} /> \r\n        )\r\n    }\r\n\r\n    onToggleLabels = (ev) => {\r\n        ev.stopPropagation()\r\n        return this.props.toggleFullLabels()\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n\r\n\r\n            <Draggable draggableId={this.props.card.id} index={this.props.index}>\r\n                {provided => (\r\n\r\n                    <div\r\n                        ref={provided.innerRef}\r\n                        {...provided.draggableProps}\r\n                        {...provided.dragHandleProps}\r\n\r\n                        className={'card-preview'}\r\n                        onClick={this.onOpenCardDetails}>\r\n                        {this.getCardPreviewStyle()}\r\n                        {this.getCardCover()}\r\n                        <CardLabels onClickLabel={this.onToggleLabels}\r\n                            isFull={this.props.fullLabel}\r\n                            cardLabels={this.props.card.labels}\r\n                            boardLabels={this.props.board.labels}\r\n                            preview={true}\r\n                        />\r\n                        <div className=\"card-preview-header\">\r\n                            {this.props.card.title}\r\n                        </div>\r\n                        <div ref={this.ref} onClick={this.onOpenCardActions} className=\"card-preview-edit-container\">\r\n                            <EditOutlinedIcon fontSize=\"inherit\" />\r\n                            {(this.state.isEditing) ? <CardPreviewActions anchorEl={this.ref} props={this.props} onClose={this.onSetNotEditing} cardStyle={this.getCardPreviewStyle()} attrs={this.getCardPreviewAttrs()} /> : <React.Fragment />}\r\n                        </div>\r\n                        <div className=\"card-preview-attrs\">\r\n                            <CardPreviewDueDate dueDate={this.props.card.dueDate} />\r\n                            {this.getCardPreviewAttrs()}\r\n                            {this.getCardPreviewMembers()}\r\n                        </div>\r\n                        {provided.placeholder}\r\n                    </div>\r\n                )}\r\n\r\n            </Draggable>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        fullLabel: state.boardReducer.fullLabel,\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    toggleFullLabels\r\n};\r\n\r\nexport const CardPreview = connect(mapStateToProps, mapDispatchToProps)(_CardPreview);\r\n","import React, { Component } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nexport class NewItem extends Component {\r\n\r\n    state = {\r\n        isEditing: false,\r\n        txtValue: ''\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const txtValue = ev.target.value\r\n        this.setState({ txtValue })\r\n    }\r\n\r\n    onKeyPress = (ev) => {\r\n        // console.log(ev.key)\r\n        if (ev.key === 'Enter') this.onSubmit(ev)\r\n    }\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    getIsEditing = () => {\r\n        if (!this.state.isEditing) return (\r\n            <div className=\"new-item-btn\" onClick={this.setEditing}><AddIcon style={{ fontSize: 14 }} />{this.props.addItemTxt}</div>\r\n        )\r\n        \r\n        return (\r\n\r\n            <div className=\"new-item-form\">\r\n                <form  onKeyDown={this.onKeyPress} onBlur={this.setNotEditing} onSubmit={this.onSubmit} >\r\n                    <textarea placeholder={this.props.placeHolderTxt} autoFocus type=\"text\" onChange={this.onChange} value={this.state.txtValue} />\r\n                    <div className=\"save-btn-container\">\r\n                        <button className=\"save-btn\" onMouseDown={this.onSubmit}>{this.props.addBtnTxt}</button>\r\n                        <CloseIcon onClick={this.setNotEditing} />\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    onSubmit = async(ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.txtValue) return\r\n        await this.props.onAdd(this.state.txtValue)\r\n        const isEditing = false\r\n        const txtValue = ''\r\n        this.setState({ isEditing, txtValue })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"new-item-container\">\r\n                {this.getIsEditing()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","const { cardService } = require(\"../../services/cardService/cardService\");\r\n\r\n\r\nexport function addCard(board, cardTxt, groupId) {\r\n    return async dispatch => {\r\n        try {\r\n          const newBoard = await cardService.addCard(board, cardTxt, groupId)\r\n          dispatch({ type: 'SET_BOARD', board: newBoard });\r\n        } catch (err) {\r\n          console.log('ReviewActions: err in addCard', err);\r\n        }\r\n      };\r\n}","import React, { Component } from 'react'\r\nimport { ClickAwayListener } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { onArchiveGroup, onArchiveAllCards } from '../../store/actions/boardActions';\r\n\r\nexport class _GroupMenu extends Component {\r\n\r\n    addCard=(ev)=>{\r\n        // currently adding without moving to focus to new card\r\n        // need to focus on \"NewItem\" and set its state with the help of parent element (same parent)\r\n        ev.stopPropagation()\r\n        this.props.onAdd('New Card')\r\n    }\r\n\r\n    archiveAllCards = (ev)=>{     \r\n        ev.stopPropagation()\r\n        this.props.onArchiveAllCards(this.props.groupId, this.props.board)\r\n        this.props.toggleMenu()\r\n    }\r\n\r\n    archiveGroup=(ev)=>{\r\n        ev.stopPropagation()\r\n        this.props.onArchiveGroup(this.props.groupId, this.props.board)\r\n        this.props.toggleMenu()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ClickAwayListener onClickAway={()=> this.props.toggleMenu()}>\r\n                <div className=\"group-menu-container\">\r\n                        <div>List Actions</div> \r\n                        <div><hr /></div>\r\n                        <div onClick={ this.addCard } className=\"group-menu-item\">Add Card...</div>\r\n                    <div onClick={this.archiveAllCards} className=\"group-menu-item\">Archive All Cards...</div>\r\n                        <div><hr/></div>\r\n                        <div onClick={ this.archiveGroup } className=\"group-menu-item\">Archive This Group...</div>\r\n                </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    onArchiveGroup,\r\n    onArchiveAllCards\r\n};\r\n\r\nexport const GroupMenu = connect(mapStateToProps, mapDispatchToProps)(_GroupMenu);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { CardPreview } from './CardCmps/CardPreview'\r\nimport { NewItem } from './NewItem'\r\nimport { addCard } from '../store/actions/groupActions'\r\nimport { setNewGroupName } from '../store/actions/boardActions'\r\n\r\nimport { CardList } from './CardCmps/CardList'\r\n\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd'\r\nimport { GroupMenu } from './GroupCmps/GroupMenu'\r\nimport { ClickAwayListener, Select } from '@material-ui/core'\r\n\r\nclass _Group extends Component {\r\n\r\n    state = {\r\n        currGroupName: '',\r\n        currGroupId: null,\r\n        isMenuShown: false,\r\n        isChangeGroupShown: false\r\n    }\r\n\r\n    onAddCard = (txt) => {\r\n        return this.props.addCard(this.props.board, txt, this.props.group.id)\r\n    }\r\n\r\n    getAddItemTxt = () => {\r\n        if (this.props.group.cards.length) return 'Add another card'\r\n        return 'Add a card'\r\n    }\r\n\r\n    toggleMenu=(ev = null)=>{\r\n        if (ev) ev.stopPropagation()\r\n        const isShown = !this.state.isMenuShown\r\n        this.setState({ isMenuShown: isShown })\r\n        \r\n    }\r\n\r\n    closeChangeGroupName = (ev) => {\r\n        this.setState({ isChangeGroupShown: false })\r\n        this.onSubmit(ev)\r\n    }\r\n\r\n    onOpenChangeGroupName=(id, groupName)=>{\r\n        this.setState({ currGroupId: id, currGroupName: groupName, isChangeGroupShown: true })\r\n    }\r\n\r\n    handleChangeGroupName=(ev)=>{\r\n        this.setState({ currGroupName: ev.target.value })\r\n    }\r\n\r\n    onSubmit=(ev)=>{\r\n        ev.preventDefault()        \r\n        const { currGroupId, currGroupName } = this.state\r\n        this.props.setNewGroupName(currGroupId, currGroupName, this.props.board)\r\n        this.setState({ isChangeGroupShown: false })\r\n    }\r\n\r\n    render() {\r\n        const group = this.props.group\r\n        return (\r\n            <Draggable draggableId={group.id} index={this.props.index}>\r\n                {provided=>(\r\n                    <div {...provided.draggableProps} ref={provided.innerRef}\r\n                        className=\"group-container\">\r\n                        <div {...provided.dragHandleProps}\r\n                            className=\"group-header\" onClick={()=> this.onOpenChangeGroupName(group.id, group.title) }>\r\n\r\n                            {(this.state.isChangeGroupShown) ? \r\n                                <ClickAwayListener onClickAway={this.closeChangeGroupName}>\r\n                                    <form onSubmit={this.onSubmit} className=\"change-group-name\">\r\n                                        <input className=\"change-group-name-input\" \r\n                                        type=\"text\" name=\"group-name\" onChange={this.handleChangeGroupName} \r\n                                        defaultValue={ group.title }\r\n                                        autoFocus spellCheck=\"false\" autoComplete=\"off\"\r\n                                        onFocus={ev => ev.target.select()}\r\n                                        />  \r\n                                    </form>\r\n                                </ClickAwayListener> : (group.title)}\r\n\r\n                            <span onClick={ this.toggleMenu } className=\"material-icons dots-icon\">more_horiz</span>\r\n                            {this.state.isMenuShown && <GroupMenu toggleMenu={this.toggleMenu} groupId={group.id} \r\n                            onAdd={this.onAddCard}/>}\r\n\r\n                        </div>\r\n                        <Droppable droppableId={group.id} type=\"card\">\r\n                        {provided=>(\r\n                                <div className=\"card-container\"\r\n                                ref={provided.innerRef}\r\n                                {...provided.droppableProps}\r\n                                >\r\n                                {group.cards.map((card, index) => {\r\n                                    if (!card.archivedAt) {\r\n                                        return <CardPreview key={card.id} card={card} index={index}/>\r\n                                    }\r\n                                })}\r\n                                {provided.placeholder}\r\n                            </div>\r\n                        )}\r\n                        </Droppable>\r\n                        <div className=\"new-card-btn-container\">\r\n                            <NewItem addItemTxt={this.getAddItemTxt()} placeHolderTxt='Add a title for this card...' addBtnTxt=\"Add Card\" onAdd={this.onAddCard} />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </Draggable>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    addCard,\r\n    setNewGroupName\r\n};\r\n\r\nexport const Group = connect(mapStateToProps, mapDispatchToProps)(_Group);\r\n","import React, { Component } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { connect } from 'react-redux';\r\nimport { onAddNewGroup } from '../../store/actions/boardActions';\r\n\r\nexport class _AddNewGroup extends Component {\r\n\r\n    state = {\r\n        newGroupTitle: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ newGroupTitle: '' })\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        const title = event.target.value        \r\n        this.setState({ newGroupTitle: title })\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.newGroupTitle) return\r\n        this.props.onAddNewGroup(this.props.board ,this.state.newGroupTitle)\r\n        this.setState({ newGroupTitle: '' })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n                <div className=\"new-group-form\">\r\n                    <form onBlur={this.setNotEditing} onSubmit={this.onSubmit} >\r\n                    <input onBlur={() => this.props.closeNewGroup()} \r\n                    placeholder=\"Enter list title\" \r\n                    type=\"text\" autoFocus onChange={this.handleChange} \r\n                        value={this.state.newGroupTitle ? this.state.newGroupTitle : ''}\r\n                    />\r\n                        <div className=\"save-btn-container\">\r\n                            <button className=\"save-btn\" onMouseDown={this.onSubmit}>Add List</button>\r\n                        <CloseIcon onClick={ ()=> this.props.closeNewGroup() } />\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onAddNewGroup\r\n};\r\n\r\nexport const AddNewGroup = connect(mapStateToProps, mapDispatchToProps)(_AddNewGroup);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Group } from './Group'\r\nimport { NewItem } from './NewItem'\r\nimport { AddNewGroup } from './GroupCmps/AddNewGroup'\r\n// import { render } from '@testing-library/react'\r\n\r\nimport { Droppable } from 'react-beautiful-dnd'\r\n\r\n\r\nexport class GroupList extends Component {\r\n\r\n    state = {\r\n        isNewGroupShown: false,\r\n        groups: null\r\n    }\r\n\r\n    // filterGroups=()=>{\r\n\r\n    // }\r\n\r\n    closeNewGroup = () => {\r\n        this.setState({ isNewGroupShown: false })\r\n    }\r\n\r\n    render() {\r\n\r\n        const { groups, onAddGroup, style } = this.props\r\n        if (!groups) return <div></div>\r\n\r\n        return (\r\n            <div className=\"group-list-outer-container\" >\r\n                    <Droppable droppableId=\"changeToBoardId\" direction=\"horizontal\" type=\"group\">\r\n                        {provided=> (\r\n                        <div {...provided.droppableProps}\r\n                            ref={provided.innerRef}\r\n                            className=\"group-list-container\" >\r\n                            {groups.map((group, index) => {\r\n                                if (!group.archivedAt) {\r\n                                    return <Group key={group.id} group={group} index={index}/>\r\n                                }\r\n                        })}\r\n                        </div>\r\n                        )}\r\n                    </Droppable>\r\n                    <div className=\"new-group\" >\r\n                        {!this.state.isNewGroupShown && <div className=\"add-new-group-text\"\r\n                            onClick={() => this.setState({ isNewGroupShown: true })}>+ Add another list</div>}\r\n                        {this.state.isNewGroupShown && <AddNewGroup closeNewGroup={this.closeNewGroup} />}\r\n                    </div>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n// minified version is also included\r\n// import 'react-toastify/dist/ReactToastify.min.css';\r\n\r\nexport function Notify(props){\r\n  return (\r\n    <div>\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { IconButton, Divider } from '@material-ui/core';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\n\r\n\r\nexport function SidebarHeader({ titleTxt, onSetMenuOpt }) {\r\n    return (\r\n        <div className=\"sidebar-header\">\r\n            <h4>{titleTxt}</h4>\r\n            <IconButton size=\"small\" onClick={() => onSetMenuOpt(null)}>\r\n                <ArrowBackIosOutlinedIcon />\r\n            </IconButton>\r\n            <Divider />\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Drawer, Divider } from '@material-ui/core';\r\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\r\nimport SubjectIcon from '@material-ui/icons/Subject';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\nimport { updateBoard } from '../../store/actions/boardActions.js';\r\nimport { SidebarHeader } from './SidebarHeader';\r\n\r\nexport class _AboutBoard extends Component {\r\n    state = {\r\n        isEditDesc: false,\r\n        currDesc: null\r\n    }\r\n    setCurrDesc = (ev) => {\r\n        const currDesc = ev.target.value;\r\n        this.setState({ currDesc });\r\n\r\n    }\r\n    onEditDesc = () => {\r\n        const description = this.state.currDesc;\r\n        if (description) {\r\n            const newBoard = { ...this.props.board, description };\r\n            this.props.updateBoard(newBoard);\r\n        }\r\n        this.setState({ isEditDesc: false });\r\n    }\r\n    render() {\r\n        const { board, isShowing, onSetMenuOpt } = this.props;\r\n        const { isEditDesc } = this.state;\r\n        return (\r\n            <div className=\"sidebar-container\" >\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    className=\"about-board\"\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"ABOUT THIS BOARD\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <div className=\"about-container\">\r\n                        {board.createdBy && <div className=\"created-by\">\r\n                            <h5><PersonOutlineIcon /> CREATED BY</h5>\r\n                            <div className=\"board-creator\">\r\n                                <MemberPreview name={board.createdBy.fullName} />\r\n                                <span>{board.createdBy.fullName}</span>\r\n                            </div>\r\n                        </div>}\r\n                        <Divider />\r\n                        <div className=\"board-description\">\r\n                            <div className=\"description-header\">\r\n                                <h5><SubjectIcon /> DESCRIPTION</h5>\r\n                                <button className=\"edit-desc-btn\"\r\n                                    onClick={() => this.setState({ isEditDesc: !this.state.isEditDesc })}>\r\n                                    Edit desciption\r\n                                </button>\r\n                            </div>\r\n                            {isEditDesc && <React.Fragment>\r\n                                <textarea name=\"boardDesc\"\r\n                                    autoFocus\r\n                                    defaultValue={board.description}\r\n                                    style={{ resize: 'none' }}\r\n                                    cols=\"30\" rows=\"10\"\r\n                                    onChange={(ev) => this.setCurrDesc(ev)}\r\n                                    onBlur={() => this.setState({ isEditDesc: false })}></textarea>\r\n                                <div className=\"save-cancel-btns\">\r\n                                    <button type=\"button\" className=\"save-btn\"\r\n                                        onMouseDown={this.onEditDesc}>Save</button>\r\n                                    <button className=\"cancel-btn\"\r\n                                        onClick={() => this.setState({ isEditDesc: false })}>Cancel</button>\r\n                                </div>\r\n                            </React.Fragment>}\r\n                            {!isEditDesc && <pre\r\n                                style={{ cursor: 'pointer' }}\r\n                                onClick={() => this.setState({ isEditDesc: true })}>\r\n                                {board.description}\r\n                            </pre>}\r\n                        </div>\r\n                    </div>\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateBoard\r\n};\r\nexport const AboutBoard = connect(mapStateToProps, mapDispatchToProps)(_AboutBoard);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Drawer, Divider, IconButton, List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\nimport { updateBoard, setStyle } from '../../store/actions/boardActions.js';\r\nimport bg1 from './../../assets/imgs/backgrounds/bg-1.jpg';\r\nimport { SidebarHeader } from './SidebarHeader.jsx';\r\n\r\nexport class _ChangeBackground extends Component {\r\n    onSetBoardStyle = (style) => {\r\n        const newBoard = { ...this.props.board, style };\r\n        this.props.updateBoard(newBoard);\r\n        this.props.setStyle(newBoard.style)\r\n    }\r\n    render() {\r\n        const { board, isShowing, onSetMenuOpt } = this.props;\r\n        const boardStyles = [\r\n            {\r\n                id: 'bs101',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708689/bg-1_ls68ox.jpg)'\r\n            },\r\n            {\r\n                id: 'bs102',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708658/bg-2_r8mevb.jpg)'\r\n            },\r\n            {\r\n                id: 'bs103',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708664/bg-3_vrhygl.jpg)'\r\n            },\r\n            {\r\n                id: 'bs104',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708683/bg-4_jqpmcl.jpg)'\r\n            },\r\n            {\r\n                id: 'bs105',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708662/bg-5_r4mz7j.jpg)'\r\n            },\r\n            {\r\n                id: 'bs106',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708669/bg-6_tsrunp.jpg)'\r\n            },\r\n            {\r\n                id: 'bs107',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708679/bg-7_g0tqic.jpg)'\r\n            },\r\n            {\r\n                id: 'bs108',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708683/bg-8_hoe86h.jpg)'\r\n            }\r\n        ];\r\n        return (\r\n            <div className=\"about-board sidebar-container\" >\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"CHANGE BACKGROUND\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <div className=\"changeBG-container\">\r\n                        <div className=\"style-pallete\">\r\n                            {boardStyles.map(style => {\r\n                                return <div key={style.id}\r\n                                    className=\"bg-style\"\r\n                                    style={{\r\n                                        backgroundColor: style.bgClr,\r\n                                    }}\r\n                                    onClick={() => this.onSetBoardStyle(style)}>\r\n                                    <div className=\"img-container\" style={{\r\n                                        backgroundImage: style.bgImg,\r\n                                        backgroundRepeat: 'no-repeat',\r\n                                        backgroundSize: 'cover'\r\n                                       \r\n                                    }}></div>\r\n                                    <div>Select</div>\r\n                                </div>\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n    setStyle\r\n};\r\nexport const ChangeBackground = connect(mapStateToProps, mapDispatchToProps)(_ChangeBackground);\r\n","export default __webpack_public_path__ + \"static/media/bg-1.81fd7471.jpg\";","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Drawer, Divider, IconButton } from '@material-ui/core';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\nimport UnarchiveOutlinedIcon from '@material-ui/icons/UnarchiveOutlined';\r\nimport { loadBoard, updateCard, deleteCard, updateGroup } from '../../store/actions/boardActions.js';\r\nimport { SidebarHeader } from './SidebarHeader.jsx';\r\n\r\nexport class _SideArchive extends Component {\r\n    state = {\r\n        isShowingCards: true,\r\n        archive: { archivedCards: [], archivedGroups: [] },\r\n        filterBy: ''\r\n    }\r\n    async componentDidMount() {\r\n        this.loadArchive();\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.board !== this.props.board) this.loadArchive();\r\n    }\r\n    loadArchive = () => {\r\n        const { filterBy } = this.state;\r\n        const { board } = this.props;\r\n        let archivedCards = board.groups.filter(group => {\r\n            return group.cards.find(card => card.archivedAt)\r\n        });\r\n        archivedCards = archivedCards.map(group => {\r\n            return {\r\n                ...group,\r\n                cards: group.cards.filter(card => {\r\n                    return card.archivedAt\r\n                        && (card.title.toLowerCase().includes(filterBy.toLowerCase())\r\n                            || card.description.toLowerCase().includes(filterBy.toLowerCase()));\r\n                })\r\n            };\r\n        });\r\n        const archivedGroups = board.groups.filter(group => {\r\n            return group.archivedAt && group.title.toLowerCase().includes(filterBy.toLowerCase())\r\n        });\r\n        this.setState({ archive: { archivedCards, archivedGroups } });\r\n    }\r\n    onOpenCardDetails = (cardId) => {\r\n        // to later be switched to using history\r\n\r\n        let url = window.location.href\r\n        url += cardId\r\n        window.location.assign(url)\r\n    }\r\n    onUnArchiveCard = (card) => {\r\n        card.archivedAt = null;\r\n        this.props.updateCard(this.props.board, card);\r\n    }\r\n    onDeleteCard = (cardId) => {\r\n        this.props.deleteCard(this.props.board, cardId);\r\n    }\r\n    onUnArchiveGroup = (group) => {\r\n        group.archivedAt = null;\r\n        this.props.updateGroup(this.props.board, group);\r\n    }\r\n    onFilter = (ev) => {\r\n        const filterBy = ev.target.value;\r\n        this.setState(() => ({ filterBy }), () => this.loadArchive());\r\n    }\r\n    render() {\r\n        const { board, isShowing, onSetMenuOpt } = this.props;\r\n        const { isShowingCards, archive } = this.state;\r\n        if (!board.groups) return <div>Loading...</div>;\r\n\r\n        return (\r\n            archive && <div className=\"archive sidebar-container\">\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"ARCHIVE\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <div className=\"search-archive-container\">\r\n                        <input type=\"text\" onChange={(ev) => this.onFilter(ev)} />\r\n                        <button\r\n                            className=\"toggle-archive-btn\"\r\n                            onClick={() => {\r\n                                this.setState({\r\n                                    isShowingCards: !this.state.isShowingCards,\r\n                                    filterBy: ''\r\n                                });\r\n                            }}>\r\n                            Switch to {(isShowingCards) ? 'groups' : 'cards'}\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"archive-list-container\">\r\n                        {isShowingCards\r\n                            ? archive.archivedCards.map(group => {\r\n                                if (group.cards.length === 0) return;\r\n                                return <React.Fragment key={group.id}>\r\n                                    <h5>{group.title}</h5>\r\n                                    {group.cards.map(card => {\r\n                                        return <div className=\"archive-card-container\"\r\n                                            key={card.id}>\r\n                                            <div className=\"archive-card-preview\"\r\n                                                onClick={() => this.onOpenCardDetails(card.id)}>\r\n                                                <span>{card.title}</span>\r\n                                            </div>\r\n                                            <div className=\"buttons\">\r\n                                                <IconButton onClick={() => this.onUnArchiveCard(card)}>\r\n                                                    <UnarchiveOutlinedIcon fontSize='small' />\r\n                                                </IconButton>\r\n                                                <IconButton onClick={() => this.onDeleteCard(card.id)}>\r\n                                                    <DeleteOutlinedIcon fontSize='small' />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        </div>\r\n                                    })}\r\n                                </React.Fragment>\r\n                            })\r\n                            : archive.archivedGroups.map(group => <React.Fragment key={group.id}>\r\n                                <div className=\"archive-group-preview\">\r\n                                    <h5>{group.title}</h5>\r\n                                </div>\r\n                                <div className=\"buttons\">\r\n                                    <IconButton onClick={() => this.onUnArchiveGroup(group)}>\r\n                                        <UnarchiveOutlinedIcon fontSize='small'\r\n                                        />\r\n                                    </IconButton>\r\n                                    <IconButton>\r\n                                        <DeleteOutlinedIcon fontSize='small' />\r\n                                    </IconButton>\r\n                                </div>\r\n                            </React.Fragment>)\r\n                        }\r\n                    </div>\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    updateCard,\r\n    deleteCard,\r\n    updateGroup\r\n};\r\n\r\nexport const SideArchive = connect(mapStateToProps, mapDispatchToProps)(_SideArchive);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Drawer, Divider, IconButton } from '@material-ui/core';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\nimport { addLabel, updateLabel, removeLabel } from '../../store/actions/boardActions.js';\r\nimport { LabelPalette } from './LabelPalette.jsx';\r\nimport { SidebarHeader } from './SidebarHeader.jsx';\r\n\r\nclass _LabelPanel extends Component {\r\n    render() {\r\n        const { isShowing, onSetMenuOpt } = this.props;\r\n        return (\r\n            <div className=\"sidebar-container\" >\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    className=\"label-panel\"\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"LABELS\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <LabelPalette />\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    addLabel,\r\n    updateLabel,\r\n    removeLabel\r\n};\r\nexport const LabelPanel = connect(mapStateToProps, mapDispatchToProps)(_LabelPanel);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Drawer, Divider, IconButton, List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport WallpaperOutlinedIcon from '@material-ui/icons/WallpaperOutlined';\r\nimport ArchiveOutlinedIcon from '@material-ui/icons/ArchiveOutlined';\r\nimport LabelOutlinedIcon from '@material-ui/icons/LabelOutlined';\r\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\r\nimport FormatListBulletedOutlinedIcon from '@material-ui/icons/FormatListBulletedOutlined';\r\nimport { AboutBoard } from './AboutBoard'\r\nimport { ChangeBackground } from './ChangeBackground'\r\nimport { SideArchive } from './SideArchive'\r\nimport { ActivityLog } from './ActivityLog'\r\nimport { LabelPanel } from './LabelPanel';\r\n\r\nexport class _Sidebar extends Component {\r\n    state = { selectedMenuOpt: null }\r\n    onSetMenuOpt = (selectedMenuOpt) => {\r\n        this.setState({ selectedMenuOpt });\r\n    }\r\n    DynamicCmp = () => {\r\n        const { selectedMenuOpt } = this.state;\r\n        switch (selectedMenuOpt) {\r\n            case 'about':\r\n                return <AboutBoard isShowing={selectedMenuOpt === 'about'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />;\r\n            case 'changeBG':\r\n                return <ChangeBackground isShowing={selectedMenuOpt === 'changeBG'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />\r\n            case 'archive':\r\n                return <SideArchive isShowing={selectedMenuOpt === 'archive'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />\r\n            case 'labels':\r\n                return <LabelPanel isShowing={selectedMenuOpt === 'labels'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />\r\n            case null:\r\n                return <React.Fragment></React.Fragment>\r\n        }\r\n    }\r\n    render() {\r\n        const { board, isSidebarShowing, onToggleSidebar } = this.props;\r\n        const anchor = 'right';\r\n        return (\r\n            <div className=\"sidebar-container\">\r\n                <Drawer className=\"sidebar\"\r\n                    anchor={anchor}\r\n                    open={isSidebarShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={\"persistent\"}\r\n                    onClose={() => onToggleSidebar(false)}>\r\n                    <div className=\"sidebar-header\">\r\n                        <h4>MENU</h4>\r\n                        <IconButton size=\"small\" onClick={() => onToggleSidebar(false)}>\r\n                            <CloseOutlinedIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <List>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('about') }}>\r\n                            <ListItemIcon><InfoOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>About this board</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('changeBG') }}>\r\n                            <ListItemIcon><WallpaperOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Change background</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('archive') }}>\r\n                            <ListItemIcon><ArchiveOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Archive</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('labels') }}>\r\n                            <ListItemIcon><LabelOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Labels</ListItemText>\r\n                        </ListItem>\r\n                    </List>\r\n                    <Divider />\r\n                    <h5><FormatListBulletedOutlinedIcon size=\"small\" /> ACTIVITY LOG</h5>\r\n                    <ActivityLog activities={board.activities} boardId={board._id} />\r\n                </Drawer>\r\n\r\n                {this.DynamicCmp()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\n\r\nexport const Sidebar = connect(mapStateToProps)(_Sidebar);","import { CircularProgress } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { BoardHeader } from '../cmps/BoardHeader/BoardHeader';\r\nimport { CardDetails } from '../cmps/CardCmps/CardDetails';\r\nimport { GroupList } from '../cmps/GroupList';\r\nimport { Notify } from '../cmps/Notify'\r\nimport { Sidebar } from '../cmps/Sidebar/Sidebar';\r\n// import { connect } from 'socket.io-client';\r\nimport { loadBoard, onSetFilterBy, setStyle } from '../store/actions/boardActions';\r\nimport socketService from '../services/socketService.js'\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nimport { diff, addedDiff, deletedDiff, updatedDiff, detailedDiff } from 'deep-object-diff';\r\n\r\n\r\nclass _Board extends Component {\r\n\r\n  state = {\r\n    isSidebarShowing: false,\r\n    prevBoard: null\r\n  }\r\n\r\n  async componentDidMount() {\r\n    // await this.props.loadBoard('5f6a0f6e973d861c5d72eb3f')\r\n    const boardId = this.props.match.params.id\r\n    try {\r\n      await this.props.loadBoard(boardId)\r\n      // console.log(this)\r\n      this.props.setStyle(this.props.board.style)\r\n      socketService.setup()\r\n      socketService.on('init board', () => console.log(this.props.board._id))\r\n      socketService.emit('entered-board', this.props.board._id)\r\n      socketService.on('board-updated', async updatedBoard => {\r\n        \r\n        const prevBoard = JSON.parse(JSON.stringify(this.props.board))\r\n        await this.props.loadBoard(updatedBoard._id)\r\n        this.remoteUpdate(prevBoard)\r\n      })\r\n    } catch (err) {\r\n      toast.error('Oops! we seem to be missing the board you\\'re looking for. going back to board selection.', {\r\n        position: \"bottom-right\",\r\n        autoClose: 3500,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      setTimeout(() => {\r\n        this.props.history.push('/board')\r\n      }, 1000)\r\n    }\r\n\r\n  }\r\n\r\n  // componentDidUpdate(prevProps) {\r\n  //   if (prevProps.board.groups !== this.props.board.groups) {\r\n  //     const differ = detailedDiff(prevProps.board.groups, this.props.board.groups)\r\n  //     console.log(differ)\r\n  //   }\r\n  // }\r\n  \r\n\r\n  remoteUpdate = (prevBoard) => {\r\n    // this details the difference between the previous board and the current board\r\n    const differ = detailedDiff(prevBoard, this.props.board)\r\n    // if there are no differences - return\r\n    if (!Object.keys(differ.added).length && !Object.keys(differ.deleted).length && !Object.keys(differ.updated).length) return console.log('nothing to update')\r\n\r\n    console.log(differ)\r\n    // if there are differences - notify the user\r\n    toast.success('The board has been updated!', {\r\n      position: \"bottom-right\",\r\n      autoClose: 2000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n      });\r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    socketService.off('board-updated')\r\n    socketService.terminate()\r\n  }\r\n\r\n\r\n  getBoardFromParams = async () => {\r\n    const boardId = this.props.match.params.id\r\n    try {\r\n      await this.props.loadBoard(boardId)\r\n      this.props.setStyle(this.props.board.style)\r\n      socketService.on('init board', () => console.log(this.props.board._id))\r\n    } catch (err) {\r\n      toast.error('Oops! we seem to be missing the board you\\'re looking for. going back to board selection.', {\r\n        position: \"bottom-right\",\r\n        autoClose: 3500,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      setTimeout(() => {\r\n        this.props.history.push('/board')\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n\r\n\r\n  onToggleSidebar = (isSidebarShowing) => {\r\n    this.setState({ isSidebarShowing });\r\n  }\r\n\r\n  onFilter = (filterBy) => {\r\n    this.props.onSetFilterBy(this.props.board, filterBy)\r\n  }\r\n\r\n  onAddGroup = (txt) => {\r\n    return txt\r\n  }\r\n  \r\n  render() {\r\n\r\n    const { board } = this.props\r\n    if (!board) return <div>Loading...</div>\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {(this.props.match.params.cardId) ? <CardDetails cardId={this.props.match.params.cardId} boardId={this.props.match.params.id} history={this.props.history} /> : <div></div>}\r\n        <div className=\"board-container\">\r\n\r\n          <BoardHeader title={board.title}\r\n            members={board.members}\r\n            onToggleSidebar={this.onToggleSidebar}\r\n            onFilter={this.onFilter}\r\n            style={board.style}\r\n            users={this.props.allUsers}\r\n          />\r\n\r\n          <Sidebar board={board}\r\n            isSidebarShowing={this.state.isSidebarShowing}\r\n            onToggleSidebar={this.onToggleSidebar} />\r\n\r\n          {(board.groups) ? <GroupList style={board.style} onAddGroup={this.onAddGroup} groups={board.groups} /> : <CircularProgress />}\r\n\r\n        </div>\r\n\r\n\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardReducer.board,\r\n    filterBy: state.boardReducer.filterBy\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  loadBoard,\r\n  onSetFilterBy,\r\n  setStyle\r\n\r\n};\r\n\r\nexport const Board = connect(mapStateToProps, mapDispatchToProps)(_Board);\r\n","\r\nimport React, { Component } from 'react'\r\n\r\nexport class NewBoardColor extends Component {\r\n    render() {  \r\n              \r\n        return (\r\n            <div className={`new-board-color ${this.props.isSelected ? 'colorSelected' : ''}`} \r\n            style={{ backgroundColor: `${this.props.color}` }}\r\n                onClick={()=>this.props.onSetColor(this.props.color) }\r\n            ></div>\r\n        )\r\n    }\r\n}\r\n\r\n","export const allBoardColors = [\r\n    {\r\n    \"id\": \"bc101\",\r\n    \"name\": \"green\",\r\n    \"color\": \"#519839\"\r\n}, {\r\n    \"id\": \"bc102\",\r\n    \"name\": \"yellow\",\r\n    \"color\": \"#D29034\"\r\n}, {\r\n    \"id\": \"bc103\",\r\n    \"name\": \"blue\",\r\n    \"color\": \"#0079BF\"\r\n}, {\r\n    \"id\": \"bc104\",\r\n    \"name\": \"brown\",\r\n    \"color\": \"#B04632\"\r\n}, {\r\n    \"id\": \"bc105\",\r\n    \"name\": \"purple\",\r\n    \"color\": \"#89609E\"\r\n}, {\r\n    \"id\": \"bc106\",\r\n    \"name\": \"pink\",\r\n    \"color\": \"#CD5A91\"\r\n}, {\r\n    \"id\": \"bc107\",\r\n    \"name\": \"lightGreen\",\r\n    \"color\": \"#4BBF6B\"\r\n}, {\r\n    \"id\": \"bc108\",\r\n    \"name\": \"teal\",\r\n    \"color\": \"#49A9D7\"\r\n}]","\r\n\r\nimport React, { Component } from 'react'\r\nimport { NewBoardColor } from './NewBoardColor'\r\nimport { connect } from 'react-redux';\r\nimport { allBoardColors } from '../../assets/bgColors/bgColors';\r\nimport { addNewBoard } from '../../store/actions/boardActions';\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nexport class _AddNewBoard extends Component {\r\n\r\n    state = {\r\n        selectedColor: null,\r\n        newBoardName: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({  selectedColor: null, newBoardName: '' })\r\n    }\r\n    \r\n\r\n    onSetColor=(color)=>{\r\n        this.setState({ selectedColor: color })\r\n    }\r\n\r\n    isSelected(color){\r\n        if(this.state.selectedColor === color) return true\r\n        else return false\r\n    }\r\n\r\n    handleChange=(ev)=>{\r\n        this.setState({ newBoardName: ev.target.value })\r\n    }\r\n\r\n    onSubmit=(ev)=>{\r\n        ev.preventDefault()\r\n        const boardColor = this.state.selectedColor\r\n        const boardName = this.state.newBoardName\r\n        this.props.addNewBoard(boardName, boardColor)\r\n    }\r\n\r\n    render() {    \r\n        \r\n        return (\r\n            <ClickAwayListener onClickAway={this.props.onCloseModal}>\r\n            <div className=\"add-board-container\">\r\n                {/* <button onClick={ this.props.onCloseModal }>x</button> */}\r\n                <h3>New board</h3>\r\n                <input onChange={this.handleChange} type=\"text\" placeholder=\"New Board's Name\" autoFocus />\r\n                <div className=\"new-board-colors-container\">\r\n                    {\r\n                        allBoardColors.map(boardColor => {\r\n                            return <NewBoardColor \r\n                                color={boardColor.color}\r\n                                key={boardColor.id}\r\n                                onSetColor={this.onSetColor}\r\n                                isSelected={this.isSelected(boardColor.color)}\r\n                            />\r\n                        })\r\n                    }\r\n                </div>\r\n                <button onClick={  this.onSubmit  }>Add New Board</button>\r\n            </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n// colors are now imported from another file\r\n// need to remove this line and only bring the board\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boardColors: state.boardReducer.board.boardColors,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n        addNewBoard\r\n}\r\n\r\nexport const AddNewBoard = connect(mapStateToProps, mapDispatchToProps)(_AddNewBoard)","export default __webpack_public_path__ + \"static/media/snorelax.d7380d15.png\";","// This contains link to boards (project view) and user details\r\n\r\nimport React, { Component } from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { AddNewBoard } from './BoardHeader/AddNewBoard'\r\n\r\nimport snorelax from '../assets/icons/snorelax.png'\r\nimport logo from '../assets/icons/opus2.png'\r\n\r\nexport class Navbar extends Component {\r\n\r\n    state = {\r\n        isNewBoardModalShown: false\r\n    }\r\n\r\n    toggleModal = () => {\r\n        this.setState({ isNewBoardModalShown: !this.state.isNewBoardModalShown })\r\n    }\r\n\r\n    onCloseModal = () => {\r\n        this.setState({ isNewBoardModalShown: false })\r\n    }\r\n\r\n    showLove = () => {\r\n        alert('Snorelax Loves you 💤🌷')\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"navbar-container\">\r\n                <div className=\"navbar-left-container\">\r\n                    <div className=\"board-header-btn left\"><NavLink to='main-url'><span className=\"material-icons\">home</span></NavLink></div>\r\n                    <div className=\"board-header-btn left\"><NavLink to='/board'><span className=\"material-icons\">view_list</span><h4 className=\"boards-text\">Boards</h4></NavLink></div>\r\n                </div>\r\n\r\n                <div onClick={this.showLove} style={{ cursor: \"pointer\" }} className=\"header-logo\"><img src={snorelax} alt=\"\" /></div>\r\n\r\n                <div className=\"navbar-right-container\">\r\n                    <div className=\"board-header-btn right\" onClick={this.toggleModal}><span className=\"material-icons\">add</span></div>\r\n                    {this.state.isNewBoardModalShown && <AddNewBoard onCloseModal={this.onCloseModal} />}\r\n                    <div className=\"board-header-btn right\"><NavLink to='/login'><h4 className=\"login-text\">Login</h4></NavLink></div>\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n// in the Login NavLink will be prop from store if the user is logged in it will\r\n// show its name initials","import React, { Component } from 'react'\r\nimport { useSpring , animated } from 'react-spring'\r\n\r\n\r\nexport function Login () {\r\n\r\n    const fade = useSpring({\r\n        from:{ opacity: 0, transform: 'translate3d(100%,0,0)' },\r\n        to:{ opacity: 1, transform: 'translate3d(0%,0,0)' },\r\n        leave:{ opacity: 0, transform: 'translate3d(-50%,0,0)' }\r\n    })\r\n\r\n        return (\r\n            <animated.div className=\"login-container\" style={fade}>\r\n                <h1>this is login</h1>\r\n            </animated.div>\r\n        )\r\n}\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport logo from './logo.svg';\r\nimport { Home } from './pages/Home';\r\nimport './assets/styles/global.scss'\r\nimport { Route, Switch } from 'react-router';\r\nimport { CardDetails } from './cmps/CardCmps/CardDetails';\r\nimport { Board } from './pages/Board';\r\nimport { Navbar } from './cmps/Navbar';\r\nimport userService from './services/userService';\r\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd'\r\nimport { connect } from 'react-redux';\r\nimport { updateBoard, updatePosition } from './store/actions/boardActions';\r\nimport { BoardHub } from './pages/BoardHub';\r\nimport { Login } from './pages/Login';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Notify } from './cmps/Notify';\r\n\r\n\r\n\r\nclass _App extends Component {\r\n\r\n  componentDidMount() {\r\n    userService.loginDefault()\r\n    toast.configure()\r\n  }\r\n  \r\n  onDragEnd = (result) => {\r\n\r\n    // console.log((this.props.filterBy));\r\n    // console.log((this.props.filterBy.filterBy.txt));\r\n    // console.log((this.props.filterBy.filterBy.labels));\r\n    // console.log(this.props.filterBy.filterBy.labels.length)\r\n    // const{ filterBy } = this.props\r\n\r\n    // // return\r\n\r\n    // if (this.props.filterBy.filterBy.txt || this.props.filterBy.filterBy.labels.length) {\r\n    //   console.log(this.props.filterBy.filterBy.labels.length)\r\n    //   return\r\n    // }\r\n\r\n    const { destination, source, draggableId, type } = result\r\n\r\n    if (!destination) return\r\n    if (destination.droppableId === source.droppableId && destination.index === source.index) return\r\n\r\n\r\n\r\n\r\n    if (type === 'card') {\r\n      const startGroupIndex = this.props.board.groups.findIndex(group => group.id === source.droppableId)\r\n      const endGroupIndex = this.props.board.groups.findIndex(group => group.id === destination.droppableId)\r\n\r\n      // moving in the same group\r\n      if (source.droppableId === destination.droppableId) {\r\n\r\n        const currGroup = this.props.board.groups.find(group => group.id === source.droppableId)\r\n        const currCard = currGroup.cards.find(card => card.id === draggableId)\r\n        const newCardsGroup = Array.from(currGroup.cards)\r\n        newCardsGroup.splice(source.index, 1)\r\n        newCardsGroup.splice(destination.index, 0, currCard)\r\n        const newGroup = { ...currGroup, cards: newCardsGroup }\r\n        const newGroups = [...this.props.board.groups]\r\n        newGroups[startGroupIndex] = newGroup\r\n        const newBoard = { ...this.props.board, groups: newGroups }\r\n        this.props.updatePosition(newBoard)\r\n        // this.props.updateBoard(newBoard)\r\n        return\r\n      }\r\n\r\n      // moving between groups\r\n      if (source.droppableId !== destination.droppableId) {\r\n\r\n        const destinationGroup = this.props.board.groups.find(group => group.id === destination.droppableId)\r\n        const formerGroup = this.props.board.groups.find(group => group.id === source.droppableId)\r\n        const currCard = formerGroup.cards.find(card => card.id === draggableId)\r\n        const formerCardIndex = formerGroup.cards.findIndex(card => card.id === draggableId)\r\n        const newCardsArray = Array.from(destinationGroup.cards)\r\n\r\n        newCardsArray.splice(destination.index, 0, currCard)\r\n        formerGroup.cards.splice(formerCardIndex, 1)\r\n\r\n        const newGroups = [...this.props.board.groups]\r\n        newGroups[startGroupIndex] = formerGroup\r\n        newGroups[endGroupIndex].cards = newCardsArray\r\n\r\n        const newBoard = { ...this.props.board, groups: newGroups }\r\n        this.props.updatePosition(newBoard)\r\n        // this.props.updateBoard(newBoard)\r\n        return\r\n      }\r\n    }\r\n\r\n    if (type === 'group') {\r\n\r\n      const newGroupsOrder = Array.from(this.props.board.groups)\r\n      const currGroup = this.props.board.groups.find(group => group.id === draggableId)\r\n      newGroupsOrder.splice(source.index, 1)\r\n      newGroupsOrder.splice(destination.index, 0, currGroup)\r\n\r\n      const newBoard = {\r\n        ...this.props.board,\r\n        groups: newGroupsOrder\r\n      }\r\n      this.props.updatePosition(newBoard)\r\n      // this.props.updateBoard(newBoard)\r\n      return\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { style } = this.props\r\n    return (\r\n\r\n      (this.props.style)\r\n        ? <DragDropContext onDragEnd={this.onDragEnd}>\r\n          <div className=\"app-bg\" style={{backgroundImage: style.bgImg}}>\r\n            <div className=\"App\">\r\n              <header className=\"App-header\">\r\n                <Navbar />\r\n              </header>\r\n              <main className=\"app-main\">\r\n              <Notify />\r\n              <Switch>\r\n                <Route path=\"/board/:id/:cardId?\" component={Board} />\r\n                <Route path=\"/login\" component={Login} />\r\n                <Route component={Home} path='/:view' />\r\n              </Switch>\r\n              </main>\r\n            </div>\r\n          </div>\r\n        </DragDropContext>\r\n        : <div>loading</div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardReducer.board,\r\n    style: state.boardReducer.style,\r\n    filterBy: state.boardReducer.filterBy\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  updateBoard,\r\n  updatePosition\r\n};\r\n\r\nexport const App = connect(mapStateToProps, mapDispatchToProps)(_App);\r\n\r\n// <div className=\"groups-list-bg\" \r\n// style={{\r\n// backgroundImage: style.bgImg,\r\n// color: style.fontClr\r\n// }}\r\n// >\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","\r\nconst initialState = {\r\n  board: {},\r\n  filterBy: null,\r\n  style: {},\r\n  fullLabel: false\r\n};\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_BOARD':\r\n      return { ...state, board:action.board };\r\n\r\n    case 'FILTER_BY':\r\n      return {...state, filterBy: action}\r\n      \r\n    case 'TOGGLE_FULL_LABEL':\r\n        if (state.fullLabel) return {...state,fullLabel : false}\r\n        return {...state,fullLabel:true}\r\n\r\n    case 'SET_STYLE':\r\n        return{ ...state, style: action.style }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","let localLoggedinUser = null;\r\nif (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n  loggedInUser: localLoggedinUser,\r\n  users: []\r\n};\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      return { ...state, loggedInUser: action.user };\r\n    case 'USER_REMOVE':\r\n      return {\r\n        ...state,\r\n        users: state.users.filter(user => user._id !== action.userId)\r\n      };\r\n    case 'SET_USERS':\r\n      return { ...state, users: action.users };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport boardReducer from './boardReducer';\r\nimport userReducer from './userReducer'\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    userReducer,\r\n    boardReducer\r\n})\r\n\r\nexport default rootReducer;","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers/rootReducer.js';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(\r\n    rootReducer,\r\n    composeEnhancers(applyMiddleware(thunk))\r\n);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { App } from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n// import './assets/styles/global.scss'\r\nimport { store } from './store/store';\r\n\r\n// const webpack = require('webpack')\r\n\r\n\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <HashRouter>\r\n            <App />\r\n        </HashRouter>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n)\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\n","import Axios from 'axios';\r\n\r\n// this is for db.json\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n    // open this instead when switching to MongoDB\r\n// const BASE_URL = process.env.NODE_ENV === 'production'\r\n// ? '/api/'\r\n// : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        // console.log('updating')\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n            window.location.assign('/#/login');\r\n        }\r\n        throw err;\r\n    }\r\n}","\r\nfunction loadFromStorage(key) {\r\n    var val = localStorage.getItem(key)\r\n    return (val) ? JSON.parse(val) : null;\r\n}\r\n\r\nfunction saveToStorage(key, val) {\r\n    localStorage[key] = JSON.stringify(val);\r\n}\r\n\r\n\r\nexport default  {\r\n    loadFromStorage,\r\n    saveToStorage\r\n}","import storageService from './storageService'\r\nimport httpService from './httpService'\r\n\r\nconst userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update,\r\n    loginDefault,\r\n    getLoggedInUser,\r\n\r\n    getUsersFromDb\r\n}\r\n\r\n// window.userService = userService;\r\nexport default userService;\r\n\r\nfunction loginDefault() {\r\n    const defaultGuest= {\r\n        \"_id\": \"u900\",\r\n        \"username\": \"Guest\",\r\n        \"fullname\": \"Guesty guest\",\r\n        \"imgUrl\": \"https://images-na.ssl-images-amazon.com/images/I/41v4Cc8iZ-L._AC_.jpg\"\r\n      }\r\n\r\n      _handleLogin(defaultGuest)\r\n}\r\n\r\nasync function getUsersFromDb() {\r\n    return httpService.get('user')\r\n}\r\n\r\nfunction getUsers() {\r\n    return storageService.query('user')\r\n}\r\n\r\nfunction getLoggedInUser() {\r\n    return storageService.loadFromStorage('user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    // return httpService.get(`user/${userId}`)\r\n    return storageService.get('user', userId)\r\n}\r\nfunction remove(userId) {\r\n    // return httpService.delete(`user/${userId}`)\r\n    return storageService.remove('user', userId)\r\n}\r\n\r\nfunction update(user) {\r\n    return storageService.put('user', user)\r\n    // return httpService.put(`user/${user._id}`, user)\r\n}\r\n\r\nasync function login(userCred) {\r\n    // const user = await httpService.post('auth/login', userCred)\r\n    const users = await storageService.query('user')\r\n    const user = users.find(user => user.username === userCred.username)\r\n    if (user) return _handleLogin(user)\r\n}\r\nasync function signup(userCred) {\r\n    // const user = await httpService.post('auth/signup', userCred)\r\n    const user = await storageService.post('user', userCred)\r\n    return _handleLogin(user)\r\n}\r\nasync function logout() {\r\n    // await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\n// function _handleLogin(user) {\r\n//     sessionStorage.setItem('user', JSON.stringify(user))\r\n//     return user;\r\n// }\r\n\r\nfunction _handleLogin(user) {\r\n    // THIS SAVES TO LOCAL STORAGE INSTEAD OF SESSION STORAGE!!!\r\n        localStorage.setItem('user', JSON.stringify(user))\r\n        return user;\r\n    }"],"sourceRoot":""}