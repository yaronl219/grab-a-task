{"version":3,"sources":["services/cardService/cardService.js","services/boardService.js","assets/icons/newLogoFutura.png","assets/icons/favicon.png","services/httpService.js","services/userService.js","services/utils.js","assets/imgs/opus.png","cmps/BoardHeader/MemberPreview.jsx","store/actions/boardActions.js","cmps/AddMemberModal.jsx","cmps/BoardHeader/MemberList.jsx","cmps/BoardHeader/Label.jsx","cmps/BoardHeader/FilterByLabel.jsx","cmps/BoardHeader/Filter.jsx","services/notificationService.js","cmps/Sidebar/ActivityLog.jsx","cmps/BoardHeader/Notifications.jsx","cmps/BoardHeader/BoardHeader.jsx","store/actions/userActions.js","cmps/CardCmps/CardPreviewDueDate.jsx","cmps/CardCmps/CardDueDateSetter.jsx","cmps/CardCmps/CardNewChecklist.jsx","cmps/Share.jsx","cmps/CardCmps/CardSidebar.jsx","cmps/CardCmps/CardDescription.jsx","cmps/CardCmps/CardDetailsHeader.jsx","cmps/CardCmps/CardLabels.jsx","cmps/CardCmps/CardChecklistTodo.jsx","cmps/CardCmps/CardChecklist.jsx","cmps/CardCmps/CardChecklistList.jsx","cmps/CardCmps/CardAddComment.jsx","cmps/Sidebar/LabelEditModal.jsx","cmps/Sidebar/LabelPalette.jsx","cmps/CardCmps/CardMember.jsx","cmps/CardCmps/CardMembersList.jsx","services/cloudService.js","cmps/CardCmps/CardImgUpload.jsx","cmps/CardCmps/CardDetailsAttachment.jsx","cmps/CardCmps/CardImagesList.jsx","cmps/CardCmps/CoverSelector.jsx","cmps/CardCmps/CardDetails.jsx","cmps/CardCmps/CardPreviewActions.jsx","cmps/CardCmps/CardPreview.jsx","cmps/NewItem.jsx","store/actions/groupActions.js","cmps/GroupCmps/GroupMenu.jsx","cmps/Group.jsx","cmps/GroupCmps/AddNewGroup.jsx","cmps/GroupList.jsx","cmps/Sidebar/SidebarHeader.jsx","cmps/Sidebar/AboutBoard.jsx","cmps/Sidebar/ChangeBackground.jsx","assets/imgs/backgrounds/bg-1.jpg","cmps/Sidebar/SideArchive.jsx","cmps/Sidebar/LabelPanel.jsx","services/templateService.js","services/socketService.js","cmps/Sidebar/CreateTemplate.jsx","cmps/Sidebar/Sidebar.jsx","pages/Board.jsx","cmps/BoardHeader/NewBoardColor.jsx","assets/bgColors/bgColors.js","cmps/BoardHeader/AddNewBoard.jsx","cmps/LoginDrawer.jsx","cmps/Users/UserDetails.jsx","cmps/Users/UserActivities.jsx","cmps/Users/UserCardsPreview.jsx","cmps/Users/UserCards.jsx","cmps/Users/UsersMain.jsx","cmps/Navbar.jsx","pages/Login.jsx","cmps/Notify.jsx","assets/imgs/yaron.jpeg","assets/imgs/elad2.jpeg","pages/Home.jsx","cmps/BoardSelector/BoardPreview.jsx","cmps/BoardSelector/BoardHub.jsx","cmps/BoardSelector/BoardSelection.jsx","pages/AnalysisDashboard.jsx","App.js","serviceWorker.js","store/reducers/boardReducer.js","store/reducers/userReducer.js","store/reducers/rootReducer.js","store/store.js","index.js","services/storageService.js"],"names":["cardService","addCard","createImage","imgRef","type","id","utils","makeId","src","title","createdAt","Date","now","board","cardTxt","groupId","a","newBoard","JSON","parse","stringify","newCard","description","archivedAt","members","labels","dueDate","attachments","timeAnalysis","timeInGroupsMap","currGroup","enteredAt","byMember","groups","map","group","cards","push","boardService","updateBoard","add","query","filterBy","params","createQueryString","httpService","get","remove","boardId","delete","getBoardById","filter","addNewBoard","createActivity","partialActivity","user","userService","getLoggedInUser","activity","txt","commentTxt","_id","fullname","imgUrl","card","archiveBoard","post","addedBoard","put","console","log","isArchived","Promise","resolve","boardToReturn","newGroup","toLowerCase","includes","length","currLabels","find","label","searchedLabel","currLabel","boardName","boardColor","currUser","activities","createdBy","fullName","style","fontClr","bgImg","module","exports","axios","Axios","create","withCredentials","ajax","endpoint","method","data","url","res","dir","response","status","window","location","assign","login","logout","signup","getUsers","storageService","getById","userId","update","loginDefault","_handleLogin","getUserDetails","getUsersFromDb","loggedInUser","loadFromStorage","userCred","users","username","sessionStorage","clear","localStorage","setItem","getUniqueHeaders","items","key","uniqueItems","forEach","item","getRandomColor","opacity","strHtml","calculatePercentToHex","chars","i","charAt","getRandomInteger","possible","Math","floor","random","URI","Object","keys","val","encodeURIComponent","replace","join","queryParams","URLSearchParams","toString","max","min","percentage","round","MemberPreview","state","testImage","callback","timer","timeout","timedOut","img","Image","onerror","onabort","clearTimeout","onload","setTimeout","setImgResult","setState","getStyle","backgroundImage","props","getName","name","this","newName","split","toUpperCase","Tooltip","className","Fragment","getInitials","Component","loadBoard","dispatch","addActivity","unshift","updateCard","newActivity","groupIdx","findIndex","cardIdx","addLabel","newLabel","removeLabel","labelId","labelIdx","splice","updateLabel","updatedlabel","onSetFilterBy","filteredBoard","setStyle","setDefaultStyle","text","_AddMemberModal","searchLetters","toggleUser","member","removeMember","addToMembers","getMembers","handleChange","search","target","value","allExistingUsers","ClickAwayListener","onClickAway","onCloseModal","onChange","autoCorrect","autoComplete","toLocaleLowerCase","onClick","mapDispatchToProps","userToPush","memberIdx","AddMemberModal","connect","boardReducer","allUsers","userReducer","MemberList","isModalShown","onShowModal","Label","isChecked","onFilterByLabel","color","_FilterByLabel","currFilter","onResetFilter","toggleModal","IconButton","onClose","CloseOutlined","FilterByLabel","Filter","isLabelModalShown","ref","React","createRef","onFilter","handleLabel","openModal","closeModal","Popover","anchorOrigin","vertical","horizontal","transformOrigin","open","anchorEl","current","onBackdropClick","require","default","notificationService","onLoad","getUpdated","setUpdated","lastUpdated","saveToStorage","ActivityLog","displayMode","slice","to","timeago","CircularProgress","Notifications","onlyNonUserAlerts","isOpen","isRinging","alerts","newActivities","onOpen","getIsRinging","boardActivities","prevProps","prevState","lastUpdate","receiveUpdate","ringBell","ms","Badge","badgeContent","getNotificationPreview","_BoardHeader","loadAllUsers","onToggleSidebar","BoardHeader","CardPreviewDueDate","daysRemaining","date","month","toLocaleString","day","getDate","parsedDate","abs","year","getFullYear","displayTime","hour","toLocaleTimeString","dueDateClass","fontSize","CardDueDateSetter","isPopperOpen","anchor","setDefaultDate","onSetDueDate","ev","formDate","timestamp","getTime","submitDueDate","onUpdateDueDate","onRemoveDueDate","getDisplayDateBtn","displayDate","Button","parseDate","timeArray","getMonth","getHours","getMinutes","noValidate","TextField","onBlur","InputLabelProps","shrink","CardNewChecklist","isEditing","txtValue","setEditing","setNotEditing","onSubmit","preventDefault","checklist","onUpdate","getNewChecklistDisplay","autoFocus","onMouseDown","Share","copyRef","copyToClipboard","select","document","execCommand","path","readOnly","CardSidebar","anchorRef","toggleCoverSelector","onArchiveCard","toggleLabelPallete","toggleDisplayMembers","isUploading","disabled","size","toggleUploadDropzone","onUpdateChecklists","href","CardDescription","setDescriptionFromProps","onSave","onUpdateDesc","getDescriptionTxt","getIsEditing","placeholder","CardDetailsHeader","onChangeText","headerTxt","CardLabels","cardLabels","boardLabels","idx","onClickLabel","boardLabel","preview","isFull","displayLabel","CardChecklistTodo","isDone","isNew","removeText","getNewTodoDisplay","getTodoClassName","doneClass","getTextBox","Checkbox","checked","onCheck","onRemove","updateChecklist","updateTodo","todo","checkStatus","getActivityTxt","stopPropagation","activityTxt","displayCompleted","CardChecklist","tasksCompleted","totalTasks","showDialog","setTasksStatus","todos","toggleDisplayCompleted","getDisplayCheckedBtn","btnContent","onRemoveChecklist","closeDialog","openDialog","getPercentCompleted","onUpdateChecklist","newTodo","todoIdx","LinearProgress","variant","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","CardChecklistList","checklists","CardAddComment","onAddComment","getNewCommentDisplay","placeholer","Accordion","expanded","classes","root","AccordionSummary","aria-controls","AccordionDetails","LabelEditModal","action","setLabelEditId","onRemoveLabel","defaultValue","required","hidden","defaultChecked","htmlFor","_LabelPalette","labelEditId","onAddLabel","labelName","newColor","onEditLabel","labelColor","updatedLabel","onToggleLabelToCard","cardLabel","LabelPalette","CardMember","isUserChecked","initials","boardMember","cardMembers","Boolean","toggleMember","Avatar","width","CardMembersList","boardMembers","filterBoardMembers","filteredMembers","onSelectBoardMember","shouldAdd","cardMember","updateCardMembers","toggleList","cloudService","uploadImg","file","UPLOAD_URL","formData","FormData","append","fetch","body","json","secure_url","CardImgUpload","setUploading","submitImage","onAddImage","files","acceptedFiles","cancelButtonText","submitButtonText","maxFileSize","toggleOpen","showPreviews","showFileNamesInPreview","CardDetailsAttachment","att","updateAttFromProps","attachment","bool","then","CardImagesList","CoverSelector","cover","setCoverFromProps","colors","onSelectCover","onRemoveCover","getImageEls","imageEls","el","getColorEls","backgroundColor","_CardDetails","groupName","commentsOnly","isLabelPaletteShowing","isCardMemeberShown","isUploadZoneOpen","isCoverSelectorShown","getCardDetails","foundCard","cardId","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","history","onCloseCard","toggleCommentsOnly","toggleLabelPalette","getLabels","openEditLabelsModal","submitCard","onUpdateHeader","getCardDetailsMembers","cardMembersEl","onUpdateCardMembers","onUpdateCover","newImg","onUpdateAttachments","newAttachment","newChecklist","getFilteredActivities","cardActivities","getCardCover","aria-label","switchGroup","CardDetails","withRouter","_CardPreviewActions","offsetTop","offsetLeft","isMemberListOpen","onKeyPress","toggleCardMembersMenu","getParentPos","pos","parentElement","getBoundingClientRect","top","left","cardCover","getCardPath","getCurrTitle","cardStyle","attrs","CardPreviewActions","_CardPreview","onSetEditing","onSetNotEditing","onOpenCardActions","getCardPreviewStyle","bgColor","getCardPreviewMembers","getCardPreviewAttachments","cardAtt","getCardPreviewHoldDesc","cardDesc","getCardPreviewComments","cardComm","onOpenCardDetails","getCardPreviewChecklist","doneTodos","totalTodos","getCardPreviewAttrs","every","onToggleLabels","toggleFullLabels","componentDidMount","draggableId","index","provided","snapshot","draggableProps","dragHandleProps","innerRef","isDragging","fullLabel","CardPreview","NewItem","onKeyDown","placeHolderTxt","addBtnTxt","addItemTxt","onAdd","_GroupMenu","archiveAllCards","onArchiveAllCards","toggleMenu","archiveGroup","onArchiveGroup","newCards","GroupMenu","_Group","currGroupName","currGroupId","isMenuShown","isChangeGroupShown","onAddCard","getAddItemTxt","isShown","closeChangeGroupName","onOpenChangeGroupName","handleChangeGroupName","setNewGroupName","spellCheck","onFocus","droppableId","droppableProps","trim","newGroupName","Group","_AddNewGroup","newGroupTitle","event","onAddNewGroup","closeNewGroup","groupTitle","groupToPush","AddNewGroup","GroupList","isNewGroupShown","onAddGroup","direction","SidebarHeader","titleTxt","onSetMenuOpt","Divider","_AboutBoard","isEditDesc","isEditTitle","currDesc","currTitle","setCurrDesc","setCurrTitle","onEditDesc","onEditTitle","isShowing","Drawer","BackdropProps","hideBackdrop","resize","cols","rows","cursor","AboutBoard","_ChangeBackground","onSetBoardStyle","bgClr","backgroundRepeat","backgroundSize","ChangeBackground","_SideArchive","isShowingCards","archive","archivedCards","archivedGroups","loadArchive","onUnArchiveCard","onDeleteCard","deleteCard","onUnArchiveGroup","updateGroup","SideArchive","_LabelPanel","LabelPanel","templateService","createTemplateFromBoard","createBoardFromTemplate","templateId","template","templateName","socket","CreateTemplate","includeAttachments","includeChecklists","includeLabels","ListItemIcon","FormControl","FormLabel","component","FormGroup","FormControlLabel","control","_Sidebar","selectedMenuOpt","DynamicCmp","isSidebarShowing","ListItem","button","ListItemText","Link","Sidebar","setup","io","terminate","on","eventName","cb","off","emit","_Board","lastReceivedUpdateAt","showUpdateMessage","prevBoard","differ","detailedDiff","added","deleted","updated","getBoardFromParams","match","socketService","updatedBoard","resetBoard","err","Board","NewBoardColor","isSelected","onSetColor","allBoardColors","_AddNewBoard","selectedColor","newBoardName","redirectPath","AddNewBoard","LoginDrawer","loginOrSignup","credentials","setSignup","hideLoginDrawer","showBackdrop","logo","alt","initialValues","email","password","validate","values","errors","test","handleSubmit","isSubmitting","makeStyles","theme","backdrop","zIndex","drawer","UserDetails","getUserDetailsFromProps","isLoading","UserActivities","selectedBoard","boards","selection","getActivitiesFromProps","getBoardList","uniqueIds","uniqueBoards","getFilteredActivites","InputLabel","NativeSelect","UserCardsPreview","displayArchived","onSelectBoard","cardCreatedAt","UserCards","onCloseUserDetails","userData","entries","entry","_Users","view","setView","userDeatils","userActivities","BottomNavigation","newValue","showLabels","BottomNavigationAction","icon","onSwitching","containerStyle","height","Users","_Navbar","isNewBoardModalShown","isLoginDrawerShown","isUserDetailsOpen","showLove","alert","showLoginDrawer","nativeEvent","stopImmediatePropagation","onOpenUserDetails","logoFutura","Navbar","_Login","Login","Notify","Home","yaron","elad","BoardPreview","lastEdited","toDateString","onSelect","_BoardHub","header","createBoard","onAddBoard","BoardHub","BoardSelection","templatesPage","boardsPage","boardsPerPage","templatesPerPage","totalBoardPages","totalTemplatePages","templates","templateLoading","selectedTemplate","isCreateTemplateOpen","isCreateBoardOpen","getBoards","limit","skip","ceil","boardSize","getTemplates","templateSize","onSelectTemplate","onCloseCreateTemplate","onCreateBoardFromTemplate","onRemoveBoard","onRemoveTemplate","onChangeTemplatePage","page","onChangeBoardPage","onRedirect","onCloseCreateBoard","onOpenCreateBoard","Pagination","count","defaultPage","shape","_AnalysisDashboard","getRndHexColor","getDataForChart","mapObject","rndClrs","datasets","hoverBackgroundColor","dashboardNumbers","numOfMembers","unarchivedCardsCount","archivedCardsCount","todosCount","reduce","acc","total","colorClass","cardsByGroups","cardsByGroupsMap","unArchivedCards","cardsByMembers","cardsByMembersMap","memberCardsCount","j","some","currMember","options","legend","display","scales","xAxes","ticks","beginAtZero","timeInGroups","groupIdNameMap","timeSpent","time","currPastGroupName","timeCardSpentInCurrGroup","lineData","toFixed","barsData","clr1","clr2","fill","borderColor","pointBorderColor","pointBackgroundColor","pointHoverBackgroundColor","pointHoverBorderColor","yAxisID","hoverBorderColor","responsive","tooltips","mode","elements","line","gridLines","yAxes","show","cardsByLabels","colorsMap","green","yellow","orange","red","purple","blue","grey","black","labelsMap","cardsWithLabelCount","borderWidth","strokeColor","highlightFill","highlightStroke","AnalysisDashboard","_App","onDragEnd","result","destination","source","startGroupIndex","endGroupIndex","currCard","newCardsGroup","Array","from","newGroups","updatePosition","destinationGroup","formerGroup","formerCardIndex","newCardsArray","currCardTime","newGroupsOrder","configure","onDragStart","backgroundPosition","newBoardPositioning","App","hostname","initialState","defaultStyle","localLoggedinUser","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message","getItem"],"mappings":"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","file":"static/js/main.1480bab2.chunk.js","sourcesContent":["\r\nimport { utils } from '../utils'\r\nimport { boardService } from '../boardService';\r\n\r\nexport const cardService = {\r\n    addCard,\r\n    createImage\r\n}\r\n\r\n\r\nfunction createImage(imgRef) {\r\n    const attachment = {\r\n        type: 'img',\r\n        id: utils.makeId(),\r\n        src: imgRef,\r\n        title: 'Image',\r\n        createdAt: Date.now()\r\n    }\r\n    return attachment\r\n\r\n}\r\n\r\nasync function addCard(board, cardTxt, groupId) {\r\n    const newBoard = JSON.parse(JSON.stringify(board))\r\n    const newCard = {\r\n        id: utils.makeId(),\r\n        title: cardTxt,\r\n        description: '',\r\n        archivedAt: null,\r\n        members: [],\r\n        labels: [],\r\n        createdAt: Date.now(),\r\n        dueDate: null,\r\n        attachments: null,\r\n        timeAnalysis:{ \r\n            timeInGroupsMap:{},\r\n            currGroup: {\r\n                groupId,\r\n                enteredAt: Date.now()\r\n            }\r\n         },\r\n        byMember: {\r\n            // add user info here from session storage:\r\n            //                         \"byMember\": {\r\n            //                             \"_id\": \"u101\",\r\n            //                             \"username\": \"Tal\",\r\n            //                             \"fullname\": \"Tal Tarablus\",\r\n            //                             \"imgUrl\": \"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg\"\r\n            //                         },\r\n        }\r\n    }\r\n    newBoard.groups.map(group => {\r\n        if (group.id === groupId) {\r\n            group.cards.push(newCard)\r\n            return group\r\n        }\r\n        return group\r\n    })\r\n    await boardService.updateBoard(newBoard)\r\n    return newBoard\r\n}\r\n","import httpService from './httpService';\r\nimport userService from './userService';\r\nimport { utils } from './utils'\r\n\r\nexport const boardService = {\r\n    add,\r\n    query,\r\n    remove,\r\n    getBoardById,\r\n    updateBoard,\r\n    filter,\r\n    addNewBoard,\r\n    createActivity,\r\n    archiveBoard\r\n};\r\n\r\nfunction createActivity(partialActivity) {\r\n    // activity = {txt:'your text here'}\r\n    // This fn needs to receive an object with the card id and title and the text in theh following format:\r\n    // send to this fn:\r\n    // txt\r\n    // card id\r\n    // card title\r\n    // comment txt as blank\r\n\r\n    const user = userService.getLoggedInUser()\r\n\r\n    const activity = {\r\n        \"id\": utils.makeId(),\r\n        \"txt\": partialActivity.txt,\r\n        \"commentTxt\": partialActivity.commentTxt,\r\n        \"createdAt\": Date.now(),\r\n        \"byMember\": {\r\n            \"_id\": user._id,\r\n            \"fullName\": user.fullname,\r\n            \"imgUrl\": user.imgUrl\r\n        }\r\n    }\r\n    if (partialActivity.card) {\r\n        activity.card = {\r\n            \"id\": partialActivity.card.id,\r\n            \"title\": partialActivity.card.title\r\n        }\r\n    }\r\n    if (!partialActivity.group) {\r\n        activity.group = {...partialActivity.group}\r\n    }\r\n\r\n    return activity\r\n\r\n}\r\n\r\n\r\nfunction query(filterBy) {\r\n    \r\n    const params = (!filterBy) ? '' : utils.createQueryString(filterBy)\r\n    \r\n    return httpService.get(`board${params}`)\r\n}\r\n\r\nfunction getBoardById(boardId) {\r\n    return httpService.get(`board/${boardId}`)\r\n}\r\nfunction remove(boardId) {\r\n    return httpService.delete(`board/${boardId}`);\r\n}\r\nasync function add(board) {\r\n    const addedBoard = await httpService.post(`board`, board);\r\n    return addedBoard\r\n}\r\n\r\nasync function updateBoard(board) {\r\n    const boardId = board._id\r\n    return await httpService.put(`board/${boardId}`, board)\r\n}\r\n\r\n\r\nasync function archiveBoard(boardId) {\r\n    console.log('archive board service')\r\n    const board = await getBoardById(boardId)\r\n    board.isArchived = true\r\n    await updateBoard(board)\r\n    return Promise.resolve(boardId)\r\n}\r\n\r\n\r\n\r\nasync function switchGroup(board, card, oldGroupId, targetGroupId, targetCardIdx) {\r\n    const newBoard = JSON.parse(JSON.stringify(board))\r\n    newBoard.groups = newBoard.groups.map(group => {\r\n        if (group.id === targetGroupId) return [...group.splice(0, targetCardIdx), card, ...group.splice(targetCardIdx + 1)]\r\n        if (group.id === oldGroupId) return group.filter(currCard => currCard.id !== card.id)\r\n        return group\r\n    })\r\n    return await updateBoard(newBoard)\r\n}\r\n\r\nasync function filter(boardId, filterBy) {\r\n\r\n    const boardToReturn = await getBoardById(boardId)\r\n    // text in card filter\r\n    if (filterBy.txt) {\r\n        boardToReturn.groups = boardToReturn.groups.map(group => {\r\n            const newGroup = { ...group }\r\n            newGroup.cards = newGroup.cards.filter(card => {\r\n                return card.title.toLowerCase().includes(filterBy.txt)\r\n            })\r\n            return newGroup\r\n        })\r\n    }\r\n\r\n    // multiple labels filter\r\n    if (filterBy.labels && filterBy.labels.length) {\r\n        const currLabels = filterBy.labels\r\n        boardToReturn.groups = boardToReturn.groups.map(group => {\r\n            const newGroup = { ...group }\r\n            newGroup.cards = newGroup.cards.filter(card => {\r\n                if (card.labels &&\r\n                    card.labels.find(label => {\r\n                        const searchedLabel = label.id\r\n                        // if the searched label equals to the current labels from the label-filter array\r\n                        if (searchedLabel === currLabels.find(currLabel => currLabel === searchedLabel)) {\r\n                            return label\r\n                        }\r\n                    })) {\r\n                    return card\r\n                }\r\n            })\r\n            return newGroup\r\n        })\r\n    }\r\n\r\n    return boardToReturn;\r\n\r\n}\r\n\r\n\r\n    async function addNewBoard(boardName, boardColor, currUser){\r\n\r\n\r\n        const newBoard = {\r\n            title: boardName,\r\n            isArchived: false,\r\n            createdAt: Date.now,\r\n            description: 'Board\\'s description',\r\n            labels: [{\r\n                    \"id\": \"l101\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"green\"\r\n                },\r\n                {\r\n                    \"id\": \"l102\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"yellow\"\r\n                },\r\n                {\r\n                    \"id\": \"l103\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"orange\"\r\n                },\r\n                {\r\n                    \"id\": \"l104\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"red\"\r\n                },\r\n                {\r\n                    \"id\": \"l105\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"purple\"\r\n                },\r\n                {\r\n                    \"id\": \"l106\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"blue\"\r\n                }\r\n            ],\r\n            activities: [],\r\n            createdBy: { // update from currUser\r\n                _id: 'u101', // update from user\r\n                fullName: 'Abi Abambi',\r\n                imgUrl: 'http://some-img'\r\n            },\r\n            style: {\r\n                // id: utils.makeId(),\r\n                fontClr: '#f9f9f9',\r\n                bgImg: null,\r\n                boardColor\r\n            },\r\n            members: [{ // update from currUser\r\n                _id: 'u101', // update from user\r\n                fullName: 'Abi Abambi',\r\n                imgUrl: 'http://some-img'\r\n            }],\r\n            groups:[{\r\n                id: utils.makeId(),\r\n                title: 'Add New Card Title',\r\n                description: \"description\",\r\n                archivedAt: false,\r\n                labels: [],\r\n                cards:[]\r\n            }]\r\n        }        \r\n\r\n        console.log(newBoard);\r\n        \r\n        const addedBoard = await httpService.post(`board`, newBoard);\r\n        return addedBoard\r\n        // push new board to board collection and forword user to the new route\r\n    }\r\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","import Axios from 'axios';\r\n\r\n// this is for db.json\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n    // open this instead when switching to MongoDB\r\n// const BASE_URL = process.env.NODE_ENV === 'production'\r\n// ? '/api/'\r\n// : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        \r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        // console.log('updating')\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n            window.location.assign('/#/login');\r\n        }\r\n        throw err;\r\n    }\r\n}","import storageService from './storageService'\r\nimport httpService from './httpService'\r\n\r\nconst userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update,\r\n    loginDefault,\r\n    getLoggedInUser,\r\n    getUserDetails,\r\n    getUsersFromDb\r\n}\r\n\r\n// window.userService = userService;\r\nexport default userService;\r\n\r\nfunction loginDefault() {\r\n    const defaultGuest = {\r\n        \"_id\": \"u900\",\r\n        \"username\": \"Guest\",\r\n        \"fullName\": \"Guesty guest\",\r\n        \"imgUrl\": \"https://images-na.ssl-images-amazon.com/images/I/41v4Cc8iZ-L._AC_.jpg\"\r\n    }\r\n\r\n    _handleLogin(defaultGuest)\r\n}\r\n\r\n\r\nasync function getUserDetails() {\r\n    const loggedInUser = getLoggedInUser()\r\n    return httpService.get(`user/details/${loggedInUser._id}`)\r\n}\r\n\r\nasync function getUsersFromDb() {\r\n    return httpService.get('user')\r\n}\r\n\r\nfunction getUsers() {\r\n    return storageService.query('user')\r\n}\r\n\r\nfunction getLoggedInUser() {\r\n    return storageService.loadFromStorage('user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    // return httpService.get(`user/${userId}`)\r\n    return storageService.get('user', userId)\r\n}\r\nfunction remove(userId) {\r\n    // return httpService.delete(`user/${userId}`)\r\n    return storageService.remove('user', userId)\r\n}\r\n\r\nfunction update(user) {\r\n    // return storageService.put('user', user)\r\n    return httpService.put(`user/${user._id}`, user)\r\n}\r\n\r\nasync function login(userCred) {\r\n    // const user = await httpService.post('auth/login', userCred)\r\n    const users = await storageService.query('user')\r\n    const user = users.find(user => user.username === userCred.username)\r\n    if (user) return _handleLogin(user)\r\n}\r\nasync function signup(userCred) {\r\n    // const user = await httpService.post('auth/signup', userCred)\r\n    const user = await storageService.post('user', userCred)\r\n    return _handleLogin(user)\r\n}\r\nasync function logout() {\r\n    // await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\n// function _handleLogin(user) {\r\n//     sessionStorage.setItem('user', JSON.stringify(user))\r\n//     return user;\r\n// }\r\n\r\nfunction _handleLogin(user) {\r\n    // THIS SAVES TO LOCAL STORAGE INSTEAD OF SESSION STORAGE!!!\r\n    localStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}","export const utils = {\r\n    getUniqueHeaders,\r\n    getRandomColor,\r\n    getRandomInteger,\r\n    makeId,\r\n    createQueryString\r\n}\r\n\r\n\r\nfunction createQueryString(data) {\r\n    const URI = Object.keys(data).map(key => {\r\n      let val = data[key]\r\n      if (typeof val === 'object') val = createQueryString(val)\r\n      return `${key}=${encodeURIComponent(`${val}`.replace(/\\s/g, '_'))}`\r\n    }).join('&')\r\n    const queryParams = new URLSearchParams(URI)\r\n    return `?${queryParams.toString()}`\r\n  }\r\n\r\nfunction makeId(length = 10) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\nfunction getRandomInteger(max, min = 0) {\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nfunction getUniqueHeaders(items, key) {\r\n    let uniqueItems = []\r\n    items.forEach(item => {\r\n        if (!uniqueItems.includes(item[key])) uniqueItems.push(item[key])\r\n    });\r\n    return uniqueItems\r\n}\r\n\r\nfunction getRandomColor(opacity = 100) {\r\n    let strHtml = '#';\r\n    strHtml += calculatePercentToHex(opacity)\r\n    let chars = '0123456789abcdef';\r\n    for (let i = 0; i < 3; i++) {\r\n        strHtml += chars.charAt(getRandomInteger(chars.length));\r\n    }\r\n    return strHtml;\r\n}\r\n\r\n\r\n\r\nfunction calculatePercentToHex(percentage) {\r\n    const val = Math.round(percentage / 100 * 255)\r\n    const hexString = val.toString(16);\r\n    return hexString\r\n}","module.exports = \"data:image/png;base64,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\"","\r\nimport { Tooltip } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\n\r\nexport class MemberPreview extends Component {\r\n\r\n    state = {\r\n        imgUrl: null\r\n    }\r\n\r\n    \r\n    componentDidMount() {\r\n        this.testImage(this.props.imgUrl, this.setImgResult)\r\n    }\r\n\r\n    testImage = (url, callback, timeout = 5000) => {\r\n\r\n        var timedOut = false, timer;\r\n        var img = new Image();\r\n        img.onerror = img.onabort = function () {\r\n            if (!timedOut) {\r\n                clearTimeout(timer);\r\n                callback(url, \"error\");\r\n            }\r\n        };\r\n        img.onload = function () {\r\n            if (!timedOut) {\r\n                clearTimeout(timer);\r\n                callback(url, \"success\");\r\n            }\r\n        };\r\n        img.src = url;\r\n        timer = setTimeout(function () {\r\n            timedOut = true;\r\n            // reset .src to invalid URL so it stops previous\r\n            // loading, but doesn't trigger new load\r\n            img.src = \"//!!!!/test.jpg\";\r\n            callback(url, \"timeout\");\r\n        }, timeout);\r\n    }\r\n\r\n\r\n    getInitials(name) {\r\n        if (!name) return\r\n        const newName = name.split(' ')\r\n        const firstLetter = newName[0].charAt(0).toUpperCase()\r\n        const secondLetter = newName[1].charAt(0).toUpperCase()\r\n        const initials = firstLetter + secondLetter\r\n        return initials\r\n    }\r\n\r\n    setImgResult = (url, res) => {\r\n        if (res === 'success') this.setState({ imgUrl: url })\r\n    }\r\n\r\n    getStyle = () => {\r\n        if (this.state.imgUrl) return { backgroundImage: `url(${this.props.imgUrl})` }\r\n        return {}\r\n    }\r\n\r\n    getName = () => {\r\n        if (this.props.name) return this.props.name\r\n        return ''\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Tooltip title={this.getName()}>\r\n                <div className=\"member-preview\" style={this.getStyle()}>\r\n                    {(this.state.imgUrl) ? <React.Fragment /> : this.getInitials(this.props.name)}\r\n                </div>\r\n            </Tooltip>\r\n        )\r\n    }\r\n}\r\n","import { boardService } from \"../../services/boardService\";\r\n\r\n\r\nexport function loadBoard(boardId) {\r\n  return async dispatch => {\r\n    try {\r\n      const board = await boardService.getBoardById(boardId);\r\n      dispatch({ type: 'SET_BOARD', board });\r\n    } catch (err) {\r\n      console.log('boardAction: error in board action', err);\r\n      throw err;\r\n    }\r\n  };\r\n}\r\n\r\nexport function resetBoard() {\r\n  return dispatch => {\r\n    try {\r\n      dispatch({type: 'SET_BOARD', board:null})\r\n    } catch (err) {\r\n      console.log('board action error in reseting board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function addActivity(board, activity) {\r\n\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      if (!newBoard.activities) newBoard.activities = []\r\n      newBoard.activities.unshift(activity)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error removing board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function toggleFullLabels() {\r\n  return dispatch => {\r\n    dispatch({ type: 'TOGGLE_FULL_LABEL' })\r\n  }\r\n}\r\n\r\n\r\n// check that it updates the db\r\nexport function updateCard(board, newCard, newActivity) {\r\n\r\n  return async dispatch => {\r\n    try {\r\n      // replicate board\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      // find the group idx\r\n      const groupIdx = newBoard.groups.findIndex(group => group.cards.find(card => card.id === newCard.id))\r\n      // find the card idx\r\n      const cardIdx = newBoard.groups[groupIdx].cards.findIndex(card => card.id === newCard.id)\r\n      // replace the card content\r\n      newBoard.groups[groupIdx].cards[cardIdx] = newCard\r\n\r\n      // add activity\r\n\r\n      if (newActivity) {\r\n        const activity = boardService.createActivity(newActivity)\r\n        newBoard.activities.unshift(activity)\r\n      }\r\n\r\n\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n      // newBoard = boardService.updateBoard(newBoard) // updating the DB\r\n\r\n    } catch (err) {\r\n      console.log('error updating card', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function addLabel(board, newLabel) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      newLabel.id = makeId()\r\n      if (!newBoard.labels) newBoard.labels = [];\r\n      newBoard.labels.push(newLabel)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error adding label', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeLabel(board, labelId) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const labelIdx = newBoard.labels.findIndex(label => label.id === labelId)\r\n      newBoard.labels.splice(labelIdx, 1)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error removing label', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updateLabel(board, updatedlabel) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      newBoard.labels = newBoard.labels.map(label => {\r\n        if (label.id === updatedlabel.id) label = updatedlabel\r\n        return label\r\n      })\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating label', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function deleteCard(board, cardId) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.cards.find(card => card.id === cardId))\r\n      const cardIdx = newBoard.groups[groupIdx].cards.findIndex(card => card.id === cardId)\r\n      newBoard.groups[groupIdx].cards.splice(cardIdx, 1)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error deleting card', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updateGroup(board, newGroup) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.id === newGroup.id)\r\n      newBoard.groups[groupIdx] = newGroup;\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating group', err)\r\n    }\r\n  }\r\n}\r\n\r\n// // backup to filter\r\nexport function onSetFilterBy(board, filterBy) {\r\n  return async dispatch => {\r\n    try {\r\n      const filteredBoard = await boardService.filter(board._id, filterBy)\r\n      dispatch({ type: 'FILTER_BY', filterBy })\r\n      dispatch({ type: 'SET_BOARD', board: filteredBoard })\r\n    } catch (err) {\r\n      console.log('error setting filter group', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function onAddNewGroup(board, groupTitle) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupToPush = {\r\n        id: makeId(),\r\n        title: groupTitle,\r\n        cards: [],\r\n        archivedAt: false,\r\n        style: {}\r\n      }\r\n      newBoard.groups.push(groupToPush)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard)\r\n    } catch (err) {\r\n      console.log('error adding new group', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updatePosition(newBoardPositioning) {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch({ type: 'SET_BOARD', board: newBoardPositioning })\r\n      let newBoard = JSON.parse(JSON.stringify(newBoardPositioning))\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updateBoard(board) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function setStyle(style) {\r\n  return async dispatch => {\r\n    dispatch({ type: 'SET_STYLE', style })\r\n  }\r\n}\r\n\r\nexport function setDefaultStyle(){\r\n  return async dispatch => {\r\n    dispatch({ type: 'SET_DEFAULT_STYLE' })\r\n  }\r\n}\r\n\r\n\r\n\r\nexport function onArchiveGroup(groupId, board) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.id === groupId)\r\n      newBoard.groups[groupIdx].archivedAt = Date.now()\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error archiving group', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function onArchiveAllCards(groupId, board) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.id === groupId)\r\n      const newCards = newBoard.groups[groupIdx].cards.map(card => {\r\n        const newCard = JSON.parse(JSON.stringify(card))\r\n        newCard.archivedAt = Date.now()\r\n        return newCard\r\n      });\r\n      newBoard.groups[groupIdx].cards = newCards\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error archiving cards', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function setNewGroupName(groupId, groupName, board) {\r\n  return async dispatch => {\r\n    try {\r\n      const groupIdx = board.groups.findIndex(group => group.id === groupId)\r\n      if (groupName === board.groups[groupIdx].title || !groupName.trim()) return\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const newGroupName = groupName.replace(/\\s+/g, \" \")\r\n      newBoard.groups[groupIdx].title = newGroupName.trim()\r\n      dispatch({\r\n        type: 'SET_BOARD',\r\n        board: newBoard\r\n      })\r\n      await boardService.updateBoard(newBoard)\r\n    } catch (err) {\r\n      console.log('error setting group name', err)\r\n    }\r\n  }\r\n}\r\n\r\n// finish\r\nexport function addNewBoard(boardName, boardColor = null) {\r\n  return async dispatch => {\r\n    const newBoard = await boardService.addNewBoard(boardName, boardColor)\r\n    // dispatch({ type: 'SET_BOARD', newBoard });\r\n    return newBoard\r\n  }\r\n}\r\n\r\n// finish\r\nexport function addToMembers({ _id, fullName, imgUrl }, board) {\r\n  return async dispatch => {\r\n    const userToPush = {\r\n      _id,\r\n      fullName,\r\n      imgUrl\r\n    }\r\n    let newBoard = JSON.parse(JSON.stringify(board))\r\n    newBoard.members.unshift(userToPush)\r\n    dispatch({ type: 'SET_BOARD', board: newBoard })\r\n    await boardService.updateBoard(newBoard) // updating the DB\r\n  }\r\n}\r\n\r\n// finish\r\nexport function removeMember(id, board) {\r\n  return async dispatch => {\r\n    let newBoard = JSON.parse(JSON.stringify(board))\r\n    const memberIdx = newBoard.members.findIndex(member => member._id === id)\r\n    newBoard.members.splice(memberIdx, 1)\r\n    dispatch({ type: 'SET_BOARD', board: newBoard })\r\n    await boardService.updateBoard(newBoard) // updating the DB\r\n  }\r\n}\r\n\r\nexport function switchGroup() { }\r\n\r\n// =============================================\r\n\r\nfunction makeId(length = 8) {\r\n  let text = '';\r\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  for (let i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { MemberPreview } from './BoardHeader/MemberPreview'\r\nimport { ClickAwayListener } from '@material-ui/core';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { addToMembers, removeMember } from '../store/actions/boardActions';\r\n\r\n\r\nexport class _AddMemberModal extends Component {\r\n\r\n    state = {\r\n        searchLetters: ''\r\n    }\r\n\r\n    toggleUser=(user)=>{\r\n        if (!this.props.members.find(member => member._id === user._id)) {\r\n            this.props.addToMembers(user, this.props.board)\r\n        } else this.props.removeMember(user._id, this.props.board)\r\n    }\r\n \r\n    getMembers=(id)=>{\r\n        return this.props.members.find(member => {\r\n            if (member._id === id) return true\r\n            else return false\r\n        })\r\n    }\r\n\r\n    handleChange = ({ target }) =>{\r\n        const search = target.value\r\n        this.setState({ searchLetters: search })\r\n    }\r\n\r\n    render() {\r\n        \r\n        const { members, allExistingUsers } = this.props\r\n        \r\n        if(!members) return <div>loading</div>\r\n        return (\r\n            <ClickAwayListener onClickAway={this.props.onCloseModal}>\r\n                <div className=\"add-member-modal\">\r\n                    <h3>Members</h3>\r\n                    <input type=\"search\" onChange={this.handleChange} name=\"search-member\" id=\"\" autoCorrect=\"off\" autoComplete=\"off\"/>\r\n                    <div className=\"add-members-container\">\r\n                        {!this.state.searchLetters? \r\n                            allExistingUsers.map(user => {\r\n                                return <div key={user._id} className=\"member-container\" onClick={() => this.toggleUser(user)}>\r\n                                    <MemberPreview name={user.fullName} /> \r\n                                    <p>{user.fullName}</p>\r\n                                    {this.getMembers(user._id) && <div><CheckIcon /></div>}\r\n                                </div>\r\n                            }) : allExistingUsers.map(user => {\r\n                                // filtering through the all users array\r\n                                if (user.fullName.toLowerCase().includes(this.state.searchLetters.toLocaleLowerCase())){\r\n                                return <div key={user._id} className=\"member-container\" onClick={() => this.toggleUser(user)}>\r\n                                    <MemberPreview name={user.fullName} />\r\n                                    <p>{user.fullName}</p>\r\n                                    {this.getMembers(user._id) && <div><CheckIcon /></div>}\r\n                                    </div>\r\n                                }\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        members: state.boardReducer.board.members,\r\n        allUsers: state.userReducer.users\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    // loadAllUsers\r\n    addToMembers,\r\n    removeMember\r\n};\r\nexport const AddMemberModal = connect(mapStateToProps, mapDispatchToProps)(_AddMemberModal);\r\n","import React, { Component } from 'react'\r\nimport { MemberPreview } from './MemberPreview';\r\nimport { AddMemberModal } from '../AddMemberModal';\r\nimport { render } from '@testing-library/react';\r\n\r\nexport class MemberList extends Component {\r\n\r\n    state = {\r\n        isModalShown: false\r\n    }\r\n\r\n    onShowModal = () => {\r\n        this.setState({ isModalShown: true })\r\n    }\r\n    \r\n    onCloseModal = () => {        \r\n        this.setState({ isModalShown: false })\r\n    }\r\n    \r\n    render(){\r\n        const { members } = this.props\r\n        if (!members) return <h4>loading</h4>\r\n\r\n        return (\r\n            <div className=\"members-container\">\r\n                <div className=\"member-preview add-member-btn\" onClick={() => this.onShowModal()}>+</div>\r\n                <div className=\"add-member-modal-container\">\r\n                    {this.state.isModalShown && <AddMemberModal onCloseModal={this.onCloseModal} allExistingUsers={this.props.allUsers} />}\r\n                </div>\r\n                {\r\n                    members.map(member => {\r\n                        return <MemberPreview key={member._id}\r\n                            name={member.fullName} \r\n                            imgUrl={member.imgUrl}\r\n                            />\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport CheckIcon from '@material-ui/icons/Check';\r\n\r\nexport class Label extends Component {\r\n\r\n    render() {\r\n        const { isChecked } = this.props\r\n        return (\r\n            <div className=\"label-inner-container\"\r\n                onClick={() => this.props.onFilterByLabel(this.props.id)}>\r\n                <div className={`label ${this.props.color}`}></div>  \r\n                {this.props.name ? <p>{this.props.name}</p> : <p>Deafult</p>}\r\n                {isChecked && <div><CheckIcon /></div>}\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Label } from './Label'\r\nimport { onSetFilterBy } from '../../store/actions/boardActions'\r\nimport { ClickAwayListener, IconButton } from '@material-ui/core'\r\nimport { CloseOutlined } from '@material-ui/icons'\r\n\r\nexport class _FilterByLabel extends Component {\r\n\r\n    onFilterByLabel = (labelId) => {\r\n        // if theres filter and it is txt\r\n        if (this.props.currFilter && this.props.currFilter.filterBy.txt) return\r\n\r\n        let labels = []\r\n        // if theres filter and is of labels type\r\n        if (this.props.currFilter && this.props.currFilter.filterBy.labels) {\r\n            labels = [...this.props.currFilter.filterBy.labels]\r\n            // if you the idx is -1, than add it to the labels array\r\n            const labelIdx = labels.findIndex(label => label === labelId)\r\n            if (labelIdx !== -1) { labels.splice(labelIdx, 1) }\r\n            else if (labelIdx === -1) { labels.push(labelId) }\r\n        } else {\r\n            labels.push(labelId)\r\n        }\r\n        this.props.onSetFilterBy(this.props.board, { labels })\r\n    }\r\n\r\n    isChecked(labelId) {\r\n        // check if there are currently labels in the filter\r\n        if (!this.props.currFilter || !this.props.currFilter.filterBy.labels) return\r\n        let labels = [...this.props.currFilter.filterBy.labels]\r\n        const labelIdx = labels.findIndex(label => label === labelId)\r\n        if (labelIdx !== -1) return true\r\n        else return false\r\n    }\r\n\r\n    onResetFilter = () => {\r\n        const labels = []\r\n        this.props.onSetFilterBy(this.props.board, { labels })\r\n    }\r\n\r\n    render() {\r\n        const { labels } = this.props.board\r\n        return (\r\n            <ClickAwayListener onClickAway={this.props.toggleModal}>\r\n                <div className=\"label-filter\">\r\n                    <div className=\"labels-header\">\r\n                        <div></div>\r\n                        <div><h6>Labels</h6></div>\r\n                        <IconButton onClick={this.props.onClose}>\r\n                            <CloseOutlined />\r\n                        </IconButton>\r\n                    </div>\r\n                    <div className=\"labels-container\">\r\n\r\n                        <div className=\"label-inner-container\"\r\n                            onClick={() => this.onResetFilter()}>\r\n                            <div className={`label grey`}></div>\r\n                            <p>No labels</p>\r\n                        </div>\r\n\r\n                        {labels.map(label => {\r\n                            return <Label name={label.name}\r\n                                color={label.color}\r\n                                id={label.id}\r\n                                key={label.id}\r\n                                onFilterByLabel={this.onFilterByLabel}\r\n                                isChecked={this.isChecked(label.id)}\r\n                            />\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        currFilter: state.boardReducer.filterBy\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onSetFilterBy\r\n};\r\n\r\nexport const FilterByLabel = connect(mapStateToProps, mapDispatchToProps)(_FilterByLabel);\r\n","import { Popover } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { FilterByLabel } from './FilterByLabel'\r\n\r\n\r\nexport class Filter extends Component {\r\n\r\n    state = {\r\n        isLabelModalShown: false\r\n    }\r\n\r\n    ref = React.createRef()\r\n    handleChange = async ({ target }) => {\r\n        // fix this\r\n        await this.setState({ search: { txt: target.value } })\r\n        // send action\r\n        this.props.onFilter(this.state.search)\r\n    }\r\n\r\n    handleLabel = async () => {\r\n\r\n    }\r\n\r\n    openModal = () => {\r\n        this.setState({ isLabelModalShown:true })\r\n    }\r\n\r\n    closeModal = () => {\r\n        \r\n        this.setState({isLabelModalShown:false})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"search-filter-container\">\r\n                    <div className=\"input-container\">\r\n                        <input type=\"search\" id=\"search\" autoCorrect=\"off\" autoComplete=\"off\"\r\n                            className=\"search-bar\"\r\n                            onChange={this.handleChange} />\r\n\r\n                        <div className=\"search-icon-container\"><span className=\"material-icons\">search</span></div>\r\n\r\n                    </div>\r\n\r\n                    <div className=\"board-header-btn filter-btn\" ref={this.ref} onClick={this.openModal} ><span className=\"material-icons\">sort</span></div>\r\n                    {/* {this.state.isLabelModalShown &&\r\n                        <FilterByLabel toggleModal={this.toggleModal}\r\n                        />} */}\r\n                                        <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.isLabelModalShown}\r\n                    anchorEl={this.ref.current}\r\n                    onClose={this.closeModal}\r\n                    onBackdropClick={this.closeModal}\r\n                >\r\n                    <FilterByLabel onClose={this.closeModal} toggleModal={this.closeModal} />\r\n                </Popover>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\n","const { default: storageService } = require(\"./storageService\");\r\n\r\nexport const notificationService = {\r\n    onLoad,\r\n    getUpdated,\r\n    setUpdated\r\n}\r\nfunction onLoad(boardId) {\r\n    const lastUpdate = getUpdated(boardId)\r\n    if (!lastUpdate) setUpdated(boardId)\r\n}\r\n\r\nfunction getUpdated(boardId) {\r\n    let lastUpdated = storageService.loadFromStorage('lastUpdated')\r\n    if (!lastUpdated || !lastUpdated[boardId]) return null\r\n    return lastUpdated[boardId]\r\n}\r\n\r\nfunction setUpdated(boardId) {\r\n    let lastUpdated = storageService.loadFromStorage('lastUpdated')\r\n    if  (!lastUpdated) lastUpdated = {}\r\n    lastUpdated[boardId] = Date.now()\r\n    return storageService.saveToStorage('lastUpdated', lastUpdated)\r\n}","import { CircularProgress } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport * as timeago from 'timeago.js';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\n\r\nexport function ActivityLog({ boardId, displayMode, activities }) {\r\n    if (!activities) return <div><CircularProgress /></div>;\r\n    if (activities && activities.length > 15) activities = activities.slice(0, 14);\r\n    \r\n    return (\r\n        <ul className=\"activity-log\">\r\n            {activities.map(activity => {\r\n                return <li key={activity.id}>\r\n                    {(displayMode !== 'user') ? <MemberPreview name={activity.byMember.fullName} img={activity.byMember.imgUrl} /> : <React.Fragment />}\r\n                    <pre>\r\n                        <div>\r\n                            {(displayMode==='user') ? <React.Fragment /> : (boardId) ? (<Link to={`/board/${boardId}`}>{activity.byMember.fullName + ' '}</Link>) : `${activity.byMember.fullName} `}\r\n                            <span>{activity.commentTxt ? 'commented:' : activity.txt + ' '}</span>\r\n                            {activity.commentTxt && <div className=\"comment-txt\">\r\n                                {activity.commentTxt}\r\n                            </div>}\r\n                            {displayMode !== 'card' && <span>\r\n                                {'in '}\r\n                                {(boardId) ? <Link to={`/board/${boardId}/${activity.card.id}/`}>\r\n                                    {activity.card.title}\r\n                                </Link> : `${activity.card.title}`}\r\n                            </span>}\r\n                        </div>\r\n                        <span className=\"time-ago\">{timeago.format(activity.createdAt)}</span>\r\n                    </pre>\r\n                </li>\r\n            })}\r\n        </ul>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport NotificationsActiveOutlinedIcon from '@material-ui/icons/NotificationsActiveOutlined';\r\nimport NotificationsNoneOutlinedIcon from '@material-ui/icons/NotificationsNoneOutlined';\r\nimport { Badge, IconButton, Popover } from '@material-ui/core';\r\nimport { notificationService } from '../../services/notificationService';\r\nimport userService from '../../services/userService';\r\nimport { ActivityLog } from '../Sidebar/ActivityLog';\r\nimport { CloseOutlined } from '@material-ui/icons';\r\n\r\nexport class Notifications extends Component {\r\n\r\n    state = {\r\n        onlyNonUserAlerts: false,\r\n        isOpen: false,\r\n        isRinging: false,\r\n        alerts: 0,\r\n        newActivities: null\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n    receiveUpdate() {\r\n        const boardActivities = this.props.board.activities\r\n        let newActivities = []\r\n        const lastUpdated = notificationService.getUpdated(this.props.board._id)\r\n\r\n        // loop over the activities until you reach the last updated timestamp\r\n        for (let i = 0; i < boardActivities.length; i++) {\r\n            if (boardActivities[i].createdAt >= lastUpdated) {\r\n                newActivities.push(boardActivities[i])\r\n            } else {\r\n                break\r\n            }\r\n        }\r\n\r\n        if (this.state.onlyNonUserAlerts) {\r\n            const loggedInUser = userService.getLoggedInUser\r\n            newActivities = newActivities.filter(activity => activity.byMember._id === loggedInUser._id)\r\n        }\r\n\r\n        this.setState({ alerts: newActivities.length, newActivities})\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.lastUpdate !== this.props.lastUpdate) {\r\n            this.receiveUpdate()\r\n        }\r\n\r\n        if (prevProps.board._id !== this.props.board._id) {\r\n            notificationService.onLoad(this.props.board._id)\r\n        }\r\n\r\n        if (prevState.alerts !== this.state.alerts) {\r\n            // if alerts are not zero\r\n            if (this.state.alerts) {\r\n                this.ringBell(3000)\r\n            }\r\n        }\r\n    }\r\n\r\n    onOpen = () => {\r\n        this.setState({ alerts: 0,isOpen:true })\r\n        notificationService.setUpdated(this.props.board._id)\r\n    }\r\n\r\n    onClose = () => {\r\n        notificationService.setUpdated(this.props.board._id)\r\n        this.setState({isOpen:false},() => setTimeout(() => {this.setState({newActivities:null})},500) )\r\n    }\r\n\r\n    ringBell(ms = 1500) {\r\n        this.setState({ isRinging: true })\r\n        setTimeout(() => { this.setState({ isRinging: false }) }, ms)\r\n    }\r\n\r\n    getIsRinging = () => {\r\n        if (this.state.isRinging) return (<div className=\"bell\">\r\n            <NotificationsActiveOutlinedIcon />\r\n        </div>)\r\n        return (<div className=\"silent-bell\">\r\n            <NotificationsNoneOutlinedIcon />\r\n        </div>)\r\n    }\r\n\r\n    getNotificationPreview() {\r\n        \r\n        if (!this.state.newActivities || !this.state.newActivities.length) return (<div className=\"notifications-empty-state-container\">\r\n            You're all caught up!\r\n        </div>)\r\n        \r\n        return <div className=\"activity-log-container\"><ActivityLog activities={this.state.newActivities} boardId={this.props.board._id} /></div>\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n            <div ref={this.ref} onClick={this.onOpen} className=\"notification board-header-btn\">\r\n                <Badge max={9} badgeContent={this.state.alerts} color=\"error\">\r\n                    {this.getIsRinging()}\r\n                </Badge>\r\n                {/* {(this.state.isOpen) ? <ActivityLog activities={this.state.newActivities} boardId={this.props.board._id} /> : <React.Fragment />} */}\r\n            </div>\r\n            <Popover\r\n                        anchorOrigin={{\r\n                            vertical: 'bottom',\r\n                            horizontal: 'left',\r\n                        }}\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={this.state.isOpen}\r\n                        anchorEl={this.ref.current}\r\n                        onClose={this.onClose}\r\n                        onBackdropClick={this.onClose}\r\n                    >\r\n                        <div className=\"notification-preview\">\r\n                            <div className=\"notification-preview-header\">\r\n                                <div></div>\r\n                                <div><h6>Notifications</h6></div>\r\n                                <IconButton onClick={this.onClose}>\r\n                                    <CloseOutlined />\r\n                                </IconButton>\r\n                            </div>\r\n                            {this.getNotificationPreview()}\r\n                        </div>\r\n                        </Popover>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n","// this contains:\r\n// Board name\r\n// Board Members\r\n// Filter (search)\r\n// Link to Statistics\r\n// Menu hamburger\r\n\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { MemberList } from './MemberList';\r\nimport { Filter } from './Filter';\r\nimport { loadAllUsers } from '../../store/actions/userActions';\r\nimport { Notifications } from './Notifications';\r\nimport MoreHorizOutlinedIcon from '@material-ui/icons/MoreHorizOutlined';\r\n\r\n\r\n\r\nexport class _BoardHeader extends Component {\r\n\r\n    async componentDidMount() {\r\n        await this.props.loadAllUsers()\r\n    }\r\n    \r\n    render() {\r\n        \r\n        return (\r\n                <div className=\"boards-header-container\" >\r\n                    <h3>{this.props.title}</h3>\r\n                    <div className=\"members-container\">\r\n                        <MemberList members={this.props.members} allUsers={this.props.allUsers}/>\r\n                    </div>\r\n\r\n\r\n                    <Filter onFilter={this.props.onFilter} />\r\n                    \r\n                    <Notifications board={this.props.board} lastUpdate={this.props.lastUpdate}/>\r\n                    <div className=\"board-header-btn show-menu\" onClick={() => this.props.onToggleSidebar(true)}>\r\n                        <MoreHorizOutlinedIcon />\r\n                        <p>Show Menu</p>\r\n                    </div>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        allUsers: state.userReducer.users\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadAllUsers\r\n};\r\n\r\nexport const BoardHeader = connect(mapStateToProps, mapDispatchToProps)(_BoardHeader);\r\n","import userService from '../../services/userService'\r\n\r\n\r\nexport function loadAllUsers(){\r\n    return async dispatch=>{\r\n        const users = await userService.getUsersFromDb()\r\n        dispatch({ type: 'SET_USERS', users })\r\n    }\r\n}","import React from 'react'\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\r\n\r\nexport function CardPreviewDueDate(props) {\r\n    if (!props.dueDate) return <React.Fragment />\r\n    let daysRemaining = (props.dueDate - Date.now()) / 1000 / 60 / 60 / 24\r\n    \r\n    const date = new Date(props.dueDate)\r\n    \r\n    let month = date.toLocaleString(\"en-US\", { month: \"short\" })\r\n    let day = date.getDate()\r\n    \r\n    let parsedDate = `${month} ${day}`\r\n    if (Math.abs(daysRemaining) > 365) {\r\n        let year = date.getFullYear()\r\n        parsedDate += `, ${year}`\r\n    }\r\n    if (props.displayTime) {\r\n        let hour = date.toLocaleTimeString()\r\n        parsedDate += ` at ${hour}`\r\n     \r\n    }\r\n\r\n    let dueDateClass = 'card-preview-due-date-container card-preview-due-date-container-'\r\n    switch (true) {\r\n        case (daysRemaining > 7):\r\n            dueDateClass += 'long'\r\n            break\r\n        case (daysRemaining > 3):\r\n            dueDateClass += 'near'\r\n            break\r\n        case (daysRemaining >= 0):\r\n            dueDateClass += 'close'\r\n            break\r\n        default:\r\n            dueDateClass += 'overdue'\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={dueDateClass}>\r\n            <AccessTimeIcon fontSize=\"inherit\" />\r\n            {parsedDate}\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport { Button, Popover, TextField } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { DatePicker } from '@material-ui/pickers'\r\nimport { CardPreviewDueDate } from './CardPreviewDueDate';\r\nimport ScheduleIcon from '@material-ui/icons/Schedule';\r\n\r\nexport class CardDueDateSetter extends Component {\r\n\r\n    state = {\r\n        date: null,\r\n        isPopperOpen: false,\r\n        anchor: null\r\n    }\r\n    componentDidMount() {\r\n        this.anchor = React.createRef();\r\n        this.setState({ anchor: this.anchor })\r\n        this.setDefaultDate()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.dueDate !== this.props.dueDate) return this.setDefaultDate()\r\n    }\r\n\r\n    setDefaultDate = () => {\r\n        this.setState({ date: this.props.dueDate })\r\n    }\r\n    openModal = () => {\r\n        this.setState({ isPopperOpen: true })\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.setState({ isPopperOpen: false })\r\n    }\r\n\r\n    onSetDueDate = (ev) => {\r\n        const formDate = ev.target.value\r\n        const timestamp = new Date(formDate).getTime()\r\n        this.setState({ date: timestamp })\r\n    }\r\n\r\n    submitDueDate = () => {\r\n        this.props.onUpdateDueDate(this.state.date)\r\n    }\r\n\r\n    onRemoveDueDate = (ev) => {\r\n        this.setState({ date: null }, this.submitDueDate)\r\n        this.closeModal()\r\n    }\r\n\r\n    getDisplayDateBtn = () => {\r\n        if (!this.props.displayDate) return <Button className=\"set-due-date-btn\" onClick={this.openModal} ref={this.anchor}><ScheduleIcon /><span>Set Due Date</span></Button>\r\n\r\n        return (\r\n            <div onClick={this.openModal} ref={this.anchor} className=\"set-due-date-expanded\">\r\n                <CardPreviewDueDate dueDate={this.state.date} displayTime={this.props.displayTime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    parseDate = () => {\r\n        // 2020-09-26T04:52\r\n        let date = new Date(this.state.date)\r\n        if (!this.state.date) date = new Date(Date.now())\r\n        let year = date.getFullYear()\r\n        let month = (date.getMonth() + 1)\r\n        let day = date.getDate()\r\n        let hour = date.getHours()\r\n        let minute = date.getMinutes()\r\n        let timeArray = [year, month, day, hour, minute]\r\n        timeArray = timeArray.map(i => {\r\n            i = i.toString()\r\n            if (i.length === 1) i = `0${i}`\r\n            return i\r\n        })\r\n        const parsedDate = `${year}-${timeArray[1]}-${timeArray[2]}T${timeArray[3]}:${timeArray[4]}`\r\n        return parsedDate\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.anchor) return <React.Fragment />\r\n        return (\r\n            <div className=\"due-date-container\">\r\n                {this.getDisplayDateBtn()}\r\n                {(!this.state.anchor.current) ? <React.Fragment /> :\r\n                    <Popover\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'left',\r\n                        }}\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={this.state.isPopperOpen}\r\n                        anchorEl={this.state.anchor.current}\r\n                        onClose={this.closeModal}\r\n                        onBackdropClick={this.closeModal}\r\n                    >\r\n                        <form noValidate>\r\n                            <TextField\r\n                                onBlur={this.submitDueDate}\r\n                                onChange={this.onSetDueDate}\r\n                                id=\"datetime-local\"\r\n                                label=\"Set Due Date\"\r\n                                type=\"datetime-local\"\r\n                                value={this.parseDate()}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                            />\r\n                        </form>\r\n                        <div className=\"remove-date-btn-container\">\r\n                            <button className=\"cancel-btn\" onClick={this.onRemoveDueDate}>Remove Due Date</button>\r\n                        </div>\r\n                    </Popover>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\n\r\nexport class CardNewChecklist extends Component {\r\n\r\n    state = {\r\n        isEditing: false,\r\n        txtValue: ''\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n    onChange = (ev) => {\r\n        this.setState({ txtValue: ev.target.value })\r\n    }\r\n\r\n    onSubmit = async(ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.txtValue) return this.setNotEditing()\r\n        const checklist = {\r\n                id: utils.makeId(),\r\n                \"title\": this.state.txtValue,\r\n                \"todos\": []             \r\n        }\r\n        // const activity =  this.props.addActivity(`added the checklist ${this.state.txtValue}`)\r\n        const activity = `added the checklist ${this.state.txtValue}`\r\n        this.props.onUpdate(checklist,activity)\r\n        this.setState({txtValue:''})\r\n        this.setNotEditing()\r\n    }\r\n    \r\n    \r\n    getNewChecklistDisplay = () => {\r\n        if (this.state.isEditing) return (\r\n            <form className=\"new-checklist-form\" onBlur={this.setNotEditing}  onSubmit={this.onSubmit} > \r\n                <input type=\"text\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                <button className=\"save-btn\" onMouseDown={this.onSubmit}>Save</button>\r\n            </form>\r\n        )\r\n        return (\r\n            <Button onClick={this.setEditing}><CheckBoxOutlinedIcon /><span>New Checklist</span></Button>\r\n        )\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.getNewChecklistDisplay()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Button, IconButton, Popover, Tooltip } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport MailOutlineOutlinedIcon from '@material-ui/icons/MailOutlineOutlined';\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport WhatsAppIcon from '@material-ui/icons/WhatsApp';\r\nimport { CloseOutlined } from '@material-ui/icons';\r\n\r\nexport class Share extends Component {\r\n\r\n    ref = React.createRef()\r\n    copyRef = React.createRef()\r\n    state = {\r\n        isOpen: false\r\n    }\r\n\r\n    onOpen = () => {\r\n        this.setState({ isOpen: true })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.setState({ isOpen: false })\r\n    }\r\n\r\n    copyToClipboard = () => {\r\n        this.copyRef.current.select()\r\n        document.execCommand('copy');\r\n    };\r\n\r\n    render() {\r\n        const item = this.props.item\r\n        const path = this.props.path\r\n\r\n        return (\r\n            <div ref={this.ref}>\r\n                <Button onClick={this.onOpen}><ShareIcon /><span>Share</span></Button>\r\n                <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'right',\r\n                    }}\r\n                    open={this.state.isOpen}\r\n                    anchorEl={this.ref.current}\r\n                    onClose={this.onClose}\r\n                    onBackdropClick={this.onClose}\r\n                >\r\n                    <div className=\"share-container\">\r\n                        <div className=\"header\">\r\n                            <div />\r\n                            <h4>Share this {item}</h4>\r\n                            <IconButton onClick={this.onClose}>\r\n                                <CloseOutlined />\r\n                            </IconButton>\r\n                        </div>\r\n                        <div className=\"link\">\r\n                            <input ref={this.copyRef} type=\"text\" readOnly value={path} />\r\n                        </div>\r\n                        <div className=\"share-btns-container\">\r\n                            <Tooltip title=\"Whatsapp\">\r\n                                <IconButton className=\"whatsapp\" onClick={() => { window.open(`whatsapp://send?text=${path}`) }} >\r\n                                    <WhatsAppIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            <Tooltip title=\"Mail\">\r\n                                <IconButton className=\"mail\" onClick={() => { window.open(`mailto:?subject=Check out this ${item}&amp;body=${path}`) }}>\r\n                                    <MailOutlineOutlinedIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            <Tooltip title=\"Copy to clipboard\">\r\n                                <IconButton className=\"copy\" onClick={this.copyToClipboard}>\r\n                                    <FileCopyOutlinedIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </div>\r\n                    </div>\r\n                </Popover>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { CardDueDateSetter } from \"./CardDueDateSetter\"\r\nimport React from 'react'\r\nimport { CardNewChecklist } from \"./CardNewChecklist\"\r\nimport { Button, CircularProgress } from \"@material-ui/core\"\r\nimport ArchiveOutlinedIcon from '@material-ui/icons/ArchiveOutlined';\r\n// import ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport LabelOutlinedIcon from '@material-ui/icons/LabelOutlined';\r\nimport PeopleAltOutlinedIcon from '@material-ui/icons/PeopleAltOutlined';\r\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined';\r\nimport WebAssetOutlinedIcon from '@material-ui/icons/WebAssetOutlined';\r\nimport { Share } from \"../Share\";\r\n\r\nexport function CardSidebar(props) {\r\n\r\n    return (\r\n        <div className=\"card-sidebar\">\r\n            {/* <Button><ArrowForwardIcon /><span>Move Card</span></Button> */}\r\n            <Button ref={props.anchorRef} onClick={props.toggleCoverSelector}><WebAssetOutlinedIcon /><span>Cover</span></Button>\r\n            <CardDueDateSetter dueDate={props.dueDate} onUpdateDueDate={props.onUpdateDueDate} />\r\n            <Button onClick={props.onArchiveCard}><ArchiveOutlinedIcon /> <span>Archive Card</span></Button>\r\n            <Button onClick={props.toggleLabelPallete}><LabelOutlinedIcon /><span>Labels</span></Button>\r\n            <Button ref={props.anchorRef} onClick={props.toggleDisplayMembers}><PeopleAltOutlinedIcon /><span>Members</span></Button>\r\n            {(props.isUploading) ? <Button disabled><CircularProgress size='14px' /></Button> : <Button onClick={props.toggleUploadDropzone}><ImageOutlinedIcon /><span>Upload Image</span></Button>}\r\n            <CardNewChecklist addActivity={props.addActivity} onUpdate={props.onUpdateChecklists} />\r\n            <Share item=\"card\" path={window.location.href}/>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport SubjectIcon from '@material-ui/icons/Subject';\r\n\r\nexport class CardDescription extends Component {\r\n\r\n    state = {\r\n        description: '',\r\n        isEditing: false\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.setDescriptionFromProps()\r\n    }\r\n\r\n    setDescriptionFromProps = () => {\r\n        let description = this.props.description\r\n        if (!description) description = ''\r\n        this.setState({ description })\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const description = ev.target.value\r\n        this.setState({ description })\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    onSave = () => {\r\n        this.props.onUpdateDesc(this.state.description)\r\n        this.setNotEditing()\r\n    }\r\n\r\n    getDescriptionTxt = () => {\r\n        if (!this.state.description) return 'Add a more detailed description…'\r\n        return this.state.description\r\n    }\r\n    getIsEditing = () => {\r\n        if (!this.state.isEditing) return (\r\n            <pre className=\"item-details-description-text-display\" onClick={this.setEditing}>{this.getDescriptionTxt()}</pre>\r\n        )\r\n        return (\r\n            <div className='item-details-description-text-edit-container'>\r\n                <textarea value={this.state.description} autoFocus onChange={this.onChange} onBlur={this.onSave} placeholder=\"Enter a more details description here...\" />\r\n                <button onClick={this.onSave} className=\"save-btn\">Save</button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // \r\n    render() {\r\n        // if (!this.state.isReady) return <div>Loading...</div>\r\n        return (\r\n            <div className=\"item-details-description\">\r\n                {/* <input value={this.state.description} onChange={this.onChange} placeholder=\"Enter a more details description here...\" /> */}\r\n                <SubjectIcon />\r\n                <div>\r\n                <h3>Description</h3>\r\n                {this.getIsEditing()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nexport class CardDetailsHeader extends Component {\r\n\r\n    state = {\r\n        txt: '',\r\n        isEditing: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const txt=this.props.headerTxt\r\n        this.setState({txt})\r\n    }\r\n\r\n    onChangeText = (ev) => {\r\n        const txt = ev.target.value\r\n        this.setState({txt})\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.txt) return\r\n        this.setNotEditing()\r\n        this.props.onUpdate(this.state.txt)\r\n        \r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    getIsEditing = () => {\r\n        if (this.state.isEditing) return (\r\n            <form onBlur={this.setNotEditing} onSubmit={this.onSubmit}>\r\n                <input name=\"header\" type=\"text\" autoFocus value={this.state.txt} onChange={this.onChangeText}/>\r\n            </form>\r\n        )\r\n        return <div onClick={this.setEditing}><h2>{this.state.txt}</h2></div>\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.getIsEditing()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\nexport function CardLabels(props) {\r\n    if (!props.cardLabels || !props.boardLabels) return <React.Fragment />\r\n    \r\n    function displayLabel(label) {\r\n        const boardLabel = props.boardLabels.find(boardLabel => boardLabel.id === label.id)\r\n        if (!props.preview) return (\r\n            <div className={`card-details-label ${boardLabel.color}`}>\r\n                <div className=\"card-details-mask\">\r\n                    {boardLabel.name}\r\n                </div>\r\n            </div>\r\n        )\r\n        if (props.isFull) return (\r\n            <div className={`card-preview-full-label ${boardLabel.color}`}>\r\n                <div>\r\n                    {boardLabel.name}\r\n                    </div>\r\n                <div className=\"card-preview-label-mask\" />\r\n                \r\n            </div>\r\n        )\r\n        return (\r\n            <div className={`card-preview-collapsed-label ${boardLabel.color}`}>\r\n                <div className=\"card-preview-label-mask\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"card-preview-labels\">\r\n            {props.cardLabels.map((label, idx) => {\r\n                return <div onClick={props.onClickLabel} key={idx} > {displayLabel(label)} </div>\r\n            })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport { Button, Checkbox } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\n\r\nexport class CardChecklistTodo extends Component {\r\n\r\n    state = {\r\n        isDone: false,\r\n        isEditing: false,\r\n        txtValue: '',\r\n        isNew: false\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    removeText = () => {\r\n        this.setState({txtValue:''})\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.title !== this.props.title || prevProps.isDone !== this.props.isDone) this.updateTodo()\r\n    }\r\n\r\n    componentDidMount() {\r\n        \r\n        if (this.props.isNew) this.setState({ isNew: true })\r\n        this.updateTodo()\r\n    }\r\n\r\n    getNewTodoDisplay = () => {\r\n        if (this.state.isEditing) {\r\n            return (\r\n            <form onBlur={this.setNotEditing} onSubmit={this.onSubmit}>\r\n                <input className=\"checkbox-text-edit\" type=\"text\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                <button className=\"save-btn\" type=\"submit\">Save</button>\r\n            </form>\r\n        )}\r\n        return (\r\n            <Button className=\"checklist-add-todo\" onClick={this.setEditing}>\r\n                Add an item\r\n            </Button>\r\n        )\r\n    }\r\n    \r\n    getTodoClassName = () => {\r\n        const doneClass = (this.state.isDone) ? 'todo-done' : 'todo-not-done'\r\n        return `checklist-todo-title ${doneClass}`\r\n    }\r\n    getTextBox = () => {\r\n        if (this.state.isEditing) return (\r\n            <React.Fragment>\r\n                <Checkbox checked={this.state.isDone} onChange={this.onCheck} />\r\n                <form onBlur={this.setNotEditing} onSubmit={this.onSubmit}>\r\n                    <input className=\"checkbox-text-edit\" type=\"text\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                    <button className=\"save-btn\" type=\"submit\">Save</button>\r\n                </form>\r\n            </React.Fragment>\r\n        )\r\n        return (\r\n            <React.Fragment>\r\n                <Checkbox checked={this.state.isDone} onChange={this.onCheck} />\r\n                <div className={this.getTodoClassName()} onClick={this.setEditing}>\r\n                    {this.state.txtValue}\r\n                    <Button onClick={this.onRemove}>\r\n                        <DeleteOutlineOutlinedIcon fontSize=\"inherit\" />\r\n                    </Button>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        \r\n        ev.preventDefault()\r\n        // this.setNotEditing()\r\n        this.updateChecklist()\r\n\r\n    }\r\n\r\n    updateTodo = () => {\r\n        \r\n        const todo = this.props.todo\r\n        if (!todo) return\r\n        const txtValue = todo.title\r\n        const isDone = todo.isDone\r\n\r\n        this.setState({ isDone, txtValue })\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        \r\n        this.setState({ txtValue: ev.target.value })\r\n    }\r\n\r\n    onCheck = (ev) => {\r\n        \r\n        // let txt = ''\r\n        let checkStatus = ev.target.checked\r\n        // if (checkStatus) {\r\n        //     txt = `completed ${this.state.txtValue}`\r\n        // } else {\r\n        //     txt = `marked ${this.state.txtValue} incomplete`\r\n        // }\r\n        \r\n        this.setState({ isDone: checkStatus}, () => {\r\n             this.updateChecklist()\r\n        })\r\n    }\r\n\r\n    getActivityTxt = () => {\r\n        let txt;\r\n        if (this.state.isDone) {\r\n            txt = `completed ${this.state.txtValue}`\r\n        } else {\r\n            txt = `marked ${this.state.txtValue} incomplete`\r\n        }\r\n        return txt\r\n    }\r\n    onRemove = (ev) => {\r\n        ev.stopPropagation()\r\n        this.setState({ txtValue: '' }, this.updateChecklist)\r\n    }\r\n\r\n    updateChecklist = () => {\r\n        \r\n            let id;\r\n            if (this.props.todo) {\r\n                id = this.props.todo.id\r\n            } else {\r\n                id = utils.makeId()\r\n            }\r\n            const todo = {\r\n                id,\r\n                isDone: this.state.isDone,\r\n                title: this.state.txtValue\r\n            }\r\n            \r\n            const activityTxt = this.getActivityTxt()\r\n            if (this.state.isNew) {\r\n                this.props.onUpdate(todo)\r\n                this.setState({txtValue:''})\r\n            } else {\r\n                this.props.onUpdate(todo,activityTxt)\r\n            }\r\n        }\r\n    \r\n\r\n    render() {\r\n        if (!this.props.displayCompleted && this.state.isDone) return <React.Fragment />\r\n        return (\r\n            <div className=\"checklist-todo\">\r\n\r\n                {(this.state.isNew) ? this.getNewTodoDisplay() : this.getTextBox()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, LinearProgress } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { CardChecklistTodo } from './CardChecklistTodo'\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\nexport class CardChecklist extends Component {\r\n\r\n    state = {\r\n        tasksCompleted: 0,\r\n        totalTasks: 0,\r\n        displayCompleted: true,\r\n        showDialog: false\r\n        \r\n    }\r\n\r\n    componentDidMount() {        \r\n        this.setTasksStatus()\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.checklist !== prevProps.checklist) this.setTasksStatus()\r\n    }\r\n\r\n\r\n    setTasksStatus = () => {\r\n        let tasksCompleted = 0\r\n        let totalTasks = 0\r\n\r\n        this.props.checklist.todos.forEach(todo => {\r\n            if (todo.isDone) tasksCompleted += 1\r\n            totalTasks += 1\r\n        });\r\n\r\n        this.setState({ tasksCompleted, totalTasks })\r\n    }\r\n\r\n    toggleDisplayCompleted = () => {\r\n        if (this.state.displayCompleted) return this.setState({ displayCompleted: false })\r\n        return this.setState({ displayCompleted: true })\r\n    }\r\n\r\n    getDisplayCheckedBtn = () => {\r\n        if (!this.state.tasksCompleted) return <React.Fragment />\r\n        let btnContent;\r\n        if (this.state.displayCompleted) {\r\n            btnContent = 'Hide Completed Items'\r\n        } else {\r\n            btnContent = `Show Checked Items (${this.state.tasksCompleted})`\r\n        }\r\n\r\n        return (\r\n            <Button onClick={this.toggleDisplayCompleted}>{btnContent}</Button>\r\n        )\r\n    }\r\n\r\n    onRemoveChecklist = async() => {\r\n        const checklist = {...this.props.checklist}\r\n        checklist.title = ''\r\n        let activityTxt= `removed ${this.props.checklist.title}`\r\n        this.props.onUpdate(checklist,activityTxt)\r\n        this.closeDialog()\r\n\r\n    }\r\n\r\n\r\n    openDialog = () => {\r\n        this.setState({ showDialog: true })\r\n    }\r\n\r\n    closeDialog = () => {\r\n        this.setState({ showDialog: false })\r\n    }\r\n\r\n    getPercentCompleted = () => {\r\n        const percent = Math.round((this.state.tasksCompleted / this.state.totalTasks) * 100)\r\n        return percent\r\n    }\r\n\r\n    onUpdateChecklist = (newTodo,activityTxt) => {\r\n        // take the updated todo and insert it into the list\r\n        let todos = [...this.props.checklist.todos]\r\n        // find the todo index\r\n        const todoIdx = todos.findIndex(todo => todo.id === newTodo.id)\r\n        // if new title is blank - remove todo\r\n        if (!newTodo.title) {\r\n            todos.splice(todoIdx,1)\r\n        } else if (todoIdx <0) { //if the index is less than 0 - this is a new item\r\n            todos.push(newTodo)\r\n        } else {\r\n            todos[todoIdx] =  newTodo\r\n        }\r\n        const checklist = {...this.props.checklist}\r\n        checklist.todos = todos\r\n        this.props.onUpdate(checklist,activityTxt)\r\n    }\r\n\r\n    render() {\r\n        // if (!this.state.totalTasks) return <React.Fragment />\r\n        return (\r\n            <div className=\"checklist\">\r\n                <div className=\"checklist-title-container\">\r\n                    <CheckBoxOutlinedIcon />\r\n                    <div className=\"checklist-title\">{this.props.checklist.title}</div>\r\n                    <div className=\"checklist-title-btns\">\r\n                    {this.getDisplayCheckedBtn()}\r\n                    <Button onClick={this.openDialog}>Remove</Button>\r\n                    </div>\r\n                </div>\r\n                {((this.state.totalTasks) ? (\r\n                    <div className=\"checklist-progress\">\r\n                    <div className=\"checklist-progress-numbers\">%{this.getPercentCompleted()}</div>\r\n                    <LinearProgress value={this.getPercentCompleted()} variant=\"determinate\" /> \r\n                    </div>\r\n                    ) : <React.Fragment />)\r\n                }\r\n                <main className=\"checklist-main\">\r\n                    {this.props.checklist.todos.map(todo => <CardChecklistTodo key={todo.id} displayCompleted={this.state.displayCompleted} todo={todo} onUpdate={this.onUpdateChecklist}/>)}\r\n                    <CardChecklistTodo isNew={true} onUpdate={this.onUpdateChecklist}/>\r\n                </main>\r\n                <Dialog onClose={this.closeDialog} open={this.state.showDialog}>\r\n                    <DialogTitle id=\"alert-dialog-title\">{\"Remove this checklist?\"}</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id=\"alert-dialog-description\">\r\n                            Deleting a checklist is permanent and there is no way to get it back.\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.closeDialog} color=\"primary\">\r\n                            Disagree\r\n                        </Button>\r\n                        <Button onClick={this.onRemoveChecklist} color=\"primary\" autoFocus>\r\n                            Agree\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { CardChecklist } from './CardChecklist'\r\n\r\n\r\nexport function CardChecklistList(props) {\r\n    if (!props.checklists || !props.checklists.length) return <React.Fragment />\r\n    return (\r\n        <div className=\"checklists-container\">\r\n           {props.checklists.map(checklist => <CardChecklist key={checklist.id} checklist={checklist} addActivity={props.addActivity} onUpdate={props.onUpdate}/>)} \r\n            {/* <CardChecklistTodo  */}\r\n        </div>\r\n    )\r\n}\r\n","import { Accordion, AccordionDetails, AccordionSummary, Button } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\n\r\n\r\nexport class CardAddComment extends Component {\r\n\r\n    state = {\r\n        isEditing: false,\r\n        txtValue: ''\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n    onChange = (ev) => {\r\n        this.setState({ txtValue: ev.target.value })\r\n    }\r\n\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (this.state.txtValue) {\r\n            this.props.onAddComment(this.state.txtValue)\r\n            this.setNotEditing()\r\n            this.setState({txtValue:''})\r\n        }\r\n    }\r\n\r\n    onBlur = () => {\r\n        if (!this.state.txtValue) return this.setNotEditing()\r\n        \r\n    }\r\n\r\n    onSave = (ev) => {\r\n        this.setNotEditing()\r\n        this.onSubmit(ev)\r\n    }\r\n\r\n    getNewCommentDisplay = () => {\r\n        if (this.state.isEditing) return (\r\n            <div className=\"add-comment-editing-container\">\r\n                <form onBlur={this.onBlur} onSubmit={this.onSubmit}>\r\n                    <input className=\"add-comment-input\" type=\"text\" placeholer=\"Write a comment...\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                </form>\r\n            </div>\r\n        )\r\n        return (\r\n            <div className=\"add-comment-editing-closed\">Write a comment...</div>\r\n        )\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"editing-section-container\" >\r\n            <Accordion expanded={this.state.isEditing} onClick={this.setEditing}  classes={{expanded:'editing-container-expanded', root:'editing-container-collapsed'}}>\r\n                <AccordionSummary\r\n                          aria-controls=\"panel1a-content\"\r\n                          id=\"panel1a-header\"\r\n                        >\r\n                {this.getNewCommentDisplay()}\r\n                </AccordionSummary>\r\n                <AccordionDetails>\r\n          <div>\r\n          <button className=\"save-btn\" disabled={!this.state.txtValue.length} onClick={this.onSave}>Save</button>\r\n          </div>\r\n        </AccordionDetails>\r\n            </Accordion>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport { IconButton } from '@material-ui/core';\r\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\r\n\r\nexport function LabelEditModal({ label, action, setLabelEditId, onRemoveLabel, card }) {\r\n    const colors = ['green', 'yellow', 'orange', 'red', 'purple', 'blue', 'grey', 'black'];\r\n    return (\r\n        <div className=\"label-edit-modal\">\r\n            <IconButton className=\"close-modal\" size=\"small\"\r\n                onClick={() => setLabelEditId()}>\r\n                <CloseOutlinedIcon />\r\n            </IconButton>\r\n            <form onSubmit={(ev) => action(ev, label)}>\r\n                <input type=\"text\" name=\"labelName\"\r\n                    defaultValue={label ? label.name : ''}\r\n                    placeholder=\"Enter label's name...\" />\r\n                <div className=\"color-pallete\">\r\n                    {colors.map(color => <React.Fragment key={color}>\r\n                        <input required hidden type=\"radio\" id={color} name=\"newColor\"\r\n                            value={color}\r\n                            defaultChecked={label ? color === label.color : 'grey'} />\r\n                        <label htmlFor={color}>\r\n                            <div className={`color-picker ${color}`}></div>\r\n                        </label>\r\n                    </React.Fragment>)}\r\n                </div>\r\n                <div className=\"save-cancel-btns\">\r\n                    <button className=\"save-btn\">Save</button>\r\n                    {label && <button className=\"cancel-btn\" onClick={() => onRemoveLabel(label.id)}>Delete</button>}\r\n                </div>\r\n            </form>\r\n        </div >\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { IconButton } from '@material-ui/core';\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { addLabel, updateLabel, removeLabel, updateCard } from '../../store/actions/boardActions.js';\r\nimport { LabelEditModal } from './LabelEditModal.jsx';\r\n\r\n\r\nclass _LabelPalette extends Component {\r\n    state = {\r\n        labelEditId: null\r\n    }\r\n    setLabelEditId = (labelEditId = null) => {\r\n        this.setState({ labelEditId });\r\n    }\r\n    onAddLabel = (ev) => {\r\n        ev.preventDefault();\r\n        const newLabel = {\r\n            name: ev.target.labelName.value,\r\n            color: ev.target.newColor.value\r\n        }\r\n        this.props.addLabel(this.props.board, newLabel);\r\n        this.setLabelEditId();\r\n    }\r\n    onEditLabel = (ev, label) => {\r\n        ev.preventDefault();\r\n        const labelName = ev.target.labelName.value;\r\n        const labelColor = ev.target.newColor.value;\r\n        const updatedLabel = { ...label, name: labelName, color: labelColor }\r\n        this.props.updateLabel(this.props.board, updatedLabel);\r\n        this.setLabelEditId();\r\n    }\r\n    onRemoveLabel = (labelId) => {\r\n        this.props.removeLabel(this.props.board, labelId);\r\n        this.setLabelEditId();\r\n    }\r\n    onToggleLabelToCard = (card, labelId) => {\r\n        // console.log('card\\'s labels before:', card.labels);\r\n        const labelIdx = card.labels.findIndex(label => label.id === labelId);\r\n        card.labels = (labelIdx === -1)\r\n            ? [...card.labels, { id: labelId }]\r\n            : [...card.labels.slice(0, labelIdx), ...card.labels.slice(labelIdx + 1)];\r\n        // console.log('card\\'s labels after:', card.labels);\r\n\r\n        const activity = this.props.createActivity('updated a label')\r\n        this.props.updateCard(this.props.board, card, activity);\r\n    }\r\n    render() {\r\n        const { board, card } = this.props;\r\n        return <ul className=\"label-palette\">\r\n            {board.labels && board.labels.map(label => <li key={label.id} className=\"label\">\r\n                <div className={`label-color ${label.color}`}\r\n                    onClick={card\r\n                        ? () => this.onToggleLabelToCard(card, label.id)\r\n                        : () => this.setLabelEditId(\r\n                            this.state.labelEditId === label.id\r\n                                ? null\r\n                                : label.id\r\n                        )}>\r\n                    <span className=\"label-text\">{label.name}</span>\r\n                    {card && card.labels.find(cardLabel => cardLabel.id === label.id) && <CheckIcon fontSize=\"small\" />}\r\n                </div>\r\n                <IconButton className=\"edit-label-btn\" onClick={() => this.setLabelEditId(\r\n                    this.state.labelEditId === label.id\r\n                        ? null\r\n                        : label.id\r\n                )}>\r\n                    <EditOutlinedIcon fontSize=\"small\" />\r\n                </IconButton>\r\n                {!card && <IconButton className=\"remove-label-btn\" onClick={() => this.onRemoveLabel(label.id)}>\r\n                    <DeleteOutlinedIcon fontSize=\"small\" />\r\n                </IconButton>}\r\n                {this.state.labelEditId === label.id && <LabelEditModal\r\n                    label={label}\r\n                    action={this.onEditLabel}\r\n                    onRemoveLabel={this.onRemoveLabel}\r\n                    setLabelEditId={this.setLabelEditId} />}\r\n            </li>)}\r\n            <li className=\"label add-label\">\r\n                <div className=\"label-color add-label\"\r\n                    onClick={() => this.setLabelEditId(\r\n                        this.state.labelEditId === 'addLabel'\r\n                            ? null\r\n                            : 'addLabel'\r\n                    )}>\r\n                    Create a new label\r\n                        </div>\r\n                {this.state.labelEditId === 'addLabel' && <LabelEditModal\r\n                    action={this.onAddLabel}\r\n                    setLabelEditId={this.setLabelEditId} />}\r\n            </li>\r\n        </ul>\r\n\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    addLabel,\r\n    updateLabel,\r\n    removeLabel,\r\n    updateCard\r\n};\r\nexport const LabelPalette = connect(mapStateToProps, mapDispatchToProps)(_LabelPalette);\r\n","import { Avatar } from '@material-ui/core'\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport React from 'react'\r\n\r\nexport function CardMember(props) {\r\n\r\n    const splitName = props.boardMember.fullName.split(' ')\r\n    const initials = splitName.map(name => name[0])\r\n\r\n    let isUserChecked;\r\n    if (!props.cardMembers || !props.cardMembers.length ) {\r\n        isUserChecked = false\r\n    }   else {\r\n        isUserChecked = Boolean(props.cardMembers.find(member => member._id === props.boardMember._id))\r\n    }\r\n    \r\n    return (\r\n        <div onClick={() => {props.toggleMember(props.boardMember,!isUserChecked)}} className=\"board-member\">\r\n            <Avatar>{initials}</Avatar>\r\n            <div>{props.boardMember.fullName}</div>\r\n            {(isUserChecked) ? <CheckIcon /> : <div style={{width:'24px'}}/>}\r\n        </div>\r\n    )\r\n}\r\n","import { CircularProgress, Popover } from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport React, { Component } from 'react'\r\nimport { CardMember } from './CardMember';\r\n\r\nexport class CardMembersList extends Component {\r\n\r\n    state = {\r\n        boardMembers: [],\r\n        filter: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.filterBoardMembers()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.boardMembers !== this.props.boardMembers || prevProps.card.members !== this.props.card.members || prevState.filter !== this.state.filter) this.filterBoardMembers()\r\n    }\r\n\r\n    filterBoardMembers = () => {\r\n        let filteredMembers = this.props.boardMembers\r\n        \r\n        if (!filteredMembers) return\r\n        filteredMembers = filteredMembers.filter(member => member.fullName.toLowerCase().includes(this.state.filter.toLowerCase()))\r\n\r\n        this.setState({ boardMembers: filteredMembers })\r\n    }\r\n\r\n    onChange =(ev) => {\r\n        this.setState({filter:ev.target.value})\r\n    }\r\n\r\n    onSelectBoardMember = (member,shouldAdd) => {\r\n        let txt = ''\r\n        \r\n        const card = {...this.props.card}\r\n        if (shouldAdd) {\r\n            card.members.push(member)\r\n            txt = `added ${member.fullName}`\r\n        } else {\r\n            card.members = card.members.filter(cardMember => cardMember._id !== member._id)\r\n            txt = `removed ${member.fullName}`\r\n        }\r\n        this.props.updateCardMembers(card,txt)\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.boardMembers) return <CircularProgress />\r\n        return (\r\n            <div>\r\n                <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'center',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'right',\r\n                    }}\r\n                    open={true}\r\n                    anchorEl={this.props.anchorEl.current}\r\n                    onClose={this.props.toggleList}\r\n                    onBackdropClick={this.props.toggleList}\r\n                >\r\n                    <div className=\"card-members-list\">\r\n                        <div className=\"card-members-list-header\">\r\n                            <div>Members</div>\r\n                            <CloseIcon onClick={this.props.toggleList} />\r\n                        </div>\r\n                        \r\n                        <input type=\"text\" value={this.state.filter} onChange={this.onChange} className=\"filter\" />\r\n                        <div className=\"board-members\">\r\n                            <h5>Board Members</h5>\r\n                            {this.state.boardMembers.map(member => {\r\n                                return <CardMember key={member._id} boardMember={member} cardMembers={this.props.card.members} toggleMember={this.onSelectBoardMember}/>\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </Popover>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","export const cloudService = {\r\n    uploadImg\r\n}\r\nasync function uploadImg(file) {\r\n    \r\n    const CLOUD_NAME = \"dyslqd6pn\"\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n    const formData = new FormData();\r\n    // const file = ev.target.files[0]\r\n    console.log(file)\r\n    formData.append('file', file)\r\n    formData.append('upload_preset', 'ld9rlgmy');\r\n    try {\r\n        const res = await fetch(UPLOAD_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        const data = await res.json()\r\n        return data.secure_url\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { cloudService } from '../../services/cloudService'\r\nimport {DropzoneDialog} from 'material-ui-dropzone'\r\n\r\nexport class CardImgUpload extends Component {\r\n\r\n    state = {\r\n        item: null\r\n    }\r\n\r\n    uploadImg = async (file) => {\r\n        \r\n        await this.props.setUploading()\r\n        const imgUrl = await cloudService.uploadImg(file)\r\n        this.setState({item:imgUrl},this.submitImage)\r\n\r\n    }\r\n\r\n\r\n    submitImage = async() => {\r\n        // if no item - do nothing\r\n        if (!this.state.item) return\r\n        // else - wait for the image to be added to the array\r\n        await this.props.onAddImage(this.state.item)\r\n        // set the state back to null\r\n        this.setState({item:null})\r\n    }\r\n    handleChange(files){\r\n        this.uploadImg(files[0])\r\n      }\r\n    render(){\r\n        return (\r\n            <DropzoneDialog\r\n            acceptedFiles={['image/*']}\r\n            cancelButtonText={\"cancel\"}\r\n            submitButtonText={\"submit\"}\r\n            maxFileSize={512000}\r\n            open={this.props.isOpen}\r\n            onClose={() => this.props.toggleOpen()}\r\n            onSave={(files) => {\r\n              this.handleChange(files)\r\n              this.props.toggleOpen();\r\n            }}\r\n            showPreviews={true}\r\n            showFileNamesInPreview={false}\r\n          />\r\n        )\r\n      }\r\n\r\n    // render() {\r\n    //     if (!this.state.item) return (\r\n            \r\n    //             <div className=\"file-upload-form\">\r\n    //                 <form>\r\n    //                     <input type=\"file\" id=\"myFile\" name=\"filename\" placeholder=\"Upload Image\" onChange={this.uploadImg} />\r\n                        \r\n    //                 </form>\r\n    //             </div>\r\n            \r\n    //     )\r\n    //     return (<div className=\"file-upload-form \"><button disabled>Upload Image</button></div>)\r\n    // }\r\n}\r\n","import React, { Component } from 'react'\r\nimport * as timeago from 'timeago.js';\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\nimport {  IconButton } from '@material-ui/core';\r\n\r\nexport class CardDetailsAttachment extends Component {\r\n    state = {\r\n        isEditing: false,\r\n        att: null,\r\n        title: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        \r\n        this.updateAttFromProps()\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.attachment !== prevProps.attachment) {\r\n            this.updateAttFromProps()\r\n        }\r\n        if (this.state.att !== prevState.att) {\r\n            \r\n        }\r\n    }\r\n    \r\n    updateAttFromProps = () => {\r\n        const att = {...this.props.attachment}\r\n        const title = this.props.attachment.title \r\n        \r\n        this.setState({ att, title })\r\n    }\r\n\r\n    setEditing = (bool) => {\r\n        if (bool) return this.setState({isEditing:true})\r\n        return this.setState({isEditing:false})\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        this.setState({title:ev.target.value})\r\n    }\r\n\r\n    onRemove = (ev) => {\r\n        // if the update function receives a blank title - it removes the item\r\n        this.setState({title:''},() => {\r\n            this.updateCard().then(() => {\r\n                this.setState({att:null})\r\n            })\r\n        }\r\n            )\r\n\r\n    }\r\n\r\n    onSubmit = (ev) =>{\r\n        ev.preventDefault()\r\n        this.updateCard()\r\n    }\r\n\r\n    updateCard = () => {\r\n        return new Promise(resolve => {\r\n\r\n            const att = {...this.state.att}\r\n            att.title = this.state.title\r\n            // console.log()\r\n            this.props.onUpdate(att)\r\n            this.setEditing(false)\r\n            resolve()\r\n        })\r\n        \r\n    }\r\n\r\n    render() {\r\n        \r\n        const att = this.state.att\r\n        if (!att) return <React.Fragment />\r\n        return (\r\n            <div className=\"card-attachment\">\r\n                <div className=\"att-image\" style={{ backgroundImage: `url(${att.src})` }} />\r\n                <div className=\"att-details-container\">\r\n                    <div className=\"att-title\">\r\n                        {(this.state.isEditing) ? \r\n                        <form onSubmit={this.onSubmit} onBlur={() => {this.setEditing(false)}}><input autoFocus onChange={this.onChange} type=\"text\" value={this.state.title} required /></form> \r\n                        :<h5 onClick={() => {this.setEditing(true)}}>{this.state.title}</h5> }\r\n                    </div>\r\n                    <div className=\"att-date-added\">\r\n                        {timeago.format(att.createdAt)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"att-remove\">\r\n                    <IconButton onClick={this.onRemove}>\r\n                        <DeleteOutlineOutlinedIcon />\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { CardDetailsAttachment } from './CardDetailsAttachment'\r\n\r\nexport function CardImagesList(props) {\r\n    // console.log(props)\r\n    \r\n    if (!props.attachments) return <React.Fragment />\r\n    return (\r\n        <div className=\"card-attachments-container\">\r\n            {props.attachments.map(att => <CardDetailsAttachment key={att.id} onUpdate={props.onUpdate} attachment={att} />)}\r\n        </div>\r\n    )\r\n}\r\n","import { Popover } from '@material-ui/core'\r\nimport { CloseOutlined } from '@material-ui/icons'\r\nimport React, { Component } from 'react'\r\n\r\n\r\nexport class CoverSelector extends Component {\r\n\r\n    state = {\r\n        cover: null\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        \r\n        this.setCoverFromProps()\r\n    }\r\n\r\n    setCoverFromProps = () => {\r\n        let cover = this.props.card.cover\r\n        if (!cover) cover = { id: null, value: null }\r\n        this.setState({ cover })\r\n\r\n    }\r\n    colors = [\r\n        { id: 101, value: '#f9f9f9' },\r\n        { id: 102, value: '#F2D600' },\r\n        { id: 103, value: '#FF9F1A' },\r\n        { id: 104, value: '#f9f9f9' },\r\n        { id: 105, value: '#EB5A46' },\r\n        { id: 106, value: '#C377E0' },\r\n        { id: 107, value: '#028ad8' },\r\n        { id: 108, value: '#a7a7a7' }\r\n    ]\r\n\r\n    onSelectCover = async(value) => {\r\n        \r\n        let cover={\r\n            id : value.id,\r\n            color : value.value,\r\n            src : value.src\r\n        }\r\n        this.setState({cover},\r\n            this.props.onUpdate(cover))\r\n    }\r\n\r\n    onRemoveCover = () => {\r\n        this.setState({cover:null}, () => {\r\n            console.log(this.state.cover)\r\n            this.props.onUpdate(this.state.cover)\r\n        })\r\n    }\r\n\r\n    getImageEls = () => {\r\n        const att = this.props.card.attachments\r\n        \r\n        if (!att) return <React.Fragment />\r\n        const imageEls = att.map(el => {\r\n            let txt = \"single-image-choice\"\r\n            if (this.state.cover.id === el.id) {\r\n                txt += ' selected'\r\n            }\r\n            return <div key={el.id} className={txt} onClick={() => this.onSelectCover(el)} style={{ backgroundImage: `url(${el.src})` }}></div>\r\n        })\r\n        \r\n        return <React.Fragment><h6>Images</h6><div className=\"image-choice\">{imageEls}</div></React.Fragment>\r\n    }\r\n\r\n    getColorEls = () => {\r\n        const colorEls = this.colors.map(el => {\r\n            let txt = \"color-choice\"\r\n            if (this.state.cover.id === el.id) {\r\n                txt += ' selected'\r\n            }\r\n\r\n            return <div key={el.id} className={txt} onClick={() => this.onSelectCover(el)} style={{ backgroundColor: el.value }}></div>\r\n        })\r\n        return colorEls\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.cover) return <React.Fragment />\r\n        return (\r\n            <Popover\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                open={true}\r\n                anchorEl={this.props.anchorEl.current}\r\n                onClose={this.props.toggleList}\r\n                onBackdropClick={this.props.toggleList}\r\n            >\r\n                <div className=\"cover-selector-container\">\r\n                    <div className=\"cover-selector-header\">\r\n                        <h5>Cover</h5>\r\n                        <CloseOutlined onClick={this.props.toggleList} />\r\n                    </div>\r\n                    <div className=\"cover-selector-colors\">\r\n                        <h6>Colors</h6>\r\n                        <div className=\"color-selection\">\r\n                            {this.getColorEls()}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"cover-selector-images\">\r\n                        {this.getImageEls()}\r\n                    </div>\r\n                    <div className=\"cover-remove-container\">\r\n                        <button className=\"cancel-btn\" onClick={this.onRemoveCover}>Remove Container</button>\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n\r\n        )\r\n    }\r\n}\r\n","import { Avatar, Button, CircularProgress, ClickAwayListener, IconButton, Popover } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { updateCard, loadBoard, switchGroup, addActivity } from '../../store/actions/boardActions';\r\nimport { CardSidebar } from './CardSidebar';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { CardDescription } from './CardDescription';\r\nimport { CardDetailsHeader } from './CardDetailsHeader';\r\nimport { CardLabels } from './CardLabels';\r\nimport { CardDueDateSetter } from './CardDueDateSetter';\r\nimport { CardChecklistList } from './CardChecklistList';\r\nimport { ActivityLog } from '../Sidebar/ActivityLog';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport { CardAddComment } from './CardAddComment';\r\nimport { boardService } from '../../services/boardService';\r\nimport { LabelPalette } from '../Sidebar/LabelPalette';\r\nimport { CardMembersList } from './CardMembersList';\r\nimport { CardImgUpload } from './CardImgUpload';\r\nimport { cardService } from '../../services/cardService/cardService';\r\nimport { CardImagesList } from './CardImagesList';\r\nimport { CoverSelector } from './CoverSelector';\r\nimport { toast } from 'react-toastify';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\n\r\nclass _CardDetails extends Component {\r\n\r\n    state = {\r\n        groupId: null,\r\n        groupName: '',\r\n        card: null,\r\n        commentsOnly: false,\r\n        isLabelPaletteShowing: false,\r\n        isCardMemeberShown: false,\r\n        isUploadZoneOpen: false,\r\n        isUploading: false,\r\n        isCoverSelectorShown: false\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.cardId !== this.props.cardId) {\r\n            this.getCardDetails()\r\n        }\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n    componentDidMount() {        \r\n\r\n        if (!this.props.board || Object.keys(!this.props.board)) {\r\n\r\n            this.props.loadBoard(this.props.boardId).then(() => {\r\n                return this.getCardDetails()\r\n            })\r\n        }\r\n        // this.getCardDetails()\r\n    }\r\n\r\n\r\n    getCardDetails = () => {\r\n        let foundCard = false;\r\n        this.props.board.groups.forEach(group => {\r\n            group.cards.forEach(card => {\r\n                if (card.id === this.props.cardId) {\r\n                    const groupId = group.id\r\n                    const groupName = group.title\r\n                    foundCard = true\r\n                    this.setState({ groupId, groupName, card })\r\n                    return\r\n                }\r\n            })\r\n        })\r\n        // if no card is found - this means the card id is invalid\r\n        if (!foundCard) {\r\n            toast.error('Oops! we seem to be missing the card you\\'re looking for.', {\r\n                position: \"bottom-right\",\r\n                autoClose: 3500,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n            setTimeout(() => {\r\n                \r\n                this.props.history.push(`/board/${this.props.board._id}`)\r\n            }, 1000)\r\n        }\r\n    }\r\n\r\n    onCloseCard = () => {\r\n        // const url = window.location.href\r\n        // const regex = /\\/board\\/.+\\//i\r\n        // const targetUrl = url.match(regex)[0]\r\n        this.props.history.push(`/board/${this.props.boardId}`)\r\n    }\r\n\r\n    toggleCommentsOnly = () => {\r\n        if (this.state.commentsOnly) return this.setState({ commentsOnly: false })\r\n        return this.setState({ commentsOnly: true })\r\n    }\r\n    toggleLabelPalette = () => {\r\n        this.setState({ isLabelPaletteShowing: !this.state.isLabelPaletteShowing })\r\n    }\r\n    toggleDisplayMembers = () => {\r\n        if (this.state.isCardMemeberShown) return this.setState({ isCardMemeberShown: false })\r\n        return this.setState({ isCardMemeberShown: true })\r\n    }\r\n    toggleUploadDropzone = () => {\r\n        if (this.state.isUploadZoneOpen) return this.setState({ isUploadZoneOpen: false })\r\n        return this.setState({ isUploadZoneOpen: true })\r\n    }\r\n    toggleCoverSelector = () => {\r\n        if (this.state.isCoverSelectorShown) return this.setState({ isCoverSelectorShown: false })\r\n        return this.setState({ isCoverSelectorShown: true })\r\n    }\r\n    getLabels = () => {\r\n        const labels = this.state.card.labels\r\n        if (labels && labels.length) return (\r\n            <div className=\"card-details-label-container\">\r\n                <h5>Labels</h5>\r\n                <CardLabels onClickLabel={this.openEditLabelsModal}\r\n                    cardLabels={labels}\r\n                    boardLabels={this.props.board.labels}\r\n                    preview={false}\r\n                />\r\n            </div>\r\n        )\r\n        return <React.Fragment />\r\n    }\r\n\r\n    createActivity = (txt) => {\r\n        const activity = {\r\n            \"txt\": txt,\r\n            \"commentTxt\": '',\r\n            \"card\": {\r\n                \"id\": this.state.card.id,\r\n                \"title\": this.state.card.title\r\n            }\r\n        }\r\n\r\n        return boardService.createActivity(activity)\r\n    }\r\n\r\n    onArchiveCard = async () => {\r\n        let card = { ...this.state.card }\r\n        card.archivedAt = Date.now()\r\n        const activity = this.createActivity('archived')\r\n        await this.submitCard(card, activity)\r\n        this.onCloseCard()\r\n    }\r\n\r\n    onUpdateDueDate = async (dueDate) => {\r\n        let card = { ...this.state.card }\r\n        card.dueDate = dueDate\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated due date')\r\n            await this.submitCard(card, activity)\r\n\r\n        })\r\n    }\r\n\r\n    onAddComment = (txt) => {\r\n        \r\n        const activity = {\r\n            \"txt\": \"\",\r\n            \"commentTxt\": txt,\r\n            \"card\": {\r\n                \"id\": this.state.card.id,\r\n                \"title\": this.state.card.title\r\n            }\r\n        }\r\n        const newActivity = boardService.createActivity(activity)\r\n        \r\n        this.props.addActivity(this.props.board, newActivity)\r\n\r\n    }\r\n\r\n    onUpdateHeader = async (txt) => {\r\n        let card = { ...this.state.card }\r\n        card.title = txt\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated the title')\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n    getCardDetailsMembers = () => {\r\n        const cardMembers = this.state.card.members\r\n        if (!cardMembers || !cardMembers.length) return <React.Fragment />\r\n\r\n        // const cardMembersEl = cardMembers.map((member, idx) => {\r\n        //     const splitName = member.fullName.split(' ')\r\n        //     const initials = splitName.map(name => name[0])\r\n        //     return <div key={100 + idx} className=\"card-details-member\"><Avatar>{initials}</Avatar></div>\r\n        // })\r\n\r\n        const cardMembersEl = cardMembers.map((member, idx) => {\r\n            \r\n            return <MemberPreview key={100+idx} name={member.fullName} imgUrl={member.imgUrl} />\r\n        })\r\n        return <div className=\"card-details-members\"><h5>Members</h5><div>{cardMembersEl}</div></div>\r\n    }\r\n\r\n\r\n    submitCard = (card, activity) => {\r\n\r\n        return new Promise(resolve => {\r\n            this.props.updateCard(this.props.board, card, activity).then(() => resolve())\r\n\r\n        })\r\n    }\r\n\r\n    onUpdateCardMembers = async (card, txt) => {\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity(txt)\r\n            await this.submitCard(card, activity)\r\n        })\r\n    }\r\n\r\n    onUpdateCover = (cover) => {\r\n        const card = { ...this.state.card }\r\n        card.cover = cover\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated the cover')\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n    onUpdateDesc = async (description) => {\r\n        const card = { ...this.state.card }\r\n        card.description = description\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated the description')\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n\r\n    setUploading = () => {\r\n        return new Promise(resolve => {\r\n            this.setState({ isUploading: true }, resolve(true))\r\n        })\r\n    }\r\n\r\n    onAddImage = (imgRef) => {\r\n        const newImg = cardService.createImage(imgRef)\r\n        const card = { ...this.state.card }\r\n        if (!card.attachments) card.attachments = []\r\n        card.attachments.push(newImg)\r\n        const activity = this.createActivity('added an image')\r\n        this.setState({ card }, async () => {\r\n            await this.submitCard(card, activity)\r\n            this.setState({ isUploading: false })\r\n        })\r\n\r\n    }\r\n\r\n    onUpdateAttachments = async (newAttachment) => {\r\n        const card = { ...this.state.card }\r\n        const idx = card.attachments.findIndex(att => att.id === newAttachment.id)\r\n\r\n        if (!newAttachment.title.length) {\r\n\r\n            card.attachments.splice(idx, 1)\r\n        } else {\r\n            card.attachments[idx] = newAttachment\r\n        }\r\n\r\n        const activity = (newAttachment.title.length) ? this.createActivity('edited the title of an image') : this.createActivity('removed an image')\r\n\r\n        this.setState({ card }, () => {\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n\r\n\r\n    onUpdateChecklists = (newChecklist, activityTxt) => {\r\n\r\n        const card = { ...this.state.card }\r\n        if (!card.checklists) card.checklists = []\r\n        // updating\r\n        const checklistIdx = card.checklists.findIndex(checklist => checklist.id === newChecklist.id)\r\n        if (checklistIdx >= 0) {\r\n            card.checklists = card.checklists.map(checklist => {\r\n                if (checklist.id === newChecklist.id) return newChecklist\r\n                return checklist\r\n            })\r\n        } else {\r\n            card.checklists.push(newChecklist)\r\n        }\r\n\r\n        // removing excess checklists\r\n        card.checklists = card.checklists.filter(checklist => {\r\n            if (checklist.title) return checklist\r\n        })\r\n\r\n        this.setState({ card }, () => {\r\n            if (activityTxt) {\r\n                let activity = this.createActivity(activityTxt)\r\n\r\n                this.submitCard(card, activity)\r\n            } else {\r\n                this.submitCard(card)\r\n            }\r\n        })\r\n    }\r\n\r\n    getFilteredActivities = () => {\r\n        const card = this.state.card\r\n        const activities = this.props.board.activities\r\n        if (!activities) return []\r\n        let cardActivities = activities.filter(activity => activity.card.id === card.id)\r\n        if (this.state.commentsOnly) cardActivities = cardActivities.filter(activity => {\r\n            if (activity.commentTxt.length) return activity\r\n        })\r\n        return cardActivities\r\n    }\r\n\r\n    getCardCover = () => {\r\n        const cover = this.state.card.cover\r\n        if (!cover) return <React.Fragment />\r\n\r\n        if (!cover.src) return (\r\n            // if there is no src - this is a color\r\n            <div className=\"card-details-cover-color\" style={{ backgroundColor: cover.color }} />\r\n        )\r\n        return (\r\n            <div className=\"card-details-cover-image\" style={{ backgroundImage: `url(${cover.src})` }} />\r\n        )\r\n    }\r\n    render() {\r\n        const card = this.state.card\r\n        if (!card) return <div className=\"card-details-background\"><div className=\"card-details-container\"><div className=\"circular-progress-container\"><CircularProgress /></div></div></div>\r\n        return (\r\n            <div className=\"card-details-background\">\r\n                <ClickAwayListener onClickAway={this.onCloseCard}>\r\n                <div className=\"card-details-container\">\r\n                    {this.getCardCover()}\r\n                    <div className=\"close-button\">\r\n                        <IconButton onClick={this.onCloseCard} aria-label=\"close\">\r\n                            <CloseIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <div className=\"card-details-header-container\">\r\n\r\n                        <div className=\"card-details-title-container\">\r\n                            <CardDetailsHeader headerTxt={card.title} onUpdate={this.onUpdateHeader} />\r\n                            <small>in list <span>{this.state.groupName}</span></small>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-details-attrs\">\r\n                        {this.getCardDetailsMembers()}\r\n                        {this.getLabels()}\r\n                        <div>\r\n                            {(this.state.card.dueDate ? <h5>Due Date</h5> : <React.Fragment />)}\r\n                            <CardDueDateSetter onUpdateDueDate={this.onUpdateDueDate} dueDate={card.dueDate} displayDate={true} displayTime={true} />\r\n                        </div>\r\n                    </div>\r\n                    <section>\r\n                        <main className=\"card-details-main\">\r\n                            <CardDescription onUpdateDesc={this.onUpdateDesc} description={card.description} />\r\n                            <CardImagesList onUpdate={this.onUpdateAttachments} attachments={this.state.card.attachments} />\r\n                            <CardChecklistList checklists={card.checklists} onUpdate={this.onUpdateChecklists} />\r\n                            <CardImgUpload onAddImage={this.onAddImage} setUploading={this.setUploading} toggleOpen={this.toggleUploadDropzone} isOpen={this.state.isUploadZoneOpen} />\r\n\r\n                        </main>\r\n                        <aside className=\"card-details-sidebar\" ref={this.ref}>\r\n                            <CardSidebar anchorRef={this.ref} addActivity={this.createActivity} isUploading={this.state.isUploading} toggleCoverSelector={this.toggleCoverSelector} toggleUploadDropzone={this.toggleUploadDropzone} toggleDisplayMembers={this.toggleDisplayMembers} dueDate={card.dueDate} toggleLabelPallete={this.toggleLabelPalette} onUpdateDueDate={this.onUpdateDueDate} onArchiveCard={this.onArchiveCard} onUpdateChecklists={this.onUpdateChecklists} />\r\n                        </aside>\r\n                        \r\n                    </section>\r\n                    <div className=\"card-details-activity-log\">\r\n                                <div className=\"card-details-activities-title\">\r\n                                    <ListIcon />\r\n                                    <h5>Activities</h5>\r\n                                    <Button onClick={this.toggleCommentsOnly}>{(this.state.commentsOnly) ? 'Show Details' : 'Hide Details'}</Button>\r\n                                </div>\r\n                                <CardAddComment onAddComment={this.onAddComment} />\r\n\r\n                                \r\n                    <ActivityLog\r\n                                    boardId={this.props.board._id}\r\n                                    displayMode=\"card\"\r\n                                    activities={this.getFilteredActivities()} />\r\n                                    </div>\r\n                </div>\r\n                </ClickAwayListener>\r\n                {/* {this.state.isLabelPaletteShowing && <LabelPalette card={card} />} */}\r\n                <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'center',\r\n                        horizontal: 'center',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'center',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.isLabelPaletteShowing}\r\n                    anchorEl={this.ref.current}\r\n                    onClose={this.toggleLabelPalette}\r\n                    onBackdropClick={this.toggleLabelPalette}>\r\n                    <LabelPalette createActivity={this.createActivity} card={card} />\r\n                </Popover>\r\n                { this.state.isCardMemeberShown && <CardMembersList updateCardMembers={this.onUpdateCardMembers} anchorEl={this.ref} toggleList={this.toggleDisplayMembers} boardMembers={this.props.board.members} card={this.state.card} cardMembers={card.members} />}\r\n                { this.state.isCoverSelectorShown && <CoverSelector card={this.state.card} anchorEl={this.ref} onUpdate={this.onUpdateCover} toggleList={this.toggleCoverSelector} />}\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    switchGroup,\r\n    updateCard,\r\n    addActivity\r\n\r\n};\r\n\r\nexport const CardDetails = connect(mapStateToProps, mapDispatchToProps)(connect(withRouter)(_CardDetails));\r\n","// Edit card preivew - should have edit labels, change memebers change due date and archive\r\nimport React, { Component } from 'react'\r\n\r\nimport {Button, Dialog } from '@material-ui/core';\r\nimport { CardLabels } from './CardLabels';\r\nimport { CardPreviewDueDate } from './CardPreviewDueDate';\r\nimport ArchiveOutlinedIcon from '@material-ui/icons/ArchiveOutlined';\r\nimport { connect } from 'react-redux';\r\nimport { addActivity, updateCard } from '../../store/actions/boardActions';\r\nimport { boardService } from '../../services/boardService';\r\nimport { CardDueDateSetter } from './CardDueDateSetter';\r\nimport { CardMembersList } from './CardMembersList';\r\nimport PeopleAltOutlinedIcon from '@material-ui/icons/PeopleAltOutlined';\r\nimport { Share } from '../Share';\r\n\r\nclass _CardPreviewActions extends Component {\r\n\r\n    state = {\r\n        isOpen: false,\r\n        offsetTop: null,\r\n        offsetLeft: null,\r\n        width: null,\r\n        txtValue: '',\r\n        isMemberListOpen: false\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n    submitCard = (card,activity) => {\r\n        return new Promise(resolve => {\r\n            this.props.updateCard(this.props.board, card,activity).then(() => {\r\n                this.onClose()\r\n            })\r\n        })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.props.onClose()\r\n    }\r\n    componentDidMount() {\r\n        this.getParentPos()\r\n        this.getCurrTitle()\r\n    }\r\n    \r\n    createActivity = (txt) => {\r\n        const card = this.props.props.card\r\n        const activity = {\r\n            txt: txt,\r\n            commentTxt: '',\r\n            card: {\r\n                id: card.id,\r\n                title: card.title\r\n            }\r\n        }\r\n\r\n        return boardService.createActivity(activity)\r\n    }\r\n    onUpdateDueDate = (dueDate) => {\r\n        let card = { ...this.props.props.card }\r\n        card.dueDate = dueDate\r\n        const activity = this.createActivity('updated due date')\r\n        this.submitCard(card,activity)\r\n        \r\n    }\r\n\r\n    onUpdateHeader =  () => {\r\n        let card = { ...this.props.props.card }\r\n        card.title = this.state.txtValue\r\n        const activity = this.createActivity('updated the title')\r\n        this.submitCard(card,activity)\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const txtValue = ev.target.value\r\n        this.setState({ txtValue })\r\n    }\r\n\r\n    onKeyPress = (ev) => {\r\n        if (ev.key === 'Enter') return this.onUpdateHeader()\r\n    }\r\n\r\n    toggleCardMembersMenu = () => {\r\n        if (this.state.isMemberListOpen) return this.setState({isMemberListOpen:false})\r\n        this.setState({isMemberListOpen:true})\r\n    }\r\n    onArchiveCard =   () => {\r\n        let card = { ...this.props.props.card }\r\n        card.archivedAt = Date.now()\r\n        const activity = this.createActivity('archived')\r\n        this.submitCard(card,activity)\r\n         \r\n    }\r\n\r\n    onUpdateCardMembers = async (card) => {\r\n        \r\n        this.setState({ card }, () => {\r\n            const activity = this.createActivity('edited the card members')\r\n            this.submitCard(card,activity)\r\n            \r\n        })\r\n    }\r\n\r\n\r\n    getParentPos = () => {\r\n        const pos = this.props.anchorEl.current.parentElement.getBoundingClientRect()\r\n        this.setState({ offsetTop: pos.top, offsetLeft: pos.left, width: pos.width })\r\n    }\r\n\r\n    getCurrTitle() {\r\n        const txtValue = this.props.props.card.title\r\n        this.setState({ txtValue })\r\n    }\r\n    getCardCover = () => {\r\n\r\n        const cardCover = this.props.props.card.cover\r\n        if (!cardCover) return <React.Fragment />\r\n        if (!cardCover.src) return (\r\n            // if there is no src - this is a color\r\n            <div className=\"card-preview-cover-color\" style={{backgroundColor:cardCover.color}} />\r\n        )\r\n        return (\r\n            <div className=\"card-preview-cover-image\" style={{backgroundImage:`url(${cardCover.src})`}} /> \r\n        )\r\n    }\r\n\r\n    getCardPath = () => {\r\n        let href = window.location.href\r\n        let cardId = this.props.props.card.id\r\n        return `${href}/${cardId}`\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.offsetTop || !this.state.offsetLeft) return <div></div>\r\n        const props = this.props.props\r\n        return (\r\n\r\n            <Dialog onClose={this.props.onClose} open={true} >\r\n                <div  className=\"card-edit-container\" onClick={(ev) => ev.stopPropagation()} style={{\r\n                    left: `${this.state.offsetLeft}px`,\r\n                    top: `${this.state.offsetTop}px`,\r\n                    position: 'fixed'\r\n                }}>\r\n                    \r\n                    {(this.state.isMemberListOpen) ? <CardMembersList anchorEl={this.ref} updateCardMembers={this.onUpdateCardMembers} toggleList={this.toggleCardMembersMenu} boardMembers={this.props.board.members} card={props.card}/> : <React.Fragment />}\r\n                    \r\n                    <div className=\"card-edit-left\">\r\n\r\n                        <div className=\"card-preview\" style={{ width: `${this.state.width}px` }}>\r\n                            {this.getCardCover()}\r\n                            {this.props.cardStyle}\r\n                            <CardLabels\r\n                                cardLabels={props.card.labels}\r\n                                boardLabels={props.board.labels}\r\n                                preview={true}\r\n                            />\r\n                            <form>\r\n                                <textarea className=\"card-preview-header card-preview-title-edit\" autoFocus onKeyPress={this.onKeyPress} onChange={this.onChange} value={this.state.txtValue} />\r\n                            </form>\r\n\r\n                            <div className=\"card-preview-attrs\">\r\n                                <CardPreviewDueDate dueDate={props.card.dueDate} />\r\n                                {this.props.attrs}\r\n                            </div>\r\n                        </div>\r\n                        <button className=\"save-btn\" onClick={this.onUpdateHeader}>Save</button>\r\n                    </div>\r\n                    <div  className=\"card-edit-right\">\r\n                        <div className=\"card-preview-edit-actions-container\">\r\n                            <Button onClick={this.onArchiveCard}><ArchiveOutlinedIcon /> <span>Archive Card</span></Button>\r\n                            <CardDueDateSetter dueDate={props.dueDate} onUpdateDueDate={this.onUpdateDueDate} />\r\n                            <Button ref={this.ref} onClick={this.toggleCardMembersMenu}><PeopleAltOutlinedIcon /><span>Members</span></Button>\r\n                            <Share item=\"card\" path={this.getCardPath()} />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </Dialog>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateCard,\r\n    addActivity\r\n\r\n};\r\n\r\nexport const CardPreviewActions = connect(mapStateToProps, mapDispatchToProps)(_CardPreviewActions);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport SubjectOutlinedIcon from '@material-ui/icons/SubjectOutlined';\r\nimport AttachFileOutlinedIcon from '@material-ui/icons/AttachFileOutlined';\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\nimport { toggleFullLabels } from '../../store/actions/boardActions';\r\nimport { CardLabels } from './CardLabels';\r\nimport { CardPreviewDueDate } from './CardPreviewDueDate';\r\nimport ChatBubbleOutlineRoundedIcon from '@material-ui/icons/ChatBubbleOutlineRounded';\r\nimport { Draggable } from 'react-beautiful-dnd'\r\nimport { CardPreviewActions } from './CardPreviewActions';\r\n// import { Avatar } from '@material-ui/core';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\n\r\n\r\n\r\nclass _CardPreview extends Component {\r\n\r\n    state = {\r\n        isEditing: false\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n\r\n\r\n    onSetEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    onSetNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    onOpenCardActions = (ev) => {\r\n        ev.stopPropagation()\r\n        this.onSetEditing()\r\n    }\r\n    getCardPreviewStyle = () => {\r\n        const cardStyle = this.props.card.style\r\n        if (!cardStyle || !Object.keys(cardStyle)) return <div></div>\r\n        if (cardStyle.bgColor) return <div className=\"card-preview-style\" style={{ backgroundColor: cardStyle.bgColor }}></div>\r\n        return <div></div>\r\n    }\r\n\r\n    getCardPreviewMembers = () => {\r\n        const cardMembers = this.props.card.members\r\n        if (!cardMembers || !cardMembers.length) return <React.Fragment />\r\n        \r\n        // const cardMembersEl =  cardMembers.map((member, idx) => {\r\n        //     const splitName = member.fullName.split(' ')\r\n        //     const initials = splitName.map(name => name[0])\r\n        //     return <div key={100 + idx} className=\"card-preview-member\"><Avatar>{initials}</Avatar></div>\r\n        // })\r\n\r\n        const cardMembersEl = cardMembers.map((member,idx) => {\r\n            return <MemberPreview key={idx} name={member.fullName} imgUrl={member.imgUrl} />\r\n        })\r\n\r\n        return <div className=\"card-preview-members\">{cardMembersEl}</div>\r\n    }\r\n\r\n    getCardPreviewAttachments = () => {\r\n        const cardAtt = this.props.card.attachments\r\n        if (!cardAtt || !Object.keys(cardAtt) || !cardAtt.length) return null\r\n        return <div key=\"0\" className=\"card-preview-attr\"><AttachFileOutlinedIcon style={{ fontSize: 16 }} /></div>\r\n    }\r\n\r\n    getCardPreviewHoldDesc = () => {\r\n        const cardDesc = this.props.card.description\r\n        if (!cardDesc || !Object.keys(cardDesc)) return null\r\n        return <div key=\"1\" className=\"card-preview-attr\"><SubjectOutlinedIcon style={{ fontSize: 16 }} /></div>\r\n    }\r\n\r\n    getCardPreviewComments = () => {\r\n        let activities =this.props.board.activities\r\n        if (!activities) return null\r\n        let cardComm = activities.filter(activity => activity.card.id === this.props.card.id)\r\n        cardComm = cardComm.filter(activity => {\r\n            if (activity.commentTxt) return activity\r\n            return null\r\n        })\r\n        if (!cardComm || !cardComm.length) return null\r\n\r\n        return <div key=\"3\" className=\"card-preview-attr\"><ChatBubbleOutlineRoundedIcon style={{ fontSize: 16 }} /> {cardComm.length}</div>\r\n    }\r\n\r\n    onOpenCardDetails = () => {\r\n        // to later be switched to using history\r\n    \r\n        let url = window.location.href\r\n        if (url.charAt(url.length - 1) !== '/') url += '/'\r\n        url += `${this.props.card.id}`\r\n        window.location.assign(url)\r\n        \r\n    }\r\n\r\n\r\n    getCardPreviewChecklist = () => {\r\n        const checklists = this.props.card.checklists\r\n        if (!checklists || !checklists.length) return null\r\n\r\n        let doneTodos = 0\r\n        let totalTodos = 0\r\n\r\n        let doneClass = ''\r\n\r\n        checklists.forEach(checklist => {\r\n            checklist.todos.forEach(todo => {\r\n                if (todo.isDone) {\r\n                    doneTodos += 1\r\n                }\r\n                totalTodos += 1\r\n            })\r\n        })\r\n\r\n        if (!totalTodos) return null\r\n        if (doneTodos === totalTodos) {\r\n            doneClass = \" card-preview-checklist-counter-done\"\r\n        }\r\n        return <div key=\"2\" className={`card-preview-attr card-preview-checklist-counter${doneClass}`}><CheckBoxOutlinedIcon style={{ fontSize: 16 }} /> <span>{doneTodos}/{totalTodos}</span> </div>\r\n    }\r\n\r\n    getCardPreviewAttrs = () => {\r\n        // test all attributes\r\n        const attrs = [\r\n            this.getCardPreviewAttachments(),\r\n            this.getCardPreviewHoldDesc(),\r\n            this.getCardPreviewChecklist(),\r\n            this.getCardPreviewComments()\r\n        ]\r\n        // if at least one of them is true OR there are members assing to this card - render the card-preview-attrs div\r\n        if (this.getCardPreviewMembers() || !attrs.every(item => !item)) {\r\n            return (<div className=\"card-preview-attrs\">\r\n                {attrs.map((att, idx) => {\r\n                    if (att) return att\r\n                    return <React.Fragment key={idx} />\r\n                })}\r\n            </div>)\r\n        }\r\n    }\r\n\r\n    getCardCover = () => {\r\n\r\n        const cardCover = this.props.card.cover\r\n        if (!cardCover) return <React.Fragment />\r\n        if (!cardCover.src) return (\r\n            // if there is no src - this is a color\r\n            <div className=\"card-preview-cover-color\" style={{backgroundColor:cardCover.color}} />\r\n        )\r\n        return (\r\n            <div className=\"card-preview-cover-image\" style={{backgroundImage:`url(${cardCover.src})`}} /> \r\n        )\r\n    }\r\n\r\n    onToggleLabels = (ev) => {\r\n        ev.stopPropagation()\r\n        return this.props.toggleFullLabels()\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        // console.log(this.ref.current)\r\n\r\n    }\r\n\r\n\r\n    render() {        \r\n        return (\r\n\r\n\r\n            <Draggable draggableId={this.props.card.id} index={this.props.index}>\r\n                {(provided, snapshot) => ( \r\n                    <div\r\n                        {...provided.draggableProps}\r\n                        {...provided.dragHandleProps}\r\n                        ref={provided.innerRef}\r\n                        className={snapshot.isDragging ? '' : 'card-preview'}\r\n                        onClick={this.onOpenCardDetails}>\r\n\r\n                            <div className={snapshot.isDragging ? 'card-preview-drag' : ''}>\r\n                                {this.getCardPreviewStyle()}\r\n                                {this.getCardCover()}\r\n                                <CardLabels onClickLabel={this.onToggleLabels}\r\n                                    isFull={this.props.fullLabel}\r\n                                    cardLabels={this.props.card.labels}\r\n                                    boardLabels={this.props.board.labels}\r\n                                    preview={true}\r\n                                />\r\n                                <div className=\"card-preview-header\">\r\n                                    {this.props.card.title}\r\n                                </div>\r\n                                <div ref={this.ref} onClick={this.onOpenCardActions} className=\"card-preview-edit-container\">\r\n                                    <EditOutlinedIcon fontSize=\"inherit\" />\r\n                                    {(this.state.isEditing) ? <CardPreviewActions anchorEl={this.ref} props={this.props} onClose={this.onSetNotEditing} cardStyle={this.getCardPreviewStyle()} attrs={this.getCardPreviewAttrs()} /> : <React.Fragment />}\r\n                                </div>\r\n                                <div className=\"card-preview-attrs\">\r\n                                    <CardPreviewDueDate dueDate={this.props.card.dueDate} />\r\n                                    {this.getCardPreviewAttrs()}\r\n                                    {this.getCardPreviewMembers()}\r\n                                </div>\r\n                                {provided.placeholder}\r\n                            </div>\r\n                    </div>\r\n                )}\r\n\r\n            </Draggable>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        fullLabel: state.boardReducer.fullLabel,\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    toggleFullLabels\r\n};\r\n\r\nexport const CardPreview = connect(mapStateToProps, mapDispatchToProps)(_CardPreview);\r\n\r\n\r\n// className = {`\r\n//      ${snapshot.isDragging ? 'check card-preview' : 'card-preview'}\r\n//      ${snapshot.isDropAnimating ? 'yes' : ''}\r\n//                         `}","import React, { Component } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nexport class NewItem extends Component {\r\n\r\n    state = {\r\n        isEditing: false,\r\n        txtValue: ''\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const txtValue = ev.target.value\r\n        this.setState({ txtValue })\r\n    }\r\n\r\n    onKeyPress = (ev) => {\r\n        if (ev.key === 'Enter') this.onSubmit(ev)\r\n    }\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    getIsEditing = () => {\r\n        if (!this.state.isEditing) return (\r\n            <div className=\"new-item-btn\" onClick={this.setEditing}><AddIcon style={{ fontSize: 14 }} />{this.props.addItemTxt}</div>\r\n        )\r\n        \r\n        return (\r\n\r\n            <div className=\"new-item-form\">\r\n                <form  onKeyDown={this.onKeyPress} onBlur={this.setNotEditing} onSubmit={this.onSubmit} >\r\n                    <textarea placeholder={this.props.placeHolderTxt} autoFocus type=\"text\" onChange={this.onChange} value={this.state.txtValue} />\r\n                    <div className=\"save-btn-container\">\r\n                        <button className=\"save-btn\" onMouseDown={this.onSubmit}>{this.props.addBtnTxt}</button>\r\n                        <CloseIcon onClick={this.setNotEditing} />\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    onSubmit = async(ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.txtValue) return\r\n        await this.props.onAdd(this.state.txtValue)\r\n        const isEditing = false\r\n        const txtValue = ''\r\n        this.setState({ isEditing, txtValue })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"new-item-container\">\r\n                {this.getIsEditing()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","const { cardService } = require(\"../../services/cardService/cardService\");\r\n\r\n\r\nexport function addCard(board, cardTxt, groupId) {\r\n    return async dispatch => {\r\n        try {\r\n          const newBoard = await cardService.addCard(board, cardTxt, groupId)\r\n          dispatch({ type: 'SET_BOARD', board: newBoard });\r\n        } catch (err) {\r\n          console.log('ReviewActions: err in addCard', err);\r\n        }\r\n      };\r\n}","import React, { Component } from 'react'\r\nimport { ClickAwayListener } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { onArchiveGroup, onArchiveAllCards } from '../../store/actions/boardActions';\r\n\r\nexport class _GroupMenu extends Component {\r\n\r\n    addCard=(ev)=>{\r\n        // currently adding without moving to focus to new card\r\n        // need to focus on \"NewItem\" and set its state with the help of parent element (same parent)\r\n        ev.stopPropagation()\r\n        this.props.onAdd('New Card')\r\n    }\r\n\r\n    archiveAllCards = (ev)=>{     \r\n        ev.stopPropagation()\r\n        this.props.onArchiveAllCards(this.props.groupId, this.props.board)\r\n        this.props.toggleMenu()\r\n    }\r\n\r\n    archiveGroup=(ev)=>{\r\n        ev.stopPropagation()\r\n        this.props.onArchiveGroup(this.props.groupId, this.props.board)\r\n        this.props.toggleMenu()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ClickAwayListener onClickAway={()=> this.props.toggleMenu()}>\r\n                <div className=\"group-menu-container\">\r\n                        <div>List Actions</div> \r\n                        <div><hr /></div>\r\n                        <div onClick={ this.addCard } className=\"group-menu-item\">Add Card...</div>\r\n                    <div onClick={this.archiveAllCards} className=\"group-menu-item\">Archive All Cards...</div>\r\n                        <div><hr/></div>\r\n                        <div onClick={ this.archiveGroup } className=\"group-menu-item\">Archive This Group...</div>\r\n                </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    onArchiveGroup,\r\n    onArchiveAllCards\r\n};\r\n\r\nexport const GroupMenu = connect(mapStateToProps, mapDispatchToProps)(_GroupMenu);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { CardPreview } from './CardCmps/CardPreview'\r\nimport { NewItem } from './NewItem'\r\nimport { addCard } from '../store/actions/groupActions'\r\nimport { setNewGroupName } from '../store/actions/boardActions'\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd'\r\nimport { GroupMenu } from './GroupCmps/GroupMenu'\r\nimport { ClickAwayListener } from '@material-ui/core'\r\n\r\nclass _Group extends Component {\r\n\r\n    state = {\r\n        currGroupName: '',\r\n        currGroupId: null,\r\n        isMenuShown: false,\r\n        isChangeGroupShown: false\r\n    }\r\n\r\n    onAddCard = (txt) => {\r\n        return this.props.addCard(this.props.board, txt, this.props.group.id)\r\n    }\r\n\r\n    getAddItemTxt = () => {\r\n        if (this.props.group.cards.length) return 'Add another card'\r\n        return 'Add a card'\r\n    }\r\n\r\n    toggleMenu=(ev = null)=>{\r\n        if (ev) ev.stopPropagation()\r\n        const isShown = !this.state.isMenuShown\r\n        this.setState({ isMenuShown: isShown })\r\n        \r\n    }\r\n\r\n    closeChangeGroupName = (ev) => {\r\n        this.setState({ isChangeGroupShown: false })\r\n        this.onSubmit(ev)\r\n    }\r\n\r\n    onOpenChangeGroupName=(id, groupName)=>{\r\n        this.setState({ currGroupId: id, currGroupName: groupName, isChangeGroupShown: true })\r\n    }\r\n\r\n    handleChangeGroupName=(ev)=>{\r\n        this.setState({ currGroupName: ev.target.value })\r\n    }\r\n\r\n    onSubmit=(ev)=>{\r\n        ev.preventDefault()        \r\n        const { currGroupId, currGroupName } = this.state\r\n        this.props.setNewGroupName(currGroupId, currGroupName, this.props.board)\r\n        this.setState({ isChangeGroupShown: false })\r\n    }\r\n\r\n    render() {\r\n        const group = this.props.group\r\n        return (\r\n            <Draggable draggableId={group.id} index={this.props.index}>\r\n                {(provided, snapshot)=>(\r\n                    <div {...provided.draggableProps} ref={provided.innerRef}\r\n                        className={snapshot.isDragging ? '' : 'group-container'}>\r\n                        {/* <div className={snapshot.isDragging ? 'group-container-drag' : 'group-container' }> */}\r\n                        {/* Why is this line needed? it messes up the view height */}\r\n                        {/* it is needed for transforming the style of the group while dragging, we'll sort this tommorrow */}\r\n                        <div {...provided.dragHandleProps}\r\n                            className=\"group-header\" onClick={()=> this.onOpenChangeGroupName(group.id, group.title) }>\r\n                            {(this.state.isChangeGroupShown) ? \r\n                                <ClickAwayListener onClickAway={this.closeChangeGroupName}>\r\n                                    <form onSubmit={this.onSubmit} className=\"change-group-name\">\r\n                                        <input className=\"change-group-name-input\" \r\n                                        type=\"text\" name=\"group-name\" onChange={this.handleChangeGroupName} \r\n                                        defaultValue={ group.title }\r\n                                        autoFocus spellCheck=\"false\" autoComplete=\"off\"\r\n                                        onFocus={ev => ev.target.select()}\r\n                                        />  \r\n                                    </form>\r\n                                </ClickAwayListener> : (group.title)}\r\n\r\n                            <span onClick={ this.toggleMenu } className=\"material-icons dots-icon\">more_horiz</span>\r\n                            {this.state.isMenuShown && <GroupMenu toggleMenu={this.toggleMenu} groupId={group.id} \r\n                            onAdd={this.onAddCard}/>}\r\n\r\n                        </div>\r\n                        <Droppable droppableId={group.id} type=\"card\">\r\n                        {(provided, snapshot)=>(\r\n                                <div className=\"card-container\"\r\n                                    ref={provided.innerRef}\r\n                                    {...provided.droppableProps}>\r\n                                    {group.cards.map((card, index) => {\r\n                                        if (!card.archivedAt) {\r\n                                            return <CardPreview key={card.id} card={card} index={index}/>\r\n                                        }\r\n                                    })}\r\n                                    {provided.placeholder}\r\n                                </div>\r\n                        )}\r\n                        </Droppable>\r\n                        <div className=\"new-card-btn-container\">\r\n                            <NewItem addItemTxt={this.getAddItemTxt()} placeHolderTxt='Add a title for this card...' addBtnTxt=\"Add Card\" onAdd={this.onAddCard} />\r\n                        </div>\r\n                        </div>\r\n                    // </div>\r\n\r\n\r\n                )}\r\n            </Draggable>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    addCard,\r\n    setNewGroupName\r\n};\r\n\r\nexport const Group = connect(mapStateToProps, mapDispatchToProps)(_Group);\r\n","import React, { Component } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { connect } from 'react-redux';\r\nimport { onAddNewGroup } from '../../store/actions/boardActions';\r\n\r\nexport class _AddNewGroup extends Component {\r\n\r\n    state = {\r\n        newGroupTitle: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ newGroupTitle: '' })\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        const title = event.target.value        \r\n        this.setState({ newGroupTitle: title })\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.newGroupTitle) return\r\n        this.props.onAddNewGroup(this.props.board ,this.state.newGroupTitle)\r\n        this.setState({ newGroupTitle: '' })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n                <div className=\"new-group-form\">\r\n                    <form onBlur={this.setNotEditing} onSubmit={this.onSubmit} >\r\n                    <input onBlur={() => this.props.closeNewGroup()} \r\n                    placeholder=\"Enter list title\" \r\n                    type=\"text\" autoFocus onChange={this.handleChange} \r\n                        value={this.state.newGroupTitle ? this.state.newGroupTitle : ''}\r\n                    />\r\n                        <div className=\"save-btn-container\">\r\n                            <button className=\"save-btn\" onMouseDown={this.onSubmit}>Add List</button>\r\n                        <CloseIcon onClick={ ()=> this.props.closeNewGroup() } />\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onAddNewGroup\r\n};\r\n\r\nexport const AddNewGroup = connect(mapStateToProps, mapDispatchToProps)(_AddNewGroup);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Group } from './Group'\r\nimport { NewItem } from './NewItem'\r\nimport { AddNewGroup } from './GroupCmps/AddNewGroup'\r\n// import { render } from '@testing-library/react'\r\n\r\nimport { Droppable } from 'react-beautiful-dnd'\r\n\r\n\r\nexport class GroupList extends Component {\r\n\r\n    state = {\r\n        isNewGroupShown: false,\r\n        groups: null\r\n    }\r\n\r\n    // filterGroups=()=>{\r\n\r\n    // }\r\n\r\n    closeNewGroup = () => {\r\n        this.setState({ isNewGroupShown: false })\r\n    }\r\n\r\n    render() {\r\n\r\n        const { groups, onAddGroup, style } = this.props\r\n        if (!groups) return <div></div>\r\n\r\n        return (\r\n            <div className=\"group-list-outer-container\" >\r\n                    <Droppable droppableId=\"changeToBoardId\" direction=\"horizontal\" type=\"group\">\r\n                        {provided=> (\r\n                        <div {...provided.droppableProps}\r\n                            ref={provided.innerRef}\r\n                            className=\"group-list-container\" >\r\n                            {groups.map((group, index) => {\r\n                                if (!group.archivedAt) {\r\n                                    return <Group key={group.id} group={group} index={index}/>\r\n                                }\r\n                        })}\r\n                        </div>\r\n                        )}\r\n                    </Droppable>\r\n                    <div className=\"new-group\" >\r\n                        {!this.state.isNewGroupShown && <div className=\"add-new-group-text\"\r\n                            onClick={() => this.setState({ isNewGroupShown: true })}>+ Add another list</div>}\r\n                        {this.state.isNewGroupShown && <AddNewGroup closeNewGroup={this.closeNewGroup} />}\r\n                    </div>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { IconButton, Divider } from '@material-ui/core';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\n\r\n\r\nexport function SidebarHeader({ titleTxt, onSetMenuOpt }) {\r\n    return (\r\n        <div className=\"sidebar-header\">\r\n            <h4>{titleTxt}</h4>\r\n            <IconButton size=\"small\" onClick={() => onSetMenuOpt(null)}>\r\n                <ArrowBackIosOutlinedIcon />\r\n            </IconButton>\r\n            <Divider />\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Drawer, Divider } from '@material-ui/core';\r\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\r\nimport SubjectIcon from '@material-ui/icons/Subject';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\nimport { updateBoard } from '../../store/actions/boardActions.js';\r\nimport { SidebarHeader } from './SidebarHeader';\r\n\r\nexport class _AboutBoard extends Component {\r\n    state = {\r\n        isEditDesc: false,\r\n        isEditTitle: false,\r\n        currDesc: null,\r\n        currTitle: null\r\n    }\r\n    setCurrDesc = (ev) => {\r\n        const currDesc = ev.target.value;\r\n        this.setState({ currDesc });\r\n\r\n    }\r\n    setCurrTitle = (ev) => {\r\n        const currTitle = ev.target.value;\r\n        this.setState({ currTitle });\r\n    }\r\n    onEditDesc = () => {\r\n        const description = this.state.currDesc;\r\n        if (description) {\r\n            const newBoard = { ...this.props.board, description };\r\n            this.props.updateBoard(newBoard);\r\n        }\r\n        this.setState({ isEditDesc: false });\r\n    }\r\n    onEditTitle = () => {\r\n        const title = this.state.currTitle;\r\n        if (title) {\r\n            const newBoard = { ...this.props.board, title };\r\n            this.props.updateBoard(newBoard);\r\n        }\r\n        this.setState({ isEditTitle: false });\r\n    }\r\n    render() {\r\n        const { board, isShowing, onSetMenuOpt } = this.props;\r\n        const { isEditDesc, isEditTitle } = this.state;\r\n        return (\r\n            <div className=\"sidebar-container\" >\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    className=\"about-board\"\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"ABOUT THIS BOARD\" onSetMenuOpt={onSetMenuOpt} />\r\n                    {isEditTitle\r\n                        ? <div>\r\n                            <input type=\"text\" autoFocus \r\n                            defaultValue={board.title} \r\n                            onChange={(ev) => this.setCurrTitle(ev)} \r\n                            onBlur={() => this.setState({ isEditTitle: false })} />\r\n                            <button type=\"button\" className=\"save-btn\" onMouseDown={this.onEditTitle}>Save</button>\r\n                        </div>\r\n                        : <h2 onClick={() => this.setState({ isEditTitle: true })}>{board.title}</h2>}\r\n                    <div className=\"about-container\">\r\n                        {board.createdBy && <div className=\"created-by\">\r\n                            <h5><PersonOutlineIcon /> CREATED BY</h5>\r\n                            <div className=\"board-creator\">\r\n                                <MemberPreview name={board.createdBy.fullName} />\r\n                                <span>{board.createdBy.fullName}</span>\r\n                            </div>\r\n                        </div>}\r\n                        <Divider />\r\n                        <div className=\"board-description\">\r\n                            <div className=\"description-header\">\r\n                                <h5><SubjectIcon /> DESCRIPTION</h5>\r\n                                <button className=\"edit-desc-btn\"\r\n                                    onClick={() => this.setState({ isEditDesc: !this.state.isEditDesc })}>\r\n                                    Edit desciption\r\n                                </button>\r\n                            </div>\r\n                            {isEditDesc && <React.Fragment>\r\n                                <textarea name=\"boardDesc\"\r\n                                    autoFocus\r\n                                    defaultValue={board.description}\r\n                                    style={{ resize: 'none' }}\r\n                                    cols=\"30\" rows=\"10\"\r\n                                    onChange={(ev) => this.setCurrDesc(ev)}\r\n                                    onBlur={() => this.setState({ isEditDesc: false })}></textarea>\r\n                                <div className=\"save-cancel-btns\">\r\n                                    <button type=\"button\" className=\"save-btn\"\r\n                                        onMouseDown={this.onEditDesc}>Save</button>\r\n                                    <button className=\"cancel-btn\"\r\n                                        onClick={() => this.setState({ isEditDesc: false })}>Cancel</button>\r\n                                </div>\r\n                            </React.Fragment>}\r\n                            {!isEditDesc && <pre\r\n                                style={{ cursor: 'pointer' }}\r\n                                onClick={() => this.setState({ isEditDesc: true })}>\r\n                                {board.description}\r\n                            </pre>}\r\n                        </div>\r\n                    </div>\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateBoard\r\n};\r\nexport const AboutBoard = connect(mapStateToProps, mapDispatchToProps)(_AboutBoard);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Drawer, Divider, IconButton, List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\nimport { updateBoard, setStyle } from '../../store/actions/boardActions.js';\r\nimport bg1 from './../../assets/imgs/backgrounds/bg-1.jpg';\r\nimport { SidebarHeader } from './SidebarHeader.jsx';\r\n\r\nexport class _ChangeBackground extends Component {\r\n    onSetBoardStyle = (style) => {\r\n        const newBoard = { ...this.props.board, style };\r\n        this.props.updateBoard(newBoard);\r\n        this.props.setStyle(newBoard.style)\r\n    }\r\n    render() {\r\n        const { board, isShowing, onSetMenuOpt } = this.props;\r\n        const boardStyles = [\r\n            {\r\n                id: 'bs101',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708689/bg-1_ls68ox.jpg)'\r\n            },\r\n            {\r\n                id: 'bs102',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708658/bg-2_r8mevb.jpg)'\r\n            },\r\n            {\r\n                id: 'bs103',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708664/bg-3_vrhygl.jpg)'\r\n            },\r\n            {\r\n                id: 'bs104',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708683/bg-4_jqpmcl.jpg)'\r\n            },\r\n            {\r\n                id: 'bs105',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708662/bg-5_r4mz7j.jpg)'\r\n            },\r\n            {\r\n                id: 'bs106',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708669/bg-6_tsrunp.jpg)'\r\n            },\r\n            {\r\n                id: 'bs107',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708679/bg-7_g0tqic.jpg)'\r\n            },\r\n            {\r\n                id: 'bs108',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708683/bg-8_hoe86h.jpg)'\r\n            }\r\n        ];\r\n        return (\r\n            <div className=\"about-board sidebar-container\" >\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"CHANGE BACKGROUND\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <div className=\"changeBG-container\">\r\n                        <div className=\"style-pallete\">\r\n                            {boardStyles.map(style => {\r\n                                return <div key={style.id}\r\n                                    className=\"bg-style\"\r\n                                    style={{\r\n                                        backgroundColor: style.bgClr,\r\n                                    }}\r\n                                    onClick={() => this.onSetBoardStyle(style)}>\r\n                                    <div className=\"img-container\" style={{\r\n                                        backgroundImage: style.bgImg,\r\n                                        backgroundRepeat: 'no-repeat',\r\n                                        backgroundSize: 'cover'\r\n                                       \r\n                                    }}></div>\r\n                                    <div>Select</div>\r\n                                </div>\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n    setStyle\r\n};\r\nexport const ChangeBackground = connect(mapStateToProps, mapDispatchToProps)(_ChangeBackground);\r\n","export default __webpack_public_path__ + \"static/media/bg-1.81fd7471.jpg\";","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Drawer, Divider, IconButton } from '@material-ui/core';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\nimport UnarchiveOutlinedIcon from '@material-ui/icons/UnarchiveOutlined';\r\nimport { loadBoard, updateCard, deleteCard, updateGroup } from '../../store/actions/boardActions.js';\r\nimport { SidebarHeader } from './SidebarHeader.jsx';\r\n\r\nexport class _SideArchive extends Component {\r\n    state = {\r\n        isShowingCards: true,\r\n        archive: { archivedCards: [], archivedGroups: [] },\r\n        filterBy: ''\r\n    }\r\n    async componentDidMount() {\r\n        this.loadArchive();\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.board !== this.props.board) this.loadArchive();\r\n    }\r\n    loadArchive = () => {\r\n        const { filterBy } = this.state;\r\n        const { board } = this.props;\r\n        let archivedCards = board.groups.filter(group => {\r\n            return group.cards.find(card => card.archivedAt)\r\n        });\r\n        archivedCards = archivedCards.map(group => {\r\n            return {\r\n                ...group,\r\n                cards: group.cards.filter(card => {\r\n                    return card.archivedAt\r\n                        && (card.title.toLowerCase().includes(filterBy.toLowerCase())\r\n                            || card.description.toLowerCase().includes(filterBy.toLowerCase()));\r\n                })\r\n            };\r\n        });\r\n        const archivedGroups = board.groups.filter(group => {\r\n            return group.archivedAt && group.title.toLowerCase().includes(filterBy.toLowerCase())\r\n        });\r\n        this.setState({ archive: { archivedCards, archivedGroups } });\r\n    }\r\n    onOpenCardDetails = (cardId) => {\r\n        // to later be switched to using history\r\n\r\n        let url = window.location.href\r\n        url += cardId\r\n        window.location.assign(url)\r\n    }\r\n    onUnArchiveCard = (card) => {\r\n        card.archivedAt = null;\r\n        this.props.updateCard(this.props.board, card);\r\n    }\r\n    onDeleteCard = (cardId) => {\r\n        this.props.deleteCard(this.props.board, cardId);\r\n    }\r\n    onUnArchiveGroup = (group) => {\r\n        group.archivedAt = null;\r\n        this.props.updateGroup(this.props.board, group);\r\n    }\r\n    onFilter = (ev) => {\r\n        const filterBy = ev.target.value;\r\n        this.setState(() => ({ filterBy }), () => this.loadArchive());\r\n    }\r\n    render() {\r\n        const { board, isShowing, onSetMenuOpt } = this.props;\r\n        const { isShowingCards, archive } = this.state;\r\n        if (!board.groups) return <div>Loading...</div>;\r\n\r\n        return (\r\n            archive && <div className=\"archive sidebar-container\">\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"ARCHIVE\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <div className=\"search-archive-container\">\r\n                        <input type=\"text\" onChange={(ev) => this.onFilter(ev)} />\r\n                        <button\r\n                            className=\"toggle-archive-btn\"\r\n                            onClick={() => {\r\n                                this.setState({\r\n                                    isShowingCards: !this.state.isShowingCards,\r\n                                    filterBy: ''\r\n                                });\r\n                            }}>\r\n                            Switch to {(isShowingCards) ? 'groups' : 'cards'}\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"archive-list-container\">\r\n                        {isShowingCards\r\n                            ? archive.archivedCards.map(group => {\r\n                                if (group.cards.length === 0) return;\r\n                                return <React.Fragment key={group.id}>\r\n                                    <h5>{group.title}</h5>\r\n                                    {group.cards.map(card => {\r\n                                        return <div className=\"archive-card-container\"\r\n                                            key={card.id}>\r\n                                            <div className=\"archive-card-preview\"\r\n                                                onClick={() => this.onOpenCardDetails(card.id)}>\r\n                                                <span>{card.title}</span>\r\n                                            </div>\r\n                                            <div className=\"buttons\">\r\n                                                <IconButton onClick={() => this.onUnArchiveCard(card)}>\r\n                                                    <UnarchiveOutlinedIcon fontSize='small' />\r\n                                                </IconButton>\r\n                                                <IconButton onClick={() => this.onDeleteCard(card.id)}>\r\n                                                    <DeleteOutlinedIcon fontSize='small' />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        </div>\r\n                                    })}\r\n                                </React.Fragment>\r\n                            })\r\n                            : archive.archivedGroups.map(group => <React.Fragment key={group.id}>\r\n                                <div className=\"archive-group-preview\">\r\n                                    <h5>{group.title}</h5>\r\n                                </div>\r\n                                <div className=\"buttons\">\r\n                                    <IconButton onClick={() => this.onUnArchiveGroup(group)}>\r\n                                        <UnarchiveOutlinedIcon fontSize='small'\r\n                                        />\r\n                                    </IconButton>\r\n                                    <IconButton>\r\n                                        <DeleteOutlinedIcon fontSize='small' />\r\n                                    </IconButton>\r\n                                </div>\r\n                            </React.Fragment>)\r\n                        }\r\n                    </div>\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    updateCard,\r\n    deleteCard,\r\n    updateGroup\r\n};\r\n\r\nexport const SideArchive = connect(mapStateToProps, mapDispatchToProps)(_SideArchive);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Drawer, Divider, IconButton } from '@material-ui/core';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\nimport { addLabel, updateLabel, removeLabel } from '../../store/actions/boardActions.js';\r\nimport { LabelPalette } from './LabelPalette.jsx';\r\nimport { SidebarHeader } from './SidebarHeader.jsx';\r\n\r\nclass _LabelPanel extends Component {\r\n    render() {\r\n        const { isShowing, onSetMenuOpt } = this.props;\r\n        return (\r\n            <div className=\"sidebar-container\" >\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    className=\"label-panel\"\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"LABELS\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <LabelPalette />\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    addLabel,\r\n    updateLabel,\r\n    removeLabel\r\n};\r\nexport const LabelPanel = connect(mapStateToProps, mapDispatchToProps)(_LabelPanel);\r\n","import httpService from \"./httpService\"\r\nimport { utils } from \"./utils\";\r\nconst { default: userService } = require(\"./userService\")\r\n\r\n\r\nexport const templateService = {\r\n    createTemplateFromBoard,\r\n    createBoardFromTemplate,\r\n    query,\r\n    remove\r\n}\r\n\r\nfunction remove(templateId) {\r\n    return httpService.delete(`template/${templateId}`);\r\n}\r\n\r\nasync function createBoardFromTemplate(templateId,boardName) {\r\n    const data = {\r\n        templateId,\r\n        user :userService.getLoggedInUser(),\r\n        boardName\r\n    }\r\n\r\n    if (!data.boardName) data.boardName = 'New board'\r\n    \r\n    const template = await httpService.post(`template/new/`, data);\r\n    return template\r\n}\r\n\r\n\r\nasync function createTemplateFromBoard(board,templateName,attachments,checklists,labels) {\r\n    \r\n    const data = {\r\n        board,\r\n        templateName,\r\n        attachments,\r\n        checklists,\r\n        labels\r\n    }\r\n    const boardId = await httpService.post(`template`, data);\r\n    return Promise.resolve(boardId)\r\n}\r\n\r\n\r\n\r\n\r\nfunction query(filterBy) {\r\n    //   var queryStr = (!filterBy)? '' : `?name=${filterBy.name}&sort=anaAref`\r\n    //   return httpService.get(`board${queryStr}`);\r\n    const params = (!filterBy) ? '' : utils.createQueryString(filterBy)\r\n    console.log(params)\r\n    return httpService.get(`template${params}`)\r\n}\r\n\r\n// function createTemplate(type, boardName) {\r\n//     const board = {\r\n//         // _id: utils.makeId(),\r\n//         title: boardName,\r\n//         isArchived: false,\r\n//         createdAt: Date.now,\r\n//         createdBy: userService.getLoggedInUser(),\r\n//         style: {\r\n//             id: utils.makeId(),\r\n//             fontClr: '#f9f9f9',\r\n//             bgImg: null\r\n//         },\r\n//         members: [],\r\n//         groups: []\r\n//     }\r\n// }\r\n\r\n","import io from 'socket.io-client';\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030';\r\n\r\nlet socket;\r\n\r\nexport default {\r\n  setup,\r\n  terminate,\r\n  on,\r\n  off,\r\n  emit\r\n};\r\n\r\nfunction setup() {\r\n  socket = io(BASE_URL);\r\n}\r\n\r\nfunction terminate() {\r\n  socket = null;\r\n}\r\n\r\nfunction on(eventName, cb) {\r\n  socket.on(eventName, cb);\r\n}\r\n\r\nfunction off(eventName, cb) {\r\n  socket.off(eventName, cb);\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n  socket.emit(eventName, data);\r\n}\r\n","\r\nimport { Button, Checkbox, Dialog, FormControl, FormControlLabel, FormGroup, FormLabel, IconButton, ListItemIcon, TextField } from '@material-ui/core'\r\nimport { CloseOutlined } from '@material-ui/icons'\r\nimport React, { Component } from 'react'\r\nimport { templateService } from '../../services/templateService'\r\nimport ArtTrackIcon from '@material-ui/icons/ArtTrack';\r\nimport TableChartOutlinedIcon from '@material-ui/icons/TableChartOutlined';\r\n\r\n\r\nexport class CreateTemplate extends Component {\r\n\r\n    state = {\r\n        isOpen: false,\r\n        includeAttachments: true,\r\n        includeChecklists: true,\r\n        includeLabels: true,\r\n        templateName: ''\r\n\r\n    }\r\n\r\n\r\n    onOpen = () => {\r\n        this.setState({ isOpen: true })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.setState({ isOpen: false })\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        this.setState({ templateName: ev.target.value })\r\n    }\r\n\r\n    createTemplateFromBoard = async () => {\r\n        await templateService.createTemplateFromBoard(this.props.board, this.state.templateName, this.state.includeAttachments, this.state.includeChecklists, this.state.includeLabels)\r\n        this.props.history.push('/templates')\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({ [event.target.name]: event.target.checked });\r\n    };\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"open-template-button\" onClick={this.onOpen}><ListItemIcon><TableChartOutlinedIcon /></ListItemIcon> <span>Create template</span></div>\r\n                <Dialog open={this.state.isOpen} onClose={this.onClose} onBackdropClick={this.onClose}>\r\n                    <div className=\"create-template\">\r\n                        <div className=\"create-template-header\">\r\n                            <div></div>\r\n                            <div><h6>Create Template</h6></div>\r\n                            <IconButton onClick={this.onClose}>\r\n                                <CloseOutlined />\r\n                            </IconButton>\r\n                        </div>\r\n                        <div className=\"create-template-form\">\r\n                            <div className=\"name\">\r\n                                <span>Give your template a name</span>\r\n                                <TextField value={this.state.templateName} onChange={this.onChange} label=\"Template name\" variant=\"outlined\" />\r\n                            </div>\r\n\r\n                            <div className=\"checkboxes\">\r\n                                <FormControl>\r\n                                    <FormLabel component=\"legend\">Which items would you like to export to the template?</FormLabel>\r\n                                    <FormGroup>\r\n                                        <FormControlLabel\r\n                                            control={<Checkbox checked={this.state.includeAttachments} onChange={this.handleChange} name=\"includeAttachments\" />}\r\n                                            label=\"Attachments\"\r\n                                        />\r\n                                        <FormControlLabel\r\n                                            control={<Checkbox checked={this.state.includeChecklists} onChange={this.handleChange} name=\"includeChecklists\" />}\r\n                                            label=\"Checklists\"\r\n                                        />\r\n                                        <FormControlLabel\r\n                                            control={<Checkbox checked={this.state.includeLabels} onChange={this.handleChange} name=\"includeLabels\" />}\r\n                                            label=\"Labels\"\r\n                                        />\r\n                                    </FormGroup>\r\n                                </FormControl>\r\n                            </div>\r\n                            <div className=\"confirm\">\r\n                                <Button onClick={this.createTemplateFromBoard}>Create Template</Button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Drawer, Divider, IconButton, List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport WallpaperOutlinedIcon from '@material-ui/icons/WallpaperOutlined';\r\nimport ArchiveOutlinedIcon from '@material-ui/icons/ArchiveOutlined';\r\nimport LabelOutlinedIcon from '@material-ui/icons/LabelOutlined';\r\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\r\nimport AssessmentOutlinedIcon from '@material-ui/icons/AssessmentOutlined';\r\nimport FormatListBulletedOutlinedIcon from '@material-ui/icons/FormatListBulletedOutlined';\r\nimport TableChartOutlinedIcon from '@material-ui/icons/TableChartOutlined';\r\nimport { AboutBoard } from './AboutBoard'\r\nimport { ChangeBackground } from './ChangeBackground'\r\nimport { SideArchive } from './SideArchive'\r\nimport { ActivityLog } from './ActivityLog'\r\nimport { LabelPanel } from './LabelPanel';\r\nimport { CreateTemplate } from './CreateTemplate';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nexport class _Sidebar extends Component {\r\n    state = { selectedMenuOpt: null }\r\n    onSetMenuOpt = (selectedMenuOpt) => {\r\n        this.setState({ selectedMenuOpt });\r\n    }\r\n    DynamicCmp = () => {\r\n        const { selectedMenuOpt } = this.state;\r\n        switch (selectedMenuOpt) {\r\n            case 'about':\r\n                return <AboutBoard isShowing={selectedMenuOpt === 'about'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />;\r\n            case 'changeBG':\r\n                return <ChangeBackground isShowing={selectedMenuOpt === 'changeBG'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />\r\n            case 'archive':\r\n                return <SideArchive isShowing={selectedMenuOpt === 'archive'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />\r\n            case 'labels':\r\n                return <LabelPanel isShowing={selectedMenuOpt === 'labels'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />\r\n            case null:\r\n                return <React.Fragment></React.Fragment>\r\n            default:\r\n                return <React.Fragment></React.Fragment>\r\n        }\r\n    }\r\n    render() {\r\n        const { board, isSidebarShowing, onToggleSidebar } = this.props;\r\n        const anchor = 'right';\r\n        return (\r\n            <div className=\"sidebar-container\">\r\n                <Drawer className=\"sidebar\"\r\n                    anchor={anchor}\r\n                    open={isSidebarShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={\"persistent\"}\r\n                    onClose={() => onToggleSidebar(false)}>\r\n                    <div className=\"sidebar-header\">\r\n                        <h4>MENU</h4>\r\n                        <IconButton size=\"small\" onClick={() => onToggleSidebar(false)}>\r\n                            <CloseOutlinedIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <List>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('about') }}>\r\n                            <ListItemIcon><InfoOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>About this board</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('changeBG') }}>\r\n                            <ListItemIcon><WallpaperOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Change background</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" component={Link} to={`/analysis/${board._id}/`}>\r\n                            <ListItemIcon><AssessmentOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Board analysis</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('archive') }}>\r\n                            <ListItemIcon><ArchiveOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Archive</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('labels') }}>\r\n                            <ListItemIcon><LabelOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Labels</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\">\r\n                            <CreateTemplate history={this.props.history} board={this.props.board} />\r\n                        </ListItem>\r\n                    </List>\r\n                    <Divider />\r\n                    <h5><FormatListBulletedOutlinedIcon size=\"small\" />ACTIVITY LOG</h5>\r\n                    <ActivityLog activities={board.activities} boardId={board._id} />\r\n                </Drawer>\r\n\r\n                {this.DynamicCmp()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\n\r\nexport const Sidebar = connect(mapStateToProps)(_Sidebar);","import { CircularProgress } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { BoardHeader } from '../cmps/BoardHeader/BoardHeader';\r\nimport { CardDetails } from '../cmps/CardCmps/CardDetails';\r\nimport { GroupList } from '../cmps/GroupList';\r\nimport { Sidebar } from '../cmps/Sidebar/Sidebar';\r\nimport { loadBoard, onSetFilterBy, setStyle, resetBoard } from '../store/actions/boardActions';\r\nimport socketService from '../services/socketService.js'\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { detailedDiff } from 'deep-object-diff';\r\n\r\n\r\nclass _Board extends Component {\r\n\r\n  state = {\r\n    isSidebarShowing: false,\r\n    lastReceivedUpdateAt: null\r\n  }\r\n\r\n  async componentDidMount() {\r\n    \r\n    // await this.props.loadBoard('5f6a0f6e973d861c5d72eb3f')\r\n    const boardId = this.props.match.params.id\r\n    socketService.setup()\r\n    try {\r\n      await this.props.loadBoard(boardId)\r\n      this.props.setStyle(this.props.board.style)\r\n      socketService.on('init board', () => console.log(this.props.board._id))\r\n      socketService.emit('entered-board', this.props.board._id)\r\n      socketService.on('board-updated', async updatedBoard => {\r\n        \r\n        const prevBoard = JSON.parse(JSON.stringify(this.props.board))\r\n        await this.props.loadBoard(updatedBoard._id)\r\n        if (prevBoard.style !== this.props.board.style) this.props.setStyle(this.props.board.style)\r\n        this.showUpdateMessage(prevBoard)\r\n      })\r\n    } catch (err) {\r\n      toast.error('Oops! we seem to be missing the board you\\'re looking for. going back to board selection.', {\r\n        position: \"bottom-right\",\r\n        autoClose: 3500,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      setTimeout(() => {\r\n        this.props.history.push('/board')\r\n      }, 1000)\r\n    }\r\n\r\n  }\r\n\r\n\r\n  // componentDidUpdate(prevProps) {\r\n  //   if (prevProps.board.groups !== this.props.board.groups) {\r\n  //     const differ = detailedDiff(prevProps.board.groups, this.props.board.groups)\r\n  //     console.log(differ)\r\n  //   }\r\n  // }\r\n\r\n\r\n  showUpdateMessage = (prevBoard) => {\r\n    // this details the difference between the previous board and the current board\r\n    const differ = detailedDiff(prevBoard, this.props.board)\r\n    // if there are no differences - return\r\n    if (!Object.keys(differ.added).length && !Object.keys(differ.deleted).length && !Object.keys(differ.updated).length) return console.log('nothing to update')\r\n\r\n    // if there are differences - sets the last received update time\r\n    this.setState({ lastReceivedUpdateAt: Date.now() })\r\n\r\n    // toast.success('The board has been updated!', {\r\n    //   position: \"bottom-right\",\r\n    //   autoClose: 2000,\r\n    //   hideProgressBar: false,\r\n    //   closeOnClick: true,\r\n    //   pauseOnHover: true,\r\n    //   draggable: true,\r\n    //   progress: undefined,\r\n    // });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    \r\n      socketService.off('board-updated')\r\n      socketService.terminate()\r\n    \r\n    this.props.resetBoard()\r\n  }\r\n\r\n\r\n  getBoardFromParams = async () => {\r\n    const boardId = this.props.match.params.id\r\n    try {\r\n      await this.props.loadBoard(boardId)\r\n      socketService.on('init board', () => console.log('init board',this.props.board._id))\r\n      this.props.setStyle(this.props.board.style)\r\n    } catch (err) {\r\n      toast.error('Oops! we seem to be missing the board you\\'re looking for. going back to board selection.', {\r\n        position: \"bottom-right\",\r\n        autoClose: 3500,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      setTimeout(() => {\r\n        this.props.history.push('/board')\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  onToggleSidebar = (isSidebarShowing) => {\r\n    this.setState({ isSidebarShowing });\r\n  }\r\n\r\n  onFilter = (filterBy) => {\r\n    this.props.onSetFilterBy(this.props.board, filterBy)\r\n  }\r\n\r\n  onAddGroup = (txt) => {\r\n    return txt\r\n  }\r\n\r\n  render() {\r\n\r\n    const { board } = this.props\r\n    if (!board) return <div className=\"board-container\"><CircularProgress /></div>\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        {(this.props.match.params.cardId) ? <CardDetails cardId={this.props.match.params.cardId} boardId={this.props.match.params.id} history={this.props.history} /> : <div></div>}\r\n        <div className=\"board-container\">\r\n          <BoardHeader title={board.title}\r\n            members={board.members}\r\n            onToggleSidebar={this.onToggleSidebar}\r\n            onFilter={this.onFilter}\r\n            style={board.style}\r\n            users={this.props.allUsers}\r\n            lastUpdate={this.state.lastReceivedUpdateAt}\r\n          />\r\n\r\n          <Sidebar board={board} history = {this.props.history}\r\n            isSidebarShowing={this.state.isSidebarShowing}\r\n            onToggleSidebar={this.onToggleSidebar} />\r\n\r\n          {(board.groups) ? <GroupList style={board.style} onAddGroup={this.onAddGroup} groups={board.groups} /> : <CircularProgress />}\r\n\r\n          </div>\r\n\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardReducer.board,\r\n    filterBy: state.boardReducer.filterBy\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  loadBoard,\r\n  onSetFilterBy,\r\n  setStyle,\r\n  resetBoard\r\n\r\n};\r\n\r\nexport const Board = connect(mapStateToProps, mapDispatchToProps)(_Board);\r\n","\r\nimport React, { Component } from 'react'\r\n\r\nexport class NewBoardColor extends Component {\r\n    render() {  \r\n              \r\n        return (\r\n            <div className={`new-board-color ${this.props.isSelected ? 'colorSelected' : ''}`} \r\n            style={{ backgroundColor: `${this.props.color}` }}\r\n                onClick={()=>this.props.onSetColor(this.props.color) }\r\n            ></div>\r\n        )\r\n    }\r\n}\r\n\r\n","export const allBoardColors = [\r\n    {\r\n    \"id\": \"bc101\",\r\n    \"name\": \"green\",\r\n    \"color\": \"#519839\"\r\n}, {\r\n    \"id\": \"bc102\",\r\n    \"name\": \"yellow\",\r\n    \"color\": \"#D29034\"\r\n}, {\r\n    \"id\": \"bc103\",\r\n    \"name\": \"blue\",\r\n    \"color\": \"#0079BF\"\r\n}, {\r\n    \"id\": \"bc104\",\r\n    \"name\": \"brown\",\r\n    \"color\": \"#B04632\"\r\n}, {\r\n    \"id\": \"bc105\",\r\n    \"name\": \"purple\",\r\n    \"color\": \"#89609E\"\r\n}, {\r\n    \"id\": \"bc106\",\r\n    \"name\": \"pink\",\r\n    \"color\": \"#CD5A91\"\r\n}, {\r\n    \"id\": \"bc107\",\r\n    \"name\": \"lightGreen\",\r\n    \"color\": \"#4BBF6B\"\r\n}, {\r\n    \"id\": \"bc108\",\r\n    \"name\": \"teal\",\r\n    \"color\": \"#49A9D7\"\r\n}]","\r\n\r\nimport React, { Component } from 'react'\r\nimport { NewBoardColor } from './NewBoardColor'\r\nimport { connect } from 'react-redux';\r\nimport { allBoardColors } from '../../assets/bgColors/bgColors';\r\nimport { addNewBoard, loadBoard, setDefaultStyle } from '../../store/actions/boardActions';\r\nimport {  IconButton } from '@material-ui/core';\r\nimport { CloseOutlined } from '@material-ui/icons';\r\n\r\nexport class _AddNewBoard extends Component {\r\n\r\n    state = {\r\n        selectedColor: null,\r\n        newBoardName: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ selectedColor: null, newBoardName: '' })\r\n    }\r\n\r\n    onSetColor = (color) => {\r\n        this.setState({ selectedColor: color })\r\n    }\r\n\r\n    isSelected(color) {\r\n        if (this.state.selectedColor === color) return true\r\n        else return false\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        this.setState({ newBoardName: ev.target.value })\r\n    }\r\n\r\n    onSubmit = async (ev) => {\r\n        ev.preventDefault()\r\n        const boardColor = this.state.selectedColor\r\n        const boardName = this.state.newBoardName\r\n        if (!boardName) return // add an error message when no name has been entered\r\n        const newBoard = await this.props.addNewBoard(boardName, boardColor)\r\n        this.props.redirectPath(newBoard._id)\r\n        // await this.props.loadBoard(newBoard._id)\r\n        // this.props.setDefaultStyle()\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            \r\n                <div className=\"add-board-container\">\r\n                    <div className=\"notification-preview-header\">\r\n                        <div></div>\r\n                        <div><h6>Create Board</h6></div>\r\n                        <IconButton onClick={this.props.onCloseModal}>\r\n                            <CloseOutlined />\r\n                        </IconButton>\r\n                    </div>\r\n                    <input onChange={this.handleChange} type=\"text\" placeholder=\"New Board's Name\" autoFocus />\r\n                    {/* description field */}\r\n                    <div className=\"new-board-colors-container\">\r\n                        {\r\n                            allBoardColors.map(boardColor => {\r\n                                return <NewBoardColor\r\n                                    color={boardColor.color}\r\n                                    key={boardColor.id}\r\n                                    onSetColor={this.onSetColor}\r\n                                    isSelected={this.isSelected(boardColor.color)}\r\n                                />\r\n                            })\r\n                        }\r\n                    </div>\r\n                    <button onClick={this.onSubmit}>Add New Board</button>\r\n                </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\n// colors are now imported from another file\r\n// need to remove this line and only bring the board\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // boardColors: state.boardReducer.board.boardColors,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    addNewBoard,\r\n    loadBoard,\r\n    setDefaultStyle\r\n}\r\n\r\nexport const AddNewBoard = connect(mapStateToProps, mapDispatchToProps)(_AddNewBoard)\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { Drawer, ClickAwayListener } from '@material-ui/core'\r\nimport logo from '../assets/icons/favicon.png'\r\n\r\nimport { Formik, Field, Form } from 'formik';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\n\r\nexport class LoginDrawer extends Component {\r\n\r\n\r\n    state = {\r\n        loginOrSignup: 'login',\r\n        credentials:{}\r\n\r\n    }\r\n\r\n    handleChange=(ev)=>{\r\n        const target = ev.target\r\n        const credentials = { ...this.state.credentials, [target.name]: target.value}\r\n        this.setState({ credentials }, ()=> console.log(this.state.credentials))\r\n    }\r\n\r\n\r\n    setSignup=()=>{\r\n        this.setState({ loginOrSignup: 'signup' })\r\n    }\r\n\r\n    onSubmit=(ev)=>{\r\n        ev.preventDefault()\r\n        console.log(this.state.credentials);\r\n        console.log('yayy');\r\n        \r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <ClickAwayListener onClickAway={ this.props.hideLoginDrawer }>\r\n                <div className=\"login-container\">\r\n                    <Drawer \r\n                        anchor=\"right\"\r\n                        open={this.props.isShowing}\r\n                        BackdropProps={{ showBackdrop: true }}\r\n                        variant={\"persistent\"}>\r\n                            <div className=\"login-form-container\">\r\n                                <img className=\"login-logo\" src={logo} alt=\"\" />\r\n                                <h4>Welcome to Opus</h4>\r\n                                <Formik \r\n                                    initialValues={{ email: '', password: '' }}\r\n                                    validate={values => {\r\n                                        const errors = {};\r\n                                        if (!values.email) { errors.email = 'Required'; } \r\n                                        else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) \r\n                                            { errors.email = 'Invalid email address'; } return errors; }} onSubmit={ this.onSubmit }>\r\n                                    {({handleSubmit,isSubmitting,}) => (\r\n                                        <form className=\"inner-form-container\" onSubmit={handleSubmit}>\r\n                                            <input type=\"email\" name=\"email\" onChange={this.handleChange} placeholder=\"Email address\" autoComplete=\"off\"/>\r\n                                            <input type=\"password\" name=\"password\" onChange={this.handleChange} placeholder=\"Password\" autoComplete=\"off\" />\r\n                                                <button type=\"submit\" disabled={isSubmitting}>Log in</button>\r\n                                        </form>\r\n                                        )}\r\n                                </Formik>\r\n                            </div>\r\n                        <button className=\"signup-btn\" onClick={this.setSignup} >Sign up</button>\r\n                    </Drawer>\r\n                </div>\r\n            </ClickAwayListener>\r\n\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n}));","import { CircularProgress } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { CardImgUpload } from '../CardCmps/CardImgUpload'\r\n\r\nexport class UserDetails extends Component {\r\n\r\n    state = {\r\n        username: '',\r\n        fullName: '',\r\n        imgUrl: '',\r\n        isUploadZoneOpen: false,\r\n        isUploading: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getUserDetailsFromProps()\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.loggedInUser !== this.props.loggedInUser) {\r\n            this.getUserDetailsFromProps()\r\n        }\r\n    }\r\n\r\n    setUploading = () => {\r\n        return new Promise(res => {\r\n            this.setState({isUploading:true},() => res(true))\r\n        })\r\n    }\r\n\r\n    onAddImage = (file) => {\r\n        console.log(file)\r\n    }\r\n    toggleUploadDropzone = () => {\r\n        if (this.state.isUploadZoneOpen) return this.setState({isUploadZoneOpen:false})\r\n        return this.setState({isUploadZoneOpen:true})\r\n    }\r\n    getUserDetailsFromProps = () => {\r\n        const user = this.props.loggedInUser\r\n        \r\n        if (!user) return\r\n        this.setState({ username: user.username, fullName: user.fullName, imgUrl: user.imgUrl })\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.username) return <React.Fragment />\r\n        return (\r\n            <div className=\"user-profile-container\">\r\n                <div className=\"user-profile\">\r\n                    <div className=\"user-img-container\">\r\n                    <CardImgUpload onAddImage={this.onAddImage} setUploading={this.setUploading} toggleOpen={this.toggleUploadDropzone} isOpen={this.state.isUploadZoneOpen} />\r\n                        <div className=\"user-img\">\r\n                            {(this.state.isLoading) ? <CircularProgress /> : <img src={this.state.imgUrl} onClick={this.toggleUploadDropzone} alt=\"User\" />}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"user-details-container\">\r\n                        <h5>{this.state.username}</h5>\r\n                        <div>{this.state.fullName}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n","import { CircularProgress, InputLabel, NativeSelect } from '@material-ui/core'\r\nimport { ActivityLog } from '../Sidebar/ActivityLog'\r\n\r\n\r\nimport React, { Component } from 'react'\r\n\r\nexport class UserActivities extends Component {\r\n\r\n    state = {\r\n        selectedBoard: null,\r\n        boards: null,\r\n        activities: null\r\n    }\r\n\r\n\r\n\r\n    componentDidMount() {\r\n        this.getActivitiesFromProps()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.activities !== this.props.activities) {\r\n            this.getActivitiesFromProps()\r\n        }\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const selection = ev.target.value\r\n        if (selection === 'All') {\r\n            this.setState({ selectedBoard: null })\r\n        } else {\r\n            this.setState({ selectedBoard: selection })\r\n        }\r\n    }\r\n\r\n    getActivitiesFromProps = () => {\r\n        if (this.props.activities) {\r\n\r\n            let activities = this.props.activities.map(activity => activity.activity)\r\n            this.setState({ activities }, () => {\r\n                \r\n                this.getBoardList()\r\n                \r\n            })\r\n        }\r\n    }\r\n\r\n    getBoardList = () => {\r\n        const uniqueIds = {}\r\n        const boards = this.props.activities.forEach(activity => {\r\n            uniqueIds[activity.board.id] = activity.board\r\n        })\r\n        const uniqueBoards = Object.values(uniqueIds)\r\n\r\n        this.setState({ boards: uniqueBoards })\r\n    }\r\n\r\n    getFilteredActivites = () => {\r\n        var activities;\r\n        if (!this.state.selectedBoard) {\r\n            activities = this.state.activities\r\n        } else {\r\n            activities = this.state.activities.filter(activity => activity.boardId === this.state.selectedBoard)\r\n        }\r\n        \r\n        return activities\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.boards) return <CircularProgress />\r\n        return (\r\n            <div className=\"user-activities\">\r\n                <div className=\"board-filter\">\r\n                <InputLabel id=\"board-filter\">Filter by board</InputLabel>\r\n                    <NativeSelect id=\"board-filter\" onChange={this.onChange} label=\"Filter by board\">\r\n                        <option value=\"All\">All</option>\r\n                        {this.state.boards.map((board,idx) => <option key={idx} value={board.id}>{board.title}</option>)}\r\n                    </NativeSelect>\r\n                </div>\r\n                <div className=\"activity-log-container\">\r\n                    <ActivityLog activities={this.getFilteredActivites()} displayMode=\"user\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\nexport function UserCardsPreview({ board, cards, groups, displayArchived,onSelectBoard }) {\r\n\r\n    if (!displayArchived && board.isArchived) return <React.Fragment />\r\n\r\n    return (\r\n\r\n        <div className=\"user-board\" style={{backgroundImage:board.style.bgImg}}>\r\n            <div className=\"user-board-header\" style={{color:board.style.fontClr}}>\r\n                <h3>{board.title}</h3>\r\n            </div>\r\n            <div className=\"user-cards-preview\">\r\n                {(!cards || !cards.length) ? (<div className=\"user-cards-none\">No cards assigned to you in this boards </div>)\r\n                    : cards.map((card, idx) => {\r\n                        const cardCreatedAt = new Date(card.createdAt)\r\n                        return (<div key={card.id} onClick={() => onSelectBoard(`/board/${board.id}/${card.id}`)} className=\"user-card-preview\">\r\n                            <div className=\"user-card-header\">\r\n                                <div><h5>{card.title}</h5></div>\r\n                                <div><small>In group {groups[idx].title}</small></div>\r\n                            </div>\r\n                            <div className=\"user-card-details\">\r\n                            <div>{card.description}</div>\r\n                            <div>Created at {cardCreatedAt.toLocaleString()}</div>\r\n                            {(!card.dueDate) ? <React.Fragment /> : <div>Card due by {card.dueDate}</div>}\r\n                            </div>\r\n                        </div>)\r\n                    })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { CircularProgress } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { UserCardsPreview } from './UserCardsPreview'\r\n\r\nexport class UserCards extends Component {\r\n\r\n    state = {\r\n        displayArchived: false\r\n\r\n    }\r\n\r\n    onSelectBoard = (path) => {\r\n        this.props.onCloseUserDetails()\r\n        this.props.history.push(path)\r\n    }\r\n\r\n    render() {\r\n        \r\n        if (!this.props.userData) return <CircularProgress />\r\n        const entries = this.props.userData\r\n        return (\r\n            <div className=\"user-cards-container\">\r\n                <div className=\"user-boards\">\r\n                    {(entries.length) ? entries.map((entry,idx) => <UserCardsPreview key={idx} onSelectBoard={this.onSelectBoard} board={entry.board} displayArchived={this.state.displayArchived} cards={entry.cards} groups={entry.groups} />)\r\n                     : <React.Fragment />}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import { BottomNavigation, BottomNavigationAction } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport userService from '../../services/userService';\r\nimport PermIdentityOutlinedIcon from '@material-ui/icons/PermIdentityOutlined';\r\nimport ViewAgendaOutlinedIcon from '@material-ui/icons/ViewAgendaOutlined';\r\nimport FormatListBulletedOutlinedIcon from '@material-ui/icons/FormatListBulletedOutlined';\r\nimport { UserDetails } from './UserDetails';\r\nimport { UserActivities } from './UserActivities';\r\nimport { UserCards } from './UserCards';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\n\r\n\r\n\r\nclass _Users extends Component {\r\n\r\n    state = {\r\n        view: 0,\r\n        loggedInUser: null,\r\n        userData: null,\r\n        activities: null\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        console.log(this)\r\n        const loggedInUser = await userService.getLoggedInUser()\r\n        this.setState({loggedInUser}, async() => {\r\n            const userDeatils = await userService.getUserDetails()\r\n            this.setState({userData:userDeatils.userData,activities:userDeatils.userActivities})\r\n        })\r\n    }\r\n    \r\n    setView = (idx) => {\r\n        const view = Math.round(idx)\r\n        this.setState({view})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"users-container\">\r\n                <BottomNavigation\r\n                    className=\"home-nav\"\r\n                    value={this.state.view}\r\n                    onChange={(event, newValue) => {\r\n                        this.setView(newValue);\r\n                    }}\r\n                    showLabels\r\n                >\r\n                    <BottomNavigationAction label=\"Details\" icon={<PermIdentityOutlinedIcon />} />\r\n                    <BottomNavigationAction label=\"Cards\" icon={<ViewAgendaOutlinedIcon />} />\r\n                    <BottomNavigationAction label=\"Activities\" icon={<FormatListBulletedOutlinedIcon />} />\r\n                </BottomNavigation>\r\n                <SwipeableViews onSwitching={this.setView} index={this.state.view} containerStyle={{ height: '100vh' }}>\r\n                    <UserDetails loggedInUser={this.state.loggedInUser} />\r\n                    <UserCards onCloseUserDetails={this.props.onCloseUserDetails} history={this.props.history} userData={this.state.userData}/>\r\n                    <UserActivities activities={this.state.activities} />\r\n                </SwipeableViews>\r\n            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport const Users = withRouter(_Users)","// This contains link to boards (project view) and user details\r\n\r\nimport React, { Component } from 'react'\r\nimport { NavLink, withRouter } from 'react-router-dom'\r\nimport { AddNewBoard } from './BoardHeader/AddNewBoard'\r\nimport logoFutura from '../assets/icons/newLogoFutura.png'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { LoginDrawer } from './LoginDrawer'\r\nimport { Dialog, IconButton } from '@material-ui/core'\r\nimport { Users } from './Users/UsersMain'\r\n\r\nimport { MemberPreview } from './BoardHeader/MemberPreview'\r\nimport userService from '../services/userService'\r\nimport { CloseOutlined } from '@material-ui/icons'\r\n\r\n\r\nexport class _Navbar extends Component {\r\n\r\n    state = {\r\n        isNewBoardModalShown: false,\r\n        isLoginDrawerShown: false,\r\n        isUserDetailsOpen: false,\r\n        loggedInUser: null\r\n    }\r\n\r\n\r\n    toggleModal = () => {\r\n        this.setState({ isNewBoardModalShown: !this.state.isNewBoardModalShown })\r\n    }\r\n\r\n    onCloseModal = () => {\r\n        this.setState({ isNewBoardModalShown: false })\r\n    }\r\n\r\n    showLove = () => {\r\n        alert('Snorelax Loves you 💤🌷')\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ loggedInUser: userService.getLoggedInUser() })\r\n    }\r\n\r\n    redirectPath = (id) => {\r\n        this.props.history.replace(`/`)\r\n        this.props.history.replace(`/board/${id}`)\r\n        this.onCloseModal()\r\n    }\r\n\r\n    showLoginDrawer = (ev) => {\r\n        ev.stopPropagation()\r\n        ev.nativeEvent.stopImmediatePropagation();\r\n        this.setState({ isLoginDrawerShown: true })\r\n    }\r\n\r\n    hideLoginDrawer = (ev) => {\r\n        ev.stopPropagation()\r\n        this.setState({ isLoginDrawerShown: false })\r\n    }\r\n\r\n    onOpenUserDetails = () => {\r\n        console.log('open')\r\n        this.setState({ isUserDetailsOpen: true })\r\n    }\r\n\r\n    onCloseUserDetails = () => {\r\n        this.setState({ isUserDetailsOpen: false })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <Dialog open={this.state.isUserDetailsOpen} onClose={this.onCloseUserDetails} onBackdropClick={this.onCloseUserDetails}>\r\n                    <div className=\"user-details-preview-header\">\r\n                        <div></div>\r\n                        <div><h6>User Details</h6></div>\r\n                        <IconButton onClick={this.onCloseUserDetails}>\r\n                            <CloseOutlined />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Users onCloseUserDetails={this.onCloseUserDetails} />\r\n                </Dialog>\r\n                <Dialog open={this.state.isNewBoardModalShown} onClose={this.onCloseModal} onBackdropClick={this.onCloseModal}>\r\n                    <AddNewBoard onCloseModal={this.onCloseModal} redirectPath={this.redirectPath} />\r\n                </Dialog>\r\n                <div className=\"navbar-container\">\r\n                    <div className=\"navbar-left-container\">\r\n                        <div className=\"board-header-btn left\"><NavLink to='/'><span className=\"material-icons\">home</span></NavLink></div>\r\n                        <div className=\"board-header-btn left\"><NavLink to='/board'><span className=\"material-icons\">view_list</span><h4 className=\"boards-text\">Boards</h4></NavLink></div>\r\n                    </div>\r\n\r\n                    <div onClick={this.showLove} style={{ cursor: \"pointer\" }} className=\"header-logo\"><img src={logoFutura} alt=\"best logo ever\" /></div>\r\n\r\n                    <div className=\"navbar-right-container\">\r\n                        {(this.state.loggedInUser) ? <div onClick={this.onOpenUserDetails}><MemberPreview name={this.state.loggedInUser.fullName} imgUrl={this.state.loggedInUser.imgUrl} /></div> : <React.Fragment />}\r\n                        <div className=\"board-header-btn right\" onClick={this.toggleModal}><span className=\"material-icons\">add</span></div>\r\n                        {/* {this.state.isNewBoardModalShown && <AddNewBoard onCloseModal={this.onCloseModal} redirectPath={this.redirectPath} />} */}\r\n\r\n                        {/* <div className=\"board-header-btn login right\"><NavLink to='/login'><h4 className=\"login-text\">Login</h4></NavLink></div> */}\r\n                        <div className=\"board-header-btn login right\" onClick={this.showLoginDrawer}><h4 className=\"login-text\">{(!this.state.loggedInUser || this.state.loggedInUser._id === 'u900') ? 'Login' : 'Logout'}</h4></div>\r\n                        <LoginDrawer isShowing={this.state.isLoginDrawerShown} hideLoginDrawer={this.hideLoginDrawer} />\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\nexport const Navbar = connect(withRouter)(_Navbar)\r\n\r\n","\r\nimport React, { Component } from 'react'\r\nimport { withRouter } from 'react-router';\r\n\r\nexport class _Login extends Component {\r\n\r\n\r\n    state = {\r\n        loginOrSignup: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log('entered login');\r\n        console.log(this.props);\r\n        \r\n        this.setState({ loginOrSignup: 'login' })\r\n        \r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        console.log(prevProps);\r\n        \r\n    }\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"login-container\">\r\n                <h1>login page</h1>\r\n                <button>Sign up</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const Login = withRouter(_Login)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// experiment with react spring\r\n\r\n// import React, { Component } from 'react'\r\n// import { useSpring , animated } from 'react-spring'\r\n\r\n\r\n// export function Login () {\r\n\r\n//     const fade = useSpring({\r\n//         from:{ opacity: 0, transform: 'translate3d(100%,0,0)' },\r\n//         to:{ opacity: 1, transform: 'translate3d(0%,0,0)' },\r\n//         leave:{ opacity: 0, transform: 'translate3d(-50%,0,0)' }\r\n//     })\r\n\r\n//         return (\r\n//             <animated.div className=\"login-container\" style={fade}>\r\n//                 <h1>this is login</h1>\r\n//             </animated.div>\r\n//         )\r\n// }","import React from 'react';\r\nimport { ToastContainer } from 'react-toastify';\r\n\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n// minified version is also included\r\n// import 'react-toastify/dist/ReactToastify.min.css';\r\n\r\nexport function Notify(props){\r\n  return (\r\n    <div>\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n}","export default __webpack_public_path__ + \"static/media/yaron.4f915c8a.jpeg\";","export default __webpack_public_path__ + \"static/media/elad2.b22a3fd9.jpeg\";","import React from 'react'\r\nimport FacebookIcon from '@material-ui/icons/Facebook';\r\nimport LinkedInIcon from '@material-ui/icons/LinkedIn';\r\nimport EmailIcon from '@material-ui/icons/Email';\r\nimport yaron from '../assets/imgs/yaron.jpeg';\r\nimport elad from '../assets/imgs/elad2.jpeg';\r\nconst logo = require('../assets/imgs/opus.png')\r\n\r\n\r\nexport function Home(props) {\r\n    return (\r\n        <div className=\"main-screen\">\r\n            <section className=\"home\">\r\n                <div className=\"bg\">\r\n                    <div className=\"bg-overlay\">\r\n                        <div className=\"header\">\r\n                            <div className=\"welcome\">\r\n                                <h1>Welcome To</h1>\r\n                                <span><img src={logo} alt=\"logo\" /><h1>!</h1></span>\r\n                            </div>\r\n                        </div>\r\n                        <p>Opus is a beautiful Kanban style project managment software prefect for keeping track of teams' progress</p>\r\n                        <div onClick={() => props.history.push('/board')} className=\"main-screen-cta\">See a Demo</div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section className=\"team\">\r\n                <div className=\"text\">\r\n                    <h2>Work as a team</h2>\r\n                    <p>Use Opus' advanced features to assign and keep track of your team's efforts</p>\r\n                </div>\r\n                <div className=\"img\"></div>\r\n            </section>\r\n            <section className=\"info\">\r\n                <div className=\"img\"></div>\r\n                <div className=\"text\">\r\n                    <h2>Get detailed information</h2>\r\n                    <p>You can use Opus to specify what every task entails, and make sure everyone is synced</p>\r\n                </div>\r\n            </section>\r\n            <section className=\"data\">\r\n                <div className=\"text\">\r\n                    <h2>Better understand your progress</h2>\r\n                    <p>Use Opus' extensive data modeling tools to get a glimpse on how your team is doing</p>\r\n                </div>\r\n                <div className=\"img\"></div>\r\n            </section>\r\n            <section className=\"last-cta\">\r\n                <div className=\"img\"></div>\r\n                <div className=\"text\">\r\n                    <h2>What are you waiting for?</h2>\r\n                    <div onClick={() => props.history.push('/board')} className=\"cta\">View the demo now</div>\r\n                </div>\r\n            </section>\r\n            <section className=\"about\">\r\n                <div className=\"about-intro\">\r\n                    <h2>Meet the Team</h2>\r\n                    <p>We are 3 of  &copy;MisterBit Coding Academy alumni that came together and assmebled <b>OPUS</b> as our Full-Stack Developer course's final hand-in.</p>\r\n\r\n                </div>\r\n                <div className=\"about-cards-container\">\r\n                    <div className=\"about-card\">\r\n                        <div className=\"photo\">\r\n                            <img src={yaron} alt=\"Yaron\" />\r\n                        </div>\r\n                        <h3>Yaron Lipshitz</h3>\r\n                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid vitae molestias omnis sapiente ex ducimus maxime nam ipsum at. Impedit neque quae beatae corrupti doloremque adipisci ut quis! Eaque, assumenda.</p>\r\n                        <div className=\"links-container\">\r\n                            <a href=\"https://www.facebook.com/elad.becker\"><FacebookIcon className=\"facebook-icon\" /></a>\r\n                            <a href=\"https://www.linkedin.com/in/elad-becker-13b4921a6/\"><LinkedInIcon className=\"linkedin-icon\" /></a>\r\n                            <a href=\"mailto:Becker.Elad@gmail.com\"><EmailIcon className=\"mail-icon\" /></a>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"about-card\">\r\n                        <div className=\"photo\">\r\n                            <img src={elad} alt=\"Elad\" />\r\n                        </div>\r\n                        <h3>Elad Becker</h3>\r\n                        <p>\r\n                            Full-Stack Developer<br />\r\n                            Former IDF Intelligence Officer (Maj.)<br />\r\n                            Whiskey Enthisiast\r\n                        </p>\r\n                        <div className=\"links-container\">\r\n                            <a href=\"https://www.facebook.com/elad.becker\"><FacebookIcon className=\"facebook-icon\" /></a>\r\n                            <a href=\"https://www.linkedin.com/in/elad-becker-13b4921a6/\"><LinkedInIcon className=\"linkedin-icon\" /></a>\r\n                            <a href=\"mailto:Becker.Elad@gmail.com\"><EmailIcon className=\"mail-icon\" /></a>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"about-card\">\r\n                        <div className=\"photo\"></div>\r\n                        <h3>Daniel Dante</h3>\r\n                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid vitae molestias omnis sapiente ex ducimus maxime nam ipsum at. Impedit neque quae beatae corrupti doloremque adipisci ut quis! Eaque, assumenda.</p>\r\n                        <div className=\"links-container\">\r\n                            <a href=\"https://www.facebook.com/elad.becker\"><FacebookIcon className=\"facebook-icon\" /></a>\r\n                            <a href=\"https://www.linkedin.com/in/elad-becker-13b4921a6/\"><LinkedInIcon className=\"linkedin-icon\" /></a>\r\n                            <a href=\"mailto:Becker.Elad@gmail.com\"><EmailIcon className=\"mail-icon\" /></a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react'\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview'\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\n\r\n\r\nexport function BoardPreview(props) {\r\n\r\n    const board = props.board\r\n\r\n    if (board.isArchived && !props.displayArchived) return <React.Fragment />\r\n    const createdAt = new Date(board.createdAt).toDateString()\r\n    let lastEdited\r\n    try {\r\n        lastEdited = new Date(board.activities[0].createdAt).toDateString() || \"1123\"\r\n    } catch (err) {\r\n        lastEdited = createdAt\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"board-preview\">\r\n\r\n            <div className=\"board-image\" onClick={() => props.onSelect(board._id)} style={{ backgroundImage: board.style.bgImg, backgroundColor: board.style.boardColor }}>\r\n            <div className=\"remove\" onClick={(ev) => {\r\n                ev.stopPropagation()\r\n                props.onRemove(board._id)\r\n            }}>\r\n                    <DeleteOutlineOutlinedIcon size=\"small\" />\r\n            </div>\r\n                <div className=\"board-overlay\">\r\n                    <h3 style={{ color: board.style.fontClr }}>{board.title}</h3>\r\n                </div>\r\n            </div>\r\n            <div className=\"board-details\">\r\n                <div className=\"board-description\">\r\n                    {board.description}\r\n                </div>\r\n                <div className=\"board-members\">\r\n                    {board.members.map((member, idx) => <MemberPreview key={idx} name={member.fullName} imgUrl={member.imgUrl} />)}\r\n                </div>\r\n                {(board.createdAt && board.createdBy) ? (<React.Fragment><div className=\"board-creator\">\r\n                    Board created by {board.createdBy.fullName} on {createdAt}\r\n                </div>\r\n                    <div className=\"board-last-edited\">\r\n                        Last edited on {lastEdited}\r\n                    </div></React.Fragment>) : <React.Fragment />\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { CircularProgress } from '@material-ui/core'\r\n\r\nimport React, { Component } from 'react'\r\nimport { setDefaultStyle } from '../../store/actions/boardActions'\r\nimport { connect } from 'react-redux'\r\nimport { BoardPreview } from './BoardPreview'\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nexport class _BoardHub extends Component {\r\n\r\n\r\n    componentDidMount() {\r\n        this.props.setDefaultStyle()\r\n\r\n    }\r\n    \r\n    render(){\r\n        \r\n        if (!this.props.boards || this.props.isLoading) return <div className=\"board-hub\"><div className=\"circular-progress-container\"><CircularProgress /></div></div>\r\n        return (\r\n            <div className=\"board-hub\">\r\n                <header>\r\n                    <h1>{this.props.header}</h1>\r\n                </header>\r\n                <section>\r\n                    {(this.props.createBoard) ? <div className=\"new-board-placeholder\" onClick={this.props.onAddBoard} ><div className=\"fake-board\"><AddIcon /></div><div className=\"board-description\">Add new board</div></div> : <React.Fragment />}\r\n                    {this.props.boards.map(board => <BoardPreview key={board._id} onRemove={this.props.onRemove} history={this.props.history} onSelect={this.props.onSelect} board={board} />)}\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    setDefaultStyle\r\n\r\n};\r\nexport const BoardHub = connect(mapStateToProps, mapDispatchToProps)(_BoardHub);\r\n","import { Dialog, IconButton } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\n\r\nimport { CloseOutlined } from '@material-ui/icons';\r\nimport { Pagination } from '@material-ui/lab';\r\nimport { BoardHub } from './BoardHub';\r\nimport { boardService } from '../../services/boardService';\r\nimport { templateService } from '../../services/templateService';\r\nimport { AddNewBoard } from '../BoardHeader/AddNewBoard';\r\n\r\n\r\nexport class BoardSelection extends Component {\r\n\r\n    state = {\r\n        templatesPage: 0,\r\n        boardsPage: 0,\r\n        boardsPerPage: 2,\r\n        templatesPerPage: 3,\r\n        totalBoardPages: 1,\r\n        totalTemplatePages: 1,\r\n        boards: null,\r\n        templates: null,\r\n        templateLoading: false,\r\n        selectedTemplate: null,\r\n        isCreateTemplateOpen: false,\r\n        isLoading: false,\r\n        isCreateBoardOpen: false\r\n    }\r\n\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevState.boardsPage !== this.state.boardsPage) {\r\n            this.getBoards()\r\n        }\r\n        if (prevState.templatesPage !== this.state.templatesPage) {\r\n            this.getTemplates()\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.getBoards()\r\n        this.getTemplates()\r\n    }\r\n\r\n\r\n    getBoards = async () => {\r\n        const data = await boardService.query({ filter: { isArchived: false }, limit: this.state.boardsPerPage, skip: this.state.boardsPage * this.state.boardsPerPage })\r\n        const totalBoardPages = Math.ceil(data.boardSize / this.state.boardsPerPage)\r\n        \r\n        this.setState({ boards: data.boards, totalBoardPages })\r\n        return Promise.resolve()\r\n    }\r\n\r\n    getTemplates = async () => {\r\n        const data = await templateService.query({ limit: this.state.templatesPerPage, skip: this.state.templatesPage * this.state.templatesPerPage })\r\n        const totalTemplatePages = Math.ceil(data.templateSize / this.state.templatesPerPage)\r\n\r\n        this.setState({ templates: data.templates, totalTemplatePages })\r\n        return Promise.resolve()\r\n    }\r\n\r\n    onSelectBoard = (boardId) => {\r\n        this.props.history.push(`/board/${boardId}`)\r\n    }\r\n\r\n\r\n    onSelectTemplate = async (templateId) => {\r\n        this.setState({ selectedTemplate: templateId, isCreateTemplateOpen: true })\r\n\r\n    }\r\n\r\n    onCloseCreateTemplate = () => {\r\n        this.setState({ selectedTemplate: null, isCreateTemplateOpen: false })\r\n    }\r\n\r\n    onCreateBoardFromTemplate = async (boardName) => {\r\n        this.setState({ templateLoading: true }, async () => {\r\n            const boardId = await templateService.createBoardFromTemplate(this.state.selectedTemplate, boardName)\r\n            this.setState({ templateLoading: false })\r\n            this.props.history.push(`board/${boardId}`)\r\n        })\r\n    }\r\n\r\n    onRemoveBoard = async (boardId) => {\r\n        this.setState({ isLoading: true }, async () => {\r\n            await boardService.archiveBoard(boardId)\r\n            await this.getBoards()\r\n            this.setState({ isLoading: false })\r\n\r\n        })\r\n    }\r\n\r\n    onRemoveTemplate = async (templateId) => {\r\n\r\n        this.setState({ isLoading: true }, async () => {\r\n            await templateService.remove(templateId)\r\n            await this.getTemplates()\r\n            this.setState({ isLoading: false })\r\n        })\r\n    }\r\n\r\n    onChangeTemplatePage = (ev, page) => {\r\n        \r\n        this.setState({ templatesPage: page - 1 })\r\n    }\r\n\r\n    onChangeBoardPage = (ev, page) => {\r\n        \r\n        this.setState({ boardsPage: page - 1 })\r\n    }\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        this.onCreateBoardFromTemplate(ev.target[0].value)\r\n    }\r\n\r\n    onRedirect = (id) => {\r\n        this.onCloseCreateBoard()\r\n        this.props.history.push(`/board/${id}`)\r\n    }\r\n\r\n    onOpenCreateBoard = () => {\r\n        this.setState({isCreateBoardOpen:true})\r\n    }\r\n\r\n    onCloseCreateBoard = () => {\r\n        this.setState({isCreateBoardOpen:false})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <Dialog \r\n                onClose={this.onCloseCreateBoard}\r\n                onBackdropClick={this.onCloseCreateBoard}\r\n                open={this.state.isCreateBoardOpen}\r\n                className=\"add-board-modal\"\r\n                >\r\n                    <AddNewBoard onCloseModal={this.onCloseCreateBoard} redirectPath={this.onRedirect}/>\r\n                </Dialog>\r\n            <Dialog\r\n                    onClose={this.onCloseCreateTemplate}\r\n                    onBackdropClick={this.onCloseCreateTemplate}\r\n                    open={this.state.isCreateTemplateOpen}>\r\n                    <div className=\"create-board-from-template-container\">\r\n                        <div className=\"create-board-header\">\r\n                            <div></div>\r\n                            <div><h6>Create Board</h6></div>\r\n                            <IconButton onClick={this.onCloseCreateTemplate}>\r\n                                <CloseOutlined />\r\n                            </IconButton>\r\n                        </div>\r\n                        <div className=\"form-container\">\r\n                            <span>Enter a name for your board</span>\r\n                        <form onSubmit={this.onSubmit}>\r\n                            <input name=\"title\" type=\"text\"/>\r\n                            <button className=\"save-btn\">Create</button>\r\n                        </form>\r\n                    </div>\r\n                    </div>\r\n                </Dialog>\r\n            <div className=\"board-selector\" >\r\n                <section className=\"boards\">\r\n                    <BoardHub boards={this.state.boards} createBoard={true} onAddBoard={this.onOpenCreateBoard} onSelect={this.onSelectBoard} onRemove={this.onRemoveBoard} header=\"Boards\" />\r\n                    <Pagination count={this.state.totalBoardPages} defaultPage={1} onChange={this.onChangeBoardPage} shape=\"rounded\" />\r\n                </section>\r\n                <section className=\"templates\">\r\n                    <BoardHub boards={this.state.templates} onSelect={this.onSelectTemplate} onRemove={this.onRemoveTemplate} isLoading={this.state.templateLoading} header=\"Templates\" />\r\n                    <Pagination count={this.state.totalTemplatePages} defaultPage={1} onChange={this.onChangeTemplatePage} shape=\"rounded\" />\r\n                </section>\r\n\r\n            </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { loadBoard, setStyle } from '../store/actions/boardActions';\r\nimport { connect } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { Doughnut, HorizontalBar, Bar } from 'react-chartjs-2';\r\n\r\n\r\nexport default class _AnalysisDashboard extends Component {\r\n    async componentDidMount() {\r\n        const boardId = this.props.match.params.id;\r\n        try {\r\n            await this.props.loadBoard(boardId);\r\n            this.props.setStyle(this.props.board.style);\r\n        } catch (err) {\r\n            toast.error('Oops! we seem to be missing the board you\\'re looking for. going back to board selection.', {\r\n                position: \"bottom-right\",\r\n                autoClose: 3500,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n            setTimeout(() => {\r\n                this.props.history.push('/board')\r\n            }, 1000)\r\n        }\r\n    }\r\n    getRndHexColor = () => {\r\n        let n = (Math.random() * 0xfffff * 1000000).toString(16);\r\n        return '#' + n.slice(0, 6);\r\n    }\r\n    getDataForChart = (mapObject) => {\r\n        const rndClrs = Object.keys(mapObject).map(key => this.getRndHexColor())\r\n        return {\r\n            labels: Object.keys(mapObject),\r\n            datasets: [{\r\n                data: Object.values(mapObject),\r\n                backgroundColor: rndClrs,\r\n                hoverBackgroundColor: rndClrs,\r\n            }]\r\n        };\r\n    }\r\n    dashboardNumbers = (board) => {\r\n        if (!board || !board.members || !board.groups) return;\r\n        let numOfMembers = board.members.length;\r\n        let unarchivedCardsCount = 0;\r\n        let archivedCardsCount = 0;\r\n        board.groups.forEach(group => {\r\n            const archivedCards = group.cards.filter(card => card.archivedAt);\r\n            archivedCardsCount += archivedCards.length;\r\n            unarchivedCardsCount += group.cards.length - archivedCards.length;\r\n        })\r\n        const cards = board.groups.reduce((acc, group) => [...acc, ...group.cards], []);\r\n        const todosCount = cards.reduce((acc, card) => {\r\n            if (!card.checklists) return acc;\r\n            card.checklists.forEach(checklist => {\r\n                checklist.todos.forEach(todo => {\r\n                    if (todo.isDone) acc.checked++;\r\n                    acc.total++;\r\n                })\r\n            })\r\n            return acc;\r\n        }, { checked: 0, total: 0 });\r\n        if (todosCount.checked / todosCount.total > 0.75) todosCount.colorClass = 'todos-green';\r\n        if (todosCount.checked / todosCount.total <= 0.5) todosCount.colorClass = 'todos-red';\r\n        console.log(todosCount)\r\n        return { numOfMembers, archivedCardsCount, unarchivedCardsCount, todosCount };\r\n    }\r\n    cardsByGroups = (groups) => {\r\n        if (!groups) return;\r\n        const cardsByGroupsMap = groups.reduce((acc, group) => {\r\n            const unArchivedCards = group.cards.filter(card => !card.archivedAt)\r\n            acc[group.title] = unArchivedCards.length;\r\n            return acc;\r\n        }, {});\r\n        return this.getDataForChart(cardsByGroupsMap);\r\n    }\r\n    cardsByMembers = (board) => {\r\n        if (!board.members) return;\r\n        const cardsByMembersMap = board.members.reduce((acc, member) => {\r\n            let memberCardsCount = 0;\r\n            for (let i = 0; i < board.groups.length; i++) {\r\n                const unArchivedCards = board.groups[i].cards.filter(card => !card.archivedAt)\r\n                for (let j = 0; j < unArchivedCards.length; j++) {\r\n                    if (unArchivedCards[j].members.some(currMember => currMember._id === member._id)) memberCardsCount++;\r\n                }\r\n            }\r\n            acc[member.fullName] = memberCardsCount;\r\n            return acc;\r\n        }, {});\r\n        return {\r\n            data: this.getDataForChart(cardsByMembersMap),\r\n            options: {\r\n                legend: { display: false },\r\n                scales: {\r\n                    xAxes: [{\r\n                        ticks: {\r\n                            beginAtZero: true,\r\n                            min: 0\r\n                        }\r\n                    }]\r\n                }\r\n            }\r\n        };\r\n    }\r\n    timeInGroups = (groups) => {\r\n        if (!groups) return;\r\n        const groupIdNameMap = groups.reduce((acc, group) => {\r\n            acc[group.id] = group.title;\r\n            return acc\r\n        }, {})\r\n        let cards = groups.reduce((acc, group) => {\r\n            return [...acc, ...group.cards];\r\n        }, []);\r\n        cards = cards.filter(card => !card.archivedAt);\r\n        const timeInGroupsMap = cards.reduce((acc, card) => {\r\n            if (!card.timeAnalysis || !card.timeAnalysis.currGroup) return acc;\r\n            const currGroupName = groupIdNameMap[card.timeAnalysis.currGroup.groupId];\r\n            acc[currGroupName] = {};\r\n            const timeSpent = Date.now() - card.timeAnalysis.currGroup.enteredAt;\r\n            acc[currGroupName].time = acc[currGroupName].time ? acc[currGroupName].time + timeSpent : timeSpent;\r\n            acc[currGroupName].count = acc[currGroupName].count ? acc[currGroupName].count + 1 : 1;\r\n            if (!card.timeAnalysis.timeInGroupsMap) return acc;\r\n            for (const groupId in card.timeAnalysis.timeInGroupsMap) {\r\n                const currPastGroupName = groupIdNameMap[groupId];\r\n                acc[currPastGroupName] = acc[currPastGroupName] ? acc[currPastGroupName] : {};\r\n                const timeCardSpentInCurrGroup = card.timeAnalysis.timeInGroupsMap[groupId];\r\n                acc[currPastGroupName].time = acc[currPastGroupName].time ? acc[currPastGroupName].time + timeCardSpentInCurrGroup : timeCardSpentInCurrGroup;\r\n                acc[currPastGroupName].count = acc[currPastGroupName].count ? acc[currPastGroupName].count + 1 : 1;\r\n            }\r\n            return acc;\r\n        }, {})\r\n        const lineData = Object.keys(timeInGroupsMap).map(group => ((timeInGroupsMap[group].time / (1000 * 60 * 60)) / timeInGroupsMap[group].count).toFixed(2));\r\n        const barsData = Object.keys(timeInGroupsMap).map(group => (timeInGroupsMap[group].time / (1000 * 60 * 60)).toFixed(2));\r\n        const clr1 = this.getRndHexColor();\r\n        const clr2 = this.getRndHexColor();\r\n        return {\r\n            data: {\r\n                labels: Object.keys(timeInGroupsMap),\r\n                datasets: [{\r\n                    label: 'Average time in group (Hrs)',\r\n                    type: 'line',\r\n                    data: lineData,\r\n                    fill: false,\r\n                    borderColor: clr1,\r\n                    pointBorderColor: clr1,\r\n                    pointBackgroundColor: clr1,\r\n                    pointHoverBackgroundColor: clr1,\r\n                    pointHoverBorderColor: clr1,\r\n                    yAxisID: 'y-axis-1'\r\n                }, {\r\n                    type: 'bar',\r\n                    label: 'Total hours in Group (Hrs)',\r\n                    data: barsData,\r\n                    fill: false,\r\n                    backgroundColor: clr2,\r\n                    borderColor: clr2,\r\n                    hoverBackgroundColor: clr2,\r\n                    hoverBorderColor: clr2,\r\n                    yAxisID: 'y-axis-1'\r\n                }]\r\n            },\r\n            options: {\r\n                legend: { labels: { backgroundColor: [clr1, clr2] } },\r\n                responsive: true,\r\n                tooltips: { mode: 'label' },\r\n                elements: { line: { fill: false } },\r\n                scales: {\r\n                    xAxes: [{ display: true, gridLines: { display: true } }],\r\n                    yAxes: [\r\n                        {\r\n                            type: 'linear',\r\n                            display: true,\r\n                            position: 'left',\r\n                            id: 'y-axis-1',\r\n                            gridLines: { display: false },\r\n                            labels: { show: true }\r\n                        },\r\n                        {\r\n                            type: 'linear',\r\n                            display: false,\r\n                            position: 'right',\r\n                            id: 'y-axis-2',\r\n                            gridLines: { display: false },\r\n                            labels: { show: true }\r\n                        }\r\n                    ]\r\n                }\r\n            }\r\n        }\r\n    }\r\n    cardsByLabels = (groups, labels) => {\r\n        if (!groups || !labels) return;\r\n        const colorsMap = {\r\n            green: '#61BD4F',\r\n            yellow: '#F2D600',\r\n            orange: '#FF9F1A',\r\n            red: '#EB5A46',\r\n            purple: '#C377E0',\r\n            blue: '#028ad8',\r\n            grey: '#a7a7a7',\r\n            black: '#202020'\r\n        }\r\n        let cards = groups.reduce((acc, group) => [...acc, ...group.cards], []);\r\n        cards = cards.filter(card => !card.archivedAt);\r\n        const labelsMap = labels.reduce((acc, currLabel) => {\r\n            let cardsWithLabelCount = 0;\r\n            cards.forEach(card => {\r\n                if (card.labels.some(label => label.id === currLabel.id)) cardsWithLabelCount++;\r\n            })\r\n            acc[currLabel.id] = { name: currLabel.name, color: currLabel.color, count: cardsWithLabelCount };\r\n            return acc;\r\n        }, {})\r\n        return {\r\n            data: {\r\n                labels: Object.keys(labelsMap).map(label => labelsMap[label].name),\r\n                datasets: [\r\n                    {\r\n                        borderWidth: 1,\r\n                        backgroundColor: Object.keys(labelsMap).map(label => colorsMap[labelsMap[label].color]),\r\n                        strokeColor: \"rgba(220,220,220,0.8)\",\r\n                        highlightFill: \"rgba(220,220,220,0.75)\",\r\n                        highlightStroke: \"rgba(220,220,220,1)\",\r\n                        data: Object.keys(labelsMap).map(label => labelsMap[label].count),\r\n                    }\r\n                ]\r\n            },\r\n            options: {\r\n                legend: { display: false },\r\n                scales: {\r\n                    yAxes: [{\r\n                        ticks: {\r\n                            beginAtZero: true,\r\n                            min: 0\r\n                        }\r\n                    }]\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    render() {\r\n        const { board, style } = this.props;\r\n        if (!board) return <div>Loading...</div>;\r\n        const dashboardNumbers = this.dashboardNumbers(board);\r\n        const cardsByGroups = this.cardsByGroups(board.groups);\r\n        const cardsByMembers = this.cardsByMembers(board);\r\n        const timeInGroups = this.timeInGroups(board.groups);\r\n        const cardsByLabels = this.cardsByLabels(board.groups, board.labels)\r\n        return !board\r\n            ? <div>Loading...</div>\r\n            : <div className=\"page-container\">\r\n                <h2 style={{ color: style.fontClr }}>{board.title} - Data Analysis</h2>\r\n                <div className=\"analysis-dashboard-container\">\r\n                    {dashboardNumbers && <div className=\"chart-container summary-numbers-conatiner\">\r\n                        <div><h3>{dashboardNumbers.numOfMembers}</h3><span>Total Members</span></div>\r\n                        <div>\r\n                            <h3>\r\n                                {dashboardNumbers.unarchivedCardsCount}\r\n                                <span className=\"total\">{` (${dashboardNumbers.archivedCardsCount} archived)`}</span>\r\n                            </h3>\r\n                            <span>Cards On Board</span>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className={dashboardNumbers.todosCount.colorClass}>\r\n                                {`${dashboardNumbers.todosCount.checked}`}\r\n                                <span className=\"total\">{` /${dashboardNumbers.todosCount.total}`}</span>\r\n                            </h3><span>To-Dos Checked</span></div>\r\n                    </div>}\r\n                    {cardsByGroups && <div className=\"chart-container cards-by-group-container\">\r\n                        <h3>Cards Per Group</h3>\r\n                        <Doughnut data={cardsByGroups} />\r\n                    </div>}\r\n                    {cardsByMembers && <div className=\"chart-container cards-by-member-container\">\r\n                        <h3>Cards Per Member</h3>\r\n                        <HorizontalBar data={cardsByMembers.data} options={cardsByMembers.options} />\r\n                    </div>}\r\n                    {timeInGroups && <div className=\"chart-container time-in-groups-container\">\r\n                        <h3>Groups' Time Analysis</h3>\r\n                        <Bar data={timeInGroups.data} options={timeInGroups.options} />\r\n                    </div>}\r\n                    {cardsByLabels && <div className=\"chart-container cards-by-labels-container\">\r\n                        <h3>Labels Summary</h3>\r\n                        <Bar data={cardsByLabels.data} options={cardsByLabels.options} />\r\n                    </div>}\r\n                </div>\r\n            </div>\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        style: state.boardReducer.style\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    setStyle\r\n};\r\n\r\nexport const AnalysisDashboard = connect(mapStateToProps, mapDispatchToProps)(_AnalysisDashboard);","import React, { Component } from 'react';\r\n\r\n\r\nimport './assets/styles/global.scss'\r\nimport { Route, Switch } from 'react-router';\r\n\r\nimport { Board } from './pages/Board';\r\nimport { Navbar } from './cmps/Navbar';\r\nimport userService from './services/userService';\r\nimport { DragDropContext } from 'react-beautiful-dnd'\r\nimport { connect } from 'react-redux';\r\nimport { updateBoard, updatePosition } from './store/actions/boardActions';\r\n\r\nimport { Login } from './pages/Login';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Notify } from './cmps/Notify';\r\nimport { Home } from './pages/Home';\r\nimport { BoardSelection } from './cmps/BoardSelector/BoardSelection';\r\nimport { AnalysisDashboard } from './pages/AnalysisDashboard';\r\n\r\n\r\n\r\nclass _App extends Component {\r\n\r\n  componentDidMount() {\r\n    userService.loginDefault()\r\n    toast.configure()\r\n  }\r\n\r\n\r\n\r\n  onDragEnd = (result) => {\r\n\r\n    const { destination, source, draggableId, type } = result\r\n\r\n    if (!destination) return\r\n    if (destination.droppableId === source.droppableId && destination.index === source.index) return\r\n    if (!draggableId) return\r\n\r\n    if (type === 'card') {\r\n      const startGroupIndex = this.props.board.groups.findIndex(group => group.id === source.droppableId)\r\n      const endGroupIndex = this.props.board.groups.findIndex(group => group.id === destination.droppableId)\r\n\r\n      // moving in the same group\r\n      if (source.droppableId === destination.droppableId) {\r\n\r\n        const currGroup = this.props.board.groups.find(group => group.id === source.droppableId)\r\n        const currCard = currGroup.cards.find(card => card.id === draggableId)\r\n        const newCardsGroup = Array.from(currGroup.cards)\r\n        newCardsGroup.splice(source.index, 1)\r\n        newCardsGroup.splice(destination.index, 0, currCard)\r\n        const newGroup = { ...currGroup, cards: newCardsGroup }\r\n        const newGroups = [...this.props.board.groups]\r\n        newGroups[startGroupIndex] = newGroup\r\n        const newBoard = { ...this.props.board, groups: newGroups }\r\n        this.props.updatePosition(newBoard)\r\n        // this.props.updateBoard(newBoard)\r\n        return\r\n      }\r\n\r\n      // moving between groups\r\n      if (source.droppableId !== destination.droppableId) {\r\n\r\n        const destinationGroup = this.props.board.groups.find(group => group.id === destination.droppableId)\r\n        const formerGroup = this.props.board.groups.find(group => group.id === source.droppableId)\r\n        const currCard = formerGroup.cards.find(card => card.id === draggableId)\r\n        const formerCardIndex = formerGroup.cards.findIndex(card => card.id === draggableId)\r\n        const newCardsArray = Array.from(destinationGroup.cards)\r\n\r\n        // time analysis\r\n        const currCardTime = currCard.timeAnalysis\r\n        if (currCardTime) {\r\n          currCardTime.timeInGroupsMap[currCardTime.currGroup.groupId] =\r\n            currCardTime.timeInGroupsMap[currCardTime.currGroup.groupId] + (Date.now() - currCardTime.currGroup.enteredAt) ||\r\n            (Date.now() - currCardTime.currGroup.enteredAt)\r\n          currCardTime.currGroup = {\r\n            groupId: destinationGroup.id,\r\n            enteredAt: Date.now()\r\n          }\r\n        }\r\n\r\n        newCardsArray.splice(destination.index, 0, currCard)\r\n        formerGroup.cards.splice(formerCardIndex, 1)\r\n\r\n        const newGroups = [...this.props.board.groups]\r\n        newGroups[startGroupIndex] = formerGroup\r\n        newGroups[endGroupIndex].cards = newCardsArray\r\n\r\n        const newBoard = { ...this.props.board, groups: newGroups }\r\n        this.props.updatePosition(newBoard)\r\n        // this.props.updateBoard(newBoard)\r\n        return\r\n      }\r\n    }\r\n\r\n    if (type === 'group') {\r\n\r\n      const newGroupsOrder = Array.from(this.props.board.groups)\r\n      const currGroup = this.props.board.groups.find(group => group.id === draggableId)\r\n      newGroupsOrder.splice(source.index, 1)\r\n      newGroupsOrder.splice(destination.index, 0, currGroup)\r\n\r\n      const newBoard = {\r\n        ...this.props.board,\r\n        groups: newGroupsOrder\r\n      }\r\n      this.props.updatePosition(newBoard)\r\n      // this.props.updateBoard(newBoard)\r\n      return\r\n\r\n    }\r\n  }\r\n\r\n  // getImgOrBg = ()=>{\r\n  //   if (this.props.style.bgImg) return `backgroundImage: style.bgImg`\r\n  //   else if (this.props.style.boardColor) return `backgroundColor:style.boardColor`\r\n  // }\r\n\r\n  // getStyle = () => {\r\n  //       if (this.props.style.bgImg) return `style={{backgroundImage: style.bgImg, backgroundPosition:'center'}}`\r\n  //       else if (this.props.style.boardColor) return `style{{backgroundColor:style.boardColor,backgroundPosition:'center' }}`\r\n  // }\r\n\r\n\r\n\r\n  render() {\r\n    const { style } = this.props\r\n\r\n    return (\r\n\r\n      (this.props.style)\r\n        ? <DragDropContext onDragEnd={this.onDragEnd} onDragStart={this.onDragStart}>\r\n          <div className=\"app-bg\"\r\n            style={this.props.style.bgImg ? { backgroundImage: style.bgImg, backgroundPosition: 'center' } :\r\n              { backgroundColor: style.boardColor, backgroundPosition: 'center' }}>\r\n            <div className=\"App\">\r\n              <header className=\"App-header\">\r\n                <Route path=\"/\" component={Navbar} />\r\n              </header>\r\n              <main className=\"app-main\">\r\n              <Notify />\r\n              <Switch>\r\n                <Route path=\"/analysis/:id/\" component={AnalysisDashboard} />\r\n                <Route path=\"/board/:id/:cardId?\" component={Board} />\r\n                <Route path=\"/board\" component={BoardSelection} />\r\n                {/* <Route path=\"/board?/:id?/login\" component={Login} /> */}\r\n                <Route path=\"/login\" component={Login} />\r\n                <Route component={Home} path='/' />\r\n              </Switch>\r\n              </main>\r\n            </div>\r\n          </div>\r\n        </DragDropContext>\r\n        : <div>loading</div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardReducer.board,\r\n    style: state.boardReducer.style,\r\n    filterBy: state.boardReducer.filterBy\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  updateBoard,\r\n  updatePosition\r\n};\r\n\r\nexport const App = connect(mapStateToProps, mapDispatchToProps)(_App);\r\n\r\n// <div className=\"groups-list-bg\" \r\n// style={{\r\n// backgroundImage: style.bgImg,\r\n// color: style.fontClr\r\n// }}\r\n// >\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","\r\nconst initialState = {\r\n  board: {},\r\n  filterBy: null,\r\n  style: {},\r\n  fullLabel: false\r\n};\r\n\r\nconst defaultStyle = {\r\n  backgroundImage: null\r\n}\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_BOARD':\r\n      return { ...state, board:action.board };\r\n\r\n    case 'FILTER_BY':\r\n      return {...state, filterBy: action}\r\n      \r\n    case 'TOGGLE_FULL_LABEL':\r\n        if (state.fullLabel) return {...state,fullLabel : false}\r\n        return {...state,fullLabel:true}\r\n\r\n    case 'SET_STYLE':\r\n        return{ ...state, style: action.style }\r\n\r\n    case 'SET_DEFAULT_STYLE':\r\n        return {\r\n          ...state,\r\n          style: defaultStyle\r\n        }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","let localLoggedinUser = null;\r\nif (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n  loggedInUser: localLoggedinUser,\r\n  users: []\r\n};\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      return { ...state, loggedInUser: action.user };\r\n    case 'USER_REMOVE':\r\n      return {\r\n        ...state,\r\n        users: state.users.filter(user => user._id !== action.userId)\r\n      };\r\n    case 'SET_USERS':\r\n      return { ...state, users: action.users };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport boardReducer from './boardReducer';\r\nimport userReducer from './userReducer'\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    userReducer,\r\n    boardReducer\r\n})\r\n\r\nexport default rootReducer;","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers/rootReducer.js';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(\r\n    rootReducer,\r\n    composeEnhancers(applyMiddleware(thunk))\r\n);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { App } from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n// import './assets/styles/global.scss'\r\nimport { store } from './store/store';\r\n\r\n// const webpack = require('webpack')\r\n\r\n\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <HashRouter>\r\n            <App />\r\n        </HashRouter>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n)\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\n","\r\nfunction loadFromStorage(key) {\r\n    var val = localStorage.getItem(key)\r\n    return (val) ? JSON.parse(val) : null;\r\n}\r\n\r\nfunction saveToStorage(key, val) {\r\n    localStorage[key] = JSON.stringify(val);\r\n}\r\n\r\n\r\nexport default  {\r\n    loadFromStorage,\r\n    saveToStorage\r\n}"],"sourceRoot":""}