{"version":3,"sources":["services/storageService.js","services/cardService/cardService.js","services/boardService.js","assets/imgs/opus.png","services/userService.js","assets/icons/newLogoFutura.png","assets/icons/favicon.png","services/httpService.js","services/utils.js","cmps/BoardHeader/MemberPreview.jsx","store/actions/boardActions.js","cmps/AddMemberModal.jsx","cmps/BoardHeader/MemberList.jsx","cmps/BoardHeader/Label.jsx","cmps/BoardHeader/FilterByLabel.jsx","cmps/BoardHeader/Filter.jsx","store/actions/userActions.js","services/notificationService.js","cmps/Sidebar/ActivityLog.jsx","cmps/BoardHeader/Notifications.jsx","cmps/BoardHeader/BoardHeader.jsx","cmps/CardCmps/CardPreviewDueDate.jsx","cmps/CardCmps/CardDueDateSetter.jsx","cmps/CardCmps/CardNewChecklist.jsx","cmps/Share.jsx","cmps/CardCmps/CardSidebar.jsx","cmps/CardCmps/CardDescription.jsx","cmps/CardCmps/CardDetailsHeader.jsx","cmps/CardCmps/CardLabels.jsx","cmps/CardCmps/CardChecklistTodo.jsx","cmps/CardCmps/CardChecklist.jsx","cmps/CardCmps/CardChecklistList.jsx","cmps/CardCmps/CardAddComment.jsx","cmps/Sidebar/LabelEditModal.jsx","cmps/Sidebar/LabelPalette.jsx","cmps/CardCmps/CardMember.jsx","cmps/CardCmps/CardMembersList.jsx","services/cloudService.js","cmps/CardCmps/CardImgUpload.jsx","cmps/CardCmps/CardDetailsAttachment.jsx","cmps/CardCmps/CardImagesList.jsx","cmps/CardCmps/CoverSelector.jsx","cmps/CardCmps/CardDetails.jsx","cmps/CardCmps/CardPreviewActions.jsx","cmps/CardCmps/CardPreview.jsx","cmps/NewItem.jsx","store/actions/groupActions.js","cmps/GroupCmps/GroupMenu.jsx","cmps/Group.jsx","cmps/GroupCmps/AddNewGroup.jsx","cmps/GroupList.jsx","cmps/Sidebar/SidebarHeader.jsx","cmps/Sidebar/AboutBoard.jsx","cmps/Sidebar/ChangeBackground.jsx","assets/imgs/backgrounds/bg-1.jpg","cmps/Sidebar/SideArchive.jsx","cmps/Sidebar/LabelPanel.jsx","services/templateService.js","services/socketService.js","cmps/Sidebar/CreateTemplate.jsx","cmps/Sidebar/Sidebar.jsx","pages/Board.jsx","cmps/BoardHeader/NewBoardColor.jsx","assets/bgColors/bgColors.js","cmps/BoardHeader/AddNewBoard.jsx","cmps/LoginDrawer.jsx","cmps/Users/UserDetails.jsx","cmps/Users/UserActivities.jsx","cmps/Users/UserCardsPreview.jsx","cmps/Users/UserCards.jsx","cmps/Users/UsersMain.jsx","cmps/Navbar.jsx","assets/imgs/yaron.jpeg","assets/imgs/elad2.jpeg","pages/Main.jsx","cmps/Notify.jsx","pages/Home.jsx","cmps/BoardSelector/BoardPreview.jsx","cmps/BoardSelector/BoardHub.jsx","cmps/BoardSelector/BoardSelection.jsx","pages/AnalysisDashboard.jsx","App.js","serviceWorker.js","store/reducers/boardReducer.js","store/reducers/userReducer.js","store/reducers/rootReducer.js","store/store.js","index.js"],"names":["loadFromStorage","key","val","localStorage","getItem","JSON","parse","saveToStorage","stringify","cardService","addCard","createImage","imgRef","type","id","utils","makeId","src","title","createdAt","Date","now","board","cardTxt","groupId","a","newBoard","newCard","description","archivedAt","members","labels","dueDate","attachments","timeAnalysis","timeInGroupsMap","currGroup","enteredAt","byMember","groups","map","group","cards","push","partialActivity","activity","boardService","createActivity","activities","add","query","filterBy","params","createQueryString","httpService","get","remove","boardId","delete","getBoardById","updateBoard","filter","addNewBoard","user","userService","getLoggedInUser","txt","commentTxt","_id","fullName","imgUrl","card","archiveBoard","getCardTitleById","cardId","cardTitle","forEach","post","addedBoard","put","console","log","isArchived","Promise","resolve","boardToReturn","newGroup","toLowerCase","includes","length","currLabels","find","label","searchedLabel","currLabel","boardName","boardColor","currUser","createdBy","style","fontClr","bgImg","module","exports","login","logout","signup","getUsers","storageService","getById","userId","update","loginDefault","_handleLogin","getUserDetails","getUsersFromDb","updateUserInLocalStorage","loggedInUser","userCred","sessionStorage","setItem","clear","axios","Axios","create","withCredentials","ajax","endpoint","method","data","url","res","dir","response","status","window","location","assign","getUniqueHeaders","items","uniqueItems","item","getRandomColor","opacity","strHtml","calculatePercentToHex","chars","i","charAt","getRandomInteger","possible","Math","floor","random","URI","Object","keys","encodeURIComponent","replace","join","queryParams","URLSearchParams","toString","max","min","percentage","round","MemberPreview","state","testImage","callback","timer","timeout","timedOut","img","Image","onerror","onabort","clearTimeout","onload","setTimeout","setImgResult","setState","getStyle","backgroundImage","props","getName","name","this","newName","split","toUpperCase","Tooltip","className","Fragment","getInitials","Component","loadBoard","dispatch","addActivity","unshift","updateCard","newActivity","groupIdx","findIndex","cardIdx","addLabel","newLabel","removeLabel","labelId","labelIdx","splice","updateLabel","updatedlabel","onSetFilterBy","filteredBoard","setStyle","setDefaultStyle","text","_AddMemberModal","searchLetters","toggleUser","member","removeMember","addToMembers","getMembers","handleChange","search","target","value","allExistingUsers","ClickAwayListener","onClickAway","onCloseModal","onChange","autoCorrect","autoComplete","toLocaleLowerCase","onClick","mapDispatchToProps","userToPush","memberIdx","AddMemberModal","connect","boardReducer","allUsers","userReducer","users","MemberList","isModalShown","onShowModal","Label","isChecked","onFilterByLabel","color","_FilterByLabel","currFilter","onResetFilter","toggleModal","IconButton","onClose","CloseOutlined","FilterByLabel","Filter","isLabelModalShown","ref","React","createRef","onFilter","handleLabel","openModal","closeModal","Popover","anchorOrigin","vertical","horizontal","transformOrigin","open","anchorEl","current","onBackdropClick","loadUser","creds","require","default","notificationService","onLoad","getUpdated","setUpdated","lastUpdated","ActivityLog","displayMode","slice","to","timeago","CircularProgress","Notifications","onlyNonUserAlerts","isOpen","isRinging","alerts","newActivities","onOpen","getIsRinging","boardActivities","prevProps","prevState","lastUpdate","receiveUpdate","ringBell","ms","Badge","badgeContent","getNotificationPreview","_BoardHeader","loadAllUsers","onToggleSidebar","BoardHeader","CardPreviewDueDate","daysRemaining","date","month","toLocaleString","day","getDate","parsedDate","abs","year","getFullYear","displayTime","hour","toLocaleTimeString","dueDateClass","fontSize","CardDueDateSetter","isPopperOpen","anchor","setDefaultDate","onSetDueDate","ev","formDate","timestamp","getTime","submitDueDate","onUpdateDueDate","onRemoveDueDate","getDisplayDateBtn","displayDate","Button","parseDate","timeArray","getMonth","getHours","getMinutes","noValidate","TextField","onBlur","InputLabelProps","shrink","CardNewChecklist","isEditing","txtValue","setEditing","setNotEditing","onSubmit","preventDefault","checklist","onUpdate","getNewChecklistDisplay","autoFocus","onMouseDown","Share","copyRef","copyToClipboard","select","document","execCommand","path","readOnly","CardSidebar","anchorRef","toggleCoverSelector","onArchiveCard","toggleLabelPallete","toggleDisplayMembers","isUploading","disabled","size","toggleUploadDropzone","onUpdateChecklists","href","CardDescription","setDescriptionFromProps","onSave","onUpdateDesc","getDescriptionTxt","getIsEditing","placeholder","CardDetailsHeader","onChangeText","headerTxt","CardLabels","cardLabels","boardLabels","idx","onClickLabel","boardLabel","preview","isFull","displayLabel","CardChecklistTodo","isDone","isNew","removeText","getNewTodoDisplay","getTodoClassName","doneClass","getTextBox","Checkbox","checked","onCheck","onRemove","updateChecklist","updateTodo","todo","checkStatus","getActivityTxt","stopPropagation","activityTxt","displayCompleted","CardChecklist","tasksCompleted","totalTasks","showDialog","setTasksStatus","todos","toggleDisplayCompleted","getDisplayCheckedBtn","btnContent","onRemoveChecklist","closeDialog","openDialog","getPercentCompleted","onUpdateChecklist","newTodo","todoIdx","LinearProgress","variant","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","CardChecklistList","checklists","CardAddComment","onAddComment","getNewCommentDisplay","placeholer","Accordion","expanded","classes","root","AccordionSummary","aria-controls","AccordionDetails","LabelEditModal","action","setLabelEditId","onRemoveLabel","defaultValue","required","hidden","defaultChecked","htmlFor","_LabelPalette","labelEditId","onAddLabel","labelName","newColor","onEditLabel","labelColor","updatedLabel","onToggleLabelToCard","cardLabel","LabelPalette","CardMember","isUserChecked","initials","boardMember","cardMembers","Boolean","toggleMember","Avatar","width","CardMembersList","boardMembers","filterBoardMembers","filteredMembers","onSelectBoardMember","shouldAdd","cardMember","updateCardMembers","toggleList","cloudService","uploadImg","file","UPLOAD_URL","formData","FormData","append","fetch","body","json","secure_url","CardImgUpload","setUploading","submitImage","onAddImage","files","acceptedFiles","cancelButtonText","submitButtonText","maxFileSize","toggleOpen","showPreviews","showFileNamesInPreview","CardDetailsAttachment","att","updateAttFromProps","attachment","bool","then","CardImagesList","CoverSelector","cover","setCoverFromProps","colors","onSelectCover","onRemoveCover","getImageEls","imageEls","el","getColorEls","backgroundColor","_CardDetails","groupName","commentsOnly","isLabelPaletteShowing","isCardMemeberShown","isUploadZoneOpen","isCoverSelectorShown","getCardDetails","foundCard","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","history","onCloseCard","toggleCommentsOnly","toggleLabelPalette","getLabels","openEditLabelsModal","submitCard","onUpdateHeader","getCardDetailsMembers","cardMembersEl","onUpdateCardMembers","onUpdateCover","newImg","onUpdateAttachments","newAttachment","newChecklist","getFilteredActivities","cardActivities","getCardCover","aria-label","switchGroup","CardDetails","withRouter","_CardPreviewActions","offsetTop","offsetLeft","isMemberListOpen","onKeyPress","toggleCardMembersMenu","getParentPos","pos","parentElement","getBoundingClientRect","top","left","cardCover","getCardPath","getCurrTitle","cardStyle","attrs","CardPreviewActions","_CardPreview","onSetEditing","onSetNotEditing","onOpenCardActions","getCardPreviewStyle","bgColor","getCardPreviewMembers","getCardPreviewAttachments","cardAtt","getCardPreviewHoldDesc","cardDesc","getCardPreviewComments","cardComm","onOpenCardDetails","getCardPreviewChecklist","doneTodos","totalTodos","getCardPreviewAttrs","every","onToggleLabels","toggleFullLabels","componentDidMount","draggableId","index","provided","snapshot","draggableProps","dragHandleProps","innerRef","isDragging","fullLabel","CardPreview","NewItem","onKeyDown","placeHolderTxt","addBtnTxt","addItemTxt","onAdd","_GroupMenu","archiveAllCards","onArchiveAllCards","toggleMenu","archiveGroup","onArchiveGroup","newCards","GroupMenu","_Group","currGroupName","currGroupId","isMenuShown","isChangeGroupShown","onAddCard","getAddItemTxt","isShown","closeChangeGroupName","onOpenChangeGroupName","handleChangeGroupName","setNewGroupName","spellCheck","onFocus","droppableId","droppableProps","trim","newGroupName","Group","_AddNewGroup","newGroupTitle","event","onAddNewGroup","closeNewGroup","groupTitle","groupToPush","AddNewGroup","GroupList","isNewGroupShown","onAddGroup","direction","SidebarHeader","titleTxt","onSetMenuOpt","Divider","_AboutBoard","isEditDesc","isEditTitle","currDesc","currTitle","setCurrDesc","setCurrTitle","onEditDesc","onEditTitle","isShowing","Drawer","BackdropProps","hideBackdrop","resize","cols","rows","cursor","AboutBoard","_ChangeBackground","onSetBoardStyle","bgClr","backgroundRepeat","backgroundSize","ChangeBackground","_SideArchive","isShowingCards","archive","archivedCards","archivedGroups","loadArchive","onUnArchiveCard","onDeleteCard","deleteCard","onUnArchiveGroup","updateGroup","SideArchive","_LabelPanel","LabelPanel","templateService","createTemplateFromBoard","createBoardFromTemplate","templateId","template","templateName","socket","CreateTemplate","includeAttachments","includeChecklists","includeLabels","ListItemIcon","FormControl","FormLabel","component","FormGroup","FormControlLabel","control","_Sidebar","selectedMenuOpt","DynamicCmp","isSidebarShowing","ListItem","button","ListItemText","Link","Sidebar","setup","io","terminate","on","eventName","cb","off","emit","_Board","lastReceivedUpdateAt","showUpdateMessage","prevBoard","differ","detailedDiff","added","deleted","updated","getBoardFromParams","match","socketService","updatedBoard","resetBoard","err","Board","NewBoardColor","isSelected","onSetColor","allBoardColors","_AddNewBoard","selectedColor","newBoardName","redirectPath","AddNewBoard","_LoginDrawer","loginOrSignup","credentials","setSignup","setLogin","hideLoginDrawer","showBackdrop","logo","alt","initialValues","email","password","validate","values","errors","test","handleSubmit","isSubmitting","LoginDrawer","_UserDetails","username","updateUser","getUserDetailsFromProps","userName","height","UserDetails","UserActivities","selectedBoard","boards","selection","getActivitiesFromProps","getBoardList","uniqueIds","uniqueBoards","getFilteredActivites","InputLabel","NativeSelect","UserCardsPreview","displayArchived","onSelectBoard","cardCreatedAt","UserCards","onCloseUserDetails","userData","entries","entry","_Users","view","setView","userDeatils","userActivities","BottomNavigation","newValue","showLabels","BottomNavigationAction","icon","onSwitching","containerStyle","Users","_Navbar","isNewBoardModalShown","isLoginDrawerShown","isUserDetailsOpen","showLove","alert","showLoginDrawer","nativeEvent","stopImmediatePropagation","onOpenUserDetails","logoFutura","Navbar","Notify","Home","yaron","elad","BoardPreview","lastEdited","toDateString","onSelect","_BoardHub","isLoading","header","createBoard","onAddBoard","BoardHub","BoardSelection","templatesPage","boardsPage","boardsPerPage","templatesPerPage","totalBoardPages","totalTemplatePages","templates","templateLoading","selectedTemplate","isCreateTemplateOpen","isCreateBoardOpen","getBoards","limit","skip","ceil","boardSize","getTemplates","templateSize","onSelectTemplate","onCloseCreateTemplate","onCreateBoardFromTemplate","onRemoveBoard","onRemoveTemplate","onChangeTemplatePage","page","onChangeBoardPage","onRedirect","onCloseCreateBoard","onOpenCreateBoard","Pagination","count","defaultPage","shape","_AnalysisDashboard","getRndHexColor","getDataForChart","mapObject","rndClrs","datasets","hoverBackgroundColor","dashboardNumbers","numOfMembers","unarchivedCardsCount","archivedCardsCount","todosCount","reduce","acc","total","colorClass","cardsByGroups","cardsByGroupsMap","unArchivedCards","cardsByMembers","cardsByMembersMap","memberCardsCount","j","some","currMember","options","legend","display","scales","xAxes","ticks","beginAtZero","timeInGroups","groupIdNameMap","timeSpent","time","currPastGroupName","timeCardSpentInCurrGroup","lineData","toFixed","barsData","clr1","clr2","fill","borderColor","pointBorderColor","pointBackgroundColor","pointHoverBackgroundColor","pointHoverBorderColor","yAxisID","hoverBorderColor","responsive","tooltips","mode","elements","line","gridLines","yAxes","show","cardsByLabels","colorsMap","green","yellow","orange","red","purple","blue","grey","black","labelsMap","cardsWithLabelCount","borderWidth","strokeColor","highlightFill","highlightStroke","AnalysisDashboard","_App","onDragStart","resetFilterBy","onDragEnd","result","destination","source","startGroupIndex","endGroupIndex","currCard","newCardsGroup","Array","from","newGroups","updatePosition","destinationGroup","formerGroup","formerCardIndex","newCardsArray","currCardTime","newGroupsOrder","configure","backgroundPosition","newBoardPositioning","App","hostname","initialState","defaultStyle","rootReducer","combineReducers","loginUser","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.f0c7302c.chunk.js","sourcesContent":["\r\nfunction loadFromStorage(key) {\r\n    var val = localStorage.getItem(key)\r\n    return (val) ? JSON.parse(val) : null;\r\n}\r\n\r\nfunction saveToStorage(key, val) {\r\n    localStorage[key] = JSON.stringify(val);\r\n}\r\n\r\n\r\nexport default  {\r\n    loadFromStorage,\r\n    saveToStorage\r\n}","\r\nimport { utils } from '../utils'\r\nimport { boardService } from '../boardService';\r\n\r\nexport const cardService = {\r\n    addCard,\r\n    createImage\r\n}\r\n\r\n\r\nfunction createImage(imgRef) {\r\n    const attachment = {\r\n        type: 'img',\r\n        id: utils.makeId(),\r\n        src: imgRef,\r\n        title: 'Image',\r\n        createdAt: Date.now()\r\n    }\r\n    return attachment\r\n\r\n}\r\n\r\nasync function addCard(board, cardTxt, groupId) {\r\n    const newBoard = JSON.parse(JSON.stringify(board))\r\n    const newCard = {\r\n        id: utils.makeId(),\r\n        title: cardTxt,\r\n        description: '',\r\n        archivedAt: null,\r\n        members: [],\r\n        labels: [],\r\n        createdAt: Date.now(),\r\n        dueDate: null,\r\n        attachments: null,\r\n        timeAnalysis:{ \r\n            timeInGroupsMap:{},\r\n            currGroup: {\r\n                groupId,\r\n                enteredAt: Date.now()\r\n            }\r\n         },\r\n        byMember: {\r\n            // add user info here from session storage:\r\n            //                         \"byMember\": {\r\n            //                             \"_id\": \"u101\",\r\n            //                             \"username\": \"Tal\",\r\n            //                             \"fullname\": \"Tal Tarablus\",\r\n            //                             \"imgUrl\": \"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg\"\r\n            //                         },\r\n        }\r\n    }\r\n    newBoard.groups.map(group => {\r\n        if (group.id === groupId) {\r\n            group.cards.push(newCard)\r\n            return group\r\n        }\r\n        return group\r\n    })\r\n\r\n    const partialActivity = {\r\n        \"txt\": 'create this card',\r\n        \"commentTxt\": '',\r\n        \"card\": {\r\n          \"id\": newCard.id,\r\n          \"title\": cardTxt\r\n        }\r\n      }\r\n\r\n      \r\n    const activity = boardService.createActivity(partialActivity)\r\n      if (!newBoard.activities) newBoard.activities = []\r\n      newBoard.activities.push(activity)\r\n    // await boardService.updateBoard(newBoard)\r\n    return newBoard\r\n}\r\n","import httpService from './httpService';\r\nimport userService from './userService';\r\nimport { utils } from './utils'\r\n\r\nexport const boardService = {\r\n    add,\r\n    query,\r\n    remove,\r\n    getBoardById,\r\n    updateBoard,\r\n    filter,\r\n    addNewBoard,\r\n    createActivity,\r\n    archiveBoard,\r\n    getCardTitleById\r\n};\r\n\r\nfunction getCardTitleById(cardId,board) {\r\n    let cardTitle;\r\n     board.groups.forEach(group => group.cards.forEach(card => {\r\n        if (card.id === cardId) {\r\n            cardTitle = card.title\r\n        }\r\n    }))\r\n    return cardTitle\r\n}\r\n\r\nfunction createActivity(partialActivity) {\r\n    // activity = {txt:'your text here'}\r\n    // This fn needs to receive an object with the card id and title and the text in theh following format:\r\n    // send to this fn:\r\n    // txt\r\n    // card id\r\n    // card title\r\n    // comment txt as blank\r\n\r\n    const user = userService.getLoggedInUser()\r\n\r\n    const activity = {\r\n        \"id\": utils.makeId(),\r\n        \"txt\": partialActivity.txt,\r\n        \"commentTxt\": partialActivity.commentTxt,\r\n        \"createdAt\": Date.now(),\r\n        \"byMember\": {\r\n            \"_id\": user._id,\r\n            \"fullName\": user.fullName,\r\n            \"imgUrl\": user.imgUrl\r\n        }\r\n    }\r\n    if (partialActivity.card) {\r\n        activity.card = {\r\n            \"id\": partialActivity.card.id,\r\n            \"title\": partialActivity.card.title\r\n        }\r\n    }\r\n    if (!partialActivity.group) {\r\n        activity.group = {...partialActivity.group}\r\n    }\r\n\r\n    return activity\r\n\r\n}\r\n\r\nfunction query(filterBy) {\r\n    \r\n    const params = (!filterBy) ? '' : utils.createQueryString(filterBy)\r\n    \r\n    return httpService.get(`board${params}`)\r\n}\r\n\r\nfunction getBoardById(boardId) {\r\n    return httpService.get(`board/${boardId}`)\r\n}\r\nfunction remove(boardId) {\r\n    return httpService.delete(`board/${boardId}`);\r\n}\r\nasync function add(board) {\r\n    const addedBoard = await httpService.post(`board`, board);\r\n    return addedBoard\r\n}\r\n\r\nasync function updateBoard(board) {\r\n    const boardId = board._id\r\n    return await httpService.put(`board/${boardId}`, board)\r\n}\r\n\r\n\r\nasync function archiveBoard(boardId) {\r\n    console.log('archive board service')\r\n    const board = await getBoardById(boardId)\r\n    board.isArchived = true\r\n    await updateBoard(board)\r\n    return Promise.resolve(boardId)\r\n}\r\n\r\n\r\n\r\n// async function switchGroup(board, card, oldGroupId, targetGroupId, targetCardIdx) {\r\n//     const newBoard = JSON.parse(JSON.stringify(board))\r\n//     newBoard.groups = newBoard.groups.map(group => {\r\n//         if (group.id === targetGroupId) return [...group.splice(0, targetCardIdx), card, ...group.splice(targetCardIdx + 1)]\r\n//         if (group.id === oldGroupId) return group.filter(currCard => currCard.id !== card.id)\r\n//         return group\r\n//     })\r\n//     return await updateBoard(newBoard)\r\n// }\r\n\r\nasync function filter(boardId, filterBy) {\r\n\r\n    const boardToReturn = await getBoardById(boardId)\r\n    // text in card filter\r\n    if (filterBy.txt) {\r\n        boardToReturn.groups = boardToReturn.groups.map(group => {\r\n            const newGroup = { ...group }\r\n            newGroup.cards = newGroup.cards.filter(card => {\r\n                return card.title.toLowerCase().includes(filterBy.txt)\r\n            })\r\n            return newGroup\r\n        })\r\n    }\r\n\r\n    // multiple labels filter\r\n    if (filterBy.labels && filterBy.labels.length) {\r\n        const currLabels = filterBy.labels\r\n        boardToReturn.groups = boardToReturn.groups.map(group => {\r\n            const newGroup = { ...group }\r\n            newGroup.cards = newGroup.cards.filter(card => {\r\n                if (card.labels &&\r\n                    card.labels.find(label => {\r\n                        const searchedLabel = label.id\r\n                        // if the searched label equals to the current labels from the label-filter array\r\n                        if (searchedLabel === currLabels.find(currLabel => currLabel === searchedLabel)) {\r\n                            return label\r\n                        }\r\n                    })) {\r\n                    return card\r\n                }\r\n            })\r\n            return newGroup\r\n        })\r\n    }\r\n\r\n    return boardToReturn;\r\n\r\n}\r\n\r\n\r\n    async function addNewBoard(boardName, boardColor, currUser){\r\n\r\n\r\n        const newBoard = {\r\n            title: boardName,\r\n            isArchived: false,\r\n            createdAt: Date.now,\r\n            description: 'Board\\'s description',\r\n            labels: [{\r\n                    \"id\": \"l101\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"green\"\r\n                },\r\n                {\r\n                    \"id\": \"l102\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"yellow\"\r\n                },\r\n                {\r\n                    \"id\": \"l103\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"orange\"\r\n                },\r\n                {\r\n                    \"id\": \"l104\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"red\"\r\n                },\r\n                {\r\n                    \"id\": \"l105\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"purple\"\r\n                },\r\n                {\r\n                    \"id\": \"l106\",\r\n                    \"name\": \"Default\",\r\n                    \"color\": \"blue\"\r\n                }\r\n            ],\r\n            activities: [],\r\n            createdBy: { // update from currUser\r\n                _id: 'u101', // update from user\r\n                fullName: 'Abi Abambi',\r\n                imgUrl: 'http://some-img'\r\n            },\r\n            style: {\r\n                // id: utils.makeId(),\r\n                fontClr: '#f9f9f9',\r\n                bgImg: null,\r\n                boardColor\r\n            },\r\n            members: [{ // update from currUser\r\n                _id: 'u101', // update from user\r\n                fullName: 'Abi Abambi',\r\n                imgUrl: 'http://some-img'\r\n            }],\r\n            groups:[{\r\n                id: utils.makeId(),\r\n                title: 'Add New Card Title',\r\n                description: \"description\",\r\n                archivedAt: false,\r\n                labels: [],\r\n                cards:[]\r\n            }]\r\n        }        \r\n\r\n        console.log(newBoard);\r\n        \r\n        const addedBoard = await httpService.post(`board`, newBoard);\r\n        return addedBoard\r\n        // push new board to board collection and forword user to the new route\r\n    }\r\n","module.exports = \"data:image/png;base64,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\"","import storageService from './storageService'\r\nimport httpService from './httpService'\r\n\r\nconst userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update,\r\n    loginDefault,\r\n    getLoggedInUser,\r\n    // getByIdDb,\r\n    getUserDetails,\r\n    getUsersFromDb,\r\n    updateUserInLocalStorage\r\n}\r\n\r\n// window.userService = userService;\r\nexport default userService;\r\n\r\nfunction loginDefault() {\r\n    const user = getLoggedInUser()\r\n    if (!user) {\r\n\r\n        const defaultGuest = {\r\n            \"_id\": \"u900\",\r\n            \"userName\": \"Guest\",\r\n            \"fullName\": \"Guesty guest\",\r\n            \"imgUrl\": \"https://images-na.ssl-images-amazon.com/images/I/41v4Cc8iZ-L._AC_.jpg\"\r\n        }\r\n        \r\n        _handleLogin(defaultGuest)\r\n    }\r\n}\r\n\r\n\r\nasync function getUserDetails() {\r\n    const loggedInUser = getLoggedInUser()\r\n    return httpService.get(`user/details/${loggedInUser._id}`)\r\n}\r\n\r\n\r\nasync function login(userCred) {\r\n    const user = await httpService.post('auth/login', userCred)\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return _handleLogin(user)\r\n}\r\n\r\nasync function getUsersFromDb() {\r\n    return httpService.get('user')\r\n}\r\n\r\nfunction getUsers() {\r\n    return storageService.query('user')\r\n}\r\n\r\nfunction getLoggedInUser() {\r\n    return storageService.loadFromStorage('user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    return httpService.get(`user/${userId}`)\r\n    // return storageService.get('user', userId)\r\n}\r\n\r\nfunction remove(userId) {\r\n    // return httpService.delete(`user/${userId}`)\r\n    return storageService.remove('user', userId)\r\n}\r\n\r\nfunction update(user) {\r\n    // return storageService.put('user', user)\r\n    return httpService.put(`user/${user._id}`, user)\r\n}\r\n\r\n\r\nasync function signup(userCred) {\r\n    // const user = await httpService.post('auth/signup', userCred)\r\n    const user = await storageService.post('user', userCred)\r\n    return _handleLogin(user)\r\n}\r\nasync function logout() {\r\n    // await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\n// function _handleLogin(user) {\r\n//     sessionStorage.setItem('user', JSON.stringify(user))\r\n//     return user;\r\n// }\r\n\r\nfunction updateUserInLocalStorage(user) {\r\n    _handleLogin(user)\r\n}\r\n\r\nfunction _handleLogin(user) {\r\n    // THIS SAVES TO LOCAL STORAGE INSTEAD OF SESSION STORAGE!!!\r\n    localStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","import Axios from 'axios';\r\n\r\n// this is for db.json\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n    // open this instead when switching to MongoDB\r\n// const BASE_URL = process.env.NODE_ENV === 'production'\r\n// ? '/api/'\r\n// : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        \r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        // console.log('updating')\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n            window.location.assign('/#/login');\r\n        }\r\n        throw err;\r\n    }\r\n}","export const utils = {\r\n    getUniqueHeaders,\r\n    getRandomColor,\r\n    getRandomInteger,\r\n    makeId,\r\n    createQueryString\r\n}\r\n\r\n\r\nfunction createQueryString(data) {\r\n    const URI = Object.keys(data).map(key => {\r\n      let val = data[key]\r\n      if (typeof val === 'object') val = createQueryString(val)\r\n      return `${key}=${encodeURIComponent(`${val}`.replace(/\\s/g, '_'))}`\r\n    }).join('&')\r\n    const queryParams = new URLSearchParams(URI)\r\n    return `?${queryParams.toString()}`\r\n  }\r\n\r\nfunction makeId(length = 10) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\nfunction getRandomInteger(max, min = 0) {\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nfunction getUniqueHeaders(items, key) {\r\n    let uniqueItems = []\r\n    items.forEach(item => {\r\n        if (!uniqueItems.includes(item[key])) uniqueItems.push(item[key])\r\n    });\r\n    return uniqueItems\r\n}\r\n\r\nfunction getRandomColor(opacity = 100) {\r\n    let strHtml = '#';\r\n    strHtml += calculatePercentToHex(opacity)\r\n    let chars = '0123456789abcdef';\r\n    for (let i = 0; i < 3; i++) {\r\n        strHtml += chars.charAt(getRandomInteger(chars.length));\r\n    }\r\n    return strHtml;\r\n}\r\n\r\n\r\n\r\nfunction calculatePercentToHex(percentage) {\r\n    const val = Math.round(percentage / 100 * 255)\r\n    const hexString = val.toString(16);\r\n    return hexString\r\n}","\r\nimport { Tooltip } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\n\r\nexport class MemberPreview extends Component {\r\n\r\n    state = {\r\n        imgUrl: null\r\n    }\r\n\r\n    \r\n    componentDidMount() {\r\n        this.testImage(this.props.imgUrl, this.setImgResult)\r\n    }\r\n\r\n    testImage = (url, callback, timeout = 5000) => {\r\n\r\n        var timedOut = false, timer;\r\n        var img = new Image();\r\n        img.onerror = img.onabort = function () {\r\n            if (!timedOut) {\r\n                clearTimeout(timer);\r\n                callback(url, \"error\");\r\n            }\r\n        };\r\n        img.onload = function () {\r\n            if (!timedOut) {\r\n                clearTimeout(timer);\r\n                callback(url, \"success\");\r\n            }\r\n        };\r\n        img.src = url;\r\n        timer = setTimeout(function () {\r\n            timedOut = true;\r\n            // reset .src to invalid URL so it stops previous\r\n            // loading, but doesn't trigger new load\r\n            img.src = \"//!!!!/test.jpg\";\r\n            callback(url, \"timeout\");\r\n        }, timeout);\r\n    }\r\n\r\n\r\n    getInitials(name) {\r\n        if (!name) return\r\n        const newName = name.split(' ')\r\n        const firstLetter = newName[0].charAt(0).toUpperCase()\r\n        const secondLetter = newName[1].charAt(0).toUpperCase()\r\n        const initials = firstLetter + secondLetter\r\n        return initials\r\n    }\r\n\r\n    setImgResult = (url, res) => {\r\n        if (res === 'success') this.setState({ imgUrl: url })\r\n    }\r\n\r\n    getStyle = () => {\r\n        if (this.state.imgUrl) return { backgroundImage: `url(${this.props.imgUrl})` }\r\n        return {}\r\n    }\r\n\r\n    getName = () => {\r\n        if (this.props.name) return this.props.name\r\n        return ''\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Tooltip title={this.getName()}>\r\n                <div className=\"member-preview\" style={this.getStyle()}>\r\n                    {(this.state.imgUrl) ? <React.Fragment /> : this.getInitials(this.props.name)}\r\n                </div>\r\n            </Tooltip>\r\n        )\r\n    }\r\n}\r\n","import { boardService } from \"../../services/boardService\";\r\n\r\n\r\nexport function loadBoard(boardId) {\r\n  return async dispatch => {\r\n    try {\r\n      const board = await boardService.getBoardById(boardId);\r\n      dispatch({ type: 'SET_BOARD', board });\r\n    } catch (err) {\r\n      console.log('boardAction: error in board action', err);\r\n      throw err;\r\n    }\r\n  };\r\n}\r\n\r\nexport function resetBoard() {\r\n  return dispatch => {\r\n    try {\r\n      dispatch({ type: 'SET_BOARD', board: null })\r\n    } catch (err) {\r\n      console.log('board action error in reseting board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function addActivity(board, activity) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      if (!newBoard.activities) newBoard.activities = []\r\n      newBoard.activities.unshift(activity)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error removing board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function toggleFullLabels() {\r\n  return dispatch => {\r\n    dispatch({ type: 'TOGGLE_FULL_LABEL' })\r\n  }\r\n}\r\n\r\n\r\n// check that it updates the db\r\nexport function updateCard(board, newCard, newActivity) {\r\n\r\n  return async dispatch => {\r\n    try {\r\n      // replicate board\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      // find the group idx\r\n      const groupIdx = newBoard.groups.findIndex(group => group.cards.find(card => card.id === newCard.id))\r\n      // find the card idx\r\n      const cardIdx = newBoard.groups[groupIdx].cards.findIndex(card => card.id === newCard.id)\r\n      // replace the card content\r\n      newBoard.groups[groupIdx].cards[cardIdx] = newCard\r\n\r\n      // add activity\r\n\r\n      if (newActivity) {\r\n        const activity = boardService.createActivity(newActivity)\r\n        newBoard.activities.unshift(activity)\r\n      }\r\n\r\n\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n      // newBoard = boardService.updateBoard(newBoard) // updating the DB\r\n\r\n    } catch (err) {\r\n      console.log('error updating card', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function addLabel(board, newLabel) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      newLabel.id = makeId()\r\n      if (!newBoard.labels) newBoard.labels = [];\r\n      newBoard.labels.push(newLabel)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error adding label', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeLabel(board, labelId) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const labelIdx = newBoard.labels.findIndex(label => label.id === labelId)\r\n      newBoard.labels.splice(labelIdx, 1)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error removing label', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updateLabel(board, updatedlabel) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      newBoard.labels = newBoard.labels.map(label => {\r\n        if (label.id === updatedlabel.id) label = updatedlabel\r\n        return label\r\n      })\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating label', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function deleteCard(board, cardId) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.cards.find(card => card.id === cardId))\r\n      const cardIdx = newBoard.groups[groupIdx].cards.findIndex(card => card.id === cardId)\r\n      newBoard.groups[groupIdx].cards.splice(cardIdx, 1)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error deleting card', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updateGroup(board, newGroup) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.id === newGroup.id)\r\n      newBoard.groups[groupIdx] = newGroup;\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating group', err)\r\n    }\r\n  }\r\n}\r\n\r\n// // backup to filter\r\nexport function onSetFilterBy(board, filterBy) {\r\n  return async dispatch => {\r\n    try {\r\n      const filteredBoard = await boardService.filter(board._id, filterBy)\r\n      dispatch({ type: 'FILTER_BY', filterBy })\r\n      dispatch({ type: 'SET_BOARD', board: filteredBoard })\r\n    } catch (err) {\r\n      console.log('error setting filter group', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function resetFilterBy(boardId){\r\n  return async dispatch=>{\r\n      const board = await boardService.getBoardById(boardId);\r\n      dispatch({ type: 'SET_BOARD', board });\r\n      dispatch({ type: 'RESET_FILTER_BY' })\r\n  }\r\n}\r\n\r\nexport function onAddNewGroup(board, groupTitle) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupToPush = {\r\n        id: makeId(),\r\n        title: groupTitle,\r\n        cards: [],\r\n        archivedAt: false,\r\n        style: {}\r\n      }\r\n      newBoard.groups.push(groupToPush)\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard)\r\n    } catch (err) {\r\n      console.log('error adding new group', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updatePosition(newBoardPositioning, cardId) {\r\n\r\n  return async dispatch => {\r\n    try {\r\n      dispatch({ type: 'SET_BOARD', board: newBoardPositioning })\r\n      let newBoard = JSON.parse(JSON.stringify(newBoardPositioning))\r\n\r\n\r\n\r\n\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n\r\n    } catch (err) {\r\n      console.log('error updating board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function updateBoard(board) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error updating board', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function setStyle(style) {\r\n  return async dispatch => {\r\n    dispatch({ type: 'SET_STYLE', style })\r\n  }\r\n}\r\n\r\nexport function setDefaultStyle() {\r\n  return async dispatch => {\r\n    dispatch({ type: 'SET_DEFAULT_STYLE' })\r\n  }\r\n}\r\n\r\n\r\n\r\nexport function onArchiveGroup(groupId, board) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.id === groupId)\r\n      newBoard.groups[groupIdx].archivedAt = Date.now()\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error archiving group', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function onArchiveAllCards(groupId, board) {\r\n  return async dispatch => {\r\n    try {\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const groupIdx = newBoard.groups.findIndex(group => group.id === groupId)\r\n      const newCards = newBoard.groups[groupIdx].cards.map(card => {\r\n        const newCard = JSON.parse(JSON.stringify(card))\r\n        newCard.archivedAt = Date.now()\r\n        return newCard\r\n      });\r\n      newBoard.groups[groupIdx].cards = newCards\r\n      dispatch({ type: 'SET_BOARD', board: newBoard })\r\n      await boardService.updateBoard(newBoard) // updating the DB\r\n    } catch (err) {\r\n      console.log('error archiving cards', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function setNewGroupName(groupId, groupName, board) {\r\n  return async dispatch => {\r\n    try {\r\n      const groupIdx = board.groups.findIndex(group => group.id === groupId)\r\n      if (groupName === board.groups[groupIdx].title || !groupName.trim()) return\r\n      let newBoard = JSON.parse(JSON.stringify(board))\r\n      const newGroupName = groupName.replace(/\\s+/g, \" \")\r\n      newBoard.groups[groupIdx].title = newGroupName.trim()\r\n      dispatch({\r\n        type: 'SET_BOARD',\r\n        board: newBoard\r\n      })\r\n      await boardService.updateBoard(newBoard)\r\n    } catch (err) {\r\n      console.log('error setting group name', err)\r\n    }\r\n  }\r\n}\r\n\r\n// finish\r\nexport function addNewBoard(boardName, boardColor = null) {\r\n  return async dispatch => {\r\n    const newBoard = await boardService.addNewBoard(boardName, boardColor)\r\n    // dispatch({ type: 'SET_BOARD', newBoard });\r\n    return newBoard\r\n  }\r\n}\r\n\r\n// finish\r\nexport function addToMembers({ _id, fullName, imgUrl }, board) {\r\n  return async dispatch => {\r\n    const userToPush = {\r\n      _id,\r\n      fullName,\r\n      imgUrl\r\n    }\r\n    let newBoard = JSON.parse(JSON.stringify(board))\r\n    newBoard.members.unshift(userToPush)\r\n    dispatch({ type: 'SET_BOARD', board: newBoard })\r\n    await boardService.updateBoard(newBoard) // updating the DB\r\n  }\r\n}\r\n\r\n// finish\r\nexport function removeMember(id, board) {\r\n  return async dispatch => {\r\n    let newBoard = JSON.parse(JSON.stringify(board))\r\n    const memberIdx = newBoard.members.findIndex(member => member._id === id)\r\n    newBoard.members.splice(memberIdx, 1)\r\n    dispatch({ type: 'SET_BOARD', board: newBoard })\r\n    await boardService.updateBoard(newBoard) // updating the DB\r\n  }\r\n}\r\n\r\nexport function switchGroup() { }\r\n\r\n// =============================================\r\n\r\nfunction makeId(length = 8) {\r\n  let text = '';\r\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  for (let i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { MemberPreview } from './BoardHeader/MemberPreview'\r\nimport { ClickAwayListener } from '@material-ui/core';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { addToMembers, removeMember } from '../store/actions/boardActions';\r\n\r\n\r\nexport class _AddMemberModal extends Component {\r\n\r\n    state = {\r\n        searchLetters: ''\r\n    }\r\n\r\n    toggleUser=(user)=>{\r\n        if (!this.props.members.find(member => member._id === user._id)) {\r\n            this.props.addToMembers(user, this.props.board)\r\n        } else this.props.removeMember(user._id, this.props.board)\r\n    }\r\n \r\n    getMembers=(id)=>{\r\n        return this.props.members.find(member => {\r\n            if (member._id === id) return true\r\n            else return false\r\n        })\r\n    }\r\n\r\n    handleChange = ({ target }) =>{\r\n        const search = target.value\r\n        this.setState({ searchLetters: search })\r\n    }\r\n\r\n    render() {\r\n        \r\n        const { members, allExistingUsers } = this.props\r\n        \r\n        if(!members) return <div>loading</div>\r\n        return (\r\n            <ClickAwayListener onClickAway={this.props.onCloseModal}>\r\n                <div className=\"add-member-modal\">\r\n                    <h3>Members</h3>\r\n                    <input type=\"search\" onChange={this.handleChange} name=\"search-member\" id=\"\" autoCorrect=\"off\" autoComplete=\"off\"/>\r\n                    <div className=\"add-members-container\">\r\n                        {!this.state.searchLetters? \r\n                            allExistingUsers.map(user => {\r\n                                return <div key={user._id} className=\"member-container\" onClick={() => this.toggleUser(user)}>\r\n                                    <MemberPreview name={user.fullName} /> \r\n                                    <p>{user.fullName}</p>\r\n                                    {this.getMembers(user._id) && <div><CheckIcon /></div>}\r\n                                </div>\r\n                            }) : allExistingUsers.map(user => {\r\n                                // filtering through the all users array\r\n                                if (user.fullName.toLowerCase().includes(this.state.searchLetters.toLocaleLowerCase())){\r\n                                return <div key={user._id} className=\"member-container\" onClick={() => this.toggleUser(user)}>\r\n                                    <MemberPreview name={user.fullName} />\r\n                                    <p>{user.fullName}</p>\r\n                                    {this.getMembers(user._id) && <div><CheckIcon /></div>}\r\n                                    </div>\r\n                                }\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        members: state.boardReducer.board.members,\r\n        allUsers: state.userReducer.users\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    // loadAllUsers\r\n    addToMembers,\r\n    removeMember\r\n};\r\nexport const AddMemberModal = connect(mapStateToProps, mapDispatchToProps)(_AddMemberModal);\r\n","import React, { Component } from 'react'\r\nimport { MemberPreview } from './MemberPreview';\r\nimport { AddMemberModal } from '../AddMemberModal';\r\nimport { render } from '@testing-library/react';\r\n\r\nexport class MemberList extends Component {\r\n\r\n    state = {\r\n        isModalShown: false\r\n    }\r\n\r\n    onShowModal = () => {\r\n        this.setState({ isModalShown: true })\r\n    }\r\n    \r\n    onCloseModal = () => {        \r\n        this.setState({ isModalShown: false })\r\n    }\r\n    \r\n    render(){\r\n        const { members } = this.props\r\n        if (!members) return <h4>loading</h4>\r\n\r\n        return (\r\n            <div className=\"members-container\">\r\n                <div className=\"member-preview add-member-btn\" onClick={() => this.onShowModal()}>+</div>\r\n                <div className=\"add-member-modal-container\">\r\n                    {this.state.isModalShown && <AddMemberModal onCloseModal={this.onCloseModal} allExistingUsers={this.props.allUsers} />}\r\n                </div>\r\n                {\r\n                    members.map(member => {\r\n                        return <MemberPreview key={member._id}\r\n                            name={member.fullName} \r\n                            imgUrl={member.imgUrl}\r\n                            />\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport CheckIcon from '@material-ui/icons/Check';\r\n\r\nexport class Label extends Component {\r\n\r\n    render() {\r\n        const { isChecked } = this.props\r\n        return (\r\n            <div className=\"label-inner-container\"\r\n                onClick={() => this.props.onFilterByLabel(this.props.id)}>\r\n                <div className={`label ${this.props.color}`}></div>  \r\n                {this.props.name ? <p>{this.props.name}</p> : <p>Deafult</p>}\r\n                {isChecked && <div><CheckIcon /></div>}\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Label } from './Label'\r\nimport { onSetFilterBy } from '../../store/actions/boardActions'\r\nimport { ClickAwayListener, IconButton } from '@material-ui/core'\r\nimport { CloseOutlined } from '@material-ui/icons'\r\n\r\nexport class _FilterByLabel extends Component {\r\n\r\n    onFilterByLabel = (labelId) => {\r\n        // if theres filter and it is txt\r\n        if (this.props.currFilter && this.props.currFilter.filterBy.txt) return\r\n\r\n        let labels = []\r\n        // if theres filter and is of labels type\r\n        if (this.props.currFilter && this.props.currFilter.filterBy.labels) {\r\n            labels = [...this.props.currFilter.filterBy.labels]\r\n            // if you the idx is -1, than add it to the labels array\r\n            const labelIdx = labels.findIndex(label => label === labelId)\r\n            if (labelIdx !== -1) { labels.splice(labelIdx, 1) }\r\n            else if (labelIdx === -1) { labels.push(labelId) }\r\n        } else {\r\n            labels.push(labelId)\r\n        }\r\n        this.props.onSetFilterBy(this.props.board, { labels })\r\n    }\r\n\r\n    isChecked(labelId) {\r\n        // check if there are currently labels in the filter\r\n        if (!this.props.currFilter || !this.props.currFilter.filterBy.labels) return\r\n        let labels = [...this.props.currFilter.filterBy.labels]\r\n        const labelIdx = labels.findIndex(label => label === labelId)\r\n        if (labelIdx !== -1) return true\r\n        else return false\r\n    }\r\n\r\n    onResetFilter = () => {\r\n        const labels = []\r\n        this.props.onSetFilterBy(this.props.board, { labels })\r\n    }\r\n\r\n    render() {\r\n        const { labels } = this.props.board\r\n        return (\r\n            <ClickAwayListener onClickAway={this.props.toggleModal}>\r\n                <div className=\"label-filter\">\r\n                    <div className=\"labels-header\">\r\n                        <div></div>\r\n                        <div><h6>Labels</h6></div>\r\n                        <IconButton onClick={this.props.onClose}>\r\n                            <CloseOutlined />\r\n                        </IconButton>\r\n                    </div>\r\n                    <div className=\"labels-container\">\r\n\r\n                        <div className=\"label-inner-container\"\r\n                            onClick={() => this.onResetFilter()}>\r\n                            <div className={`label grey`}></div>\r\n                            <p>No labels</p>\r\n                        </div>\r\n\r\n                        {labels.map(label => {\r\n                            return <Label name={label.name}\r\n                                color={label.color}\r\n                                id={label.id}\r\n                                key={label.id}\r\n                                onFilterByLabel={this.onFilterByLabel}\r\n                                isChecked={this.isChecked(label.id)}\r\n                            />\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        currFilter: state.boardReducer.filterBy\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onSetFilterBy\r\n};\r\n\r\nexport const FilterByLabel = connect(mapStateToProps, mapDispatchToProps)(_FilterByLabel);\r\n","import { Popover } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { FilterByLabel } from './FilterByLabel'\r\n\r\n\r\nexport class Filter extends Component {\r\n\r\n    state = {\r\n        isLabelModalShown: false\r\n    }\r\n\r\n    ref = React.createRef()\r\n    handleChange = async ({ target }) => {\r\n        // fix this\r\n        await this.setState({ search: { txt: target.value } })\r\n        // send action\r\n        this.props.onFilter(this.state.search)\r\n    }\r\n\r\n    handleLabel = async () => {\r\n\r\n    }\r\n\r\n    openModal = () => {\r\n        this.setState({ isLabelModalShown:true })\r\n    }\r\n\r\n    closeModal = () => {\r\n        \r\n        this.setState({isLabelModalShown:false})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"search-filter-container\">\r\n                    <div className=\"input-container\">\r\n                        <input type=\"search\" id=\"search\" autoCorrect=\"off\" autoComplete=\"off\"\r\n                            className=\"search-bar\"\r\n                            onChange={this.handleChange} />\r\n\r\n                        <div className=\"search-icon-container\"><span className=\"material-icons\">search</span></div>\r\n\r\n                    </div>\r\n\r\n                    <div className=\"board-header-btn filter-btn\" ref={this.ref} onClick={this.openModal} ><span className=\"material-icons\">sort</span></div>\r\n                    {/* {this.state.isLabelModalShown &&\r\n                        <FilterByLabel toggleModal={this.toggleModal}\r\n                        />} */}\r\n                                        <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.isLabelModalShown}\r\n                    anchorEl={this.ref.current}\r\n                    onClose={this.closeModal}\r\n                    onBackdropClick={this.closeModal}\r\n                >\r\n                    <FilterByLabel onClose={this.closeModal} toggleModal={this.closeModal} />\r\n                </Popover>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\n","import userService from '../../services/userService'\r\n\r\n\r\nexport function loadAllUsers(){\r\n    return async dispatch=>{\r\n        const users = await userService.getUsersFromDb()\r\n        dispatch({ type: 'SET_USERS', users })\r\n    }\r\n}\r\n\r\nexport function updateUser(user) {\r\n    return async dispatch => {\r\n        dispatch({type: 'SET_USER',loggedInUser:user})\r\n        await userService.update(user)\r\n        userService.updateUserInLocalStorage(user)\r\n    }\r\n}\r\n\r\nexport function loadUser(creds) {\r\n    return async dispatch => {\r\n        // const users = await userService.getByIdDb()\r\n        try{\r\n            const user = await userService.login(creds)\r\n            dispatch({ type: 'SET_USER', loggedInUser: user })\r\n        }catch{console.log('no such user');}\r\n    }\r\n}","const { default: storageService } = require(\"./storageService\");\r\n\r\nexport const notificationService = {\r\n    onLoad,\r\n    getUpdated,\r\n    setUpdated\r\n}\r\nfunction onLoad(boardId) {\r\n    const lastUpdate = getUpdated(boardId)\r\n    if (!lastUpdate) setUpdated(boardId)\r\n}\r\n\r\nfunction getUpdated(boardId) {\r\n    let lastUpdated = storageService.loadFromStorage('lastUpdated')\r\n    if (!lastUpdated || !lastUpdated[boardId]) return null\r\n    return lastUpdated[boardId]\r\n}\r\n\r\nfunction setUpdated(boardId) {\r\n    let lastUpdated = storageService.loadFromStorage('lastUpdated')\r\n    if  (!lastUpdated) lastUpdated = {}\r\n    lastUpdated[boardId] = Date.now()\r\n    return storageService.saveToStorage('lastUpdated', lastUpdated)\r\n}","import { CircularProgress } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport * as timeago from 'timeago.js';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\n\r\nexport function ActivityLog({ boardId, displayMode, activities }) {\r\n    if (!activities) return <div><CircularProgress /></div>;\r\n    if (activities && activities.length > 15) activities = activities.slice(0, 14);\r\n    \r\n    return (\r\n        <ul className=\"activity-log\">\r\n            {activities.map(activity => {\r\n                return <li key={activity.id}>\r\n                    {(displayMode !== 'user') ? <MemberPreview name={activity.byMember.fullName} imgUrl={activity.byMember.imgUrl} /> : <React.Fragment />}\r\n                    <pre>\r\n                        <div>\r\n                            {(displayMode==='user') ? <React.Fragment /> : (boardId) ? (<Link to={`/board/${boardId}`}>{activity.byMember.fullName + ' '}</Link>) : `${activity.byMember.fullName} `}\r\n                            <span>{activity.commentTxt ? 'commented:' : activity.txt + ' '}</span>\r\n                            {activity.commentTxt && <div className=\"comment-txt\">\r\n                                {activity.commentTxt}\r\n                            </div>}\r\n                            {displayMode !== 'card' && <span>\r\n                                {'in '}\r\n                                {(boardId) ? <Link to={`/board/${boardId}/${activity.card.id}/`}>\r\n                                    {activity.card.title}\r\n                                </Link> : `${activity.card.title}`}\r\n                            </span>}\r\n                        </div>\r\n                        <span className=\"time-ago\">{timeago.format(activity.createdAt)}</span>\r\n                    </pre>\r\n                </li>\r\n            })}\r\n        </ul>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport NotificationsActiveOutlinedIcon from '@material-ui/icons/NotificationsActiveOutlined';\r\nimport NotificationsNoneOutlinedIcon from '@material-ui/icons/NotificationsNoneOutlined';\r\nimport { Badge, IconButton, Popover } from '@material-ui/core';\r\nimport { notificationService } from '../../services/notificationService';\r\nimport userService from '../../services/userService';\r\nimport { ActivityLog } from '../Sidebar/ActivityLog';\r\nimport { CloseOutlined } from '@material-ui/icons';\r\n\r\nexport class Notifications extends Component {\r\n\r\n    state = {\r\n        onlyNonUserAlerts: true,\r\n        isOpen: false,\r\n        isRinging: false,\r\n        alerts: 0,\r\n        newActivities: null\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n    receiveUpdate() {\r\n        const boardActivities = this.props.board.activities\r\n        let newActivities = []\r\n        const lastUpdated = notificationService.getUpdated(this.props.board._id)\r\n\r\n        // loop over the activities until you reach the last updated timestamp\r\n        for (let i = 0; i < boardActivities.length; i++) {\r\n            if (boardActivities[i].createdAt >= lastUpdated) {\r\n                newActivities.push(boardActivities[i])\r\n            } else {\r\n                break\r\n            }\r\n        }\r\n\r\n        if (this.state.onlyNonUserAlerts) {\r\n            const loggedInUser = userService.getLoggedInUser()\r\n            console.log(loggedInUser)\r\n            newActivities = newActivities.filter(activity => activity.byMember._id !== loggedInUser._id)\r\n            console.log(newActivities)\r\n        }\r\n\r\n        this.setState({ alerts: newActivities.length, newActivities})\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.lastUpdate !== this.props.lastUpdate) {\r\n            this.receiveUpdate()\r\n        }\r\n\r\n        if (prevProps.board._id !== this.props.board._id) {\r\n            notificationService.onLoad(this.props.board._id)\r\n        }\r\n\r\n        if (prevState.alerts !== this.state.alerts) {\r\n            // if alerts are not zero\r\n            if (this.state.alerts) {\r\n                this.ringBell(3000)\r\n            }\r\n        }\r\n    }\r\n\r\n    onOpen = () => {\r\n        this.setState({ alerts: 0,isOpen:true })\r\n        notificationService.setUpdated(this.props.board._id)\r\n    }\r\n\r\n    onClose = () => {\r\n        notificationService.setUpdated(this.props.board._id)\r\n        this.setState({isOpen:false},() => setTimeout(() => {this.setState({newActivities:null})},500) )\r\n    }\r\n\r\n    ringBell(ms = 1500) {\r\n        this.setState({ isRinging: true })\r\n        setTimeout(() => { this.setState({ isRinging: false }) }, ms)\r\n    }\r\n\r\n    getIsRinging = () => {\r\n        if (this.state.isRinging) return (<div className=\"bell\">\r\n            <NotificationsActiveOutlinedIcon />\r\n        </div>)\r\n        return (<div className=\"silent-bell\">\r\n            <NotificationsNoneOutlinedIcon />\r\n        </div>)\r\n    }\r\n\r\n    getNotificationPreview() {\r\n        \r\n        if (!this.state.newActivities || !this.state.newActivities.length) return (<div className=\"notifications-empty-state-container\">\r\n            You're all caught up!\r\n        </div>)\r\n        \r\n        return <div className=\"activity-log-container\"><ActivityLog activities={this.state.newActivities} boardId={this.props.board._id} /></div>\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n            <div ref={this.ref} onClick={this.onOpen} className=\"notification board-header-btn\">\r\n                <Badge max={9} badgeContent={this.state.alerts} color=\"error\">\r\n                    {this.getIsRinging()}\r\n                </Badge>\r\n                {/* {(this.state.isOpen) ? <ActivityLog activities={this.state.newActivities} boardId={this.props.board._id} /> : <React.Fragment />} */}\r\n            </div>\r\n            <Popover\r\n                        anchorOrigin={{\r\n                            vertical: 'bottom',\r\n                            horizontal: 'left',\r\n                        }}\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={this.state.isOpen}\r\n                        anchorEl={this.ref.current}\r\n                        onClose={this.onClose}\r\n                        onBackdropClick={this.onClose}\r\n                    >\r\n                        <div className=\"notification-preview\">\r\n                            <div className=\"notification-preview-header\">\r\n                                <div></div>\r\n                                <div><h6>Notifications</h6></div>\r\n                                <IconButton onClick={this.onClose}>\r\n                                    <CloseOutlined />\r\n                                </IconButton>\r\n                            </div>\r\n                            {this.getNotificationPreview()}\r\n                        </div>\r\n                        </Popover>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n","// this contains:\r\n// Board name\r\n// Board Members\r\n// Filter (search)\r\n// Link to Statistics\r\n// Menu hamburger\r\n\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { MemberList } from './MemberList';\r\nimport { Filter } from './Filter';\r\nimport { loadAllUsers } from '../../store/actions/userActions';\r\nimport { Notifications } from './Notifications';\r\nimport MoreHorizOutlinedIcon from '@material-ui/icons/MoreHorizOutlined';\r\n\r\n\r\n\r\nexport class _BoardHeader extends Component {\r\n\r\n    async componentDidMount() {\r\n        await this.props.loadAllUsers()\r\n    }\r\n    \r\n    render() {\r\n        \r\n        return (\r\n                <div className=\"boards-header-container\" >\r\n                    <h3>{this.props.title}</h3>\r\n                    <div className=\"members-container\">\r\n                        <MemberList members={this.props.members} allUsers={this.props.allUsers}/>\r\n                    </div>\r\n\r\n\r\n                    <Filter onFilter={this.props.onFilter} />\r\n                    \r\n                    <Notifications board={this.props.board} lastUpdate={this.props.lastUpdate}/>\r\n                    <div className=\"board-header-btn show-menu\" onClick={() => this.props.onToggleSidebar(true)}>\r\n                        <MoreHorizOutlinedIcon />\r\n                        <p>Show Menu</p>\r\n                    </div>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        allUsers: state.userReducer.users\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadAllUsers\r\n};\r\n\r\nexport const BoardHeader = connect(mapStateToProps, mapDispatchToProps)(_BoardHeader);\r\n","import React from 'react'\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\r\n\r\nexport function CardPreviewDueDate(props) {\r\n    if (!props.dueDate) return <React.Fragment />\r\n    let daysRemaining = (props.dueDate - Date.now()) / 1000 / 60 / 60 / 24\r\n    \r\n    const date = new Date(props.dueDate)\r\n    \r\n    let month = date.toLocaleString(\"en-US\", { month: \"short\" })\r\n    let day = date.getDate()\r\n    \r\n    let parsedDate = `${month} ${day}`\r\n    if (Math.abs(daysRemaining) > 365) {\r\n        let year = date.getFullYear()\r\n        parsedDate += `, ${year}`\r\n    }\r\n    if (props.displayTime) {\r\n        let hour = date.toLocaleTimeString()\r\n        parsedDate += ` at ${hour}`\r\n     \r\n    }\r\n\r\n    let dueDateClass = 'card-preview-due-date-container card-preview-due-date-container-'\r\n    switch (true) {\r\n        case (daysRemaining > 7):\r\n            dueDateClass += 'long'\r\n            break\r\n        case (daysRemaining > 3):\r\n            dueDateClass += 'near'\r\n            break\r\n        case (daysRemaining >= 0):\r\n            dueDateClass += 'close'\r\n            break\r\n        default:\r\n            dueDateClass += 'overdue'\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={dueDateClass}>\r\n            <AccessTimeIcon fontSize=\"inherit\" />\r\n            {parsedDate}\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport { Button, Popover, TextField } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { DatePicker } from '@material-ui/pickers'\r\nimport { CardPreviewDueDate } from './CardPreviewDueDate';\r\nimport ScheduleIcon from '@material-ui/icons/Schedule';\r\n\r\nexport class CardDueDateSetter extends Component {\r\n\r\n    state = {\r\n        date: null,\r\n        isPopperOpen: false,\r\n        anchor: null\r\n    }\r\n    componentDidMount() {\r\n        this.anchor = React.createRef();\r\n        this.setState({ anchor: this.anchor })\r\n        this.setDefaultDate()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.dueDate !== this.props.dueDate) return this.setDefaultDate()\r\n    }\r\n\r\n    setDefaultDate = () => {\r\n        this.setState({ date: this.props.dueDate })\r\n    }\r\n    openModal = () => {\r\n        this.setState({ isPopperOpen: true })\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.setState({ isPopperOpen: false })\r\n    }\r\n\r\n    onSetDueDate = (ev) => {\r\n        const formDate = ev.target.value\r\n        const timestamp = new Date(formDate).getTime()\r\n        this.setState({ date: timestamp })\r\n    }\r\n\r\n    submitDueDate = () => {\r\n        this.props.onUpdateDueDate(this.state.date)\r\n    }\r\n\r\n    onRemoveDueDate = (ev) => {\r\n        this.setState({ date: null }, this.submitDueDate)\r\n        this.closeModal()\r\n    }\r\n\r\n    getDisplayDateBtn = () => {\r\n        if (!this.props.displayDate) return <Button className=\"set-due-date-btn\" onClick={this.openModal} ref={this.anchor}><ScheduleIcon /><span>Set Due Date</span></Button>\r\n\r\n        return (\r\n            <div onClick={this.openModal} ref={this.anchor} className=\"set-due-date-expanded\">\r\n                <CardPreviewDueDate dueDate={this.state.date} displayTime={this.props.displayTime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    parseDate = () => {\r\n        // 2020-09-26T04:52\r\n        let date = new Date(this.state.date)\r\n        if (!this.state.date) date = new Date(Date.now())\r\n        let year = date.getFullYear()\r\n        let month = (date.getMonth() + 1)\r\n        let day = date.getDate()\r\n        let hour = date.getHours()\r\n        let minute = date.getMinutes()\r\n        let timeArray = [year, month, day, hour, minute]\r\n        timeArray = timeArray.map(i => {\r\n            i = i.toString()\r\n            if (i.length === 1) i = `0${i}`\r\n            return i\r\n        })\r\n        const parsedDate = `${year}-${timeArray[1]}-${timeArray[2]}T${timeArray[3]}:${timeArray[4]}`\r\n        return parsedDate\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.anchor) return <React.Fragment />\r\n        return (\r\n            <div className=\"due-date-container\">\r\n                {this.getDisplayDateBtn()}\r\n                {(!this.state.anchor.current) ? <React.Fragment /> :\r\n                    <Popover\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'left',\r\n                        }}\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={this.state.isPopperOpen}\r\n                        anchorEl={this.state.anchor.current}\r\n                        onClose={this.closeModal}\r\n                        onBackdropClick={this.closeModal}\r\n                    >\r\n                        <form noValidate>\r\n                            <TextField\r\n                                onBlur={this.submitDueDate}\r\n                                onChange={this.onSetDueDate}\r\n                                id=\"datetime-local\"\r\n                                label=\"Set Due Date\"\r\n                                type=\"datetime-local\"\r\n                                value={this.parseDate()}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                            />\r\n                        </form>\r\n                        <div className=\"remove-date-btn-container\">\r\n                            <button className=\"cancel-btn\" onClick={this.onRemoveDueDate}>Remove Due Date</button>\r\n                        </div>\r\n                    </Popover>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\n\r\nexport class CardNewChecklist extends Component {\r\n\r\n    state = {\r\n        isEditing: false,\r\n        txtValue: ''\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n    onChange = (ev) => {\r\n        this.setState({ txtValue: ev.target.value })\r\n    }\r\n\r\n    onSubmit = async(ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.txtValue) return this.setNotEditing()\r\n        const checklist = {\r\n                id: utils.makeId(),\r\n                \"title\": this.state.txtValue,\r\n                \"todos\": []             \r\n        }\r\n        // const activity =  this.props.addActivity(`added the checklist ${this.state.txtValue}`)\r\n        const activity = `added the checklist ${this.state.txtValue}`\r\n        this.props.onUpdate(checklist,activity)\r\n        this.setState({txtValue:''})\r\n        this.setNotEditing()\r\n    }\r\n    \r\n    \r\n    getNewChecklistDisplay = () => {\r\n        if (this.state.isEditing) return (\r\n            <form className=\"new-checklist-form\" onBlur={this.setNotEditing}  onSubmit={this.onSubmit} > \r\n                <input type=\"text\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                <button className=\"save-btn\" onMouseDown={this.onSubmit}>Save</button>\r\n            </form>\r\n        )\r\n        return (\r\n            <Button onClick={this.setEditing}><CheckBoxOutlinedIcon /><span>New Checklist</span></Button>\r\n        )\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.getNewChecklistDisplay()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Button, IconButton, Popover, Tooltip } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport MailOutlineOutlinedIcon from '@material-ui/icons/MailOutlineOutlined';\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport WhatsAppIcon from '@material-ui/icons/WhatsApp';\r\nimport { CloseOutlined } from '@material-ui/icons';\r\n\r\nexport class Share extends Component {\r\n\r\n    ref = React.createRef()\r\n    copyRef = React.createRef()\r\n    state = {\r\n        isOpen: false\r\n    }\r\n\r\n    onOpen = () => {\r\n        this.setState({ isOpen: true })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.setState({ isOpen: false })\r\n    }\r\n\r\n    copyToClipboard = () => {\r\n        this.copyRef.current.select()\r\n        document.execCommand('copy');\r\n    };\r\n\r\n    render() {\r\n        const item = this.props.item\r\n        const path = this.props.path\r\n\r\n        return (\r\n            <div ref={this.ref}>\r\n                <Button onClick={this.onOpen}><ShareIcon /><span>Share</span></Button>\r\n                <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'right',\r\n                    }}\r\n                    open={this.state.isOpen}\r\n                    anchorEl={this.ref.current}\r\n                    onClose={this.onClose}\r\n                    onBackdropClick={this.onClose}\r\n                >\r\n                    <div className=\"share-container\">\r\n                        <div className=\"header\">\r\n                            <div />\r\n                            <h4>Share this {item}</h4>\r\n                            <IconButton onClick={this.onClose}>\r\n                                <CloseOutlined />\r\n                            </IconButton>\r\n                        </div>\r\n                        <div className=\"link\">\r\n                            <input ref={this.copyRef} type=\"text\" readOnly value={path} />\r\n                        </div>\r\n                        <div className=\"share-btns-container\">\r\n                            <Tooltip title=\"Whatsapp\">\r\n                                <IconButton className=\"whatsapp\" onClick={() => { window.open(`whatsapp://send?text=${path}`) }} >\r\n                                    <WhatsAppIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            <Tooltip title=\"Mail\">\r\n                                <IconButton className=\"mail\" onClick={() => { window.open(`mailto:?subject=Check out this ${item}&amp;body=${path}`) }}>\r\n                                    <MailOutlineOutlinedIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            <Tooltip title=\"Copy to clipboard\">\r\n                                <IconButton className=\"copy\" onClick={this.copyToClipboard}>\r\n                                    <FileCopyOutlinedIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </div>\r\n                    </div>\r\n                </Popover>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { CardDueDateSetter } from \"./CardDueDateSetter\"\r\nimport React from 'react'\r\nimport { CardNewChecklist } from \"./CardNewChecklist\"\r\nimport { Button, CircularProgress } from \"@material-ui/core\"\r\nimport ArchiveOutlinedIcon from '@material-ui/icons/ArchiveOutlined';\r\n// import ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport LabelOutlinedIcon from '@material-ui/icons/LabelOutlined';\r\nimport PeopleAltOutlinedIcon from '@material-ui/icons/PeopleAltOutlined';\r\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined';\r\nimport WebAssetOutlinedIcon from '@material-ui/icons/WebAssetOutlined';\r\nimport { Share } from \"../Share\";\r\n\r\nexport function CardSidebar(props) {\r\n\r\n    return (\r\n        <div className=\"card-sidebar\">\r\n            {/* <Button><ArrowForwardIcon /><span>Move Card</span></Button> */}\r\n            <Button ref={props.anchorRef} onClick={props.toggleCoverSelector}><WebAssetOutlinedIcon /><span>Cover</span></Button>\r\n            <CardDueDateSetter dueDate={props.dueDate} onUpdateDueDate={props.onUpdateDueDate} />\r\n            <Button onClick={props.onArchiveCard}><ArchiveOutlinedIcon /> <span>Archive Card</span></Button>\r\n            <Button onClick={props.toggleLabelPallete}><LabelOutlinedIcon /><span>Labels</span></Button>\r\n            <Button ref={props.anchorRef} onClick={props.toggleDisplayMembers}><PeopleAltOutlinedIcon /><span>Members</span></Button>\r\n            {(props.isUploading) ? <Button disabled><CircularProgress size='14px' /></Button> : <Button onClick={props.toggleUploadDropzone}><ImageOutlinedIcon /><span>Upload Image</span></Button>}\r\n            <CardNewChecklist addActivity={props.addActivity} onUpdate={props.onUpdateChecklists} />\r\n            <Share item=\"card\" path={window.location.href}/>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport SubjectIcon from '@material-ui/icons/Subject';\r\n\r\nexport class CardDescription extends Component {\r\n\r\n    state = {\r\n        description: '',\r\n        isEditing: false\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.setDescriptionFromProps()\r\n    }\r\n\r\n    setDescriptionFromProps = () => {\r\n        let description = this.props.description\r\n        if (!description) description = ''\r\n        this.setState({ description })\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const description = ev.target.value\r\n        this.setState({ description })\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    onSave = () => {\r\n        this.props.onUpdateDesc(this.state.description)\r\n        this.setNotEditing()\r\n    }\r\n\r\n    getDescriptionTxt = () => {\r\n        if (!this.state.description) return 'Add a more detailed description…'\r\n        return this.state.description\r\n    }\r\n    getIsEditing = () => {\r\n        if (!this.state.isEditing) return (\r\n            <pre className=\"item-details-description-text-display\" onClick={this.setEditing}>{this.getDescriptionTxt()}</pre>\r\n        )\r\n        return (\r\n            <div className='item-details-description-text-edit-container'>\r\n                <textarea value={this.state.description} autoFocus onChange={this.onChange} onBlur={this.onSave} placeholder=\"Enter a more details description here...\" />\r\n                <button onClick={this.onSave} className=\"save-btn\">Save</button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // \r\n    render() {\r\n        // if (!this.state.isReady) return <div>Loading...</div>\r\n        return (\r\n            <div className=\"item-details-description\">\r\n                {/* <input value={this.state.description} onChange={this.onChange} placeholder=\"Enter a more details description here...\" /> */}\r\n                <SubjectIcon />\r\n                <div>\r\n                <h3>Description</h3>\r\n                {this.getIsEditing()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nexport class CardDetailsHeader extends Component {\r\n\r\n    state = {\r\n        txt: '',\r\n        isEditing: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const txt=this.props.headerTxt\r\n        this.setState({txt})\r\n    }\r\n\r\n    onChangeText = (ev) => {\r\n        const txt = ev.target.value\r\n        this.setState({txt})\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.txt) return\r\n        this.setNotEditing()\r\n        this.props.onUpdate(this.state.txt)\r\n        \r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    getIsEditing = () => {\r\n        if (this.state.isEditing) return (\r\n            <form onBlur={this.setNotEditing} onSubmit={this.onSubmit}>\r\n                <input name=\"header\" type=\"text\" autoFocus value={this.state.txt} onChange={this.onChangeText}/>\r\n            </form>\r\n        )\r\n        return <div onClick={this.setEditing}><h2>{this.state.txt}</h2></div>\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.getIsEditing()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\nexport function CardLabels(props) {\r\n    if (!props.cardLabels || !props.boardLabels) return <React.Fragment />\r\n    \r\n    function displayLabel(label) {\r\n        const boardLabel = props.boardLabels.find(boardLabel => boardLabel.id === label.id)\r\n        if (!props.preview) return (\r\n            <div className={`card-details-label ${boardLabel.color}`}>\r\n                <div className=\"card-details-mask\">\r\n                    {boardLabel.name}\r\n                </div>\r\n            </div>\r\n        )\r\n        if (props.isFull) return (\r\n            <div className={`card-preview-full-label ${boardLabel.color}`}>\r\n                <div>\r\n                    {boardLabel.name}\r\n                    </div>\r\n                <div className=\"card-preview-label-mask\" />\r\n                \r\n            </div>\r\n        )\r\n        return (\r\n            <div className={`card-preview-collapsed-label ${boardLabel.color}`}>\r\n                <div className=\"card-preview-label-mask\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"card-preview-labels\">\r\n            {props.cardLabels.map((label, idx) => {\r\n                return <div onClick={props.onClickLabel} key={idx} > {displayLabel(label)} </div>\r\n            })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport { Button, Checkbox } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { utils } from '../../services/utils'\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\n\r\nexport class CardChecklistTodo extends Component {\r\n\r\n    state = {\r\n        isDone: false,\r\n        isEditing: false,\r\n        txtValue: '',\r\n        isNew: false\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    removeText = () => {\r\n        this.setState({txtValue:''})\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.title !== this.props.title || prevProps.isDone !== this.props.isDone) this.updateTodo()\r\n    }\r\n\r\n    componentDidMount() {\r\n        \r\n        if (this.props.isNew) this.setState({ isNew: true })\r\n        this.updateTodo()\r\n    }\r\n\r\n    getNewTodoDisplay = () => {\r\n        if (this.state.isEditing) {\r\n            return (\r\n            <form onBlur={this.setNotEditing} onSubmit={this.onSubmit}>\r\n                <input className=\"checkbox-text-edit\" type=\"text\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                <button className=\"save-btn\" type=\"submit\">Save</button>\r\n            </form>\r\n        )}\r\n        return (\r\n            <Button className=\"checklist-add-todo\" onClick={this.setEditing}>\r\n                Add an item\r\n            </Button>\r\n        )\r\n    }\r\n    \r\n    getTodoClassName = () => {\r\n        const doneClass = (this.state.isDone) ? 'todo-done' : 'todo-not-done'\r\n        return `checklist-todo-title ${doneClass}`\r\n    }\r\n    getTextBox = () => {\r\n        if (this.state.isEditing) return (\r\n            <React.Fragment>\r\n                <Checkbox checked={this.state.isDone} onChange={this.onCheck} />\r\n                <form onBlur={this.setNotEditing} onSubmit={this.onSubmit}>\r\n                    <input className=\"checkbox-text-edit\" type=\"text\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                    <button className=\"save-btn\" type=\"submit\">Save</button>\r\n                </form>\r\n            </React.Fragment>\r\n        )\r\n        return (\r\n            <React.Fragment>\r\n                <Checkbox checked={this.state.isDone} onChange={this.onCheck} />\r\n                <div className={this.getTodoClassName()} onClick={this.setEditing}>\r\n                    {this.state.txtValue}\r\n                    <Button onClick={this.onRemove}>\r\n                        <DeleteOutlineOutlinedIcon fontSize=\"inherit\" />\r\n                    </Button>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        \r\n        ev.preventDefault()\r\n        // this.setNotEditing()\r\n        this.updateChecklist()\r\n\r\n    }\r\n\r\n    updateTodo = () => {\r\n        \r\n        const todo = this.props.todo\r\n        if (!todo) return\r\n        const txtValue = todo.title\r\n        const isDone = todo.isDone\r\n\r\n        this.setState({ isDone, txtValue })\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        \r\n        this.setState({ txtValue: ev.target.value })\r\n    }\r\n\r\n    onCheck = (ev) => {\r\n        \r\n        // let txt = ''\r\n        let checkStatus = ev.target.checked\r\n        // if (checkStatus) {\r\n        //     txt = `completed ${this.state.txtValue}`\r\n        // } else {\r\n        //     txt = `marked ${this.state.txtValue} incomplete`\r\n        // }\r\n        \r\n        this.setState({ isDone: checkStatus}, () => {\r\n             this.updateChecklist()\r\n        })\r\n    }\r\n\r\n    getActivityTxt = () => {\r\n        let txt;\r\n        if (this.state.isDone) {\r\n            txt = `completed ${this.state.txtValue}`\r\n        } else {\r\n            txt = `marked ${this.state.txtValue} incomplete`\r\n        }\r\n        return txt\r\n    }\r\n    onRemove = (ev) => {\r\n        ev.stopPropagation()\r\n        this.setState({ txtValue: '' }, this.updateChecklist)\r\n    }\r\n\r\n    updateChecklist = () => {\r\n        \r\n            let id;\r\n            if (this.props.todo) {\r\n                id = this.props.todo.id\r\n            } else {\r\n                id = utils.makeId()\r\n            }\r\n            const todo = {\r\n                id,\r\n                isDone: this.state.isDone,\r\n                title: this.state.txtValue\r\n            }\r\n            \r\n            const activityTxt = this.getActivityTxt()\r\n            if (this.state.isNew) {\r\n                this.props.onUpdate(todo)\r\n                this.setState({txtValue:''})\r\n            } else {\r\n                this.props.onUpdate(todo,activityTxt)\r\n            }\r\n        }\r\n    \r\n\r\n    render() {\r\n        if (!this.props.displayCompleted && this.state.isDone) return <React.Fragment />\r\n        return (\r\n            <div className=\"checklist-todo\">\r\n\r\n                {(this.state.isNew) ? this.getNewTodoDisplay() : this.getTextBox()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, LinearProgress } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { CardChecklistTodo } from './CardChecklistTodo'\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\nexport class CardChecklist extends Component {\r\n\r\n    state = {\r\n        tasksCompleted: 0,\r\n        totalTasks: 0,\r\n        displayCompleted: true,\r\n        showDialog: false\r\n        \r\n    }\r\n\r\n    componentDidMount() {        \r\n        this.setTasksStatus()\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.checklist !== prevProps.checklist) this.setTasksStatus()\r\n    }\r\n\r\n\r\n    setTasksStatus = () => {\r\n        let tasksCompleted = 0\r\n        let totalTasks = 0\r\n\r\n        this.props.checklist.todos.forEach(todo => {\r\n            if (todo.isDone) tasksCompleted += 1\r\n            totalTasks += 1\r\n        });\r\n\r\n        this.setState({ tasksCompleted, totalTasks })\r\n    }\r\n\r\n    toggleDisplayCompleted = () => {\r\n        if (this.state.displayCompleted) return this.setState({ displayCompleted: false })\r\n        return this.setState({ displayCompleted: true })\r\n    }\r\n\r\n    getDisplayCheckedBtn = () => {\r\n        if (!this.state.tasksCompleted) return <React.Fragment />\r\n        let btnContent;\r\n        if (this.state.displayCompleted) {\r\n            btnContent = 'Hide Completed Items'\r\n        } else {\r\n            btnContent = `Show Checked Items (${this.state.tasksCompleted})`\r\n        }\r\n\r\n        return (\r\n            <Button onClick={this.toggleDisplayCompleted}>{btnContent}</Button>\r\n        )\r\n    }\r\n\r\n    onRemoveChecklist = async() => {\r\n        const checklist = {...this.props.checklist}\r\n        checklist.title = ''\r\n        let activityTxt= `removed ${this.props.checklist.title}`\r\n        this.props.onUpdate(checklist,activityTxt)\r\n        this.closeDialog()\r\n\r\n    }\r\n\r\n\r\n    openDialog = () => {\r\n        this.setState({ showDialog: true })\r\n    }\r\n\r\n    closeDialog = () => {\r\n        this.setState({ showDialog: false })\r\n    }\r\n\r\n    getPercentCompleted = () => {\r\n        const percent = Math.round((this.state.tasksCompleted / this.state.totalTasks) * 100)\r\n        return percent\r\n    }\r\n\r\n    onUpdateChecklist = (newTodo,activityTxt) => {\r\n        // take the updated todo and insert it into the list\r\n        let todos = [...this.props.checklist.todos]\r\n        // find the todo index\r\n        const todoIdx = todos.findIndex(todo => todo.id === newTodo.id)\r\n        // if new title is blank - remove todo\r\n        if (!newTodo.title) {\r\n            todos.splice(todoIdx,1)\r\n        } else if (todoIdx <0) { //if the index is less than 0 - this is a new item\r\n            todos.push(newTodo)\r\n        } else {\r\n            todos[todoIdx] =  newTodo\r\n        }\r\n        const checklist = {...this.props.checklist}\r\n        checklist.todos = todos\r\n        this.props.onUpdate(checklist,activityTxt)\r\n    }\r\n\r\n    render() {\r\n        // if (!this.state.totalTasks) return <React.Fragment />\r\n        return (\r\n            <div className=\"checklist\">\r\n                <div className=\"checklist-title-container\">\r\n                    <CheckBoxOutlinedIcon />\r\n                    <div className=\"checklist-title\">{this.props.checklist.title}</div>\r\n                    <div className=\"checklist-title-btns\">\r\n                    {this.getDisplayCheckedBtn()}\r\n                    <Button onClick={this.openDialog}>Remove</Button>\r\n                    </div>\r\n                </div>\r\n                {((this.state.totalTasks) ? (\r\n                    <div className=\"checklist-progress\">\r\n                    <div className=\"checklist-progress-numbers\">%{this.getPercentCompleted()}</div>\r\n                    <LinearProgress value={this.getPercentCompleted()} variant=\"determinate\" /> \r\n                    </div>\r\n                    ) : <React.Fragment />)\r\n                }\r\n                <main className=\"checklist-main\">\r\n                    {this.props.checklist.todos.map(todo => <CardChecklistTodo key={todo.id} displayCompleted={this.state.displayCompleted} todo={todo} onUpdate={this.onUpdateChecklist}/>)}\r\n                    <CardChecklistTodo isNew={true} onUpdate={this.onUpdateChecklist}/>\r\n                </main>\r\n                <Dialog onClose={this.closeDialog} open={this.state.showDialog}>\r\n                    <DialogTitle id=\"alert-dialog-title\">{\"Remove this checklist?\"}</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id=\"alert-dialog-description\">\r\n                            Deleting a checklist is permanent and there is no way to get it back.\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.closeDialog} color=\"primary\">\r\n                            Disagree\r\n                        </Button>\r\n                        <Button onClick={this.onRemoveChecklist} color=\"primary\" autoFocus>\r\n                            Agree\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { CardChecklist } from './CardChecklist'\r\n\r\n\r\nexport function CardChecklistList(props) {\r\n    if (!props.checklists || !props.checklists.length) return <React.Fragment />\r\n    return (\r\n        <div className=\"checklists-container\">\r\n           {props.checklists.map(checklist => <CardChecklist key={checklist.id} checklist={checklist} addActivity={props.addActivity} onUpdate={props.onUpdate}/>)} \r\n            {/* <CardChecklistTodo  */}\r\n        </div>\r\n    )\r\n}\r\n","import { Accordion, AccordionDetails, AccordionSummary, Button } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\n\r\n\r\nexport class CardAddComment extends Component {\r\n\r\n    state = {\r\n        isEditing: false,\r\n        txtValue: ''\r\n    }\r\n\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n    onChange = (ev) => {\r\n        this.setState({ txtValue: ev.target.value })\r\n    }\r\n\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (this.state.txtValue) {\r\n            this.props.onAddComment(this.state.txtValue)\r\n            this.setNotEditing()\r\n            this.setState({txtValue:''})\r\n        }\r\n    }\r\n\r\n    onBlur = () => {\r\n        if (!this.state.txtValue) return this.setNotEditing()\r\n        \r\n    }\r\n\r\n    onSave = (ev) => {\r\n        this.setNotEditing()\r\n        this.onSubmit(ev)\r\n    }\r\n\r\n    getNewCommentDisplay = () => {\r\n        if (this.state.isEditing) return (\r\n            <div className=\"add-comment-editing-container\">\r\n                <form onBlur={this.onBlur} onSubmit={this.onSubmit}>\r\n                    <input className=\"add-comment-input\" type=\"text\" placeholer=\"Write a comment...\" autoFocus value={this.state.txtValue} onChange={this.onChange} />\r\n                </form>\r\n            </div>\r\n        )\r\n        return (\r\n            <div className=\"add-comment-editing-closed\">Write a comment...</div>\r\n        )\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"editing-section-container\" >\r\n            <Accordion expanded={this.state.isEditing} onClick={this.setEditing}  classes={{expanded:'editing-container-expanded', root:'editing-container-collapsed'}}>\r\n                <AccordionSummary\r\n                          aria-controls=\"panel1a-content\"\r\n                          id=\"panel1a-header\"\r\n                        >\r\n                {this.getNewCommentDisplay()}\r\n                </AccordionSummary>\r\n                <AccordionDetails>\r\n          <div>\r\n          <button className=\"save-btn\" disabled={!this.state.txtValue.length} onClick={this.onSave}>Save</button>\r\n          </div>\r\n        </AccordionDetails>\r\n            </Accordion>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport { IconButton } from '@material-ui/core';\r\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\r\n\r\nexport function LabelEditModal({ label, action, setLabelEditId, onRemoveLabel, card }) {\r\n    const colors = ['green', 'yellow', 'orange', 'red', 'purple', 'blue', 'grey', 'black'];\r\n    return (\r\n        <div className=\"label-edit-modal\">\r\n            <IconButton className=\"close-modal\" size=\"small\"\r\n                onClick={() => setLabelEditId()}>\r\n                <CloseOutlinedIcon />\r\n            </IconButton>\r\n            <form onSubmit={(ev) => action(ev, label)}>\r\n                <input type=\"text\" name=\"labelName\"\r\n                    defaultValue={label ? label.name : ''}\r\n                    placeholder=\"Enter label's name...\" />\r\n                <div className=\"color-pallete\">\r\n                    {colors.map(color => <React.Fragment key={color}>\r\n                        <input required hidden type=\"radio\" id={color} name=\"newColor\"\r\n                            value={color}\r\n                            defaultChecked={label ? color === label.color : 'grey'} />\r\n                        <label htmlFor={color}>\r\n                            <div className={`color-picker ${color}`}></div>\r\n                        </label>\r\n                    </React.Fragment>)}\r\n                </div>\r\n                <div className=\"save-cancel-btns\">\r\n                    <button className=\"save-btn\">Save</button>\r\n                    {label && <button className=\"cancel-btn\" onClick={() => onRemoveLabel(label.id)}>Delete</button>}\r\n                </div>\r\n            </form>\r\n        </div >\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { IconButton } from '@material-ui/core';\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { addLabel, updateLabel, removeLabel, updateCard } from '../../store/actions/boardActions.js';\r\nimport { LabelEditModal } from './LabelEditModal.jsx';\r\n\r\n\r\nclass _LabelPalette extends Component {\r\n    state = {\r\n        labelEditId: null\r\n    }\r\n    setLabelEditId = (labelEditId = null) => {\r\n        this.setState({ labelEditId });\r\n    }\r\n    onAddLabel = (ev) => {\r\n        ev.preventDefault();\r\n        const newLabel = {\r\n            name: ev.target.labelName.value,\r\n            color: ev.target.newColor.value\r\n        }\r\n        this.props.addLabel(this.props.board, newLabel);\r\n        this.setLabelEditId();\r\n    }\r\n    onEditLabel = (ev, label) => {\r\n        ev.preventDefault();\r\n        const labelName = ev.target.labelName.value;\r\n        const labelColor = ev.target.newColor.value;\r\n        const updatedLabel = { ...label, name: labelName, color: labelColor }\r\n        this.props.updateLabel(this.props.board, updatedLabel);\r\n        this.setLabelEditId();\r\n    }\r\n    onRemoveLabel = (labelId) => {\r\n        this.props.removeLabel(this.props.board, labelId);\r\n        this.setLabelEditId();\r\n    }\r\n    onToggleLabelToCard = (card, labelId) => {\r\n        // console.log('card\\'s labels before:', card.labels);\r\n        const labelIdx = card.labels.findIndex(label => label.id === labelId);\r\n        card.labels = (labelIdx === -1)\r\n            ? [...card.labels, { id: labelId }]\r\n            : [...card.labels.slice(0, labelIdx), ...card.labels.slice(labelIdx + 1)];\r\n        // console.log('card\\'s labels after:', card.labels);\r\n\r\n        const activity = this.props.createActivity('updated a label')\r\n        this.props.updateCard(this.props.board, card, activity);\r\n    }\r\n    render() {\r\n        const { board, card } = this.props;\r\n        return <ul className=\"label-palette\">\r\n            {board.labels && board.labels.map(label => <li key={label.id} className=\"label\">\r\n                <div className={`label-color ${label.color}`}\r\n                    onClick={card\r\n                        ? () => this.onToggleLabelToCard(card, label.id)\r\n                        : () => this.setLabelEditId(\r\n                            this.state.labelEditId === label.id\r\n                                ? null\r\n                                : label.id\r\n                        )}>\r\n                    <span className=\"label-text\">{label.name}</span>\r\n                    {card && card.labels.find(cardLabel => cardLabel.id === label.id) && <CheckIcon fontSize=\"small\" />}\r\n                </div>\r\n                <IconButton className=\"edit-label-btn\" onClick={() => this.setLabelEditId(\r\n                    this.state.labelEditId === label.id\r\n                        ? null\r\n                        : label.id\r\n                )}>\r\n                    <EditOutlinedIcon fontSize=\"small\" />\r\n                </IconButton>\r\n                {!card && <IconButton className=\"remove-label-btn\" onClick={() => this.onRemoveLabel(label.id)}>\r\n                    <DeleteOutlinedIcon fontSize=\"small\" />\r\n                </IconButton>}\r\n                {this.state.labelEditId === label.id && <LabelEditModal\r\n                    label={label}\r\n                    action={this.onEditLabel}\r\n                    onRemoveLabel={this.onRemoveLabel}\r\n                    setLabelEditId={this.setLabelEditId} />}\r\n            </li>)}\r\n            <li className=\"label add-label\">\r\n                <div className=\"label-color add-label\"\r\n                    onClick={() => this.setLabelEditId(\r\n                        this.state.labelEditId === 'addLabel'\r\n                            ? null\r\n                            : 'addLabel'\r\n                    )}>\r\n                    Create a new label\r\n                        </div>\r\n                {this.state.labelEditId === 'addLabel' && <LabelEditModal\r\n                    action={this.onAddLabel}\r\n                    setLabelEditId={this.setLabelEditId} />}\r\n            </li>\r\n        </ul>\r\n\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    addLabel,\r\n    updateLabel,\r\n    removeLabel,\r\n    updateCard\r\n};\r\nexport const LabelPalette = connect(mapStateToProps, mapDispatchToProps)(_LabelPalette);\r\n","import { Avatar } from '@material-ui/core'\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport React from 'react'\r\n\r\nexport function CardMember(props) {\r\n\r\n    const splitName = props.boardMember.fullName.split(' ')\r\n    const initials = splitName.map(name => name[0])\r\n\r\n    let isUserChecked;\r\n    if (!props.cardMembers || !props.cardMembers.length ) {\r\n        isUserChecked = false\r\n    }   else {\r\n        isUserChecked = Boolean(props.cardMembers.find(member => member._id === props.boardMember._id))\r\n    }\r\n    \r\n    return (\r\n        <div onClick={() => {props.toggleMember(props.boardMember,!isUserChecked)}} className=\"board-member\">\r\n            <Avatar>{initials}</Avatar>\r\n            <div>{props.boardMember.fullName}</div>\r\n            {(isUserChecked) ? <CheckIcon /> : <div style={{width:'24px'}}/>}\r\n        </div>\r\n    )\r\n}\r\n","import { CircularProgress, Popover } from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport React, { Component } from 'react'\r\nimport { CardMember } from './CardMember';\r\n\r\nexport class CardMembersList extends Component {\r\n\r\n    state = {\r\n        boardMembers: [],\r\n        filter: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.filterBoardMembers()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.boardMembers !== this.props.boardMembers || prevProps.card.members !== this.props.card.members || prevState.filter !== this.state.filter) this.filterBoardMembers()\r\n    }\r\n\r\n    filterBoardMembers = () => {\r\n        let filteredMembers = this.props.boardMembers\r\n        \r\n        if (!filteredMembers) return\r\n        filteredMembers = filteredMembers.filter(member => member.fullName.toLowerCase().includes(this.state.filter.toLowerCase()))\r\n\r\n        this.setState({ boardMembers: filteredMembers })\r\n    }\r\n\r\n    onChange =(ev) => {\r\n        this.setState({filter:ev.target.value})\r\n    }\r\n\r\n    onSelectBoardMember = (member,shouldAdd) => {\r\n        let txt = ''\r\n        \r\n        const card = {...this.props.card}\r\n        if (shouldAdd) {\r\n            card.members.push(member)\r\n            txt = `added ${member.fullName}`\r\n        } else {\r\n            card.members = card.members.filter(cardMember => cardMember._id !== member._id)\r\n            txt = `removed ${member.fullName}`\r\n        }\r\n        this.props.updateCardMembers(card,txt)\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.boardMembers) return <CircularProgress />\r\n        return (\r\n            <div>\r\n                <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'center',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'right',\r\n                    }}\r\n                    open={true}\r\n                    anchorEl={this.props.anchorEl.current}\r\n                    onClose={this.props.toggleList}\r\n                    onBackdropClick={this.props.toggleList}\r\n                >\r\n                    <div className=\"card-members-list\">\r\n                        <div className=\"card-members-list-header\">\r\n                            <div>Members</div>\r\n                            <CloseIcon onClick={this.props.toggleList} />\r\n                        </div>\r\n                        \r\n                        <input type=\"text\" value={this.state.filter} onChange={this.onChange} className=\"filter\" />\r\n                        <div className=\"board-members\">\r\n                            <h5>Board Members</h5>\r\n                            {this.state.boardMembers.map(member => {\r\n                                return <CardMember key={member._id} boardMember={member} cardMembers={this.props.card.members} toggleMember={this.onSelectBoardMember}/>\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </Popover>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","export const cloudService = {\r\n    uploadImg\r\n}\r\nasync function uploadImg(file) {\r\n    \r\n    const CLOUD_NAME = \"dyslqd6pn\"\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n    const formData = new FormData();\r\n    // const file = ev.target.files[0]\r\n    console.log(file)\r\n    formData.append('file', file)\r\n    formData.append('upload_preset', 'ld9rlgmy');\r\n    try {\r\n        const res = await fetch(UPLOAD_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        const data = await res.json()\r\n        return data.secure_url\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { cloudService } from '../../services/cloudService'\r\nimport {DropzoneDialog} from 'material-ui-dropzone'\r\n\r\nexport class CardImgUpload extends Component {\r\n\r\n    state = {\r\n        item: null\r\n    }\r\n\r\n    uploadImg = async (file) => {\r\n        \r\n        await this.props.setUploading()\r\n        const imgUrl = await cloudService.uploadImg(file)\r\n        this.setState({item:imgUrl},this.submitImage)\r\n\r\n    }\r\n\r\n\r\n    submitImage = async() => {\r\n        // if no item - do nothing\r\n        if (!this.state.item) return\r\n        // else - wait for the image to be added to the array\r\n        await this.props.onAddImage(this.state.item)\r\n        // set the state back to null\r\n        this.setState({item:null})\r\n    }\r\n    handleChange(files){\r\n        this.uploadImg(files[0])\r\n      }\r\n    render(){\r\n        return (\r\n            <DropzoneDialog\r\n            acceptedFiles={['image/*']}\r\n            cancelButtonText={\"cancel\"}\r\n            submitButtonText={\"submit\"}\r\n            maxFileSize={512000}\r\n            open={this.props.isOpen}\r\n            onClose={() => this.props.toggleOpen()}\r\n            onSave={(files) => {\r\n              this.handleChange(files)\r\n              this.props.toggleOpen();\r\n            }}\r\n            showPreviews={true}\r\n            showFileNamesInPreview={false}\r\n          />\r\n        )\r\n      }\r\n\r\n    // render() {\r\n    //     if (!this.state.item) return (\r\n            \r\n    //             <div className=\"file-upload-form\">\r\n    //                 <form>\r\n    //                     <input type=\"file\" id=\"myFile\" name=\"filename\" placeholder=\"Upload Image\" onChange={this.uploadImg} />\r\n                        \r\n    //                 </form>\r\n    //             </div>\r\n            \r\n    //     )\r\n    //     return (<div className=\"file-upload-form \"><button disabled>Upload Image</button></div>)\r\n    // }\r\n}\r\n","import React, { Component } from 'react'\r\nimport * as timeago from 'timeago.js';\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\nimport {  IconButton } from '@material-ui/core';\r\n\r\nexport class CardDetailsAttachment extends Component {\r\n    state = {\r\n        isEditing: false,\r\n        att: null,\r\n        title: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        \r\n        this.updateAttFromProps()\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.attachment !== prevProps.attachment) {\r\n            this.updateAttFromProps()\r\n        }\r\n        if (this.state.att !== prevState.att) {\r\n            \r\n        }\r\n    }\r\n    \r\n    updateAttFromProps = () => {\r\n        const att = {...this.props.attachment}\r\n        const title = this.props.attachment.title \r\n        \r\n        this.setState({ att, title })\r\n    }\r\n\r\n    setEditing = (bool) => {\r\n        if (bool) return this.setState({isEditing:true})\r\n        return this.setState({isEditing:false})\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        this.setState({title:ev.target.value})\r\n    }\r\n\r\n    onRemove = (ev) => {\r\n        // if the update function receives a blank title - it removes the item\r\n        this.setState({title:''},() => {\r\n            this.updateCard().then(() => {\r\n                this.setState({att:null})\r\n            })\r\n        }\r\n            )\r\n\r\n    }\r\n\r\n    onSubmit = (ev) =>{\r\n        ev.preventDefault()\r\n        this.updateCard()\r\n    }\r\n\r\n    updateCard = () => {\r\n        return new Promise(resolve => {\r\n\r\n            const att = {...this.state.att}\r\n            att.title = this.state.title\r\n            // console.log()\r\n            this.props.onUpdate(att)\r\n            this.setEditing(false)\r\n            resolve()\r\n        })\r\n        \r\n    }\r\n\r\n    render() {\r\n        \r\n        const att = this.state.att\r\n        if (!att) return <React.Fragment />\r\n        return (\r\n            <div className=\"card-attachment\">\r\n                <div className=\"att-image\" style={{ backgroundImage: `url(${att.src})` }} />\r\n                <div className=\"att-details-container\">\r\n                    <div className=\"att-title\">\r\n                        {(this.state.isEditing) ? \r\n                        <form onSubmit={this.onSubmit} onBlur={() => {this.setEditing(false)}}><input autoFocus onChange={this.onChange} type=\"text\" value={this.state.title} required /></form> \r\n                        :<h5 onClick={() => {this.setEditing(true)}}>{this.state.title}</h5> }\r\n                    </div>\r\n                    <div className=\"att-date-added\">\r\n                        {timeago.format(att.createdAt)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"att-remove\">\r\n                    <IconButton onClick={this.onRemove}>\r\n                        <DeleteOutlineOutlinedIcon />\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { CardDetailsAttachment } from './CardDetailsAttachment'\r\n\r\nexport function CardImagesList(props) {\r\n    // console.log(props)\r\n    \r\n    if (!props.attachments) return <React.Fragment />\r\n    return (\r\n        <div className=\"card-attachments-container\">\r\n            {props.attachments.map(att => <CardDetailsAttachment key={att.id} onUpdate={props.onUpdate} attachment={att} />)}\r\n        </div>\r\n    )\r\n}\r\n","import { Popover } from '@material-ui/core'\r\nimport { CloseOutlined } from '@material-ui/icons'\r\nimport React, { Component } from 'react'\r\n\r\n\r\nexport class CoverSelector extends Component {\r\n\r\n    state = {\r\n        cover: null\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        \r\n        this.setCoverFromProps()\r\n    }\r\n\r\n    setCoverFromProps = () => {\r\n        let cover = this.props.card.cover\r\n        if (!cover) cover = { id: null, value: null }\r\n        this.setState({ cover })\r\n\r\n    }\r\n    colors = [\r\n        { id: 101, value: '#f9f9f9' },\r\n        { id: 102, value: '#F2D600' },\r\n        { id: 103, value: '#FF9F1A' },\r\n        { id: 104, value: '#f9f9f9' },\r\n        { id: 105, value: '#EB5A46' },\r\n        { id: 106, value: '#C377E0' },\r\n        { id: 107, value: '#028ad8' },\r\n        { id: 108, value: '#a7a7a7' }\r\n    ]\r\n\r\n    onSelectCover = async(value) => {\r\n        \r\n        let cover={\r\n            id : value.id,\r\n            color : value.value,\r\n            src : value.src\r\n        }\r\n        this.setState({cover},\r\n            this.props.onUpdate(cover))\r\n    }\r\n\r\n    onRemoveCover = () => {\r\n        this.setState({cover:null}, () => {\r\n            console.log(this.state.cover)\r\n            this.props.onUpdate(this.state.cover)\r\n        })\r\n    }\r\n\r\n    getImageEls = () => {\r\n        const att = this.props.card.attachments\r\n        \r\n        if (!att) return <React.Fragment />\r\n        const imageEls = att.map(el => {\r\n            let txt = \"single-image-choice\"\r\n            if (this.state.cover.id === el.id) {\r\n                txt += ' selected'\r\n            }\r\n            return <div key={el.id} className={txt} onClick={() => this.onSelectCover(el)} style={{ backgroundImage: `url(${el.src})` }}></div>\r\n        })\r\n        \r\n        return <React.Fragment><h6>Images</h6><div className=\"image-choice\">{imageEls}</div></React.Fragment>\r\n    }\r\n\r\n    getColorEls = () => {\r\n        const colorEls = this.colors.map(el => {\r\n            let txt = \"color-choice\"\r\n            if (this.state.cover.id === el.id) {\r\n                txt += ' selected'\r\n            }\r\n\r\n            return <div key={el.id} className={txt} onClick={() => this.onSelectCover(el)} style={{ backgroundColor: el.value }}></div>\r\n        })\r\n        return colorEls\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.cover) return <React.Fragment />\r\n        return (\r\n            <Popover\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                open={true}\r\n                anchorEl={this.props.anchorEl.current}\r\n                onClose={this.props.toggleList}\r\n                onBackdropClick={this.props.toggleList}\r\n            >\r\n                <div className=\"cover-selector-container\">\r\n                    <div className=\"cover-selector-header\">\r\n                        <h5>Cover</h5>\r\n                        <CloseOutlined onClick={this.props.toggleList} />\r\n                    </div>\r\n                    <div className=\"cover-selector-colors\">\r\n                        <h6>Colors</h6>\r\n                        <div className=\"color-selection\">\r\n                            {this.getColorEls()}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"cover-selector-images\">\r\n                        {this.getImageEls()}\r\n                    </div>\r\n                    <div className=\"cover-remove-container\">\r\n                        <button className=\"cancel-btn\" onClick={this.onRemoveCover}>Remove Container</button>\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n\r\n        )\r\n    }\r\n}\r\n","import {  Button, CircularProgress, ClickAwayListener, IconButton, Popover } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { updateCard, loadBoard, switchGroup, addActivity } from '../../store/actions/boardActions';\r\nimport { CardSidebar } from './CardSidebar';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { CardDescription } from './CardDescription';\r\nimport { CardDetailsHeader } from './CardDetailsHeader';\r\nimport { CardLabels } from './CardLabels';\r\nimport { CardDueDateSetter } from './CardDueDateSetter';\r\nimport { CardChecklistList } from './CardChecklistList';\r\nimport { ActivityLog } from '../Sidebar/ActivityLog';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport { CardAddComment } from './CardAddComment';\r\nimport { boardService } from '../../services/boardService';\r\nimport { LabelPalette } from '../Sidebar/LabelPalette';\r\nimport { CardMembersList } from './CardMembersList';\r\nimport { CardImgUpload } from './CardImgUpload';\r\nimport { cardService } from '../../services/cardService/cardService';\r\nimport { CardImagesList } from './CardImagesList';\r\nimport { CoverSelector } from './CoverSelector';\r\nimport { toast } from 'react-toastify';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\n\r\nclass _CardDetails extends Component {\r\n\r\n    state = {\r\n        groupId: null,\r\n        groupName: '',\r\n        card: null,\r\n        commentsOnly: false,\r\n        isLabelPaletteShowing: false,\r\n        isCardMemeberShown: false,\r\n        isUploadZoneOpen: false,\r\n        isUploading: false,\r\n        isCoverSelectorShown: false\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.cardId !== this.props.cardId) {\r\n            this.getCardDetails()\r\n        }\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n    componentDidMount() {        \r\n\r\n        if (!this.props.board || Object.keys(!this.props.board)) {\r\n\r\n            this.props.loadBoard(this.props.boardId).then(() => {\r\n                return this.getCardDetails()\r\n            })\r\n        }\r\n        // this.getCardDetails()\r\n    }\r\n\r\n\r\n    getCardDetails = () => {\r\n        let foundCard = false;\r\n        this.props.board.groups.forEach(group => {\r\n            group.cards.forEach(card => {\r\n                if (card.id === this.props.cardId) {\r\n                    const groupId = group.id\r\n                    const groupName = group.title\r\n                    foundCard = true\r\n                    this.setState({ groupId, groupName, card })\r\n                    return\r\n                }\r\n            })\r\n        })\r\n        // if no card is found - this means the card id is invalid\r\n        if (!foundCard) {\r\n            toast.error('Oops! we seem to be missing the card you\\'re looking for.', {\r\n                position: \"bottom-right\",\r\n                autoClose: 3500,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n            setTimeout(() => {\r\n                \r\n                this.props.history.push(`/board/${this.props.board._id}`)\r\n            }, 1000)\r\n        }\r\n    }\r\n\r\n    onCloseCard = () => {\r\n        // const url = window.location.href\r\n        // const regex = /\\/board\\/.+\\//i\r\n        // const targetUrl = url.match(regex)[0]\r\n        this.props.history.push(`/board/${this.props.boardId}`)\r\n    }\r\n\r\n    toggleCommentsOnly = () => {\r\n        if (this.state.commentsOnly) return this.setState({ commentsOnly: false })\r\n        return this.setState({ commentsOnly: true })\r\n    }\r\n    toggleLabelPalette = () => {\r\n        this.setState({ isLabelPaletteShowing: !this.state.isLabelPaletteShowing })\r\n    }\r\n    toggleDisplayMembers = () => {\r\n        if (this.state.isCardMemeberShown) return this.setState({ isCardMemeberShown: false })\r\n        return this.setState({ isCardMemeberShown: true })\r\n    }\r\n    toggleUploadDropzone = () => {\r\n        if (this.state.isUploadZoneOpen) return this.setState({ isUploadZoneOpen: false })\r\n        return this.setState({ isUploadZoneOpen: true })\r\n    }\r\n    toggleCoverSelector = () => {\r\n        if (this.state.isCoverSelectorShown) return this.setState({ isCoverSelectorShown: false })\r\n        return this.setState({ isCoverSelectorShown: true })\r\n    }\r\n    getLabels = () => {\r\n        const labels = this.state.card.labels\r\n        if (labels && labels.length) return (\r\n            <div className=\"card-details-label-container\">\r\n                <h5>Labels</h5>\r\n                <CardLabels onClickLabel={this.openEditLabelsModal}\r\n                    cardLabels={labels}\r\n                    boardLabels={this.props.board.labels}\r\n                    preview={false}\r\n                />\r\n            </div>\r\n        )\r\n        return <React.Fragment />\r\n    }\r\n\r\n    createActivity = (txt) => {\r\n        const activity = {\r\n            \"txt\": txt,\r\n            \"commentTxt\": '',\r\n            \"card\": {\r\n                \"id\": this.state.card.id,\r\n                \"title\": this.state.card.title\r\n            }\r\n        }\r\n\r\n        return boardService.createActivity(activity)\r\n    }\r\n\r\n    onArchiveCard = async () => {\r\n        let card = { ...this.state.card }\r\n        card.archivedAt = Date.now()\r\n        const activity = this.createActivity('archived')\r\n        await this.submitCard(card, activity)\r\n        this.onCloseCard()\r\n    }\r\n\r\n    onUpdateDueDate = async (dueDate) => {\r\n        let card = { ...this.state.card }\r\n        card.dueDate = dueDate\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated due date')\r\n            await this.submitCard(card, activity)\r\n\r\n        })\r\n    }\r\n\r\n    onAddComment = (txt) => {\r\n        \r\n        const activity = {\r\n            \"txt\": \"\",\r\n            \"commentTxt\": txt,\r\n            \"card\": {\r\n                \"id\": this.state.card.id,\r\n                \"title\": this.state.card.title\r\n            }\r\n        }\r\n        const newActivity = boardService.createActivity(activity)\r\n        \r\n        this.props.addActivity(this.props.board, newActivity)\r\n\r\n    }\r\n\r\n    onUpdateHeader = async (txt) => {\r\n        let card = { ...this.state.card }\r\n        card.title = txt\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated the title')\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n    getCardDetailsMembers = () => {\r\n        const cardMembers = this.state.card.members\r\n        if (!cardMembers || !cardMembers.length) return <React.Fragment />\r\n\r\n        // const cardMembersEl = cardMembers.map((member, idx) => {\r\n        //     const splitName = member.fullName.split(' ')\r\n        //     const initials = splitName.map(name => name[0])\r\n        //     return <div key={100 + idx} className=\"card-details-member\"><Avatar>{initials}</Avatar></div>\r\n        // })\r\n\r\n        const cardMembersEl = cardMembers.map((member, idx) => {\r\n            \r\n            return <MemberPreview key={100+idx} name={member.fullName} imgUrl={member.imgUrl} />\r\n        })\r\n        return <div className=\"card-details-members\"><h5>Members</h5><div>{cardMembersEl}</div></div>\r\n    }\r\n\r\n\r\n    submitCard = (card, activity) => {\r\n\r\n        return new Promise(resolve => {\r\n            this.props.updateCard(this.props.board, card, activity).then(() => resolve())\r\n\r\n        })\r\n    }\r\n\r\n    onUpdateCardMembers = async (card, txt) => {\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity(txt)\r\n            await this.submitCard(card, activity)\r\n        })\r\n    }\r\n\r\n    onUpdateCover = (cover) => {\r\n        const card = { ...this.state.card }\r\n        card.cover = cover\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated the cover')\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n    onUpdateDesc = async (description) => {\r\n        const card = { ...this.state.card }\r\n        card.description = description\r\n\r\n        this.setState({ card }, async () => {\r\n            const activity = this.createActivity('updated the description')\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n\r\n    setUploading = () => {\r\n        return new Promise(resolve => {\r\n            this.setState({ isUploading: true }, resolve(true))\r\n        })\r\n    }\r\n\r\n    onAddImage = (imgRef) => {\r\n        const newImg = cardService.createImage(imgRef)\r\n        const card = { ...this.state.card }\r\n        if (!card.attachments) card.attachments = []\r\n        card.attachments.push(newImg)\r\n        const activity = this.createActivity('added an image')\r\n        this.setState({ card }, async () => {\r\n            await this.submitCard(card, activity)\r\n            this.setState({ isUploading: false })\r\n        })\r\n\r\n    }\r\n\r\n    onUpdateAttachments = async (newAttachment) => {\r\n        const card = { ...this.state.card }\r\n        const idx = card.attachments.findIndex(att => att.id === newAttachment.id)\r\n\r\n        if (!newAttachment.title.length) {\r\n\r\n            card.attachments.splice(idx, 1)\r\n        } else {\r\n            card.attachments[idx] = newAttachment\r\n        }\r\n\r\n        const activity = (newAttachment.title.length) ? this.createActivity('edited the title of an image') : this.createActivity('removed an image')\r\n\r\n        this.setState({ card }, () => {\r\n            this.submitCard(card, activity)\r\n        })\r\n    }\r\n\r\n\r\n    onUpdateChecklists = (newChecklist, activityTxt) => {\r\n\r\n        const card = { ...this.state.card }\r\n        if (!card.checklists) card.checklists = []\r\n        // updating\r\n        const checklistIdx = card.checklists.findIndex(checklist => checklist.id === newChecklist.id)\r\n        if (checklistIdx >= 0) {\r\n            card.checklists = card.checklists.map(checklist => {\r\n                if (checklist.id === newChecklist.id) return newChecklist\r\n                return checklist\r\n            })\r\n        } else {\r\n            card.checklists.push(newChecklist)\r\n        }\r\n\r\n        // removing excess checklists\r\n        card.checklists = card.checklists.filter(checklist => {\r\n            if (checklist.title) return checklist\r\n        })\r\n\r\n        this.setState({ card }, () => {\r\n            if (activityTxt) {\r\n                let activity = this.createActivity(activityTxt)\r\n\r\n                this.submitCard(card, activity)\r\n            } else {\r\n                this.submitCard(card)\r\n            }\r\n        })\r\n    }\r\n\r\n    getFilteredActivities = () => {\r\n        const card = this.state.card\r\n        const activities = this.props.board.activities\r\n        if (!activities) return []\r\n        let cardActivities = activities.filter(activity => activity.card.id === card.id)\r\n        if (this.state.commentsOnly) cardActivities = cardActivities.filter(activity => {\r\n            if (activity.commentTxt.length) return activity\r\n        })\r\n        return cardActivities\r\n    }\r\n\r\n    getCardCover = () => {\r\n        const cover = this.state.card.cover\r\n        if (!cover) return <React.Fragment />\r\n\r\n        if (!cover.src) return (\r\n            // if there is no src - this is a color\r\n            <div className=\"card-details-cover-color\" style={{ backgroundColor: cover.color }} />\r\n        )\r\n        return (\r\n            <div className=\"card-details-cover-image\" style={{ backgroundImage: `url(${cover.src})` }} />\r\n        )\r\n    }\r\n    render() {\r\n        const card = this.state.card\r\n        if (!card) return <div className=\"card-details-background\"><div className=\"card-details-container\"><div className=\"circular-progress-container\"><CircularProgress /></div></div></div>\r\n        return (\r\n            <div className=\"card-details-background\">\r\n                <ClickAwayListener onClickAway={this.onCloseCard}>\r\n                <div className=\"card-details-container\">\r\n                    {this.getCardCover()}\r\n                    <div className=\"close-button\">\r\n                        <IconButton onClick={this.onCloseCard} aria-label=\"close\">\r\n                            <CloseIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <div className=\"card-details-header-container\">\r\n\r\n                        <div className=\"card-details-title-container\">\r\n                            <CardDetailsHeader headerTxt={card.title} onUpdate={this.onUpdateHeader} />\r\n                            <small>in list <span>{this.state.groupName}</span></small>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-details-attrs\">\r\n                        {this.getCardDetailsMembers()}\r\n                        {this.getLabels()}\r\n                        <div>\r\n                            {(this.state.card.dueDate ? <h5>Due Date</h5> : <React.Fragment />)}\r\n                            <CardDueDateSetter onUpdateDueDate={this.onUpdateDueDate} dueDate={card.dueDate} displayDate={true} displayTime={true} />\r\n                        </div>\r\n                    </div>\r\n                    <section>\r\n                        <main className=\"card-details-main\">\r\n                            <CardDescription onUpdateDesc={this.onUpdateDesc} description={card.description} />\r\n                            <CardImagesList onUpdate={this.onUpdateAttachments} attachments={this.state.card.attachments} />\r\n                            <CardChecklistList checklists={card.checklists} onUpdate={this.onUpdateChecklists} />\r\n                            <CardImgUpload onAddImage={this.onAddImage} setUploading={this.setUploading} toggleOpen={this.toggleUploadDropzone} isOpen={this.state.isUploadZoneOpen} />\r\n\r\n                        </main>\r\n                        <aside className=\"card-details-sidebar\" ref={this.ref}>\r\n                            <CardSidebar anchorRef={this.ref} addActivity={this.createActivity} isUploading={this.state.isUploading} toggleCoverSelector={this.toggleCoverSelector} toggleUploadDropzone={this.toggleUploadDropzone} toggleDisplayMembers={this.toggleDisplayMembers} dueDate={card.dueDate} toggleLabelPallete={this.toggleLabelPalette} onUpdateDueDate={this.onUpdateDueDate} onArchiveCard={this.onArchiveCard} onUpdateChecklists={this.onUpdateChecklists} />\r\n                        </aside>\r\n                        \r\n                    </section>\r\n                    <div className=\"card-details-activity-log\">\r\n                                <div className=\"card-details-activities-title\">\r\n                                    <ListIcon />\r\n                                    <h5>Activities</h5>\r\n                                    <Button onClick={this.toggleCommentsOnly}>{(this.state.commentsOnly) ? 'Show Details' : 'Hide Details'}</Button>\r\n                                </div>\r\n                                <CardAddComment onAddComment={this.onAddComment} />\r\n\r\n                                \r\n                    <ActivityLog\r\n                                    boardId={this.props.board._id}\r\n                                    displayMode=\"card\"\r\n                                    activities={this.getFilteredActivities()} />\r\n                                    </div>\r\n                </div>\r\n                </ClickAwayListener>\r\n                {/* {this.state.isLabelPaletteShowing && <LabelPalette card={card} />} */}\r\n                <Popover\r\n                    anchorOrigin={{\r\n                        vertical: 'center',\r\n                        horizontal: 'center',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'center',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.isLabelPaletteShowing}\r\n                    anchorEl={this.ref.current}\r\n                    onClose={this.toggleLabelPalette}\r\n                    onBackdropClick={this.toggleLabelPalette}>\r\n                    <LabelPalette createActivity={this.createActivity} card={card} />\r\n                </Popover>\r\n                { this.state.isCardMemeberShown && <CardMembersList updateCardMembers={this.onUpdateCardMembers} anchorEl={this.ref} toggleList={this.toggleDisplayMembers} boardMembers={this.props.board.members} card={this.state.card} cardMembers={card.members} />}\r\n                { this.state.isCoverSelectorShown && <CoverSelector card={this.state.card} anchorEl={this.ref} onUpdate={this.onUpdateCover} toggleList={this.toggleCoverSelector} />}\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    switchGroup,\r\n    updateCard,\r\n    addActivity\r\n\r\n};\r\n\r\nexport const CardDetails = connect(mapStateToProps, mapDispatchToProps)(connect(withRouter)(_CardDetails));\r\n","// Edit card preivew - should have edit labels, change memebers change due date and archive\r\nimport React, { Component } from 'react'\r\n\r\nimport {Button, Dialog } from '@material-ui/core';\r\nimport { CardLabels } from './CardLabels';\r\nimport { CardPreviewDueDate } from './CardPreviewDueDate';\r\nimport ArchiveOutlinedIcon from '@material-ui/icons/ArchiveOutlined';\r\nimport { connect } from 'react-redux';\r\nimport { addActivity, updateCard } from '../../store/actions/boardActions';\r\nimport { boardService } from '../../services/boardService';\r\nimport { CardDueDateSetter } from './CardDueDateSetter';\r\nimport { CardMembersList } from './CardMembersList';\r\nimport PeopleAltOutlinedIcon from '@material-ui/icons/PeopleAltOutlined';\r\nimport { Share } from '../Share';\r\n\r\nclass _CardPreviewActions extends Component {\r\n\r\n    state = {\r\n        isOpen: false,\r\n        offsetTop: null,\r\n        offsetLeft: null,\r\n        width: null,\r\n        txtValue: '',\r\n        isMemberListOpen: false\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n    submitCard = (card,activity) => {\r\n        return new Promise(resolve => {\r\n            this.props.updateCard(this.props.board, card,activity).then(() => {\r\n                this.onClose()\r\n            })\r\n        })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.props.onClose()\r\n    }\r\n    componentDidMount() {\r\n        this.getParentPos()\r\n        this.getCurrTitle()\r\n    }\r\n    \r\n    createActivity = (txt) => {\r\n        const card = this.props.props.card\r\n        const activity = {\r\n            txt: txt,\r\n            commentTxt: '',\r\n            card: {\r\n                id: card.id,\r\n                title: card.title\r\n            }\r\n        }\r\n\r\n        return boardService.createActivity(activity)\r\n    }\r\n    onUpdateDueDate = (dueDate) => {\r\n        let card = { ...this.props.props.card }\r\n        card.dueDate = dueDate\r\n        const activity = this.createActivity('updated due date')\r\n        this.submitCard(card,activity)\r\n        \r\n    }\r\n\r\n    onUpdateHeader =  () => {\r\n        let card = { ...this.props.props.card }\r\n        card.title = this.state.txtValue\r\n        const activity = this.createActivity('updated the title')\r\n        this.submitCard(card,activity)\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const txtValue = ev.target.value\r\n        this.setState({ txtValue })\r\n    }\r\n\r\n    onKeyPress = (ev) => {\r\n        if (ev.key === 'Enter') return this.onUpdateHeader()\r\n    }\r\n\r\n    toggleCardMembersMenu = () => {\r\n        if (this.state.isMemberListOpen) return this.setState({isMemberListOpen:false})\r\n        this.setState({isMemberListOpen:true})\r\n    }\r\n    onArchiveCard =   () => {\r\n        let card = { ...this.props.props.card }\r\n        card.archivedAt = Date.now()\r\n        const activity = this.createActivity('archived')\r\n        this.submitCard(card,activity)\r\n         \r\n    }\r\n\r\n    onUpdateCardMembers = async (card) => {\r\n        \r\n        this.setState({ card }, () => {\r\n            const activity = this.createActivity('edited the card members')\r\n            this.submitCard(card,activity)\r\n            \r\n        })\r\n    }\r\n\r\n\r\n    getParentPos = () => {\r\n        const pos = this.props.anchorEl.current.parentElement.getBoundingClientRect()\r\n        this.setState({ offsetTop: pos.top, offsetLeft: pos.left, width: pos.width })\r\n    }\r\n\r\n    getCurrTitle() {\r\n        const txtValue = this.props.props.card.title\r\n        this.setState({ txtValue })\r\n    }\r\n    getCardCover = () => {\r\n\r\n        const cardCover = this.props.props.card.cover\r\n        if (!cardCover) return <React.Fragment />\r\n        if (!cardCover.src) return (\r\n            // if there is no src - this is a color\r\n            <div className=\"card-preview-cover-color\" style={{backgroundColor:cardCover.color}} />\r\n        )\r\n        return (\r\n            <div className=\"card-preview-cover-image\" style={{backgroundImage:`url(${cardCover.src})`}} /> \r\n        )\r\n    }\r\n\r\n    getCardPath = () => {\r\n        let href = window.location.href\r\n        let cardId = this.props.props.card.id\r\n        return `${href}/${cardId}`\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.offsetTop || !this.state.offsetLeft) return <div></div>\r\n        const props = this.props.props\r\n        return (\r\n\r\n            <Dialog onClose={this.props.onClose} open={true} >\r\n                <div  className=\"card-edit-container\" onClick={(ev) => ev.stopPropagation()} style={{\r\n                    left: `${this.state.offsetLeft}px`,\r\n                    top: `${this.state.offsetTop}px`,\r\n                    position: 'fixed'\r\n                }}>\r\n                    \r\n                    {(this.state.isMemberListOpen) ? <CardMembersList anchorEl={this.ref} updateCardMembers={this.onUpdateCardMembers} toggleList={this.toggleCardMembersMenu} boardMembers={this.props.board.members} card={props.card}/> : <React.Fragment />}\r\n                    \r\n                    <div className=\"card-edit-left\">\r\n\r\n                        <div className=\"card-preview\" style={{ width: `${this.state.width}px` }}>\r\n                            {this.getCardCover()}\r\n                            {this.props.cardStyle}\r\n                            <CardLabels\r\n                                cardLabels={props.card.labels}\r\n                                boardLabels={props.board.labels}\r\n                                preview={true}\r\n                            />\r\n                            <form>\r\n                                <textarea className=\"card-preview-header card-preview-title-edit\" autoFocus onKeyPress={this.onKeyPress} onChange={this.onChange} value={this.state.txtValue} />\r\n                            </form>\r\n\r\n                            <div className=\"card-preview-attrs\">\r\n                                <CardPreviewDueDate dueDate={props.card.dueDate} />\r\n                                {this.props.attrs}\r\n                            </div>\r\n                        </div>\r\n                        <button className=\"save-btn\" onClick={this.onUpdateHeader}>Save</button>\r\n                    </div>\r\n                    <div  className=\"card-edit-right\">\r\n                        <div className=\"card-preview-edit-actions-container\">\r\n                            <Button onClick={this.onArchiveCard}><ArchiveOutlinedIcon /> <span>Archive Card</span></Button>\r\n                            <CardDueDateSetter dueDate={props.dueDate} onUpdateDueDate={this.onUpdateDueDate} />\r\n                            <Button ref={this.ref} onClick={this.toggleCardMembersMenu}><PeopleAltOutlinedIcon /><span>Members</span></Button>\r\n                            <Share item=\"card\" path={this.getCardPath()} />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </Dialog>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateCard,\r\n    addActivity\r\n\r\n};\r\n\r\nexport const CardPreviewActions = connect(mapStateToProps, mapDispatchToProps)(_CardPreviewActions);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport SubjectOutlinedIcon from '@material-ui/icons/SubjectOutlined';\r\nimport AttachFileOutlinedIcon from '@material-ui/icons/AttachFileOutlined';\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\nimport { toggleFullLabels } from '../../store/actions/boardActions';\r\nimport { CardLabels } from './CardLabels';\r\nimport { CardPreviewDueDate } from './CardPreviewDueDate';\r\nimport ChatBubbleOutlineRoundedIcon from '@material-ui/icons/ChatBubbleOutlineRounded';\r\nimport { Draggable } from 'react-beautiful-dnd'\r\nimport { CardPreviewActions } from './CardPreviewActions';\r\n// import { Avatar } from '@material-ui/core';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\n\r\n\r\n\r\nclass _CardPreview extends Component {\r\n\r\n    state = {\r\n        isEditing: false\r\n    }\r\n\r\n    ref = React.createRef()\r\n\r\n\r\n\r\n    onSetEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    onSetNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    onOpenCardActions = (ev) => {\r\n        ev.stopPropagation()\r\n        this.onSetEditing()\r\n    }\r\n    getCardPreviewStyle = () => {\r\n        const cardStyle = this.props.card.style\r\n        if (!cardStyle || !Object.keys(cardStyle)) return <div></div>\r\n        if (cardStyle.bgColor) return <div className=\"card-preview-style\" style={{ backgroundColor: cardStyle.bgColor }}></div>\r\n        return <div></div>\r\n    }\r\n\r\n    getCardPreviewMembers = () => {\r\n        const cardMembers = this.props.card.members\r\n        if (!cardMembers || !cardMembers.length) return <React.Fragment />\r\n        \r\n        // const cardMembersEl =  cardMembers.map((member, idx) => {\r\n        //     const splitName = member.fullName.split(' ')\r\n        //     const initials = splitName.map(name => name[0])\r\n        //     return <div key={100 + idx} className=\"card-preview-member\"><Avatar>{initials}</Avatar></div>\r\n        // })\r\n\r\n        const cardMembersEl = cardMembers.map((member,idx) => {\r\n            return <MemberPreview key={idx} name={member.fullName} imgUrl={member.imgUrl} />\r\n        })\r\n\r\n        return <div className=\"card-preview-members\">{cardMembersEl}</div>\r\n    }\r\n\r\n    getCardPreviewAttachments = () => {\r\n        const cardAtt = this.props.card.attachments\r\n        if (!cardAtt || !Object.keys(cardAtt) || !cardAtt.length) return null\r\n        return <div key=\"0\" className=\"card-preview-attr\"><AttachFileOutlinedIcon style={{ fontSize: 16 }} /></div>\r\n    }\r\n\r\n    getCardPreviewHoldDesc = () => {\r\n        const cardDesc = this.props.card.description\r\n        if (!cardDesc || !Object.keys(cardDesc)) return null\r\n        return <div key=\"1\" className=\"card-preview-attr\"><SubjectOutlinedIcon style={{ fontSize: 16 }} /></div>\r\n    }\r\n\r\n    getCardPreviewComments = () => {\r\n        let activities =this.props.board.activities\r\n        if (!activities) return null\r\n        let cardComm = activities.filter(activity => activity.card.id === this.props.card.id)\r\n        cardComm = cardComm.filter(activity => {\r\n            if (activity.commentTxt) return activity\r\n            return null\r\n        })\r\n        if (!cardComm || !cardComm.length) return null\r\n\r\n        return <div key=\"3\" className=\"card-preview-attr\"><ChatBubbleOutlineRoundedIcon style={{ fontSize: 16 }} /> {cardComm.length}</div>\r\n    }\r\n\r\n    onOpenCardDetails = () => {\r\n        // to later be switched to using history\r\n    \r\n        let url = window.location.href\r\n        if (url.charAt(url.length - 1) !== '/') url += '/'\r\n        url += `${this.props.card.id}`\r\n        window.location.assign(url)\r\n        \r\n    }\r\n\r\n\r\n    getCardPreviewChecklist = () => {\r\n        const checklists = this.props.card.checklists\r\n        if (!checklists || !checklists.length) return null\r\n\r\n        let doneTodos = 0\r\n        let totalTodos = 0\r\n\r\n        let doneClass = ''\r\n\r\n        checklists.forEach(checklist => {\r\n            checklist.todos.forEach(todo => {\r\n                if (todo.isDone) {\r\n                    doneTodos += 1\r\n                }\r\n                totalTodos += 1\r\n            })\r\n        })\r\n\r\n        if (!totalTodos) return null\r\n        if (doneTodos === totalTodos) {\r\n            doneClass = \" card-preview-checklist-counter-done\"\r\n        }\r\n        return <div key=\"2\" className={`card-preview-attr card-preview-checklist-counter${doneClass}`}><CheckBoxOutlinedIcon style={{ fontSize: 16 }} /> <span>{doneTodos}/{totalTodos}</span> </div>\r\n    }\r\n\r\n    getCardPreviewAttrs = () => {\r\n        // test all attributes\r\n        const attrs = [\r\n            this.getCardPreviewAttachments(),\r\n            this.getCardPreviewHoldDesc(),\r\n            this.getCardPreviewChecklist(),\r\n            this.getCardPreviewComments()\r\n        ]\r\n        // if at least one of them is true OR there are members assing to this card - render the card-preview-attrs div\r\n        if (this.getCardPreviewMembers() || !attrs.every(item => !item)) {\r\n            return (<div className=\"card-preview-attrs\">\r\n                {attrs.map((att, idx) => {\r\n                    if (att) return att\r\n                    return <React.Fragment key={idx} />\r\n                })}\r\n            </div>)\r\n        }\r\n    }\r\n\r\n    getCardCover = () => {\r\n\r\n        const cardCover = this.props.card.cover\r\n        if (!cardCover) return <React.Fragment />\r\n        if (!cardCover.src) return (\r\n            // if there is no src - this is a color\r\n            <div className=\"card-preview-cover-color\" style={{backgroundColor:cardCover.color}} />\r\n        )\r\n        return (\r\n            <div className=\"card-preview-cover-image\" style={{backgroundImage:`url(${cardCover.src})`}} /> \r\n        )\r\n    }\r\n\r\n    onToggleLabels = (ev) => {\r\n        ev.stopPropagation()\r\n        return this.props.toggleFullLabels()\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        // console.log(this.ref.current)\r\n\r\n    }\r\n\r\n\r\n    render() {        \r\n        return (\r\n\r\n\r\n            <Draggable draggableId={this.props.card.id} index={this.props.index}>\r\n                {(provided, snapshot) => ( \r\n                    <div\r\n                        {...provided.draggableProps}\r\n                        {...provided.dragHandleProps}\r\n                        ref={provided.innerRef}\r\n                        className={snapshot.isDragging ? '' : 'card-preview'}\r\n                        onClick={this.onOpenCardDetails}>\r\n\r\n                            <div className={snapshot.isDragging ? 'card-preview-drag' : ''}>\r\n                                {this.getCardPreviewStyle()}\r\n                                {this.getCardCover()}\r\n                                <CardLabels onClickLabel={this.onToggleLabels}\r\n                                    isFull={this.props.fullLabel}\r\n                                    cardLabels={this.props.card.labels}\r\n                                    boardLabels={this.props.board.labels}\r\n                                    preview={true}\r\n                                />\r\n                                <div className=\"card-preview-header\">\r\n                                    {this.props.card.title}\r\n                                </div>\r\n                                <div ref={this.ref} onClick={this.onOpenCardActions} className=\"card-preview-edit-container\">\r\n                                    <EditOutlinedIcon fontSize=\"inherit\" />\r\n                                    {(this.state.isEditing) ? <CardPreviewActions anchorEl={this.ref} props={this.props} onClose={this.onSetNotEditing} cardStyle={this.getCardPreviewStyle()} attrs={this.getCardPreviewAttrs()} /> : <React.Fragment />}\r\n                                </div>\r\n                                <div className=\"card-preview-attrs\">\r\n                                    <CardPreviewDueDate dueDate={this.props.card.dueDate} />\r\n                                    {this.getCardPreviewAttrs()}\r\n                                    {this.getCardPreviewMembers()}\r\n                                </div>\r\n                                {provided.placeholder}\r\n                            </div>\r\n                    </div>\r\n                )}\r\n\r\n            </Draggable>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        fullLabel: state.boardReducer.fullLabel,\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    toggleFullLabels\r\n};\r\n\r\nexport const CardPreview = connect(mapStateToProps, mapDispatchToProps)(_CardPreview);\r\n\r\n\r\n// className = {`\r\n//      ${snapshot.isDragging ? 'check card-preview' : 'card-preview'}\r\n//      ${snapshot.isDropAnimating ? 'yes' : ''}\r\n//                         `}","import React, { Component } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nexport class NewItem extends Component {\r\n\r\n    state = {\r\n        isEditing: false,\r\n        txtValue: ''\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const txtValue = ev.target.value\r\n        this.setState({ txtValue })\r\n    }\r\n\r\n    onKeyPress = (ev) => {\r\n        if (ev.key === 'Enter') this.onSubmit(ev)\r\n    }\r\n    setEditing = () => {\r\n        this.setState({ isEditing: true })\r\n    }\r\n\r\n    setNotEditing = () => {\r\n        this.setState({ isEditing: false })\r\n    }\r\n\r\n    getIsEditing = () => {\r\n        if (!this.state.isEditing) return (\r\n            <div className=\"new-item-btn\" onClick={this.setEditing}><AddIcon style={{ fontSize: 14 }} />{this.props.addItemTxt}</div>\r\n        )\r\n        \r\n        return (\r\n\r\n            <div className=\"new-item-form\">\r\n                <form  onKeyDown={this.onKeyPress} onBlur={this.setNotEditing} onSubmit={this.onSubmit} >\r\n                    <textarea placeholder={this.props.placeHolderTxt} autoFocus type=\"text\" onChange={this.onChange} value={this.state.txtValue} />\r\n                    <div className=\"save-btn-container\">\r\n                        <button className=\"save-btn\" onMouseDown={this.onSubmit}>{this.props.addBtnTxt}</button>\r\n                        <CloseIcon onClick={this.setNotEditing} />\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    onSubmit = async(ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.txtValue) return\r\n        await this.props.onAdd(this.state.txtValue)\r\n        const isEditing = false\r\n        const txtValue = ''\r\n        this.setState({ isEditing, txtValue })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"new-item-container\">\r\n                {this.getIsEditing()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { boardService } from \"../../services/boardService\";\r\n\r\nconst { cardService } = require(\"../../services/cardService/cardService\");\r\n\r\n\r\nexport function addCard(board, cardTxt, groupId) {\r\n    return async dispatch => {\r\n        try {\r\n          const newBoard = await cardService.addCard(board, cardTxt, groupId)\r\n          dispatch({ type: 'SET_BOARD', board: newBoard });\r\n          boardService.updateBoard(newBoard)\r\n        } catch (err) {\r\n          console.log('ReviewActions: err in addCard', err);\r\n        }\r\n      };\r\n}","import React, { Component } from 'react'\r\nimport { ClickAwayListener } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { onArchiveGroup, onArchiveAllCards } from '../../store/actions/boardActions';\r\n\r\nexport class _GroupMenu extends Component {\r\n\r\n    addCard=(ev)=>{\r\n        // currently adding without moving to focus to new card\r\n        // need to focus on \"NewItem\" and set its state with the help of parent element (same parent)\r\n        ev.stopPropagation()\r\n        this.props.onAdd('New Card')\r\n    }\r\n\r\n    archiveAllCards = (ev)=>{     \r\n        ev.stopPropagation()\r\n        this.props.onArchiveAllCards(this.props.groupId, this.props.board)\r\n        this.props.toggleMenu()\r\n    }\r\n\r\n    archiveGroup=(ev)=>{\r\n        ev.stopPropagation()\r\n        this.props.onArchiveGroup(this.props.groupId, this.props.board)\r\n        this.props.toggleMenu()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ClickAwayListener onClickAway={()=> this.props.toggleMenu()}>\r\n                <div className=\"group-menu-container\">\r\n                        <div>List Actions</div> \r\n                        <div><hr /></div>\r\n                        <div onClick={ this.addCard } className=\"group-menu-item\">Add Card...</div>\r\n                    <div onClick={this.archiveAllCards} className=\"group-menu-item\">Archive All Cards...</div>\r\n                        <div><hr/></div>\r\n                        <div onClick={ this.archiveGroup } className=\"group-menu-item\">Archive This Group...</div>\r\n                </div>\r\n            </ClickAwayListener>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    onArchiveGroup,\r\n    onArchiveAllCards\r\n};\r\n\r\nexport const GroupMenu = connect(mapStateToProps, mapDispatchToProps)(_GroupMenu);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { CardPreview } from './CardCmps/CardPreview'\r\nimport { NewItem } from './NewItem'\r\nimport { addCard } from '../store/actions/groupActions'\r\nimport { setNewGroupName } from '../store/actions/boardActions'\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd'\r\nimport { GroupMenu } from './GroupCmps/GroupMenu'\r\nimport { ClickAwayListener } from '@material-ui/core'\r\n\r\nclass _Group extends Component {\r\n\r\n    state = {\r\n        currGroupName: '',\r\n        currGroupId: null,\r\n        isMenuShown: false,\r\n        isChangeGroupShown: false\r\n    }\r\n\r\n    onAddCard = (txt) => {\r\n        return this.props.addCard(this.props.board, txt, this.props.group.id)\r\n    }\r\n\r\n    getAddItemTxt = () => {\r\n        if (this.props.group.cards.length) return 'Add another card'\r\n        return 'Add a card'\r\n    }\r\n\r\n    toggleMenu=(ev = null)=>{\r\n        if (ev) ev.stopPropagation()\r\n        const isShown = !this.state.isMenuShown\r\n        this.setState({ isMenuShown: isShown })\r\n        \r\n    }\r\n\r\n    closeChangeGroupName = (ev) => {\r\n        this.setState({ isChangeGroupShown: false })\r\n        this.onSubmit(ev)\r\n    }\r\n\r\n    onOpenChangeGroupName=(id, groupName)=>{\r\n        this.setState({ currGroupId: id, currGroupName: groupName, isChangeGroupShown: true })\r\n    }\r\n\r\n    handleChangeGroupName=(ev)=>{\r\n        this.setState({ currGroupName: ev.target.value })\r\n    }\r\n\r\n    onSubmit=(ev)=>{\r\n        ev.preventDefault()        \r\n        const { currGroupId, currGroupName } = this.state\r\n        this.props.setNewGroupName(currGroupId, currGroupName, this.props.board)\r\n        this.setState({ isChangeGroupShown: false })\r\n    }\r\n\r\n    render() {\r\n        const group = this.props.group\r\n        return (\r\n            <Draggable draggableId={group.id} index={this.props.index}>\r\n                {(provided, snapshot)=>(\r\n                    <div {...provided.draggableProps} ref={provided.innerRef}\r\n                        className={snapshot.isDragging ? '' : 'group-outer-container'}>\r\n                        <div className={snapshot.isDragging ? 'group-container-drag' : 'group-container' }>\r\n                        <div {...provided.dragHandleProps}\r\n                            className=\"group-header\" onClick={()=> this.onOpenChangeGroupName(group.id, group.title) }>\r\n                            {(this.state.isChangeGroupShown) ? \r\n                                <ClickAwayListener onClickAway={this.closeChangeGroupName}>\r\n                                    <form onSubmit={this.onSubmit} className=\"change-group-name\">\r\n                                        <input className=\"change-group-name-input\" \r\n                                        type=\"text\" name=\"group-name\" onChange={this.handleChangeGroupName} \r\n                                        defaultValue={ group.title }\r\n                                        autoFocus spellCheck=\"false\" autoComplete=\"off\"\r\n                                        onFocus={ev => ev.target.select()}\r\n                                        />  \r\n                                    </form>\r\n                                </ClickAwayListener> : (group.title)}\r\n\r\n                            <span onClick={ this.toggleMenu } className=\"material-icons dots-icon\">more_horiz</span>\r\n                            {this.state.isMenuShown && <GroupMenu toggleMenu={this.toggleMenu} groupId={group.id} \r\n                            onAdd={this.onAddCard}/>}\r\n\r\n                        </div>\r\n                        <Droppable droppableId={group.id} type=\"card\">\r\n                        {(provided, snapshot)=>(\r\n                                <div className=\"card-container\"\r\n                                    ref={provided.innerRef}\r\n                                    {...provided.droppableProps}>\r\n                                    {group.cards.map((card, index) => {\r\n                                        if (!card.archivedAt) {\r\n                                            return <CardPreview key={card.id} card={card} index={index}/>\r\n                                        }\r\n                                    })}\r\n                                    {provided.placeholder}\r\n                                </div>\r\n                        )}\r\n                        </Droppable>\r\n                        <div className=\"new-card-btn-container\">\r\n                            <NewItem addItemTxt={this.getAddItemTxt()} placeHolderTxt='Add a title for this card...' addBtnTxt=\"Add Card\" onAdd={this.onAddCard} />\r\n                        </div>\r\n                        </div>\r\n                     </div>\r\n\r\n\r\n                )}\r\n            </Draggable>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    addCard,\r\n    setNewGroupName\r\n};\r\n\r\nexport const Group = connect(mapStateToProps, mapDispatchToProps)(_Group);\r\n","import React, { Component } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { connect } from 'react-redux';\r\nimport { onAddNewGroup } from '../../store/actions/boardActions';\r\n\r\nexport class _AddNewGroup extends Component {\r\n\r\n    state = {\r\n        newGroupTitle: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ newGroupTitle: '' })\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        const title = event.target.value        \r\n        this.setState({ newGroupTitle: title })\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (!this.state.newGroupTitle) return\r\n        this.props.onAddNewGroup(this.props.board ,this.state.newGroupTitle)\r\n        this.setState({ newGroupTitle: '' })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n                <div className=\"new-group-form\">\r\n                    <form onBlur={this.setNotEditing} onSubmit={this.onSubmit} >\r\n                    <input onBlur={() => this.props.closeNewGroup()} \r\n                    placeholder=\"Enter list title\" \r\n                    type=\"text\" autoFocus onChange={this.handleChange} \r\n                        value={this.state.newGroupTitle ? this.state.newGroupTitle : ''}\r\n                    />\r\n                        <div className=\"save-btn-container\">\r\n                            <button className=\"save-btn\" onMouseDown={this.onSubmit}>Add List</button>\r\n                        <CloseIcon onClick={ ()=> this.props.closeNewGroup() } />\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onAddNewGroup\r\n};\r\n\r\nexport const AddNewGroup = connect(mapStateToProps, mapDispatchToProps)(_AddNewGroup);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Group } from './Group'\r\nimport { NewItem } from './NewItem'\r\nimport { AddNewGroup } from './GroupCmps/AddNewGroup'\r\n// import { render } from '@testing-library/react'\r\n\r\nimport { Droppable } from 'react-beautiful-dnd'\r\n\r\n\r\nexport class GroupList extends Component {\r\n\r\n    state = {\r\n        isNewGroupShown: false,\r\n        groups: null\r\n    }\r\n\r\n    // filterGroups=()=>{\r\n\r\n    // }\r\n\r\n    closeNewGroup = () => {\r\n        this.setState({ isNewGroupShown: false })\r\n    }\r\n\r\n    render() {\r\n\r\n        const { groups, onAddGroup, style } = this.props\r\n        if (!groups) return <div></div>\r\n\r\n        return (\r\n            <div className=\"group-list-outer-container\" >\r\n                    <Droppable droppableId=\"changeToBoardId\" direction=\"horizontal\" type=\"group\">\r\n                        {provided=> (\r\n                        <div {...provided.droppableProps}\r\n                            ref={provided.innerRef}\r\n                            className=\"group-list-container\" >\r\n                            {groups.map((group, index) => {\r\n                                if (!group.archivedAt) {\r\n                                    return <Group key={group.id} group={group} index={index}/>\r\n                                }\r\n                        })}\r\n                        </div>\r\n                        )}\r\n                    </Droppable>\r\n                    <div className=\"new-group\" >\r\n                        {!this.state.isNewGroupShown && <div className=\"add-new-group-text\"\r\n                            onClick={() => this.setState({ isNewGroupShown: true })}>+ Add another list</div>}\r\n                        {this.state.isNewGroupShown && <AddNewGroup closeNewGroup={this.closeNewGroup} />}\r\n                    </div>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { IconButton, Divider } from '@material-ui/core';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\n\r\n\r\nexport function SidebarHeader({ titleTxt, onSetMenuOpt }) {\r\n    return (\r\n        <div className=\"sidebar-header\">\r\n            <h4>{titleTxt}</h4>\r\n            <IconButton size=\"small\" onClick={() => onSetMenuOpt(null)}>\r\n                <ArrowBackIosOutlinedIcon />\r\n            </IconButton>\r\n            <Divider />\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Drawer, Divider } from '@material-ui/core';\r\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\r\nimport SubjectIcon from '@material-ui/icons/Subject';\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview';\r\nimport { updateBoard } from '../../store/actions/boardActions.js';\r\nimport { SidebarHeader } from './SidebarHeader';\r\n\r\nexport class _AboutBoard extends Component {\r\n    state = {\r\n        isEditDesc: false,\r\n        isEditTitle: false,\r\n        currDesc: null,\r\n        currTitle: null\r\n    }\r\n    setCurrDesc = (ev) => {\r\n        const currDesc = ev.target.value;\r\n        this.setState({ currDesc });\r\n\r\n    }\r\n    setCurrTitle = (ev) => {\r\n        const currTitle = ev.target.value;\r\n        this.setState({ currTitle });\r\n    }\r\n    onEditDesc = () => {\r\n        const description = this.state.currDesc;\r\n        if (description) {\r\n            const newBoard = { ...this.props.board, description };\r\n            this.props.updateBoard(newBoard);\r\n        }\r\n        this.setState({ isEditDesc: false });\r\n    }\r\n    onEditTitle = () => {\r\n        const title = this.state.currTitle;\r\n        if (title) {\r\n            const newBoard = { ...this.props.board, title };\r\n            this.props.updateBoard(newBoard);\r\n        }\r\n        this.setState({ isEditTitle: false });\r\n    }\r\n    render() {\r\n        const { board, isShowing, onSetMenuOpt } = this.props;\r\n        const { isEditDesc, isEditTitle } = this.state;\r\n        return (\r\n            <div className=\"sidebar-container\" >\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    className=\"about-board\"\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"ABOUT THIS BOARD\" onSetMenuOpt={onSetMenuOpt} />\r\n                    {isEditTitle\r\n                        ? <div>\r\n                            <input type=\"text\" autoFocus \r\n                            defaultValue={board.title} \r\n                            onChange={(ev) => this.setCurrTitle(ev)} \r\n                            onBlur={() => this.setState({ isEditTitle: false })} />\r\n                            <button type=\"button\" className=\"save-btn\" onMouseDown={this.onEditTitle}>Save</button>\r\n                        </div>\r\n                        : <h2 onClick={() => this.setState({ isEditTitle: true })}>{board.title}</h2>}\r\n                    <div className=\"about-container\">\r\n                        {board.createdBy && <div className=\"created-by\">\r\n                            <h5><PersonOutlineIcon /> CREATED BY</h5>\r\n                            <div className=\"board-creator\">\r\n                                <MemberPreview name={board.createdBy.fullName} />\r\n                                <span>{board.createdBy.fullName}</span>\r\n                            </div>\r\n                        </div>}\r\n                        <Divider />\r\n                        <div className=\"board-description\">\r\n                            <div className=\"description-header\">\r\n                                <h5><SubjectIcon /> DESCRIPTION</h5>\r\n                                <button className=\"edit-desc-btn\"\r\n                                    onClick={() => this.setState({ isEditDesc: !this.state.isEditDesc })}>\r\n                                    Edit desciption\r\n                                </button>\r\n                            </div>\r\n                            {isEditDesc && <React.Fragment>\r\n                                <textarea name=\"boardDesc\"\r\n                                    autoFocus\r\n                                    defaultValue={board.description}\r\n                                    style={{ resize: 'none' }}\r\n                                    cols=\"30\" rows=\"10\"\r\n                                    onChange={(ev) => this.setCurrDesc(ev)}\r\n                                    onBlur={() => this.setState({ isEditDesc: false })}></textarea>\r\n                                <div className=\"save-cancel-btns\">\r\n                                    <button type=\"button\" className=\"save-btn\"\r\n                                        onMouseDown={this.onEditDesc}>Save</button>\r\n                                    <button className=\"cancel-btn\"\r\n                                        onClick={() => this.setState({ isEditDesc: false })}>Cancel</button>\r\n                                </div>\r\n                            </React.Fragment>}\r\n                            {!isEditDesc && <pre\r\n                                style={{ cursor: 'pointer' }}\r\n                                onClick={() => this.setState({ isEditDesc: true })}>\r\n                                {board.description}\r\n                            </pre>}\r\n                        </div>\r\n                    </div>\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateBoard\r\n};\r\nexport const AboutBoard = connect(mapStateToProps, mapDispatchToProps)(_AboutBoard);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Drawer, Divider, IconButton, List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\nimport { updateBoard, setStyle } from '../../store/actions/boardActions.js';\r\nimport bg1 from './../../assets/imgs/backgrounds/bg-1.jpg';\r\nimport { SidebarHeader } from './SidebarHeader.jsx';\r\n\r\nexport class _ChangeBackground extends Component {\r\n    onSetBoardStyle = (style) => {\r\n        const newBoard = { ...this.props.board, style };\r\n        this.props.updateBoard(newBoard);\r\n        this.props.setStyle(newBoard.style)\r\n    }\r\n    render() {\r\n        const { board, isShowing, onSetMenuOpt } = this.props;\r\n        const boardStyles = [\r\n            {\r\n                id: 'bs101',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708689/bg-1_ls68ox.jpg)'\r\n            },\r\n            {\r\n                id: 'bs102',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708658/bg-2_r8mevb.jpg)'\r\n            },\r\n            {\r\n                id: 'bs103',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708664/bg-3_vrhygl.jpg)'\r\n            },\r\n            {\r\n                id: 'bs104',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708683/bg-4_jqpmcl.jpg)'\r\n            },\r\n            {\r\n                id: 'bs105',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708662/bg-5_r4mz7j.jpg)'\r\n            },\r\n            {\r\n                id: 'bs106',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708669/bg-6_tsrunp.jpg)'\r\n            },\r\n            {\r\n                id: 'bs107',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708679/bg-7_g0tqic.jpg)'\r\n            },\r\n            {\r\n                id: 'bs108',\r\n                fontClr: '#f9f9f9',\r\n                bgImg: 'url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708683/bg-8_hoe86h.jpg)'\r\n            }\r\n        ];\r\n        return (\r\n            <div className=\"about-board sidebar-container\" >\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"CHANGE BACKGROUND\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <div className=\"changeBG-container\">\r\n                        <div className=\"style-pallete\">\r\n                            {boardStyles.map(style => {\r\n                                return <div key={style.id}\r\n                                    className=\"bg-style\"\r\n                                    style={{\r\n                                        backgroundColor: style.bgClr,\r\n                                    }}\r\n                                    onClick={() => this.onSetBoardStyle(style)}>\r\n                                    <div className=\"img-container\" style={{\r\n                                        backgroundImage: style.bgImg,\r\n                                        backgroundRepeat: 'no-repeat',\r\n                                        backgroundSize: 'cover'\r\n                                       \r\n                                    }}></div>\r\n                                    <div>Select</div>\r\n                                </div>\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n    setStyle\r\n};\r\nexport const ChangeBackground = connect(mapStateToProps, mapDispatchToProps)(_ChangeBackground);\r\n","export default __webpack_public_path__ + \"static/media/bg-1.81fd7471.jpg\";","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Drawer, Divider, IconButton } from '@material-ui/core';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\nimport UnarchiveOutlinedIcon from '@material-ui/icons/UnarchiveOutlined';\r\nimport { loadBoard, updateCard, deleteCard, updateGroup } from '../../store/actions/boardActions.js';\r\nimport { SidebarHeader } from './SidebarHeader.jsx';\r\n\r\nexport class _SideArchive extends Component {\r\n    state = {\r\n        isShowingCards: true,\r\n        archive: { archivedCards: [], archivedGroups: [] },\r\n        filterBy: ''\r\n    }\r\n    async componentDidMount() {\r\n        this.loadArchive();\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.board !== this.props.board) this.loadArchive();\r\n    }\r\n    loadArchive = () => {\r\n        const { filterBy } = this.state;\r\n        const { board } = this.props;\r\n        let archivedCards = board.groups.filter(group => {\r\n            return group.cards.find(card => card.archivedAt)\r\n        });\r\n        archivedCards = archivedCards.map(group => {\r\n            return {\r\n                ...group,\r\n                cards: group.cards.filter(card => {\r\n                    return card.archivedAt\r\n                        && (card.title.toLowerCase().includes(filterBy.toLowerCase())\r\n                            || card.description.toLowerCase().includes(filterBy.toLowerCase()));\r\n                })\r\n            };\r\n        });\r\n        const archivedGroups = board.groups.filter(group => {\r\n            return group.archivedAt && group.title.toLowerCase().includes(filterBy.toLowerCase())\r\n        });\r\n        this.setState({ archive: { archivedCards, archivedGroups } });\r\n    }\r\n    onOpenCardDetails = (cardId) => {\r\n        // to later be switched to using history\r\n\r\n        let url = window.location.href\r\n        url += cardId\r\n        window.location.assign(url)\r\n    }\r\n    onUnArchiveCard = (card) => {\r\n        card.archivedAt = null;\r\n        this.props.updateCard(this.props.board, card);\r\n    }\r\n    onDeleteCard = (cardId) => {\r\n        this.props.deleteCard(this.props.board, cardId);\r\n    }\r\n    onUnArchiveGroup = (group) => {\r\n        group.archivedAt = null;\r\n        this.props.updateGroup(this.props.board, group);\r\n    }\r\n    onFilter = (ev) => {\r\n        const filterBy = ev.target.value;\r\n        this.setState(() => ({ filterBy }), () => this.loadArchive());\r\n    }\r\n    render() {\r\n        const { board, isShowing, onSetMenuOpt } = this.props;\r\n        const { isShowingCards, archive } = this.state;\r\n        if (!board.groups) return <div>Loading...</div>;\r\n\r\n        return (\r\n            archive && <div className=\"archive sidebar-container\">\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"ARCHIVE\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <div className=\"search-archive-container\">\r\n                        <input type=\"text\" onChange={(ev) => this.onFilter(ev)} />\r\n                        <button\r\n                            className=\"toggle-archive-btn\"\r\n                            onClick={() => {\r\n                                this.setState({\r\n                                    isShowingCards: !this.state.isShowingCards,\r\n                                    filterBy: ''\r\n                                });\r\n                            }}>\r\n                            Switch to {(isShowingCards) ? 'groups' : 'cards'}\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"archive-list-container\">\r\n                        {isShowingCards\r\n                            ? archive.archivedCards.map(group => {\r\n                                if (group.cards.length === 0) return;\r\n                                return <React.Fragment key={group.id}>\r\n                                    <h5>{group.title}</h5>\r\n                                    {group.cards.map(card => {\r\n                                        return <div className=\"archive-card-container\"\r\n                                            key={card.id}>\r\n                                            <div className=\"archive-card-preview\"\r\n                                                onClick={() => this.onOpenCardDetails(card.id)}>\r\n                                                <span>{card.title}</span>\r\n                                            </div>\r\n                                            <div className=\"buttons\">\r\n                                                <IconButton onClick={() => this.onUnArchiveCard(card)}>\r\n                                                    <UnarchiveOutlinedIcon fontSize='small' />\r\n                                                </IconButton>\r\n                                                <IconButton onClick={() => this.onDeleteCard(card.id)}>\r\n                                                    <DeleteOutlinedIcon fontSize='small' />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        </div>\r\n                                    })}\r\n                                </React.Fragment>\r\n                            })\r\n                            : archive.archivedGroups.map(group => <React.Fragment key={group.id}>\r\n                                <div className=\"archive-group-preview\">\r\n                                    <h5>{group.title}</h5>\r\n                                </div>\r\n                                <div className=\"buttons\">\r\n                                    <IconButton onClick={() => this.onUnArchiveGroup(group)}>\r\n                                        <UnarchiveOutlinedIcon fontSize='small'\r\n                                        />\r\n                                    </IconButton>\r\n                                    <IconButton>\r\n                                        <DeleteOutlinedIcon fontSize='small' />\r\n                                    </IconButton>\r\n                                </div>\r\n                            </React.Fragment>)\r\n                        }\r\n                    </div>\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    updateCard,\r\n    deleteCard,\r\n    updateGroup\r\n};\r\n\r\nexport const SideArchive = connect(mapStateToProps, mapDispatchToProps)(_SideArchive);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Drawer, Divider, IconButton } from '@material-ui/core';\r\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\r\nimport { addLabel, updateLabel, removeLabel } from '../../store/actions/boardActions.js';\r\nimport { LabelPalette } from './LabelPalette.jsx';\r\nimport { SidebarHeader } from './SidebarHeader.jsx';\r\n\r\nclass _LabelPanel extends Component {\r\n    render() {\r\n        const { isShowing, onSetMenuOpt } = this.props;\r\n        return (\r\n            <div className=\"sidebar-container\" >\r\n                <Drawer classes={{ root: 'sidebar' }}\r\n                    className=\"label-panel\"\r\n                    anchor={'right'}\r\n                    open={isShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={'persistent'}>\r\n                    <SidebarHeader titleTxt=\"LABELS\" onSetMenuOpt={onSetMenuOpt} />\r\n                    <LabelPalette />\r\n                </Drawer>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    addLabel,\r\n    updateLabel,\r\n    removeLabel\r\n};\r\nexport const LabelPanel = connect(mapStateToProps, mapDispatchToProps)(_LabelPanel);\r\n","import httpService from \"./httpService\"\r\nimport { utils } from \"./utils\";\r\nconst { default: userService } = require(\"./userService\")\r\n\r\n\r\nexport const templateService = {\r\n    createTemplateFromBoard,\r\n    createBoardFromTemplate,\r\n    query,\r\n    remove\r\n}\r\n\r\nfunction remove(templateId) {\r\n    return httpService.delete(`template/${templateId}`);\r\n}\r\n\r\nasync function createBoardFromTemplate(templateId,boardName) {\r\n    const data = {\r\n        templateId,\r\n        user :userService.getLoggedInUser(),\r\n        boardName\r\n    }\r\n\r\n    if (!data.boardName) data.boardName = 'New board'\r\n    \r\n    const template = await httpService.post(`template/new/`, data);\r\n    return template\r\n}\r\n\r\n\r\nasync function createTemplateFromBoard(board,templateName,attachments,checklists,labels) {\r\n    \r\n    const data = {\r\n        board,\r\n        templateName,\r\n        attachments,\r\n        checklists,\r\n        labels\r\n    }\r\n    const boardId = await httpService.post(`template`, data);\r\n    return Promise.resolve(boardId)\r\n}\r\n\r\n\r\n\r\n\r\nfunction query(filterBy) {\r\n    //   var queryStr = (!filterBy)? '' : `?name=${filterBy.name}&sort=anaAref`\r\n    //   return httpService.get(`board${queryStr}`);\r\n    const params = (!filterBy) ? '' : utils.createQueryString(filterBy)\r\n    console.log(params)\r\n    return httpService.get(`template${params}`)\r\n}\r\n\r\n// function createTemplate(type, boardName) {\r\n//     const board = {\r\n//         // _id: utils.makeId(),\r\n//         title: boardName,\r\n//         isArchived: false,\r\n//         createdAt: Date.now,\r\n//         createdBy: userService.getLoggedInUser(),\r\n//         style: {\r\n//             id: utils.makeId(),\r\n//             fontClr: '#f9f9f9',\r\n//             bgImg: null\r\n//         },\r\n//         members: [],\r\n//         groups: []\r\n//     }\r\n// }\r\n\r\n","import io from 'socket.io-client';\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030';\r\n\r\nlet socket;\r\n\r\nexport default {\r\n  setup,\r\n  terminate,\r\n  on,\r\n  off,\r\n  emit\r\n};\r\n\r\nfunction setup() {\r\n  socket = io(BASE_URL);\r\n}\r\n\r\nfunction terminate() {\r\n  socket = null;\r\n}\r\n\r\nfunction on(eventName, cb) {\r\n  socket.on(eventName, cb);\r\n}\r\n\r\nfunction off(eventName, cb) {\r\n  socket.off(eventName, cb);\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n  socket.emit(eventName, data);\r\n}\r\n","\r\nimport { Button, Checkbox, Dialog, FormControl, FormControlLabel, FormGroup, FormLabel, IconButton, ListItemIcon, TextField } from '@material-ui/core'\r\nimport { CloseOutlined } from '@material-ui/icons'\r\nimport React, { Component } from 'react'\r\nimport { templateService } from '../../services/templateService'\r\nimport TableChartOutlinedIcon from '@material-ui/icons/TableChartOutlined';\r\n\r\n\r\nexport class CreateTemplate extends Component {\r\n\r\n    state = {\r\n        isOpen: false,\r\n        includeAttachments: true,\r\n        includeChecklists: true,\r\n        includeLabels: true,\r\n        templateName: ''\r\n\r\n    }\r\n\r\n\r\n    onOpen = () => {\r\n        this.setState({ isOpen: true })\r\n    }\r\n\r\n    onClose = () => {\r\n        this.setState({ isOpen: false })\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        this.setState({ templateName: ev.target.value })\r\n    }\r\n\r\n    createTemplateFromBoard = async () => {\r\n        await templateService.createTemplateFromBoard(this.props.board, this.state.templateName, this.state.includeAttachments, this.state.includeChecklists, this.state.includeLabels)\r\n        this.props.history.push('/templates')\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({ [event.target.name]: event.target.checked });\r\n    };\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"open-template-button\" onClick={this.onOpen}><ListItemIcon><TableChartOutlinedIcon /></ListItemIcon> <span>Create template</span></div>\r\n                <Dialog open={this.state.isOpen} onClose={this.onClose} onBackdropClick={this.onClose}>\r\n                    <div className=\"create-template\">\r\n                        <div className=\"create-template-header\">\r\n                            <div></div>\r\n                            <div><h6>Create Template</h6></div>\r\n                            <IconButton onClick={this.onClose}>\r\n                                <CloseOutlined />\r\n                            </IconButton>\r\n                        </div>\r\n                        <div className=\"create-template-form\">\r\n                            <div className=\"name\">\r\n                                <span>Give your template a name</span>\r\n                                <TextField value={this.state.templateName} onChange={this.onChange} label=\"Template name\" variant=\"outlined\" />\r\n                            </div>\r\n\r\n                            <div className=\"checkboxes\">\r\n                                <FormControl>\r\n                                    <FormLabel component=\"legend\">Which items would you like to export to the template?</FormLabel>\r\n                                    <FormGroup>\r\n                                        <FormControlLabel\r\n                                            control={<Checkbox checked={this.state.includeAttachments} onChange={this.handleChange} name=\"includeAttachments\" />}\r\n                                            label=\"Attachments\"\r\n                                        />\r\n                                        <FormControlLabel\r\n                                            control={<Checkbox checked={this.state.includeChecklists} onChange={this.handleChange} name=\"includeChecklists\" />}\r\n                                            label=\"Checklists\"\r\n                                        />\r\n                                        <FormControlLabel\r\n                                            control={<Checkbox checked={this.state.includeLabels} onChange={this.handleChange} name=\"includeLabels\" />}\r\n                                            label=\"Labels\"\r\n                                        />\r\n                                    </FormGroup>\r\n                                </FormControl>\r\n                            </div>\r\n                            <div className=\"confirm\">\r\n                                <Button onClick={this.createTemplateFromBoard}>Create Template</Button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Drawer, Divider, IconButton, List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport WallpaperOutlinedIcon from '@material-ui/icons/WallpaperOutlined';\r\nimport ArchiveOutlinedIcon from '@material-ui/icons/ArchiveOutlined';\r\nimport LabelOutlinedIcon from '@material-ui/icons/LabelOutlined';\r\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\r\nimport AssessmentOutlinedIcon from '@material-ui/icons/AssessmentOutlined';\r\nimport FormatListBulletedOutlinedIcon from '@material-ui/icons/FormatListBulletedOutlined';\r\nimport { AboutBoard } from './AboutBoard'\r\nimport { ChangeBackground } from './ChangeBackground'\r\nimport { SideArchive } from './SideArchive'\r\nimport { ActivityLog } from './ActivityLog'\r\nimport { LabelPanel } from './LabelPanel';\r\nimport { CreateTemplate } from './CreateTemplate';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nexport class _Sidebar extends Component {\r\n    state = { selectedMenuOpt: null }\r\n    onSetMenuOpt = (selectedMenuOpt) => {\r\n        this.setState({ selectedMenuOpt });\r\n    }\r\n    DynamicCmp = () => {\r\n        const { selectedMenuOpt } = this.state;\r\n        switch (selectedMenuOpt) {\r\n            case 'about':\r\n                return <AboutBoard isShowing={selectedMenuOpt === 'about'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />;\r\n            case 'changeBG':\r\n                return <ChangeBackground isShowing={selectedMenuOpt === 'changeBG'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />\r\n            case 'archive':\r\n                return <SideArchive isShowing={selectedMenuOpt === 'archive'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />\r\n            case 'labels':\r\n                return <LabelPanel isShowing={selectedMenuOpt === 'labels'}\r\n                    onSetMenuOpt={this.onSetMenuOpt} />\r\n            case null:\r\n                return <React.Fragment></React.Fragment>\r\n            default:\r\n                return <React.Fragment></React.Fragment>\r\n        }\r\n    }\r\n    render() {\r\n        const { board, isSidebarShowing, onToggleSidebar } = this.props;\r\n        const anchor = 'right';\r\n        return (\r\n            <div className=\"sidebar-container\">\r\n                <Drawer className=\"sidebar\"\r\n                    anchor={anchor}\r\n                    open={isSidebarShowing}\r\n                    BackdropProps={{ hideBackdrop: true }}\r\n                    variant={\"persistent\"}\r\n                    onClose={() => onToggleSidebar(false)}>\r\n                    <div className=\"sidebar-header\">\r\n                        <h4>MENU</h4>\r\n                        <IconButton size=\"small\" onClick={() => onToggleSidebar(false)}>\r\n                            <CloseOutlinedIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <List>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('about') }}>\r\n                            <ListItemIcon><InfoOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>About this board</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('changeBG') }}>\r\n                            <ListItemIcon><WallpaperOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Change background</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" component={Link} to={`/analysis/${board._id}/`}>\r\n                            <ListItemIcon><AssessmentOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Board analysis</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('archive') }}>\r\n                            <ListItemIcon><ArchiveOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Archive</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\" onClick={() => { this.onSetMenuOpt('labels') }}>\r\n                            <ListItemIcon><LabelOutlinedIcon /></ListItemIcon>\r\n                            <ListItemText>Labels</ListItemText>\r\n                        </ListItem>\r\n                        <ListItem button className=\"menu-btn\">\r\n                            <CreateTemplate history={this.props.history} board={this.props.board} />\r\n                        </ListItem>\r\n                    </List>\r\n                    <Divider />\r\n                    <h5><FormatListBulletedOutlinedIcon size=\"small\" />ACTIVITY LOG</h5>\r\n                    <ActivityLog activities={board.activities} boardId={board._id} />\r\n                </Drawer>\r\n\r\n                {this.DynamicCmp()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\n\r\nexport const Sidebar = connect(mapStateToProps)(_Sidebar);","import { CircularProgress } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { BoardHeader } from '../cmps/BoardHeader/BoardHeader';\r\nimport { CardDetails } from '../cmps/CardCmps/CardDetails';\r\nimport { GroupList } from '../cmps/GroupList';\r\nimport { Sidebar } from '../cmps/Sidebar/Sidebar';\r\nimport { loadBoard, onSetFilterBy, setStyle, resetBoard } from '../store/actions/boardActions';\r\nimport socketService from '../services/socketService.js'\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { detailedDiff } from 'deep-object-diff';\r\n\r\n\r\nclass _Board extends Component {\r\n\r\n  state = {\r\n    isSidebarShowing: false,\r\n    lastReceivedUpdateAt: null\r\n  }\r\n\r\n  async componentDidMount() {\r\n    \r\n    // await this.props.loadBoard('5f6a0f6e973d861c5d72eb3f')\r\n    const boardId = this.props.match.params.id\r\n    socketService.setup()\r\n    try {\r\n      await this.props.loadBoard(boardId)\r\n      this.props.setStyle(this.props.board.style)\r\n      socketService.on('init board', () => console.log(this.props.board._id))\r\n      socketService.emit('entered-board', this.props.board._id)\r\n      socketService.on('board-updated', async updatedBoard => {\r\n        \r\n        const prevBoard = JSON.parse(JSON.stringify(this.props.board))\r\n        await this.props.loadBoard(updatedBoard._id)\r\n        if (prevBoard.style !== this.props.board.style) this.props.setStyle(this.props.board.style)\r\n        this.showUpdateMessage(prevBoard)\r\n      })\r\n    } catch (err) {\r\n      toast.error('Oops! we seem to be missing the board you\\'re looking for. going back to board selection.', {\r\n        position: \"bottom-right\",\r\n        autoClose: 3500,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      setTimeout(() => {\r\n        this.props.history.push('/board')\r\n      }, 1000)\r\n    }\r\n\r\n  }\r\n\r\n\r\n  // componentDidUpdate(prevProps) {\r\n  //   if (prevProps.board.groups !== this.props.board.groups) {\r\n  //     const differ = detailedDiff(prevProps.board.groups, this.props.board.groups)\r\n  //     console.log(differ)\r\n  //   }\r\n  // }\r\n\r\n\r\n  showUpdateMessage = (prevBoard) => {\r\n    // this details the difference between the previous board and the current board\r\n    const differ = detailedDiff(prevBoard, this.props.board)\r\n    // if there are no differences - return\r\n    if (!Object.keys(differ.added).length && !Object.keys(differ.deleted).length && !Object.keys(differ.updated).length) return console.log('nothing to update')\r\n\r\n    // if there are differences - sets the last received update time\r\n    this.setState({ lastReceivedUpdateAt: Date.now() })\r\n\r\n    // toast.success('The board has been updated!', {\r\n    //   position: \"bottom-right\",\r\n    //   autoClose: 2000,\r\n    //   hideProgressBar: false,\r\n    //   closeOnClick: true,\r\n    //   pauseOnHover: true,\r\n    //   draggable: true,\r\n    //   progress: undefined,\r\n    // });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    \r\n      socketService.off('board-updated')\r\n      socketService.terminate()\r\n    \r\n    this.props.resetBoard()\r\n  }\r\n\r\n\r\n  getBoardFromParams = async () => {\r\n    const boardId = this.props.match.params.id\r\n    try {\r\n      await this.props.loadBoard(boardId)\r\n      socketService.on('init board', () => console.log('init board',this.props.board._id))\r\n      this.props.setStyle(this.props.board.style)\r\n    } catch (err) {\r\n      toast.error('Oops! we seem to be missing the board you\\'re looking for. going back to board selection.', {\r\n        position: \"bottom-right\",\r\n        autoClose: 3500,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      setTimeout(() => {\r\n        this.props.history.push('/board')\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  onToggleSidebar = (isSidebarShowing) => {\r\n    this.setState({ isSidebarShowing });\r\n  }\r\n\r\n  onFilter = (filterBy) => {\r\n    this.props.onSetFilterBy(this.props.board, filterBy)\r\n  }\r\n\r\n  onAddGroup = (txt) => {\r\n    return txt\r\n  }\r\n\r\n  render() {\r\n\r\n    const { board } = this.props\r\n    if (!board) return <div className=\"board-container\"><CircularProgress /></div>\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        {(this.props.match.params.cardId) ? <CardDetails cardId={this.props.match.params.cardId} boardId={this.props.match.params.id} history={this.props.history} /> : <div></div>}\r\n        <div className=\"board-container\">\r\n          <BoardHeader title={board.title}\r\n            members={board.members}\r\n            onToggleSidebar={this.onToggleSidebar}\r\n            onFilter={this.onFilter}\r\n            style={board.style}\r\n            users={this.props.allUsers}\r\n            lastUpdate={this.state.lastReceivedUpdateAt}\r\n          />\r\n\r\n          <Sidebar board={board} history = {this.props.history}\r\n            isSidebarShowing={this.state.isSidebarShowing}\r\n            onToggleSidebar={this.onToggleSidebar} />\r\n\r\n          {(board.groups) ? <GroupList style={board.style} onAddGroup={this.onAddGroup} groups={board.groups} /> : <CircularProgress />}\r\n\r\n          </div>\r\n\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardReducer.board,\r\n    filterBy: state.boardReducer.filterBy\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  loadBoard,\r\n  onSetFilterBy,\r\n  setStyle,\r\n  resetBoard\r\n\r\n};\r\n\r\nexport const Board = connect(mapStateToProps, mapDispatchToProps)(_Board);\r\n","\r\nimport React, { Component } from 'react'\r\n\r\nexport class NewBoardColor extends Component {\r\n    render() {  \r\n              \r\n        return (\r\n            <div className={`new-board-color ${this.props.isSelected ? 'colorSelected' : ''}`} \r\n            style={{ backgroundColor: `${this.props.color}` }}\r\n                onClick={()=>this.props.onSetColor(this.props.color) }\r\n            ></div>\r\n        )\r\n    }\r\n}\r\n\r\n","export const allBoardColors = [\r\n    {\r\n    \"id\": \"bc101\",\r\n    \"name\": \"green\",\r\n    \"color\": \"#519839\"\r\n}, {\r\n    \"id\": \"bc102\",\r\n    \"name\": \"yellow\",\r\n    \"color\": \"#D29034\"\r\n}, {\r\n    \"id\": \"bc103\",\r\n    \"name\": \"blue\",\r\n    \"color\": \"#0079BF\"\r\n}, {\r\n    \"id\": \"bc104\",\r\n    \"name\": \"brown\",\r\n    \"color\": \"#B04632\"\r\n}, {\r\n    \"id\": \"bc105\",\r\n    \"name\": \"purple\",\r\n    \"color\": \"#89609E\"\r\n}, {\r\n    \"id\": \"bc106\",\r\n    \"name\": \"pink\",\r\n    \"color\": \"#CD5A91\"\r\n}, {\r\n    \"id\": \"bc107\",\r\n    \"name\": \"lightGreen\",\r\n    \"color\": \"#4BBF6B\"\r\n}, {\r\n    \"id\": \"bc108\",\r\n    \"name\": \"teal\",\r\n    \"color\": \"#49A9D7\"\r\n}]","\r\n\r\nimport React, { Component } from 'react'\r\nimport { NewBoardColor } from './NewBoardColor'\r\nimport { connect } from 'react-redux';\r\nimport { allBoardColors } from '../../assets/bgColors/bgColors';\r\nimport { addNewBoard, loadBoard, setDefaultStyle } from '../../store/actions/boardActions';\r\nimport {  IconButton } from '@material-ui/core';\r\nimport { CloseOutlined } from '@material-ui/icons';\r\n\r\nexport class _AddNewBoard extends Component {\r\n\r\n    state = {\r\n        selectedColor: null,\r\n        newBoardName: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ selectedColor: null, newBoardName: '' })\r\n    }\r\n\r\n    onSetColor = (color) => {\r\n        this.setState({ selectedColor: color })\r\n    }\r\n\r\n    isSelected(color) {\r\n        if (this.state.selectedColor === color) return true\r\n        else return false\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        this.setState({ newBoardName: ev.target.value })\r\n    }\r\n\r\n    onSubmit = async (ev) => {\r\n        ev.preventDefault()\r\n        const boardColor = this.state.selectedColor\r\n        const boardName = this.state.newBoardName\r\n        if (!boardName) return // add an error message when no name has been entered\r\n        const newBoard = await this.props.addNewBoard(boardName, boardColor)\r\n        this.props.redirectPath(newBoard._id)\r\n        // await this.props.loadBoard(newBoard._id)\r\n        // this.props.setDefaultStyle()\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            \r\n                <div className=\"add-board-container\">\r\n                    <div className=\"notification-preview-header\">\r\n                        <div></div>\r\n                        <div><h6>Create Board</h6></div>\r\n                        <IconButton onClick={this.props.onCloseModal}>\r\n                            <CloseOutlined />\r\n                        </IconButton>\r\n                    </div>\r\n                    <input onChange={this.handleChange} type=\"text\" placeholder=\"New Board's Name\" autoFocus />\r\n                    {/* description field */}\r\n                    <div className=\"new-board-colors-container\">\r\n                        {\r\n                            allBoardColors.map(boardColor => {\r\n                                return <NewBoardColor\r\n                                    color={boardColor.color}\r\n                                    key={boardColor.id}\r\n                                    onSetColor={this.onSetColor}\r\n                                    isSelected={this.isSelected(boardColor.color)}\r\n                                />\r\n                            })\r\n                        }\r\n                    </div>\r\n                    <button onClick={this.onSubmit}>Add New Board</button>\r\n                </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\n// colors are now imported from another file\r\n// need to remove this line and only bring the board\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // boardColors: state.boardReducer.board.boardColors,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    addNewBoard,\r\n    loadBoard,\r\n    setDefaultStyle\r\n}\r\n\r\nexport const AddNewBoard = connect(mapStateToProps, mapDispatchToProps)(_AddNewBoard)\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { Drawer, ClickAwayListener } from '@material-ui/core'\r\nimport logo from '../assets/icons/favicon.png'\r\n\r\nimport { Formik, Field, Form } from 'formik';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux';\r\nimport { loadUser } from '../store/actions/userActions';\r\n\r\n\r\nexport class _LoginDrawer extends Component {\r\n\r\n\r\n    state = {\r\n        loginOrSignup: 'login',\r\n        credentials:{}\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        console.log(this.props.loggedInUser)\r\n        console.log(prevProps.loggedInUser)\r\n    }\r\n    \r\n\r\n    handleChange=(ev)=>{\r\n        const target = ev.target\r\n        const credentials = { ...this.state.credentials, [target.name]: target.value}\r\n        this.setState({ credentials }, ()=> console.log(this.state.credentials))\r\n    }\r\n\r\n    setSignup=()=>{\r\n        this.setState({ loginOrSignup: 'signup' })\r\n    }\r\n\r\n    setLogin=()=>{\r\n        this.setState({ loginOrSignup: 'login' })\r\n    }\r\n\r\n    onSubmit = async (ev)=>{\r\n        ev.preventDefault()\r\n        console.log(this.state.credentials);\r\n        this.props.loadUser(this.state.credentials)\r\n    }\r\n\r\n    render() {\r\n        console.log(this.props.loggedInUser)\r\n\r\n        return (\r\n            <ClickAwayListener onClickAway={ this.props.hideLoginDrawer }>\r\n                <div className=\"login-container\">\r\n                    <Drawer \r\n                        anchor=\"right\"\r\n                        open={this.props.isShowing}\r\n                        BackdropProps={{ showBackdrop: true }}\r\n                        variant={\"persistent\"}>\r\n                            <div className=\"login-form-container\">\r\n                                <img className=\"login-logo\" src={logo} alt=\"\" />\r\n                                <h4>Welcome to Opus</h4>\r\n\r\n                            {this.state.loginOrSignup === 'login' &&\r\n                                <Formik \r\n                                    initialValues={{ email: '', password: '' }}\r\n                                    validate={values => {\r\n                                        const errors = {};\r\n                                        if (!values.email) { errors.email = 'Required'; } \r\n                                        else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) \r\n                                            { errors.email = 'Invalid email address'; } return errors; }} onSubmit={ this.onSubmit }>\r\n                                    {({handleSubmit,isSubmitting,}) => (\r\n                                        <form className=\"inner-form-container\" onSubmit={this.onSubmit}>\r\n                                            <input type=\"email\" name=\"email\" onChange={this.handleChange} placeholder=\"Email address\" autoComplete=\"off\"/>\r\n                                            <input type=\"password\" name=\"password\" onChange={this.handleChange} placeholder=\"Password\" autoComplete=\"off\" />\r\n                                            <button type=\"submit\" disabled={isSubmitting}>Log in</button>\r\n                                        </form>\r\n                                        )}\r\n                                </Formik>\r\n                            }\r\n\r\n                            {this.state.loginOrSignup === 'signup' &&\r\n                                <Formik \r\n                                    initialValues={{ email: '', password: '' }}\r\n                                    validate={values => {\r\n                                        const errors = {};\r\n                                        if (!values.email) { errors.email = 'Required'; } \r\n                                        else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) \r\n                                            { errors.email = 'Invalid email address'; } return errors; }} onSubmit={ this.onSubmit }>\r\n                                    {({handleSubmit,isSubmitting,}) => (\r\n                                        <form className=\"inner-form-container\" onSubmit={this.onSubmit}>\r\n                                            <input type=\"text\" name=\"name\" onChange={this.handleChange} placeholder=\"Full name\" autoComplete={false}/>\r\n                                            <input type=\"email\" name=\"email\" onChange={this.handleChange} placeholder=\"Email address\" autoComplete=\"off\"/>\r\n                                            <input type=\"password\" name=\"password\" onChange={this.handleChange} placeholder=\"Password\" autoComplete=\"off\" />\r\n                                            <button type=\"submit\" disabled={isSubmitting}>Sign Up</button>\r\n                                        </form>\r\n                                        )}\r\n                                </Formik>\r\n                            }\r\n\r\n                            </div>\r\n                        {(this.state.loginOrSignup === 'login') ? <button className=\"signup-btn\" onClick={this.setSignup}>Sign up</button>:\r\n                            <button className=\"signup-btn\" onClick={this.setLogin}>Log in</button>\r\n                        }  \r\n                    </Drawer>\r\n                </div>\r\n            </ClickAwayListener>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n        loadUser\r\n}\r\n\r\nexport const LoginDrawer = connect(mapStateToProps, mapDispatchToProps)(_LoginDrawer);","import { Avatar, CircularProgress } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport userService from '../../services/userService'\r\nimport { updateUser } from '../../store/actions/userActions'\r\nimport { CardImgUpload } from '../CardCmps/CardImgUpload'\r\n\r\nclass _UserDetails extends Component {\r\n\r\n    state = {\r\n        username: '',\r\n        fullName: '',\r\n        imgUrl: '',\r\n        id: null,\r\n        isUploadZoneOpen: false,\r\n        isUploading: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getUserDetailsFromProps()\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.loggedInUser !== this.props.loggedInUser) {\r\n            this.getUserDetailsFromProps()\r\n        }\r\n    }\r\n\r\n    setUploading = () => {\r\n        return new Promise(res => {\r\n            this.setState({ isUploading: true }, () => res(true))\r\n        })\r\n    }\r\n\r\n    onAddImage = async (file) => {\r\n        await this.setUploading()\r\n        const user = await userService.getById(this.state.id)\r\n        user.imgUrl = file\r\n        \r\n        await this.props.updateUser(user)\r\n        this.setState({imgUrl:file,isUploading:false})\r\n    }\r\n\r\n\r\n    toggleUploadDropzone = () => {\r\n        if (this.state.isUploadZoneOpen) return this.setState({ isUploadZoneOpen: false })\r\n        return this.setState({ isUploadZoneOpen: true })\r\n    }\r\n    getUserDetailsFromProps = () => {\r\n        const user = this.props.loggedInUser\r\n        if (!user) return\r\n        if (user.imgUrl) this.testImage(user.imgUrl, this.setImgResult)\r\n        this.setState({ username: user.userName, fullName: user.fullName, id: user._id })\r\n    }\r\n\r\n\r\n    testImage = (url, callback, timeout = 5000) => {\r\n\r\n        var timedOut = false, timer;\r\n        var img = new Image();\r\n        img.onerror = img.onabort = function () {\r\n            if (!timedOut) {\r\n                clearTimeout(timer);\r\n                callback(url, \"error\");\r\n            }\r\n        };\r\n        img.onload = function () {\r\n            if (!timedOut) {\r\n                clearTimeout(timer);\r\n                callback(url, \"success\");\r\n            }\r\n        };\r\n        img.src = url;\r\n        timer = setTimeout(function () {\r\n            timedOut = true;\r\n            // reset .src to invalid URL so it stops previous\r\n            // loading, but doesn't trigger new load\r\n            img.src = \"//!!!!/test.jpg\";\r\n            callback(url, \"timeout\");\r\n        }, timeout);\r\n    }\r\n\r\n\r\n    getInitials(name) {\r\n        if (!name) return\r\n        const newName = name.split(' ')\r\n        const firstLetter = newName[0].charAt(0).toUpperCase()\r\n        const secondLetter = newName[1].charAt(0).toUpperCase()\r\n        const initials = firstLetter + secondLetter\r\n        return initials\r\n    }\r\n\r\n    setImgResult = (url, res) => {\r\n        if (res === 'success') this.setState({ imgUrl: url })\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.username) return <React.Fragment />\r\n        return (\r\n            <div className=\"user-profile-container\">\r\n                <div className=\"user-profile\">\r\n                    <div className=\"user-img-container\">\r\n                        <CardImgUpload onAddImage={this.onAddImage} setUploading={this.setUploading} toggleOpen={this.toggleUploadDropzone} isOpen={this.state.isUploadZoneOpen} />\r\n                        <div className=\"user-img\">\r\n                            {(this.state.isUploading) ? <CircularProgress style={{width:'144px',height:'144px'}}/> : (!this.state.imgUrl) ? <Avatar onClick={this.toggleUploadDropzone} className=\"user-details-avatar\" style={{ width: '144px', height: '144px' }}>{this.getInitials(this.state.fullName)}</Avatar> : <img src={this.state.imgUrl} onClick={this.toggleUploadDropzone} alt=\"User\" />}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"user-details-container\">\r\n                        <h5>{this.state.username}</h5>\r\n                        <div>{this.state.fullName}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.userReducer.user\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateUser\r\n\r\n};\r\n\r\nexport const UserDetails = connect(mapStateToProps, mapDispatchToProps)(_UserDetails);\r\n","import { CircularProgress, InputLabel, NativeSelect } from '@material-ui/core'\r\nimport { ActivityLog } from '../Sidebar/ActivityLog'\r\n\r\n\r\nimport React, { Component } from 'react'\r\n\r\nexport class UserActivities extends Component {\r\n\r\n    state = {\r\n        selectedBoard: null,\r\n        boards: null,\r\n        activities: null\r\n    }\r\n\r\n\r\n\r\n    componentDidMount() {\r\n        this.getActivitiesFromProps()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.activities !== this.props.activities) {\r\n            this.getActivitiesFromProps()\r\n        }\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const selection = ev.target.value\r\n        if (selection === 'All') {\r\n            this.setState({ selectedBoard: null })\r\n        } else {\r\n            this.setState({ selectedBoard: selection })\r\n        }\r\n    }\r\n\r\n    getActivitiesFromProps = () => {\r\n        if (this.props.activities) {\r\n\r\n            let activities = this.props.activities.map(activity => activity.activity)\r\n            this.setState({ activities }, () => {\r\n                \r\n                this.getBoardList()\r\n                \r\n            })\r\n        }\r\n    }\r\n\r\n    getBoardList = () => {\r\n        const uniqueIds = {}\r\n        this.props.activities.forEach(activity => {\r\n            uniqueIds[activity.board.id] = activity.board\r\n        })\r\n        const uniqueBoards = Object.values(uniqueIds)\r\n\r\n        this.setState({ boards: uniqueBoards })\r\n    }\r\n\r\n    getFilteredActivites = () => {\r\n        var activities;\r\n        if (!this.state.selectedBoard) {\r\n            activities = this.state.activities\r\n        } else {\r\n            activities = this.state.activities.filter(activity => activity.boardId === this.state.selectedBoard)\r\n        }\r\n        \r\n        return activities\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.boards) return <CircularProgress />\r\n        return (\r\n            <div className=\"user-activities\">\r\n                <div className=\"board-filter\">\r\n                <InputLabel id=\"board-filter\">Filter by board</InputLabel>\r\n                    <NativeSelect id=\"board-filter\" onChange={this.onChange} label=\"Filter by board\">\r\n                        <option value=\"All\">All</option>\r\n                        {this.state.boards.map((board,idx) => <option key={idx} value={board.id}>{board.title}</option>)}\r\n                    </NativeSelect>\r\n                </div>\r\n                <div className=\"activity-log-container\">\r\n                    <ActivityLog activities={this.getFilteredActivites()} displayMode=\"user\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\nexport function UserCardsPreview({ board, cards, groups, displayArchived,onSelectBoard }) {\r\n\r\n    if (!displayArchived && board.isArchived) return <React.Fragment />\r\n\r\n    return (\r\n\r\n        <div className=\"user-board\" style={{backgroundImage:board.style.bgImg}}>\r\n            <div className=\"user-board-header\" style={{color:board.style.fontClr}}>\r\n                <h3>{board.title}</h3>\r\n            </div>\r\n            <div className=\"user-cards-preview\">\r\n                {(!cards || !cards.length) ? (<div className=\"user-cards-none\">No cards assigned to you in this boards </div>)\r\n                    : cards.map((card, idx) => {\r\n                        const cardCreatedAt = new Date(card.createdAt)\r\n                        return (<div key={card.id} onClick={() => onSelectBoard(`/board/${board.id}/${card.id}`)} className=\"user-card-preview\">\r\n                            <div className=\"user-card-header\">\r\n                                <div><h5>{card.title}</h5></div>\r\n                                <div><small>In group {groups[idx].title}</small></div>\r\n                            </div>\r\n                            <div className=\"user-card-details\">\r\n                            <div>{card.description}</div>\r\n                            <div>Created at {cardCreatedAt.toLocaleString()}</div>\r\n                            {(!card.dueDate) ? <React.Fragment /> : <div>Card due by {card.dueDate}</div>}\r\n                            </div>\r\n                        </div>)\r\n                    })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { CircularProgress } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\nimport { UserCardsPreview } from './UserCardsPreview'\r\n\r\nexport class UserCards extends Component {\r\n\r\n    state = {\r\n        displayArchived: false\r\n\r\n    }\r\n\r\n    onSelectBoard = (path) => {\r\n        this.props.onCloseUserDetails()\r\n        this.props.history.push(path)\r\n    }\r\n\r\n    render() {\r\n        \r\n        if (!this.props.userData) return <CircularProgress />\r\n        const entries = this.props.userData\r\n        return (\r\n            <div className=\"user-cards-container\">\r\n                <div className=\"user-boards\">\r\n                    {(entries.length) ? entries.map((entry,idx) => <UserCardsPreview key={idx} onSelectBoard={this.onSelectBoard} board={entry.board} displayArchived={this.state.displayArchived} cards={entry.cards} groups={entry.groups} />)\r\n                     : <React.Fragment />}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import { BottomNavigation, BottomNavigationAction } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport userService from '../../services/userService';\r\nimport PermIdentityOutlinedIcon from '@material-ui/icons/PermIdentityOutlined';\r\nimport ViewAgendaOutlinedIcon from '@material-ui/icons/ViewAgendaOutlined';\r\nimport FormatListBulletedOutlinedIcon from '@material-ui/icons/FormatListBulletedOutlined';\r\nimport { UserDetails } from './UserDetails';\r\nimport { UserActivities } from './UserActivities';\r\nimport { UserCards } from './UserCards';\r\nimport { withRouter } from 'react-router';\r\n\r\n\r\n\r\nclass _Users extends Component {\r\n\r\n    state = {\r\n        view: 0,\r\n        loggedInUser: null,\r\n        userData: null,\r\n        activities: null\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        console.log(this)\r\n        const loggedInUser = await userService.getLoggedInUser()\r\n        this.setState({loggedInUser}, async() => {\r\n            const userDeatils = await userService.getUserDetails()\r\n            this.setState({userData:userDeatils.userData,activities:userDeatils.userActivities})\r\n        })\r\n    }\r\n    \r\n    setView = (idx) => {\r\n        const view = Math.round(idx)\r\n        this.setState({view})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"users-container\">\r\n                <BottomNavigation\r\n                    className=\"home-nav\"\r\n                    value={this.state.view}\r\n                    onChange={(event, newValue) => {\r\n                        this.setView(newValue);\r\n                    }}\r\n                    showLabels\r\n                >\r\n                    <BottomNavigationAction label=\"Details\" icon={<PermIdentityOutlinedIcon />} />\r\n                    <BottomNavigationAction label=\"Cards\" icon={<ViewAgendaOutlinedIcon />} />\r\n                    <BottomNavigationAction label=\"Activities\" icon={<FormatListBulletedOutlinedIcon />} />\r\n                </BottomNavigation>\r\n                <SwipeableViews onSwitching={this.setView} index={this.state.view} containerStyle={{ height: '100vh' }}>\r\n                    <UserDetails loggedInUser={this.state.loggedInUser} />\r\n                    <UserCards onCloseUserDetails={this.props.onCloseUserDetails} history={this.props.history} userData={this.state.userData}/>\r\n                    <UserActivities activities={this.state.activities} />\r\n                </SwipeableViews>\r\n            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport const Users = withRouter(_Users)","// This contains link to boards (project view) and user details\r\n\r\nimport React, { Component } from 'react'\r\nimport { NavLink, withRouter } from 'react-router-dom'\r\nimport { AddNewBoard } from './BoardHeader/AddNewBoard'\r\nimport logoFutura from '../assets/icons/newLogoFutura.png'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { LoginDrawer } from './LoginDrawer'\r\nimport { loadUser } from '../store/actions/userActions'\r\nimport { MemberPreview } from './BoardHeader/MemberPreview'\r\nimport { Dialog, IconButton } from '@material-ui/core'\r\nimport { Users } from './Users/UsersMain'\r\n\r\n// import { MemberPreview } from './BoardHeader/MemberPreview'\r\nimport userService from '../services/userService'\r\nimport { CloseOutlined } from '@material-ui/icons'\r\n\r\n\r\nexport class _Navbar extends Component {\r\n\r\n    state = {\r\n        isNewBoardModalShown: false,\r\n        isLoginDrawerShown: false,\r\n        isUserDetailsOpen: false,\r\n        loggedInUser: null\r\n    }\r\n\r\n\r\n    toggleModal = () => {\r\n        this.setState({ isNewBoardModalShown: !this.state.isNewBoardModalShown })\r\n    }\r\n\r\n    onCloseModal = () => {\r\n        this.setState({ isNewBoardModalShown: false })\r\n    }\r\n\r\n    showLove = () => {\r\n        alert('Snorelax Loves you 💤🌷')\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ loggedInUser: userService.getLoggedInUser() })\r\n    }\r\n\r\n    \r\n    redirectPath = (id) => {\r\n        this.props.history.replace(`/`)\r\n        this.props.history.replace(`/board/${id}`)\r\n        this.onCloseModal()\r\n    }\r\n\r\n    showLoginDrawer = (ev) => {\r\n        ev.stopPropagation()\r\n        ev.nativeEvent.stopImmediatePropagation();\r\n        this.setState({ isLoginDrawerShown: true })\r\n    }\r\n\r\n    hideLoginDrawer = (ev) => {\r\n        ev.stopPropagation()\r\n        this.setState({ isLoginDrawerShown: false })\r\n    }\r\n\r\n    onOpenUserDetails = () => {\r\n        console.log('open')\r\n        this.setState({ isUserDetailsOpen: true })\r\n    }\r\n\r\n    onCloseUserDetails = () => {\r\n        this.setState({ isUserDetailsOpen: false })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <Dialog open={this.state.isUserDetailsOpen} onClose={this.onCloseUserDetails} onBackdropClick={this.onCloseUserDetails}>\r\n                    <div className=\"user-details-preview-header\">\r\n                        <div></div>\r\n                        <div><h6>User Details</h6></div>\r\n                        <IconButton onClick={this.onCloseUserDetails}>\r\n                            <CloseOutlined />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Users onCloseUserDetails={this.onCloseUserDetails} />\r\n                </Dialog>\r\n                <Dialog open={this.state.isNewBoardModalShown} onClose={this.onCloseModal} onBackdropClick={this.onCloseModal}>\r\n                    <AddNewBoard onCloseModal={this.onCloseModal} redirectPath={this.redirectPath} />\r\n                </Dialog>\r\n                <div className=\"navbar-container\">\r\n                    <div className=\"navbar-left-container\">\r\n                        <div className=\"board-header-btn left\"><NavLink to='/'><span className=\"material-icons\">home</span></NavLink></div>\r\n                        <div className=\"board-header-btn left\"><NavLink to='/board'><span className=\"material-icons\">view_list</span><h4 className=\"boards-text\">Boards</h4></NavLink></div>\r\n                    </div>\r\n\r\n                    <div onClick={this.showLove} style={{ cursor: \"pointer\" }} className=\"header-logo\"><img src={logoFutura} alt=\"best logo ever\" /></div>\r\n\r\n                    <div className=\"navbar-right-container\">\r\n                        {(this.state.loggedInUser) ? <div onClick={this.onOpenUserDetails}><MemberPreview name={this.props.loggedInUser.fullName} imgUrl={this.props.loggedInUser.imgUrl} /></div> : <React.Fragment />}\r\n                        <div className=\"board-header-btn right\" onClick={this.toggleModal}><span className=\"material-icons\">add</span></div>\r\n                        {/* {this.state.isNewBoardModalShown && <AddNewBoard onCloseModal={this.onCloseModal} redirectPath={this.redirectPath} />} */}\r\n\r\n                        {/* <div className=\"board-header-btn login right\"><NavLink to='/login'><h4 className=\"login-text\">Login</h4></NavLink></div> */}\r\n                        {/* <div className=\"board-header-btn login right\" onClick={this.showLoginDrawer}><h4 className=\"login-text\">{(!this.state.loggedInUser || this.state.loggedInUser._id === 'u900') ? 'Login' : 'Logout'}</h4></div>\r\n                        <LoginDrawer isShowing={this.state.isLoginDrawerShown} hideLoginDrawer={this.hideLoginDrawer} /> */}\r\n\r\n                        {(!this.props.loggedInUser) ? <div className=\"board-header-btn login right\" onClick={this.showLoginDrawer}><h4 className=\"login-text\">Login</h4></div> :\r\n                            <MemberPreview img={this.props.loggedInUser.imgUrl} name={this.props.loggedInUser.fullName} />\r\n                        }\r\n                        <LoginDrawer isShowing={this.state.isLoginDrawerShown} hideLoginDrawer={this.hideLoginDrawer} />\r\n\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n// export const Navbar = connect(withRouter)(_Navbar)\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadUser\r\n}\r\n\r\nexport const Navbar = connect(mapStateToProps, mapDispatchToProps)(_Navbar);\r\n\r\n\r\n\r\n// {\r\n//     (!this.props.loggedInUser) ? <div className=\"board-header-btn login right\" onClick={this.showLoginDrawer}><h4 className=\"login-text\">Login</h4></div> :\r\n//     <MemberPreview img={this.props.loggedInUser.imgUrl} name={this.props.loggedInUser.fullName} />\r\n// }\r\n// <LoginDrawer isShowing={this.state.isLoginDrawerShown} hideLoginDrawer={this.hideLoginDrawer} />\r\n","export default __webpack_public_path__ + \"static/media/yaron.4f915c8a.jpeg\";","export default __webpack_public_path__ + \"static/media/elad2.b22a3fd9.jpeg\";","import React from 'react'\r\nimport FacebookIcon from '@material-ui/icons/Facebook';\r\nimport LinkedInIcon from '@material-ui/icons/LinkedIn';\r\nimport EmailIcon from '@material-ui/icons/Email';\r\nimport yaron from '../assets/imgs/yaron.jpeg';\r\nimport elad from '../assets/imgs/elad2.jpeg';\r\nconst logo = require('../assets/imgs/opus.png')\r\n\r\n\r\nexport function Main(props) {\r\n    return (\r\n        <div className=\"main-screen\">\r\n            <section className=\"home\">\r\n                <div className=\"bg\">\r\n                    <div className=\"header\">\r\n                        <img src={logo} alt=\"logo\" />\r\n                        <h1>Welcome To Opus</h1>\r\n                    </div>\r\n                    <p>Opus is a beautiful Kanban style project managment software prefect for keeping track of teams' progress</p>\r\n                    <div onClick={() => props.history.push('/board')} className=\"main-screen-cta\">See a Demo</div>\r\n                </div>\r\n            </section>\r\n            <section className=\"team\">\r\n                <div className=\"text\">\r\n                    <h2>Work as a team</h2>\r\n                    <p>Use Opus' advanced features to assign and keep track of your team's efforts</p>\r\n                </div>\r\n                <div className=\"img\"></div>\r\n            </section>\r\n            <section className=\"info\">\r\n                <div className=\"img\"></div>\r\n                <div className=\"text\">\r\n                    <h2>Get detailed information</h2>\r\n                    <p>You can use Opus to specify what every task entails, and make sure everyone is synced</p>\r\n                </div>\r\n            </section>\r\n            <section className=\"data\">\r\n                <div className=\"text\">\r\n                    <h2>Better understand your progress</h2>\r\n                    <p>Use Opus' extensive data modeling tools to get a glimpse on how your team is doing</p>\r\n                </div>\r\n                <div className=\"img\"></div>\r\n            </section>\r\n            <section className=\"last-cta\">\r\n                <div className=\"img\"></div>\r\n                <div className=\"text\">\r\n                    <h2>What are you waiting for?</h2>\r\n                    <div onClick={() => props.history.push('/board')} className=\"cta\">View the demo now</div>\r\n                </div>\r\n            </section>\r\n            <section className=\"about\">\r\n                <div className=\"about-intro\">\r\n                    <h2>Meet the Team</h2>\r\n                    <p>We are 3 of  &copy;MisterBit Coding Academy alumni that came together and assmebled this project for the Full-Stack Developer course's final sprint</p>\r\n                </div>\r\n                <div className=\"about-cards-container\">\r\n                    <div className=\"about-card\">\r\n                        <div className=\"photo\">\r\n                            <img src={yaron} alt=\"Yaron Lipshitz\" />\r\n                        </div>\r\n                        <h3>Yaron Lipshitz</h3>\r\n                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid vitae molestias omnis sapiente ex ducimus maxime nam ipsum at. Impedit neque quae beatae corrupti doloremque adipisci ut quis! Eaque, assumenda.</p>\r\n                        <div className=\"links-container\">\r\n                            <a href=\"https://www.facebook.com/elad.becker\"><FacebookIcon className=\"facebook-icon\" /></a>\r\n                            <a href=\"https://www.linkedin.com/in/elad-becker-13b4921a6/\"><LinkedInIcon className=\"linkedin-icon\" /></a>\r\n                            <a href=\"mailto:Becker.Elad@gmail.com\"><EmailIcon className=\"mail-icon\" /></a>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"about-card\">\r\n                        <div className=\"photo\">\r\n                            <img src={elad} alt=\"Elad Becker\" />\r\n                        </div>\r\n                        <h3>Elad Becker</h3>\r\n                        <p>\r\n                            Full-Stack Developer<br />\r\n                            Former IDF Intelligence Officer (Maj.)<br />\r\n                            Whiskey Enthisiast\r\n                        </p>\r\n                        <div className=\"links-container\">\r\n                            <a href=\"https://www.facebook.com/elad.becker\"><FacebookIcon className=\"facebook-icon\" /></a>\r\n                            <a href=\"https://www.linkedin.com/in/elad-becker-13b4921a6/\"><LinkedInIcon className=\"linkedin-icon\" /></a>\r\n                            <a href=\"mailto:Becker.Elad@gmail.com\"><EmailIcon className=\"mail-icon\" /></a>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"about-card\">\r\n                        <div className=\"photo\"></div>\r\n                        <h3>Daniel Dante</h3>\r\n                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid vitae molestias omnis sapiente ex ducimus maxime nam ipsum at. Impedit neque quae beatae corrupti doloremque adipisci ut quis! Eaque, assumenda.</p>\r\n                        <div className=\"links-container\">\r\n                            <a href=\"https://www.facebook.com/elad.becker\"><FacebookIcon className=\"facebook-icon\" /></a>\r\n                            <a href=\"https://www.linkedin.com/in/elad-becker-13b4921a6/\"><LinkedInIcon className=\"linkedin-icon\" /></a>\r\n                            <a href=\"mailto:Becker.Elad@gmail.com\"><EmailIcon className=\"mail-icon\" /></a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react';\r\nimport { ToastContainer } from 'react-toastify';\r\n\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n// minified version is also included\r\n// import 'react-toastify/dist/ReactToastify.min.css';\r\n\r\nexport function Notify(props){\r\n  return (\r\n    <div>\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport FacebookIcon from '@material-ui/icons/Facebook';\r\nimport LinkedInIcon from '@material-ui/icons/LinkedIn';\r\nimport EmailIcon from '@material-ui/icons/Email';\r\nimport yaron from '../assets/imgs/yaron.jpeg';\r\nimport elad from '../assets/imgs/elad2.jpeg';\r\nconst logo = require('../assets/imgs/opus.png')\r\n\r\n\r\nexport function Home(props) {\r\n    return (\r\n        <div className=\"main-screen\">\r\n            <section className=\"home\">\r\n                <div className=\"bg\">\r\n                    <div className=\"bg-overlay\">\r\n                        <div className=\"header\">\r\n                            <div className=\"welcome\">\r\n                                <h1>Welcome To</h1>\r\n                                <span><img src={logo} alt=\"logo\" /><h1>!</h1></span>\r\n                            </div>\r\n                        </div>\r\n                        <p>Opus is a beautiful Kanban style project managment software prefect for keeping track of teams' progress</p>\r\n                        <div onClick={() => props.history.push('/board')} className=\"main-screen-cta\">See a Demo</div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section className=\"team\">\r\n                <div className=\"text\">\r\n                    <h2>Work as a team</h2>\r\n                    <p>Use Opus' advanced features to assign and keep track of your team's efforts</p>\r\n                </div>\r\n                <div className=\"img\"></div>\r\n            </section>\r\n            <section className=\"info\">\r\n                <div className=\"img\"></div>\r\n                <div className=\"text\">\r\n                    <h2>Get detailed information</h2>\r\n                    <p>You can use Opus to specify what every task entails, and make sure everyone is synced</p>\r\n                </div>\r\n            </section>\r\n            <section className=\"data\">\r\n                <div className=\"text\">\r\n                    <h2>Better understand your progress</h2>\r\n                    <p>Use Opus' extensive data modeling tools to get a glimpse on how your team is doing</p>\r\n                </div>\r\n                <div className=\"img\"></div>\r\n            </section>\r\n            <section className=\"last-cta\">\r\n                <div className=\"img\"></div>\r\n                <div className=\"text\">\r\n                    <h2>What are you waiting for?</h2>\r\n                    <div onClick={() => props.history.push('/board')} className=\"cta\">View the demo now</div>\r\n                </div>\r\n            </section>\r\n            <section className=\"about\">\r\n                <div className=\"about-intro\">\r\n                    <h2>Meet the Team</h2>\r\n                    <p>We are 3 of  &copy;MisterBit Coding Academy alumni that came together and assmebled <b>OPUS</b> as our Full-Stack Developer course's final hand-in.</p>\r\n\r\n                </div>\r\n                <div className=\"about-cards-container\">\r\n                    <div className=\"about-card\">\r\n                        <div className=\"photo\">\r\n                            <img src={yaron} alt=\"Yaron\" />\r\n                        </div>\r\n                        <h3>Yaron Lipshitz</h3>\r\n                        <p>A jack of all trades with a large scope of experience in different fields. <br/>\r\n                        Let's chat about your next project!</p>\r\n                        <div className=\"links-container\">\r\n                            <a href=\"https://www.facebook.com/yaron.lipshitz.1/\"><FacebookIcon className=\"facebook-icon\" /></a>\r\n                            <a href=\"https://www.linkedin.com/in/yaron-lipshitz-1855bb79/\"><LinkedInIcon className=\"linkedin-icon\" /></a>\r\n                            <a href=\"mailto:lipshitzyaron@gmail.com\"><EmailIcon className=\"mail-icon\" /></a>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"about-card\">\r\n                        <div className=\"photo\">\r\n                            <img src={elad} alt=\"Elad\" />\r\n                        </div>\r\n                        <h3>Elad Becker</h3>\r\n                        <p>\r\n                            Full-Stack Developer<br />\r\n                            Former IDF Intelligence Officer (Maj.)<br />\r\n                            Whiskey Enthusiast\r\n                        </p>\r\n                        <div className=\"links-container\">\r\n                            <a href=\"https://www.facebook.com/elad.becker\"><FacebookIcon className=\"facebook-icon\" /></a>\r\n                            <a href=\"https://www.linkedin.com/in/elad-becker-13b4921a6/\"><LinkedInIcon className=\"linkedin-icon\" /></a>\r\n                            <a href=\"mailto:Becker.Elad@gmail.com\"><EmailIcon className=\"mail-icon\" /></a>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"about-card\">\r\n                        <div className=\"photo\"></div>\r\n                        <h3>Daniel Dante</h3>\r\n                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid vitae molestias omnis sapiente ex ducimus maxime nam ipsum at. Impedit neque quae beatae corrupti doloremque adipisci ut quis! Eaque, assumenda.</p>\r\n                        <div className=\"links-container\">\r\n                            <a href=\"https://www.facebook.com/elad.becker\"><FacebookIcon className=\"facebook-icon\" /></a>\r\n                            <a href=\"https://www.linkedin.com/in/elad-becker-13b4921a6/\"><LinkedInIcon className=\"linkedin-icon\" /></a>\r\n                            <a href=\"mailto:Becker.Elad@gmail.com\"><EmailIcon className=\"mail-icon\" /></a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react'\r\nimport { MemberPreview } from '../BoardHeader/MemberPreview'\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\n\r\n\r\nexport function BoardPreview(props) {\r\n\r\n    const board = props.board\r\n\r\n    if (board.isArchived && !props.displayArchived) return <React.Fragment />\r\n    const createdAt = new Date(board.createdAt).toDateString()\r\n    let lastEdited\r\n    try {\r\n        lastEdited = new Date(board.activities[0].createdAt).toDateString() || \"1123\"\r\n    } catch (err) {\r\n        lastEdited = createdAt\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"board-preview\">\r\n\r\n            <div className=\"board-image\" onClick={() => props.onSelect(board._id)} style={{ backgroundImage: board.style.bgImg, backgroundColor: board.style.boardColor }}>\r\n            <div className=\"remove\" onClick={(ev) => {\r\n                ev.stopPropagation()\r\n                props.onRemove(board._id)\r\n            }}>\r\n                    <DeleteOutlineOutlinedIcon size=\"small\" />\r\n            </div>\r\n                <div className=\"board-overlay\">\r\n                    <h3 style={{ color: board.style.fontClr }}>{board.title}</h3>\r\n                </div>\r\n            </div>\r\n            <div className=\"board-details\">\r\n                <div className=\"board-description\">\r\n                    {board.description}\r\n                </div>\r\n                <div className=\"board-members\">\r\n                    {board.members.map((member, idx) => <MemberPreview key={idx} name={member.fullName} imgUrl={member.imgUrl} />)}\r\n                </div>\r\n                {(board.createdAt && board.createdBy) ? (<React.Fragment><div className=\"board-creator\">\r\n                    Board created by {board.createdBy.fullName} on {createdAt}\r\n                </div>\r\n                    <div className=\"board-last-edited\">\r\n                        Last edited on {lastEdited}\r\n                    </div></React.Fragment>) : <React.Fragment />\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { CircularProgress } from '@material-ui/core'\r\n\r\nimport React, { Component } from 'react'\r\nimport { setDefaultStyle } from '../../store/actions/boardActions'\r\nimport { connect } from 'react-redux'\r\nimport { BoardPreview } from './BoardPreview'\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nexport class _BoardHub extends Component {\r\n\r\n\r\n    componentDidMount() {\r\n        this.props.setDefaultStyle()\r\n\r\n    }\r\n    \r\n    render(){\r\n        \r\n        if (!this.props.boards || this.props.isLoading) return <div className=\"board-hub\"><div className=\"circular-progress-container\"><CircularProgress /></div></div>\r\n        return (\r\n            <div className=\"board-hub\">\r\n                <header>\r\n                    <h1>{this.props.header}</h1>\r\n                </header>\r\n                <section>\r\n                    {(this.props.createBoard) ? <div className=\"new-board-placeholder\" onClick={this.props.onAddBoard} ><div className=\"fake-board\"><AddIcon /></div><div className=\"board-description\">Add new board</div></div> : <React.Fragment />}\r\n                    {this.props.boards.map(board => <BoardPreview key={board._id} onRemove={this.props.onRemove} history={this.props.history} onSelect={this.props.onSelect} board={board} />)}\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    setDefaultStyle\r\n\r\n};\r\nexport const BoardHub = connect(mapStateToProps, mapDispatchToProps)(_BoardHub);\r\n","import { Dialog, IconButton } from '@material-ui/core';\r\nimport React, { Component } from 'react'\r\n\r\nimport { CloseOutlined } from '@material-ui/icons';\r\nimport { Pagination } from '@material-ui/lab';\r\nimport { BoardHub } from './BoardHub';\r\nimport { boardService } from '../../services/boardService';\r\nimport { templateService } from '../../services/templateService';\r\nimport { AddNewBoard } from '../BoardHeader/AddNewBoard';\r\n\r\n\r\nexport class BoardSelection extends Component {\r\n\r\n    state = {\r\n        templatesPage: 0,\r\n        boardsPage: 0,\r\n        boardsPerPage: 2,\r\n        templatesPerPage: 3,\r\n        totalBoardPages: 1,\r\n        totalTemplatePages: 1,\r\n        boards: null,\r\n        templates: null,\r\n        templateLoading: false,\r\n        selectedTemplate: null,\r\n        isCreateTemplateOpen: false,\r\n        isLoading: false,\r\n        isCreateBoardOpen: false\r\n    }\r\n\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevState.boardsPage !== this.state.boardsPage) {\r\n            this.getBoards()\r\n        }\r\n        if (prevState.templatesPage !== this.state.templatesPage) {\r\n            this.getTemplates()\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.getBoards()\r\n        this.getTemplates()\r\n    }\r\n\r\n\r\n    getBoards = async () => {\r\n        const data = await boardService.query({ filter: { isArchived: false }, limit: this.state.boardsPerPage, skip: this.state.boardsPage * this.state.boardsPerPage })\r\n        const totalBoardPages = Math.ceil(data.boardSize / this.state.boardsPerPage)\r\n        \r\n        this.setState({ boards: data.boards, totalBoardPages })\r\n        return Promise.resolve()\r\n    }\r\n\r\n    getTemplates = async () => {\r\n        const data = await templateService.query({ limit: this.state.templatesPerPage, skip: this.state.templatesPage * this.state.templatesPerPage })\r\n        const totalTemplatePages = Math.ceil(data.templateSize / this.state.templatesPerPage)\r\n\r\n        this.setState({ templates: data.templates, totalTemplatePages })\r\n        return Promise.resolve()\r\n    }\r\n\r\n    onSelectBoard = (boardId) => {\r\n        this.props.history.push(`/board/${boardId}`)\r\n    }\r\n\r\n\r\n    onSelectTemplate = async (templateId) => {\r\n        this.setState({ selectedTemplate: templateId, isCreateTemplateOpen: true })\r\n\r\n    }\r\n\r\n    onCloseCreateTemplate = () => {\r\n        this.setState({ selectedTemplate: null, isCreateTemplateOpen: false })\r\n    }\r\n\r\n    onCreateBoardFromTemplate = async (boardName) => {\r\n        this.setState({ templateLoading: true }, async () => {\r\n            const boardId = await templateService.createBoardFromTemplate(this.state.selectedTemplate, boardName)\r\n            this.setState({ templateLoading: false })\r\n            this.props.history.push(`board/${boardId}`)\r\n        })\r\n    }\r\n\r\n    onRemoveBoard = async (boardId) => {\r\n        this.setState({ isLoading: true }, async () => {\r\n            await boardService.archiveBoard(boardId)\r\n            await this.getBoards()\r\n            this.setState({ isLoading: false })\r\n\r\n        })\r\n    }\r\n\r\n    onRemoveTemplate = async (templateId) => {\r\n\r\n        this.setState({ isLoading: true }, async () => {\r\n            await templateService.remove(templateId)\r\n            await this.getTemplates()\r\n            this.setState({ isLoading: false })\r\n        })\r\n    }\r\n\r\n    onChangeTemplatePage = (ev, page) => {\r\n        \r\n        this.setState({ templatesPage: page - 1 })\r\n    }\r\n\r\n    onChangeBoardPage = (ev, page) => {\r\n        \r\n        this.setState({ boardsPage: page - 1 })\r\n    }\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        this.onCreateBoardFromTemplate(ev.target[0].value)\r\n    }\r\n\r\n    onRedirect = (id) => {\r\n        this.onCloseCreateBoard()\r\n        this.props.history.push(`/board/${id}`)\r\n    }\r\n\r\n    onOpenCreateBoard = () => {\r\n        this.setState({isCreateBoardOpen:true})\r\n    }\r\n\r\n    onCloseCreateBoard = () => {\r\n        this.setState({isCreateBoardOpen:false})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <Dialog \r\n                onClose={this.onCloseCreateBoard}\r\n                onBackdropClick={this.onCloseCreateBoard}\r\n                open={this.state.isCreateBoardOpen}\r\n                className=\"add-board-modal\"\r\n                >\r\n                    <AddNewBoard onCloseModal={this.onCloseCreateBoard} redirectPath={this.onRedirect}/>\r\n                </Dialog>\r\n            <Dialog\r\n                    onClose={this.onCloseCreateTemplate}\r\n                    onBackdropClick={this.onCloseCreateTemplate}\r\n                    open={this.state.isCreateTemplateOpen}>\r\n                    <div className=\"create-board-from-template-container\">\r\n                        <div className=\"create-board-header\">\r\n                            <div></div>\r\n                            <div><h6>Create Board</h6></div>\r\n                            <IconButton onClick={this.onCloseCreateTemplate}>\r\n                                <CloseOutlined />\r\n                            </IconButton>\r\n                        </div>\r\n                        <div className=\"form-container\">\r\n                            <span>Enter a name for your board</span>\r\n                        <form onSubmit={this.onSubmit}>\r\n                            <input name=\"title\" type=\"text\"/>\r\n                            <button className=\"save-btn\">Create</button>\r\n                        </form>\r\n                    </div>\r\n                    </div>\r\n                </Dialog>\r\n            <div className=\"board-selector\" >\r\n                <section className=\"boards\">\r\n                    <BoardHub boards={this.state.boards} createBoard={true} onAddBoard={this.onOpenCreateBoard} onSelect={this.onSelectBoard} onRemove={this.onRemoveBoard} header=\"Boards\" />\r\n                    <Pagination count={this.state.totalBoardPages} defaultPage={1} onChange={this.onChangeBoardPage} shape=\"rounded\" />\r\n                </section>\r\n                <section className=\"templates\">\r\n                    <BoardHub boards={this.state.templates} onSelect={this.onSelectTemplate} onRemove={this.onRemoveTemplate} isLoading={this.state.templateLoading} header=\"Templates\" />\r\n                    <Pagination count={this.state.totalTemplatePages} defaultPage={1} onChange={this.onChangeTemplatePage} shape=\"rounded\" />\r\n                </section>\r\n\r\n            </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { loadBoard, setStyle } from '../store/actions/boardActions';\r\nimport { connect } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { Doughnut, HorizontalBar, Bar } from 'react-chartjs-2';\r\n\r\n\r\nexport default class _AnalysisDashboard extends Component {\r\n    async componentDidMount() {\r\n        const boardId = this.props.match.params.id;\r\n        try {\r\n            await this.props.loadBoard(boardId);\r\n            this.props.setStyle(this.props.board.style);\r\n        } catch (err) {\r\n            toast.error('Oops! we seem to be missing the board you\\'re looking for. going back to board selection.', {\r\n                position: \"bottom-right\",\r\n                autoClose: 3500,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n            setTimeout(() => {\r\n                this.props.history.push('/board')\r\n            }, 1000)\r\n        }\r\n    }\r\n    getRndHexColor = () => {\r\n        let n = (Math.random() * 0xfffff * 1000000).toString(16);\r\n        return '#' + n.slice(0, 6);\r\n    }\r\n    getDataForChart = (mapObject) => {\r\n        const rndClrs = Object.keys(mapObject).map(key => this.getRndHexColor())\r\n        return {\r\n            labels: Object.keys(mapObject),\r\n            datasets: [{\r\n                data: Object.values(mapObject),\r\n                backgroundColor: rndClrs,\r\n                hoverBackgroundColor: rndClrs,\r\n            }]\r\n        };\r\n    }\r\n    dashboardNumbers = (board) => {\r\n        if (!board || !board.members || !board.groups) return;\r\n        let numOfMembers = board.members.length;\r\n        let unarchivedCardsCount = 0;\r\n        let archivedCardsCount = 0;\r\n        board.groups.forEach(group => {\r\n            const archivedCards = group.cards.filter(card => card.archivedAt);\r\n            archivedCardsCount += archivedCards.length;\r\n            unarchivedCardsCount += group.cards.length - archivedCards.length;\r\n        })\r\n        const cards = board.groups.reduce((acc, group) => [...acc, ...group.cards], []);\r\n        const todosCount = cards.reduce((acc, card) => {\r\n            if (!card.checklists) return acc;\r\n            card.checklists.forEach(checklist => {\r\n                checklist.todos.forEach(todo => {\r\n                    if (todo.isDone) acc.checked++;\r\n                    acc.total++;\r\n                })\r\n            })\r\n            return acc;\r\n        }, { checked: 0, total: 0 });\r\n        if (todosCount.checked / todosCount.total > 0.75) todosCount.colorClass = 'todos-green';\r\n        if (todosCount.checked / todosCount.total <= 0.5) todosCount.colorClass = 'todos-red';\r\n        console.log(todosCount)\r\n        return { numOfMembers, archivedCardsCount, unarchivedCardsCount, todosCount };\r\n    }\r\n    cardsByGroups = (groups) => {\r\n        if (!groups) return;\r\n        const cardsByGroupsMap = groups.reduce((acc, group) => {\r\n            const unArchivedCards = group.cards.filter(card => !card.archivedAt)\r\n            acc[group.title] = unArchivedCards.length;\r\n            return acc;\r\n        }, {});\r\n        return this.getDataForChart(cardsByGroupsMap);\r\n    }\r\n    cardsByMembers = (board) => {\r\n        if (!board.members) return;\r\n        const cardsByMembersMap = board.members.reduce((acc, member) => {\r\n            let memberCardsCount = 0;\r\n            for (let i = 0; i < board.groups.length; i++) {\r\n                const unArchivedCards = board.groups[i].cards.filter(card => !card.archivedAt)\r\n                for (let j = 0; j < unArchivedCards.length; j++) {\r\n                    if (unArchivedCards[j].members.some(currMember => currMember._id === member._id)) memberCardsCount++;\r\n                }\r\n            }\r\n            acc[member.fullName] = memberCardsCount;\r\n            return acc;\r\n        }, {});\r\n        return {\r\n            data: this.getDataForChart(cardsByMembersMap),\r\n            options: {\r\n                legend: { display: false },\r\n                scales: {\r\n                    xAxes: [{\r\n                        ticks: {\r\n                            beginAtZero: true,\r\n                            min: 0\r\n                        }\r\n                    }]\r\n                }\r\n            }\r\n        };\r\n    }\r\n    timeInGroups = (groups) => {\r\n        if (!groups) return;\r\n        const groupIdNameMap = groups.reduce((acc, group) => {\r\n            acc[group.id] = group.title;\r\n            return acc\r\n        }, {})\r\n        let cards = groups.reduce((acc, group) => {\r\n            return [...acc, ...group.cards];\r\n        }, []);\r\n        cards = cards.filter(card => !card.archivedAt);\r\n        const timeInGroupsMap = cards.reduce((acc, card) => {\r\n            if (!card.timeAnalysis || !card.timeAnalysis.currGroup) return acc;\r\n            const currGroupName = groupIdNameMap[card.timeAnalysis.currGroup.groupId];\r\n            acc[currGroupName] = {};\r\n            const timeSpent = Date.now() - card.timeAnalysis.currGroup.enteredAt;\r\n            acc[currGroupName].time = acc[currGroupName].time ? acc[currGroupName].time + timeSpent : timeSpent;\r\n            acc[currGroupName].count = acc[currGroupName].count ? acc[currGroupName].count + 1 : 1;\r\n            if (!card.timeAnalysis.timeInGroupsMap) return acc;\r\n            for (const groupId in card.timeAnalysis.timeInGroupsMap) {\r\n                const currPastGroupName = groupIdNameMap[groupId];\r\n                acc[currPastGroupName] = acc[currPastGroupName] ? acc[currPastGroupName] : {};\r\n                const timeCardSpentInCurrGroup = card.timeAnalysis.timeInGroupsMap[groupId];\r\n                acc[currPastGroupName].time = acc[currPastGroupName].time ? acc[currPastGroupName].time + timeCardSpentInCurrGroup : timeCardSpentInCurrGroup;\r\n                acc[currPastGroupName].count = acc[currPastGroupName].count ? acc[currPastGroupName].count + 1 : 1;\r\n            }\r\n            return acc;\r\n        }, {})\r\n        const lineData = Object.keys(timeInGroupsMap).map(group => ((timeInGroupsMap[group].time / (1000 * 60 * 60)) / timeInGroupsMap[group].count).toFixed(2));\r\n        const barsData = Object.keys(timeInGroupsMap).map(group => (timeInGroupsMap[group].time / (1000 * 60 * 60)).toFixed(2));\r\n        const clr1 = this.getRndHexColor();\r\n        const clr2 = this.getRndHexColor();\r\n        return {\r\n            data: {\r\n                labels: Object.keys(timeInGroupsMap),\r\n                datasets: [{\r\n                    label: 'Average time in group (Hrs)',\r\n                    type: 'line',\r\n                    data: lineData,\r\n                    fill: false,\r\n                    borderColor: clr1,\r\n                    pointBorderColor: clr1,\r\n                    pointBackgroundColor: clr1,\r\n                    pointHoverBackgroundColor: clr1,\r\n                    pointHoverBorderColor: clr1,\r\n                    yAxisID: 'y-axis-1'\r\n                }, {\r\n                    type: 'bar',\r\n                    label: 'Total hours in Group (Hrs)',\r\n                    data: barsData,\r\n                    fill: false,\r\n                    backgroundColor: clr2,\r\n                    borderColor: clr2,\r\n                    hoverBackgroundColor: clr2,\r\n                    hoverBorderColor: clr2,\r\n                    yAxisID: 'y-axis-1'\r\n                }]\r\n            },\r\n            options: {\r\n                legend: { labels: { backgroundColor: [clr1, clr2] } },\r\n                responsive: true,\r\n                tooltips: { mode: 'label' },\r\n                elements: { line: { fill: false } },\r\n                scales: {\r\n                    xAxes: [{ display: true, gridLines: { display: true } }],\r\n                    yAxes: [\r\n                        {\r\n                            type: 'linear',\r\n                            display: true,\r\n                            position: 'left',\r\n                            id: 'y-axis-1',\r\n                            gridLines: { display: false },\r\n                            labels: { show: true }\r\n                        },\r\n                        {\r\n                            type: 'linear',\r\n                            display: false,\r\n                            position: 'right',\r\n                            id: 'y-axis-2',\r\n                            gridLines: { display: false },\r\n                            labels: { show: true }\r\n                        }\r\n                    ]\r\n                }\r\n            }\r\n        }\r\n    }\r\n    cardsByLabels = (groups, labels) => {\r\n        if (!groups || !labels) return;\r\n        const colorsMap = {\r\n            green: '#61BD4F',\r\n            yellow: '#F2D600',\r\n            orange: '#FF9F1A',\r\n            red: '#EB5A46',\r\n            purple: '#C377E0',\r\n            blue: '#028ad8',\r\n            grey: '#a7a7a7',\r\n            black: '#202020'\r\n        }\r\n        let cards = groups.reduce((acc, group) => [...acc, ...group.cards], []);\r\n        cards = cards.filter(card => !card.archivedAt);\r\n        const labelsMap = labels.reduce((acc, currLabel) => {\r\n            let cardsWithLabelCount = 0;\r\n            cards.forEach(card => {\r\n                if (card.labels.some(label => label.id === currLabel.id)) cardsWithLabelCount++;\r\n            })\r\n            acc[currLabel.id] = { name: currLabel.name, color: currLabel.color, count: cardsWithLabelCount };\r\n            return acc;\r\n        }, {})\r\n        return {\r\n            data: {\r\n                labels: Object.keys(labelsMap).map(label => labelsMap[label].name),\r\n                datasets: [\r\n                    {\r\n                        borderWidth: 1,\r\n                        backgroundColor: Object.keys(labelsMap).map(label => colorsMap[labelsMap[label].color]),\r\n                        strokeColor: \"rgba(220,220,220,0.8)\",\r\n                        highlightFill: \"rgba(220,220,220,0.75)\",\r\n                        highlightStroke: \"rgba(220,220,220,1)\",\r\n                        data: Object.keys(labelsMap).map(label => labelsMap[label].count),\r\n                    }\r\n                ]\r\n            },\r\n            options: {\r\n                legend: { display: false },\r\n                scales: {\r\n                    yAxes: [{\r\n                        ticks: {\r\n                            beginAtZero: true,\r\n                            min: 0\r\n                        }\r\n                    }]\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    render() {\r\n        const { board, style } = this.props;\r\n        if (!board) return <div>Loading...</div>;\r\n        const dashboardNumbers = this.dashboardNumbers(board);\r\n        const cardsByGroups = this.cardsByGroups(board.groups);\r\n        const cardsByMembers = this.cardsByMembers(board);\r\n        const timeInGroups = this.timeInGroups(board.groups);\r\n        const cardsByLabels = this.cardsByLabels(board.groups, board.labels)\r\n        return !board\r\n            ? <div>Loading...</div>\r\n            : <div className=\"page-container\">\r\n                <h2 style={{ color: style.fontClr }}>{board.title} - Data Analysis</h2>\r\n                <div className=\"analysis-dashboard-container\">\r\n                    {dashboardNumbers && <div className=\"chart-container summary-numbers-conatiner\">\r\n                        <div><h3>{dashboardNumbers.numOfMembers}</h3><span>Total Members</span></div>\r\n                        <div>\r\n                            <h3>\r\n                                {dashboardNumbers.unarchivedCardsCount}\r\n                                <span className=\"total\">{` (${dashboardNumbers.archivedCardsCount} archived)`}</span>\r\n                            </h3>\r\n                            <span>Cards On Board</span>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className={dashboardNumbers.todosCount.colorClass}>\r\n                                {`${dashboardNumbers.todosCount.checked}`}\r\n                                <span className=\"total\">{` /${dashboardNumbers.todosCount.total}`}</span>\r\n                            </h3><span>To-Dos Checked</span></div>\r\n                    </div>}\r\n                    {cardsByGroups && <div className=\"chart-container cards-by-group-container\">\r\n                        <h3>Cards Per Group</h3>\r\n                        <Doughnut data={cardsByGroups} />\r\n                    </div>}\r\n                    {cardsByMembers && <div className=\"chart-container cards-by-member-container\">\r\n                        <h3>Cards Per Member</h3>\r\n                        <HorizontalBar data={cardsByMembers.data} options={cardsByMembers.options} />\r\n                    </div>}\r\n                    {timeInGroups && <div className=\"chart-container time-in-groups-container\">\r\n                        <h3>Groups' Time Analysis</h3>\r\n                        <Bar data={timeInGroups.data} options={timeInGroups.options} />\r\n                    </div>}\r\n                    {cardsByLabels && <div className=\"chart-container cards-by-labels-container\">\r\n                        <h3>Labels Summary</h3>\r\n                        <Bar data={cardsByLabels.data} options={cardsByLabels.options} />\r\n                    </div>}\r\n                </div>\r\n            </div>\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.board,\r\n        style: state.boardReducer.style\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    loadBoard,\r\n    setStyle\r\n};\r\n\r\nexport const AnalysisDashboard = connect(mapStateToProps, mapDispatchToProps)(_AnalysisDashboard);","import React, { Component } from 'react';\r\n\r\n\r\nimport './assets/styles/global.scss'\r\nimport { Route, Switch } from 'react-router';\r\n\r\nimport { Board } from './pages/Board';\r\nimport { Navbar } from './cmps/Navbar';\r\nimport userService from './services/userService';\r\nimport { DragDropContext } from 'react-beautiful-dnd'\r\nimport { connect } from 'react-redux';\r\nimport { updateBoard, updatePosition, resetFilterBy, addActivity } from './store/actions/boardActions';\r\n// import { addActivity, updateBoard, updatePosition } from './store/actions/boardActions';\r\n\r\n// import { Login } from './pages/Login';\r\n\r\n// import { Login } from './pages/Login';\r\nimport {Main} from './pages/Main'\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Notify } from './cmps/Notify';\r\nimport { Home } from './pages/Home';\r\nimport { BoardSelection } from './cmps/BoardSelector/BoardSelection';\r\nimport { AnalysisDashboard } from './pages/AnalysisDashboard';\r\nimport { boardService } from './services/boardService';\r\n\r\n\r\n\r\nclass _App extends Component {\r\n\r\n  componentDidMount() {\r\n    userService.loginDefault()\r\n    toast.configure()\r\n  }\r\n\r\n  onDragStart = () => {\r\n    this.props.resetFilterBy(this.props.board._id)\r\n  }\r\n\r\n  onDragEnd = (result) => {\r\n\r\n    const { destination, source, draggableId, type } = result\r\n\r\n    if (!destination) return\r\n    if (destination.droppableId === source.droppableId && destination.index === source.index) return\r\n    if (!draggableId) return\r\n\r\n    if (type === 'card') {\r\n      const startGroupIndex = this.props.board.groups.findIndex(group => group.id === source.droppableId)\r\n      const endGroupIndex = this.props.board.groups.findIndex(group => group.id === destination.droppableId)\r\n\r\n      // moving in the same group\r\n      if (source.droppableId === destination.droppableId) {\r\n\r\n        const currGroup = this.props.board.groups.find(group => group.id === source.droppableId)\r\n        const currCard = currGroup.cards.find(card => card.id === draggableId)\r\n        const newCardsGroup = Array.from(currGroup.cards)\r\n        newCardsGroup.splice(source.index, 1)\r\n        newCardsGroup.splice(destination.index, 0, currCard)\r\n        const newGroup = { ...currGroup, cards: newCardsGroup }\r\n        const newGroups = [...this.props.board.groups]\r\n        newGroups[startGroupIndex] = newGroup\r\n        const newBoard = { ...this.props.board, groups: newGroups }\r\n        this.props.updatePosition(newBoard)\r\n        // this.props.updateBoard(newBoard)\r\n        return\r\n      }\r\n\r\n      // moving between groups\r\n      if (source.droppableId !== destination.droppableId) {\r\n\r\n        const destinationGroup = this.props.board.groups.find(group => group.id === destination.droppableId)\r\n        const formerGroup = this.props.board.groups.find(group => group.id === source.droppableId)\r\n        const currCard = formerGroup.cards.find(card => card.id === draggableId)\r\n        const formerCardIndex = formerGroup.cards.findIndex(card => card.id === draggableId)\r\n        const newCardsArray = Array.from(destinationGroup.cards)\r\n\r\n        // time analysis\r\n        const currCardTime = currCard.timeAnalysis\r\n        if (currCardTime) {\r\n          currCardTime.timeInGroupsMap[currCardTime.currGroup.groupId] =\r\n            currCardTime.timeInGroupsMap[currCardTime.currGroup.groupId] + (Date.now() - currCardTime.currGroup.enteredAt) ||\r\n            (Date.now() - currCardTime.currGroup.enteredAt)\r\n          currCardTime.currGroup = {\r\n            groupId: destinationGroup.id,\r\n            enteredAt: Date.now()\r\n          }\r\n        }\r\n\r\n        newCardsArray.splice(destination.index, 0, currCard)\r\n        formerGroup.cards.splice(formerCardIndex, 1)\r\n\r\n        const newGroups = [...this.props.board.groups]\r\n        newGroups[startGroupIndex] = formerGroup\r\n        newGroups[endGroupIndex].cards = newCardsArray\r\n\r\n        const newBoard = { ...this.props.board, groups: newGroups }\r\n        this.props.updatePosition(newBoard, draggableId)\r\n        // this.props.updateBoard(newBoard)\r\n\r\n        // add activity\r\n        // get the title\r\n        const cardTitle = boardService.getCardTitleById(draggableId, newBoard)\r\n        // build a partial activity\r\n        const partialActivity = {\r\n          \"txt\": 'moved the card',\r\n          \"commentTxt\": '',\r\n          \"card\": {\r\n            \"id\": draggableId,\r\n            \"title\": cardTitle\r\n          }\r\n        }\r\n\r\n        const activity = boardService.createActivity(partialActivity)\r\n        this.props.addActivity(newBoard, activity)\r\n        return\r\n      }\r\n    }\r\n\r\n    if (type === 'group') {\r\n\r\n      const newGroupsOrder = Array.from(this.props.board.groups)\r\n      const currGroup = this.props.board.groups.find(group => group.id === draggableId)\r\n      newGroupsOrder.splice(source.index, 1)\r\n      newGroupsOrder.splice(destination.index, 0, currGroup)\r\n\r\n      const newBoard = {\r\n        ...this.props.board,\r\n        groups: newGroupsOrder\r\n      }\r\n      this.props.updatePosition(newBoard)\r\n      // this.props.updateBoard(newBoard)\r\n      return\r\n\r\n    }\r\n  }\r\n\r\n  // getImgOrBg = ()=>{\r\n  //   if (this.props.style.bgImg) return `backgroundImage: style.bgImg`\r\n  //   else if (this.props.style.boardColor) return `backgroundColor:style.boardColor`\r\n  // }\r\n\r\n  // getStyle = () => {\r\n  //       if (this.props.style.bgImg) return `style={{backgroundImage: style.bgImg, backgroundPosition:'center'}}`\r\n  //       else if (this.props.style.boardColor) return `style{{backgroundColor:style.boardColor,backgroundPosition:'center' }}`\r\n  // }\r\n\r\n\r\n\r\n  render() {\r\n    const { style } = this.props\r\n\r\n    return (\r\n\r\n      (this.props.style)\r\n        ? <DragDropContext onDragEnd={this.onDragEnd} onDragStart={this.onDragStart}>\r\n          <div className=\"app-bg\"\r\n            style={this.props.style.bgImg ? { backgroundImage: style.bgImg, backgroundPosition: 'center' } :\r\n              { backgroundColor: style.boardColor, backgroundPosition: 'center' }}>\r\n            <div className=\"App\">\r\n              <header className=\"App-header\">\r\n                <Route path=\"/\" component={Navbar} />\r\n              </header>\r\n              <main className=\"app-main\">\r\n                <Notify />\r\n                <Switch>\r\n                  <Route path=\"/analysis/:id/\" component={AnalysisDashboard} />\r\n                  <Route path=\"/board/:id/:cardId?\" component={Board} />\r\n                  <Route path=\"/board\" component={BoardSelection} />\r\n                  {/* <Route path=\"/board?/:id?/login\" component={Login} /> */}\r\n                  {/* <Route path=\"/login\" component={Login} /> */}\r\n                  <Route component={Home} path='/' />\r\n                </Switch>\r\n              </main>\r\n            </div>\r\n          </div>\r\n        </DragDropContext>\r\n        : <div>loading</div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    board: state.boardReducer.board,\r\n    style: state.boardReducer.style,\r\n    filterBy: state.boardReducer.filterBy\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  updateBoard,\r\n  updatePosition,\r\n  resetFilterBy,\r\n  addActivity\r\n};\r\n\r\nexport const App = connect(mapStateToProps, mapDispatchToProps)(_App);\r\n\r\n// <div className=\"groups-list-bg\" \r\n// style={{\r\n// backgroundImage: style.bgImg,\r\n// color: style.fontClr\r\n// }}\r\n// >\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","\r\nconst initialState = {\r\n  board: {},\r\n  filterBy: null,\r\n  style: {},\r\n  fullLabel: false\r\n};\r\n\r\nconst defaultStyle = {\r\n  backgroundImage: null\r\n}\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_BOARD':\r\n      return { ...state, board:action.board };\r\n\r\n    case 'FILTER_BY':\r\n      return {...state, filterBy: action}\r\n      \r\n    case 'TOGGLE_FULL_LABEL':\r\n        if (state.fullLabel) return {...state,fullLabel : false}\r\n        return {...state,fullLabel:true}\r\n\r\n    case 'SET_STYLE':\r\n        return{ ...state, style: action.style }\r\n\r\n    case 'SET_DEFAULT_STYLE':\r\n        return {\r\n          ...state,\r\n          style: defaultStyle\r\n        }\r\n\r\n    case 'RESET_FILTER_BY':\r\n        return{\r\n          ...state,\r\n          filterBy: null\r\n        }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","// let localLoggedinUser = null;\r\n// if (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\r\n\r\nlet localLoggedinUser = (sessionStorage.user) ? JSON.parse(sessionStorage.user) : null\r\n\r\nconst initialState = {\r\n  loggedInUser: localLoggedinUser,\r\n  users: []\r\n};\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_USER': \r\n      const loginUser = action.loggedInUser\r\n      return { ...state, loggedInUser: loginUser };\r\n\r\n    case 'USER_REMOVE':\r\n      return {\r\n        ...state,\r\n        users: state.users.filter(user => user._id !== action.userId)\r\n      };\r\n    case 'SET_USERS':\r\n      return { ...state, users: action.users };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport boardReducer from './boardReducer';\r\nimport userReducer from './userReducer'\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    userReducer,\r\n    boardReducer\r\n})\r\n\r\nexport default rootReducer;","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers/rootReducer.js';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(\r\n    rootReducer,\r\n    composeEnhancers(applyMiddleware(thunk))\r\n);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { App } from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n// import './assets/styles/global.scss'\r\nimport { store } from './store/store';\r\n\r\n// const webpack = require('webpack')\r\n\r\n\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <HashRouter>\r\n            <App />\r\n        </HashRouter>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n)\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\n"],"sourceRoot":""}