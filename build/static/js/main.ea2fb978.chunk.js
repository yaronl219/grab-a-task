(this["webpackJsonpgrab-a-task"]=this["webpackJsonpgrab-a-task"]||[]).push([[0],{181:function(e,t,a){"use strict";a.r(t),a.d(t,"cardService",(function(){return s}));var n=a(2),r=a.n(n),o=a(8),c=a(45),i=a(23),s={addCard:function(e,t,a){return l.apply(this,arguments)},createImage:function(e){return{type:"img",id:c.a.makeId(),src:e,title:"Image",createdAt:Date.now()}}};function l(){return(l=Object(o.a)(r.a.mark((function e(t,a,n){var o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=JSON.parse(JSON.stringify(t)),s={id:c.a.makeId(),title:a,description:"",archivedAt:null,members:[],labels:[],createdAt:Date.now(),dueDate:null,attachments:null,byMember:{}},o.groups.map((function(e){return e.id===n?(e.cards.push(s),e):e})),e.next=5,i.a.updateBoard(o);case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},23:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(13),r=(a(30),a(2)),o=a.n(r),c=a(8),i=a(75),s=a(81),l=(a(65),a(45)),u={add:function(e){return p.apply(this,arguments)},query:function(e){return i.a.get("board")},remove:function(e){return i.a.delete("board/".concat(e))},getBoardById:d,updateBoard:m,filter:function(e,t){return h.apply(this,arguments)},addNewBoard:function(e,t){return b.apply(this,arguments)},createActivity:function(e){var t=s.a.getLoggedInUser(),a={id:l.a.makeId(),txt:e.txt,commentTxt:e.commentTxt,createdAt:Date.now(),byMember:{_id:t._id,fullName:t.fullname,imgUrl:t.imgUrl}};return e.card?(a.card={id:e.card.id,title:e.card.title},a):a}};function d(e){return i.a.get("board/".concat(e))}function p(){return(p=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("board",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t._id,e.next=3,i.a.put("board/".concat(a),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(c.a)(o.a.mark((function e(t,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:return r=e.sent,a.txt&&(r.groups=r.groups.map((function(e){var t=Object(n.a)({},e);return t.cards=t.cards.filter((function(e){return e.title.toLowerCase().includes(a.txt)})),t}))),a.labels&&a.labels.length&&(c=a.labels,r.groups=r.groups.map((function(e){var t=Object(n.a)({},e);return t.cards=t.cards.filter((function(e){if(e.labels&&e.labels.find((function(e){var t=e.id;if(t===c.find((function(e){return e===t})))return e})))return e})),t}))),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(c.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),console.log(a),console.log("Finish backend to push new board"),{_id:l.a.makeId(),title:t,isArchived:!1,createdAt:Date.now,createdBy:{_id:"u101",fullName:"Abi Abambi",imgUrl:"http://some-img"},style:{id:l.a.makeId(),fontClr:"#f9f9f9",bgImg:null},members:[],groups:[{id:l.a.makeId(),style:{},title:"Add New List Title",archivedAt:!1,cards:[{id:l.a.makeId(),title:"Add New Card Title",description:"description",archivedAt:!1,labels:[]}]}]};case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},315:function(e,t,a){e.exports=a(670)},322:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},383:function(e,t){},386:function(e,t,a){},45:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={getUniqueHeaders:function(e,t){var a=[];return e.forEach((function(e){a.includes(e[t])||a.push(e[t])})),a},getRandomColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t="#";t+=o(e);for(var a="0123456789abcdef",n=0;n<3;n++)t+=a.charAt(r(a.length));return t},getRandomInteger:r,makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}};function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(e-t))+t}function o(e){return Math.round(e/100*255).toString(16)}},65:function(e,t,a){"use strict";var n,r=a(273),o=a.n(r);t.a={setup:function(){n=o()("/")},terminate:function(){n=null},on:function(e,t){n.on(e,t)},off:function(e,t){n.off(e,t)},emit:function(e,t){n.emit(e,t)}}},669:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAAAYCAYAAACPxmHVAAAAAXNSR0IArs4c6QAABapJREFUaAXlmm2IFlUYhl1Tw7CUaovA2mItLaIPUCOiTUyLxCLILNp+RF8U0fenkj8qWkMM+1CrH7l/LCVEk8iWyiwKJAy1H7aaupu47hqKbPmRW23bdb/MjOedfZ6Zd9ZdCXrg9py5z/3cc97nfefMmVmrBlUQPT09Y5GNA2eB08AB8CvYVFVV1UH7vwlqcQ4f9hKgehwGraAFtFGLHtokqpJeqoPJqVBzwO3gfGCFzH4EjWAR5t2WKObwvIz+qvg4o9UXth38DD7Gt9nSZvjNJ+cdK0cceZ/QqEBhtJAzNSTCPjmTOV4EVFQrdkOqDo34/GIJShxG08FuUCQ2IL7cNWWA8QlFDCPtn7TzwIi0N5znNyutDY/J2wTSsTXUxH1EVeD9tDjj+B/GZih/cGyiFvIMsIyuvtnR4grEeLQ/kD8XDCuQlycdiuBZsAZf90rLMzmO8YfIvbdAvpbLNdInxY0mvhzuTg30MYaQ9wJo6GN+Vtq1DD6YJejvMWpyLp7zCvq+xrJwRDlJcek/DKaI7Id4konVFfDR2toE1oO/M/J0VYRzzpD2y9CNuPRajuAOgsVAl/+jYDVQ7AHvlXrxP0y4FhwCXmiNegCMB9WgDjwF9gAvWhgomxjHuWskmlHgMeDFBcG8c/1ibdhiXNGai+5tZxK91nR0k8Bt4XlKfcgvHRMtzrOALvdeAT8SLAFeLAiTEFVUDHS6iex0TG+KPSv1i/VxS16lxV2bN4fY02oHk6x922RrEG4B68dcYF6q8L+huQ984eTfhX/hyxhfbfHWOp5Fb7SOTUX0XkelX/R1zlhC64NPB9ZdWPvM2YnS6USFuIdhbajToYeOiWky75iJn4RG87Ki1SIHiNvs+NbCf808t4IGcLGlU3EvsgbgmihclzNWRqNrh9hQRh478PyPKYJeNNEGKF1RVpj7UUvYD9zneJhXbeQ9llbr7xbm/Sm4OuJLjYrrfQivWGF+2Pf0nn+Y+wQT0wTbIH8Cz4WDQb+dL1KaExKcS0+f2lrmha78aeBbPsMjsVg3Kl2CVnRZZAbn6T3/0ErLh5AXj+cJ+nucAr9OwfTZXgGjcvz1WRei7yTvA/1yO5yECQ7v0XpCs8K7KVjaLG4lE16REujGZ4We6rLCGve8BnHehZhdCHQP2pJlHI29SoFPVnG9G8T1CDSeG+hGIrrKEeqN0fFEJ8naqM80TPSoacVwiww4a9zzKqVR4P1AO6dLIa4Eb4IjpcHe/9RAXaH3CXqA8ELP9LlB8lLHoBM++ZXQ9/a5euBYF2AZ/ZdAPXCXC8a0lewC6Uj/wpPPgHA4sHKWJKIKO/jUAO9B6u6SDQK9cLFCk7jDOxdjQ8AcKzHiGsNcOK+4s0JdkT6e24zz74Uz13r4qYZe1IvWeeHHAL1+NYOxxcCK+0sJjOix9i9LEXGrabVMnK4E2tHgVrAReLGPgbPDGXE8EMX9zJnAu+G5o3lXo93h6OvT+ijnG/S7wJT0OJx+XK3AiomJntGXLYXBHTQ4i+r1nI1oIIr7tHXyiNOX/xbQi6QPQQew4ijkeUkxog7ctJS4iePZ4AYgz++AFd2QpyR+HAwFWb9Ey8TjlibGQQfxQBR3GL7bvYlUyOuhpSzI0/uNzRXmp2Wrysx0gEI3t/VpZcHjj9Br99Ar4Pu9uDoJvjcXnGMob+dgRHqycHov0pfQel8tv7KtFtuMnXDXAG3WD4Ei0Yb4FjxmAr3QOWHB+fSXk+fB4YInbUY/g3zrs6oW6wr67Udfj9++zDyqXwNWgD9AVhxg8A3g3lHjE6EZkF9u4K8b7XKQF78jeAYk28TYI92iqQNfgazQrmo+KLtirbdhZf4kaMM9CYwD2nOGf1rfyPH3fFPdtP+ZYM7a1YyJUEt7JtgFdkTQX3qP0q84Ik+9qBFUC8U2oL+iNOOn/25QFv8C2sE4PPdp2c0AAAAASUVORK5CYII="},670:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),i=a(15),s=a(64),l=a(30),u=a(13),d=a(9),p=a(12),m=a(11),f=a(10),h=(a(322),a(2)),b=a.n(h),v=a(8),g=a(718),E=a(719),y=a(271),C=a.n(y),w=a(23),O=a(275),k=a.n(O),S=a(274),N=a.n(S),j=a(714);function x(e){return r.a.createElement("div",{className:"member-preview"},function(e){var t=e.split(" ");return t[0].charAt(0).toUpperCase()+t[1].charAt(0).toUpperCase()}(e.name))}function A(e){var t=e.board,a=new Date(t.createdAt).toDateString(),n=new Date(t.activities[0].createdAt).toDateString()||"1123";return r.a.createElement("div",{className:"board-preview"},r.a.createElement("div",{className:"board-image",onClick:function(){return e.onSelect(t._id)},style:{backgroundImage:t.style.bgImg}},r.a.createElement("div",{className:"board-overlay"},r.a.createElement("h3",{style:{color:t.style.fontClr}},t.title))),r.a.createElement("div",{className:"board-details"},r.a.createElement("div",{className:"board-description"},t.description),r.a.createElement("div",{className:"board-members"},t.members.map((function(e){return r.a.createElement(x,{key:e._id,name:e.fullName,imgUrl:e.imgUrl})}))),r.a.createElement("div",{className:"board-creator"},"Board created by ",t.createdBy.fullName," on ",a),r.a.createElement("div",{className:"board-last-edited"},"Last edited on ",n)))}function D(e){return e.boards?r.a.createElement("div",{className:"board-hub"},r.a.createElement("header",null,r.a.createElement("h1",null,e.header)),r.a.createElement("section",null,e.boards.map((function(t){return r.a.createElement(A,{key:t._id,history:e.history,onSelect:e.onSelect,board:t})})))):r.a.createElement("div",{className:"board-hub"},r.a.createElement(j.a,null))}var M=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={view:0,boards:null,templates:null},e.setViewFromParams=function(){return"templates"===e.props.match.params.view?e.setState({view:1}):e.setState({view:0})},e.onSelectBoard=function(t){e.props.history.push("/board/".concat(t))},e.onSelectTemplate=function(e){},e.setView=function(t){t?e.props.history.push("/templates"):e.props.history.push("/board")},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setViewFromParams(),e.next=3,w.a.query();case 3:t=e.sent,this.setState({boards:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){e.match.params.view!==this.props.match.params.view&&this.setViewFromParams()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(g.a,{className:"home-nav",value:this.state.view,onChange:function(t,a){e.setView(a)},showLabels:!0},r.a.createElement(E.a,{label:"Boards",icon:r.a.createElement(N.a,null)}),r.a.createElement(E.a,{label:"Templates",icon:r.a.createElement(k.a,null)})),r.a.createElement(C.a,{onSwitching:this.setView,index:this.state.view,containerStyle:{height:"100vh"}},r.a.createElement(D,{boards:this.state.boards,onSelect:this.onSelectBoard,header:"Boards"}),r.a.createElement(D,{boards:this.state.boards,header:"Templates"})))}}]),a}(n.Component),B=(a(386),a(25)),I=a(739),L=a(672),T=a(720),U=a(721);function F(e){return function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.getBoardById(e);case 3:n=t.sent,a({type:"SET_BOARD",board:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("boardAction: error in board action",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function P(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(r=JSON.parse(JSON.stringify(e))).activities.unshift(t),n({type:"SET_BOARD",board:r}),a.next=6,w.a.updateBoard(r);case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("error removing board",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}function R(e,t,a){return function(){var n=Object(v.a)(b.a.mark((function n(r){var o,c,i,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=JSON.parse(JSON.stringify(e)),c=o.groups.findIndex((function(e){return e.cards.find((function(e){return e.id===t.id}))})),i=o.groups[c].cards.findIndex((function(e){return e.id===t.id})),o.groups[c].cards[i]=t,a&&(s=w.a.createActivity(a),o.activities.unshift(s)),r({type:"SET_BOARD",board:o}),n.next=9,w.a.updateBoard(o);case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log("error updating card",n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}function G(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.parse(JSON.stringify(e)),t.id=Y(),r.labels.push(t),n({type:"SET_BOARD",board:r}),a.next=7,w.a.updateBoard(r);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("error adding label",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}function _(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.parse(JSON.stringify(e)),o=r.labels.findIndex((function(e){return e.id===t})),r.labels.splice(o,1),n({type:"SET_BOARD",board:r}),a.next=7,w.a.updateBoard(r);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("error removing label",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}function V(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(r=JSON.parse(JSON.stringify(e))).labels=r.labels.map((function(e){return e.id===t.id&&(e=t),e})),n({type:"SET_BOARD",board:r}),a.next=6,w.a.updateBoard(r);case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("error updating label",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}function z(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w.a.filter(e._id,t);case 3:r=a.sent,n({type:"FILTER_BY",filterBy:t}),n({type:"SET_BOARD",board:r}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("error setting filter group",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}function J(e){return function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.parse(JSON.stringify(e)),a({type:"SET_BOARD",board:n}),t.next=5,w.a.updateBoard(n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error updating board",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function H(e){return function(){var t=Object(v.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SET_STYLE",style:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Y(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var X=a(736),K=a(276),Q=a.n(K);function q(e){if(!e.dueDate)return r.a.createElement(r.a.Fragment,null);var t=(e.dueDate-Date.now())/1e3/60/60/24,a=new Date(e.dueDate),n=a.toLocaleString("en-US",{month:"short"}),o=a.getDate(),c="".concat(n," ").concat(o);if(Math.abs(t)>365){var i=a.getFullYear();c+=", ".concat(i)}if(e.displayTime){var s=a.toLocaleTimeString();c+=" at ".concat(s)}var l="card-preview-due-date-container card-preview-due-date-container-";switch(!0){case t>7:l+="long";break;case t>3:l+="near";break;case t>=0:l+="close";break;default:l+="overdue"}return r.a.createElement("div",{className:l},r.a.createElement(Q.a,{fontSize:"inherit"}),c)}var W=a(277),Z=a.n(W),$=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={date:null,isPopperOpen:!1,anchor:null},e.setDefaultDate=function(){e.setState({date:e.props.dueDate})},e.openModal=function(){e.setState({isPopperOpen:!0})},e.closeModal=function(){e.setState({isPopperOpen:!1})},e.onSetDueDate=function(t){var a=t.target.value,n=new Date(a).getTime();e.setState({date:n})},e.submitDueDate=function(){e.props.onUpdateDueDate(e.state.date)},e.onRemoveDueDate=function(t){e.setState({date:null},e.submitDueDate),e.closeModal()},e.getDisplayDateBtn=function(){return e.props.displayDate?r.a.createElement("div",{onClick:e.openModal,ref:e.anchor,className:"set-due-date-expanded"},r.a.createElement(q,{dueDate:e.state.date,displayTime:e.props.displayTime})):r.a.createElement(T.a,{className:"set-due-date-btn",onClick:e.openModal,ref:e.anchor},r.a.createElement(Z.a,null),r.a.createElement("span",null,"Set Due Date"))},e.parseDate=function(){var t=new Date(e.state.date);e.state.date||(t=new Date(Date.now()));var a=t.getFullYear(),n=[a,t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes()];return n=n.map((function(e){return 1===(e=e.toString()).length&&(e="0".concat(e)),e})),"".concat(a,"-").concat(n[1],"-").concat(n[2],"T").concat(n[3],":").concat(n[4])},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.anchor=r.a.createRef(),this.setState({anchor:this.anchor}),this.setDefaultDate()}},{key:"componentDidUpdate",value:function(e,t){if(e.dueDate!==this.props.dueDate)return this.setDefaultDate()}},{key:"render",value:function(){return this.state.anchor?r.a.createElement("div",{className:"due-date-container"},this.getDisplayDateBtn(),this.state.anchor.current?r.a.createElement(U.a,{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},open:this.state.isPopperOpen,anchorEl:this.state.anchor.current,onClose:this.closeModal,onBackdropClick:this.closeModal},r.a.createElement("form",{noValidate:!0},r.a.createElement(X.a,{onBlur:this.submitDueDate,onChange:this.onSetDueDate,id:"datetime-local",label:"Set Due Date",type:"datetime-local",value:this.parseDate(),InputLabelProps:{shrink:!0}})),r.a.createElement("div",{className:"remove-date-btn-container"},r.a.createElement("button",{className:"cancel-btn",onClick:this.onRemoveDueDate},"Remove Due Date"))):r.a.createElement(r.a.Fragment,null)):r.a.createElement(r.a.Fragment,null)}}]),a}(n.Component),ee=a(45),te=a(95),ae=a.n(te),ne=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isEditing:!1,txtValue:""},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.onChange=function(t){e.setState({txtValue:t.target.value})},e.onSubmit=function(){var t=Object(v.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("onsubmit"),a.preventDefault(),e.state.txtValue){t.next=4;break}return t.abrupt("return",e.setNotEditing());case 4:n={id:ee.a.makeId(),title:e.state.txtValue,todos:[]},r="added the checklist ".concat(e.state.txtValue),e.props.onUpdate(n,r),e.setState({txtValue:""}),e.setNotEditing();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getNewChecklistDisplay=function(){return e.state.isEditing?r.a.createElement("form",{className:"new-checklist-form",onBlur:e.setNotEditing,onSubmit:e.onSubmit},r.a.createElement("input",{type:"text",autoFocus:!0,value:e.state.txtValue,onChange:e.onChange}),r.a.createElement("button",{className:"save-btn",onMouseDown:e.onSubmit},"Save")):r.a.createElement(T.a,{onClick:e.setEditing},r.a.createElement(ae.a,null),r.a.createElement("span",null,"New Checklist"))},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.getNewChecklistDisplay())}}]),a}(n.Component),re=a(96),oe=a.n(re),ce=a(141),ie=a.n(ce),se=a(142),le=a.n(se),ue=a(279),de=a.n(ue),pe=a(278),me=a.n(pe);function fe(e){return r.a.createElement("div",{className:"card-sidebar"},r.a.createElement(T.a,{ref:e.anchorRef,onClick:e.toggleCoverSelector},r.a.createElement(me.a,null),r.a.createElement("span",null,"Cover")),r.a.createElement($,{dueDate:e.dueDate,onUpdateDueDate:e.onUpdateDueDate}),r.a.createElement(T.a,{onClick:e.onArchiveCard},r.a.createElement(oe.a,null)," ",r.a.createElement("span",null,"Archive Card")),r.a.createElement(T.a,{onClick:e.toggleLabelPallete},r.a.createElement(ie.a,null),r.a.createElement("span",null,"Labels")),r.a.createElement(T.a,{ref:e.anchorRef,onClick:e.toggleDisplayMembers},r.a.createElement(le.a,null),r.a.createElement("span",null,"Members")),e.isUploading?r.a.createElement(T.a,{disabled:!0},r.a.createElement(j.a,{size:"14px"})):r.a.createElement(T.a,{onClick:e.toggleUploadDropzone},r.a.createElement(de.a,null)," Upload Image"),r.a.createElement(ne,{addActivity:e.addActivity,onUpdate:e.onUpdateChecklists}))}var he=a(56),be=a.n(he),ve=a(143),ge=a.n(ve),Ee=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={description:"",isEditing:!1},e.setDescriptionFromProps=function(){var t=e.props.description;t||(t=""),e.setState({description:t})},e.onChange=function(t){var a=t.target.value;e.setState({description:a})},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.onSave=function(){e.props.onUpdateDesc(e.state.description),e.setNotEditing()},e.getDescriptionTxt=function(){return e.state.description?e.state.description:"Add a more detailed description\u2026"},e.getIsEditing=function(){return e.state.isEditing?r.a.createElement("div",{className:"item-details-description-text-edit-container"},r.a.createElement("textarea",{value:e.state.description,autoFocus:!0,onChange:e.onChange,onBlur:e.onSave,placeholder:"Enter a more details description here..."}),r.a.createElement("button",{onClick:e.onSave,className:"save-btn"},"Save")):r.a.createElement("pre",{className:"item-details-description-text-display",onClick:e.setEditing},e.getDescriptionTxt())},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setDescriptionFromProps()}},{key:"render",value:function(){return r.a.createElement("div",{className:"item-details-description"},r.a.createElement(ge.a,null),r.a.createElement("div",null,r.a.createElement("h3",null,"Description"),this.getIsEditing()))}}]),a}(n.Component),ye=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={txt:"",isEditing:!1},e.onChangeText=function(t){var a=t.target.value;e.setState({txt:a})},e.onSubmit=function(t){t.preventDefault(),e.state.txt&&(e.setNotEditing(),e.props.onUpdate(e.state.txt))},e.setEditing=function(){console.log("setEditing"),e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.getIsEditing=function(){return e.state.isEditing?r.a.createElement("form",{onBlur:e.setNotEditing,onSubmit:e.onSubmit},r.a.createElement("input",{name:"header",type:"text",autoFocus:!0,value:e.state.txt,onChange:e.onChangeText})):r.a.createElement("div",{onClick:e.setEditing},r.a.createElement("h2",null,e.state.txt))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.headerTxt;this.setState({txt:e})}},{key:"render",value:function(){return r.a.createElement("div",null,this.getIsEditing())}}]),a}(n.Component);function Ce(e){if(!e.cardLabels)return r.a.createElement(r.a.Fragment,null);return r.a.createElement("div",{className:"card-preview-labels"},e.cardLabels.map((function(t,a){return r.a.createElement("div",{onClick:e.onClickLabel,key:a}," ",function(t){var a=e.boardLabels.find((function(e){return e.id===t.id}));return e.preview?e.isFull?r.a.createElement("div",{className:"card-preview-full-label ".concat(a.color)},r.a.createElement("div",null,a.name),r.a.createElement("div",{className:"card-preview-label-mask"})):r.a.createElement("div",{className:"card-preview-collapsed-label ".concat(a.color)},r.a.createElement("div",{className:"card-preview-label-mask"})):r.a.createElement("div",{className:"card-details-label ".concat(a.color)},r.a.createElement("div",{className:"card-details-mask"},a.name))}(t)," ")})))}var we=a(723),Oe=a(724),ke=a(725),Se=a(726),Ne=a(727),je=a(728),xe=a(737),Ae=a(144),De=a.n(Ae),Me=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isDone:!1,isEditing:!1,txtValue:"",isNew:!1},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.removeText=function(){e.setState({txtValue:""})},e.getNewTodoDisplay=function(){return e.state.isEditing?r.a.createElement("form",{onBlur:e.setNotEditing,onSubmit:e.onSubmit},r.a.createElement("input",{className:"checkbox-text-edit",type:"text",autoFocus:!0,value:e.state.txtValue,onChange:e.onChange}),r.a.createElement("button",{className:"save-btn",type:"submit"},"Save")):r.a.createElement(T.a,{className:"checklist-add-todo",onClick:e.setEditing},"Add an item")},e.getTodoClassName=function(){var t=e.state.isDone?"todo-done":"todo-not-done";return"checklist-todo-title ".concat(t)},e.getTextBox=function(){return e.state.isEditing?r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{checked:e.state.isDone,onChange:e.onCheck}),r.a.createElement("form",{onBlur:e.setNotEditing,onSubmit:e.onSubmit},r.a.createElement("input",{className:"checkbox-text-edit",type:"text",autoFocus:!0,value:e.state.txtValue,onChange:e.onChange}),r.a.createElement("button",{className:"save-btn",type:"submit"},"Save"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{checked:e.state.isDone,onChange:e.onCheck}),r.a.createElement("div",{className:e.getTodoClassName(),onClick:e.setEditing},e.state.txtValue,r.a.createElement(T.a,{onClick:e.onRemove},r.a.createElement(De.a,{fontSize:"inherit"}))))},e.onSubmit=function(t){t.preventDefault(),e.updateChecklist()},e.updateTodo=function(){var t=e.props.todo;if(t){var a=t.title,n=t.isDone;e.setState({isDone:n,txtValue:a})}},e.onChange=function(t){e.setState({txtValue:t.target.value})},e.onCheck=function(t){var a=t.target.checked;e.setState({isDone:a},(function(){e.updateChecklist()}))},e.getActivityTxt=function(){return e.state.isDone?"completed ".concat(e.state.txtValue):"marked ".concat(e.state.txtValue," incomplete")},e.onRemove=function(t){t.stopPropagation(),e.setState({txtValue:""},e.updateChecklist)},e.updateChecklist=function(){var t={id:e.props.todo?e.props.todo.id:ee.a.makeId(),isDone:e.state.isDone,title:e.state.txtValue},a=e.getActivityTxt();e.state.isNew?(e.props.onUpdate(t),e.setState({txtValue:""})):e.props.onUpdate(t,a)},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.title===this.props.title&&e.isDone===this.props.isDone||this.updateTodo()}},{key:"componentDidMount",value:function(){this.props.isNew&&this.setState({isNew:!0}),this.updateTodo()}},{key:"render",value:function(){return!this.props.displayCompleted&&this.state.isDone?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"checklist-todo"},this.state.isNew?this.getNewTodoDisplay():this.getTextBox())}}]),a}(n.Component),Be=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={tasksCompleted:0,totalTasks:0,displayCompleted:!0,showDialog:!1},e.setTasksStatus=function(){var t=0,a=0;e.props.checklist.todos.forEach((function(e){e.isDone&&(t+=1),a+=1})),e.setState({tasksCompleted:t,totalTasks:a})},e.toggleDisplayCompleted=function(){return e.state.displayCompleted?e.setState({displayCompleted:!1}):e.setState({displayCompleted:!0})},e.getDisplayCheckedBtn=function(){return e.state.tasksCompleted?(t=e.state.displayCompleted?"Hide Completed Items":"Show Checked Items (".concat(e.state.tasksCompleted,")"),r.a.createElement(T.a,{onClick:e.toggleDisplayCompleted},t)):r.a.createElement(r.a.Fragment,null);var t},e.onRemoveChecklist=Object(v.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=Object(u.a)({},e.props.checklist)).title="",n="removed ".concat(e.props.checklist.title),e.props.onUpdate(a,n),e.closeDialog();case 5:case"end":return t.stop()}}),t)}))),e.openDialog=function(){e.setState({showDialog:!0})},e.closeDialog=function(){e.setState({showDialog:!1})},e.getPercentCompleted=function(){return Math.round(e.state.tasksCompleted/e.state.totalTasks*100)},e.onUpdateChecklist=function(t,a){var n=Object(l.a)(e.props.checklist.todos),r=n.findIndex((function(e){return e.id===t.id}));t.title?r<0?n.push(t):n[r]=t:n.splice(r,1);var o=Object(u.a)({},e.props.checklist);o.todos=n,e.props.onUpdate(o,a)},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setTasksStatus()}},{key:"componentDidUpdate",value:function(e,t){this.props.checklist!==e.checklist&&this.setTasksStatus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"checklist"},r.a.createElement("div",{className:"checklist-title-container"},r.a.createElement(ae.a,null),r.a.createElement("div",{className:"checklist-title"},this.props.checklist.title),r.a.createElement("div",{className:"checklist-title-btns"},this.getDisplayCheckedBtn(),r.a.createElement(T.a,{onClick:this.openDialog},"Remove"))),this.state.totalTasks?r.a.createElement("div",{className:"checklist-progress"},r.a.createElement("div",{className:"checklist-progress-numbers"},"%",this.getPercentCompleted()),r.a.createElement(we.a,{value:this.getPercentCompleted(),variant:"determinate"})):r.a.createElement(r.a.Fragment,null),r.a.createElement("main",{className:"checklist-main"},this.props.checklist.todos.map((function(t){return r.a.createElement(Me,{key:t.id,displayCompleted:e.state.displayCompleted,todo:t,onUpdate:e.onUpdateChecklist})})),r.a.createElement(Me,{isNew:!0,onUpdate:this.onUpdateChecklist})),r.a.createElement(Oe.a,{onClose:this.closeDialog,open:this.state.showDialog},r.a.createElement(ke.a,{id:"alert-dialog-title"},"Remove this checklist?"),r.a.createElement(Se.a,null,r.a.createElement(Ne.a,{id:"alert-dialog-description"},"Deleting a checklist is permanent and there is no way to get it back.")),r.a.createElement(je.a,null,r.a.createElement(T.a,{onClick:this.closeDialog,color:"primary"},"Disagree"),r.a.createElement(T.a,{onClick:this.onRemoveChecklist,color:"primary",autoFocus:!0},"Agree"))))}}]),a}(n.Component);function Ie(e){return e.checklists&&e.checklists.length?r.a.createElement("div",{className:"checklists-container"},e.checklists.map((function(t){return r.a.createElement(Be,{key:t.id,checklist:t,addActivity:e.addActivity,onUpdate:e.onUpdate})}))):r.a.createElement(r.a.Fragment,null)}var Le=a(149);function Te(e){var t=e.boardId,a=e.displayMode,n=e.activities;return n?(n&&n.length>15&&(n=n.slice(0,14)),r.a.createElement("ul",{className:"activity-log"},n.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(x,{name:e.byMember.fullName}),r.a.createElement("pre",null,r.a.createElement("div",null,r.a.createElement(s.b,{to:"/board/".concat(t)},e.byMember.fullName+" "),r.a.createElement("span",null,e.commentTxt?"commented:":e.txt+" "),e.commentTxt&&r.a.createElement("div",{className:"comment-txt"},e.commentTxt),"card"!==a&&r.a.createElement("span",null,"in ",r.a.createElement(s.b,{to:"/board/".concat(t,"/").concat(e.card.id,"/")},e.card.title))),r.a.createElement("span",{className:"time-ago"},Le.a(e.createdAt))))})))):r.a.createElement("div",null,"Loading...")}var Ue=a(288),Fe=a.n(Ue),Pe=a(738),Re=a(729),Ge=a(730),_e=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isEditing:!1,txtValue:""},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.onChange=function(t){e.setState({txtValue:t.target.value})},e.onSubmit=function(t){t.preventDefault(),e.state.txtValue&&(e.props.onAddComment(e.state.txtValue),e.setNotEditing(),e.setState({txtValue:""}))},e.onBlur=function(){if(!e.state.txtValue)return e.setNotEditing()},e.onSave=function(t){e.setNotEditing(),e.onSubmit(t)},e.getNewCommentDisplay=function(){return e.state.isEditing?r.a.createElement("div",{className:"add-comment-editing-container"},r.a.createElement("form",{onBlur:e.onBlur,onSubmit:e.onSubmit},r.a.createElement("input",{className:"add-comment-input",type:"text",placeholer:"Write a comment...",autoFocus:!0,value:e.state.txtValue,onChange:e.onChange}))):r.a.createElement("div",{className:"add-comment-editing-closed"},"Write a comment...")},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"editing-section-container"},r.a.createElement(Pe.a,{expanded:this.state.isEditing,onClick:this.setEditing,classes:{expanded:"editing-container-expanded",root:"editing-container-collapsed"}},r.a.createElement(Re.a,{"aria-controls":"panel1a-content",id:"panel1a-header"},this.getNewCommentDisplay()),r.a.createElement(Ge.a,null,r.a.createElement("div",null,r.a.createElement("button",{className:"save-btn",disabled:!this.state.txtValue.length,onClick:this.onSave},"Save")))))}}]),a}(n.Component),Ve=a(147),ze=a.n(Ve),Je=a(112),He=a.n(Je),Ye=a(62),Xe=a.n(Ye),Ke=a(146),Qe=a.n(Ke);function qe(e){var t=e.label,a=e.action,n=e.setLabelEditId,o=e.onRemoveLabel;e.card;return r.a.createElement("div",{className:"label-edit-modal"},r.a.createElement(L.a,{className:"close-modal",size:"small",onClick:function(){return n()}},r.a.createElement(Qe.a,null)),r.a.createElement("form",{onSubmit:function(e){return a(e,t)}},r.a.createElement("input",{type:"text",name:"labelName",defaultValue:t?t.name:"",placeholder:"Enter label's name..."}),r.a.createElement("div",{className:"color-pallete"},["green","yellow","orange","red","purple","blue","grey","black"].map((function(e){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement("input",{required:!0,hidden:!0,type:"radio",id:e,name:"newColor",value:e,defaultChecked:t?e===t.color:"grey"}),r.a.createElement("label",{htmlFor:e},r.a.createElement("div",{className:"color-picker ".concat(e)})))}))),r.a.createElement("div",{className:"save-cancel-btns"},r.a.createElement("button",{className:"save-btn"},"Save"),t&&r.a.createElement("button",{className:"cancel-btn",onClick:function(){return o(t.id)}},"Delete"))))}var We=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={labelEditId:null},e.setLabelEditId=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.setState({labelEditId:t})},e.onAddLabel=function(t){t.preventDefault();var a={name:t.target.labelName.value,color:t.target.newColor.value};e.props.addLabel(e.props.board,a),e.setLabelEditId()},e.onEditLabel=function(t,a){t.preventDefault();var n=t.target.labelName.value,r=t.target.newColor.value,o=Object(u.a)(Object(u.a)({},a),{},{name:n,color:r});e.props.updateLabel(e.props.board,o),e.setLabelEditId()},e.onRemoveLabel=function(t){e.props.removeLabel(e.props.board,t),e.setLabelEditId()},e.onToggleLabelToCard=function(t,a){var n=t.labels.findIndex((function(e){return e.id===a}));t.labels=-1===n?[].concat(Object(l.a)(t.labels),[{id:a}]):[].concat(Object(l.a)(t.labels.slice(0,n)),Object(l.a)(t.labels.slice(n+1)));var r=e.props.createActivity("updated a label");e.props.updateCard(e.props.board,t,r)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.board,n=t.card;return a.labels?r.a.createElement("ul",{className:"label-palette"},a.labels.map((function(t){return r.a.createElement("li",{key:t.id,className:"label"},r.a.createElement("div",{className:"label-color ".concat(t.color),onClick:n?function(){return e.onToggleLabelToCard(n,t.id)}:function(){return e.setLabelEditId(e.state.labelEditId===t.id?null:t.id)}},r.a.createElement("span",{className:"label-text"},t.name),n&&n.labels.find((function(e){return e.id===t.id}))&&r.a.createElement(Xe.a,{fontSize:"small"})),r.a.createElement(L.a,{className:"edit-label-btn",onClick:function(){return e.setLabelEditId(e.state.labelEditId===t.id?null:t.id)}},r.a.createElement(ze.a,{fontSize:"small"})),!n&&r.a.createElement(L.a,{className:"remove-label-btn",onClick:function(){return e.onRemoveLabel(t.id)}},r.a.createElement(He.a,{fontSize:"small"})),e.state.labelEditId===t.id&&r.a.createElement(qe,{label:t,action:e.onEditLabel,onRemoveLabel:e.onRemoveLabel,setLabelEditId:e.setLabelEditId}))})),r.a.createElement("li",{className:"label add-label"},r.a.createElement("div",{className:"label-color add-label",onClick:function(){return e.setLabelEditId("addLabel"===e.state.labelEditId?null:"addLabel")}},"Create a new label"),"addLabel"===this.state.labelEditId&&r.a.createElement(qe,{action:this.onAddLabel,setLabelEditId:this.setLabelEditId}))):r.a.createElement("div",null,"Loading...")}}]),a}(n.Component),Ze={addLabel:G,updateLabel:V,removeLabel:_,updateCard:R},$e=Object(i.b)((function(e){return{board:e.boardReducer.board}}),Ze)(We);function et(e){var t,a=e.boardMember.fullName.split(" ").map((function(e){return e[0]}));return t=!(!e.cardMembers||!e.cardMembers.length)&&Boolean(e.cardMembers.find((function(t){return t._id===e.boardMember._id}))),r.a.createElement("div",{onClick:function(){e.toggleMember(e.boardMember,!t)},className:"board-member"},r.a.createElement(I.a,null,a),r.a.createElement("div",null,e.boardMember.fullName),t?r.a.createElement(Xe.a,null):r.a.createElement("div",{style:{width:"24px"}}))}var tt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={boardMembers:[],filter:""},e.filterBoardMembers=function(){var t=e.props.boardMembers.filter((function(t){return t.fullName.toLowerCase().includes(e.state.filter.toLowerCase())}));e.setState({boardMembers:t})},e.onChange=function(t){e.setState({filter:t.target.value})},e.onSelectBoardMember=function(t,a){var n="";console.log(t,a);var r=Object(u.a)({},e.props.card);a?(r.members.push(t),n="added ".concat(t.fullName)):(r.members=r.members.filter((function(e){return e._id!==t._id})),n="removed ".concat(t.fullName)),e.props.updateCardMembers(r,n)},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.filterBoardMembers()}},{key:"componentDidUpdate",value:function(e,t){e.boardMembers===this.props.boardMembers&&e.card.members===this.props.card.members&&t.filter===this.state.filter||this.filterBoardMembers()}},{key:"render",value:function(){var e=this;return this.state.boardMembers?r.a.createElement("div",null,r.a.createElement(U.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},open:!0,anchorEl:this.props.anchorEl.current,onClose:this.props.toggleList,onBackdropClick:this.props.toggleList},r.a.createElement("div",{className:"card-members-list"},r.a.createElement("div",{className:"card-members-list-header"},r.a.createElement("div",null,"Members"),r.a.createElement(be.a,{onClick:this.props.toggleList})),r.a.createElement("input",{type:"text",value:this.state.filter,onChange:this.onChange,className:"filter"}),r.a.createElement("div",{className:"board-members"},r.a.createElement("h5",null,"Board Members"),this.state.boardMembers.map((function(t){return r.a.createElement(et,{key:t._id,boardMember:t,cardMembers:e.props.card.members,toggleMember:e.onSelectBoardMember})})))))):r.a.createElement(j.a,null)}}]),a}(n.Component),at={uploadImg:function(e){return nt.apply(this,arguments)}};function nt(){return(nt=Object(v.a)(b.a.mark((function e(t){var a,n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dyslqd6pn",a="https://api.cloudinary.com/v1_1/".concat("dyslqd6pn","/image/upload"),n=new FormData,console.log(t),n.append("file",t),n.append("upload_preset","ld9rlgmy"),e.prev=6,e.next=9,fetch(a,{method:"POST",body:n});case 9:return r=e.sent,e.next=12,r.json();case 12:return o=e.sent,e.abrupt("return",o.secure_url);case 16:e.prev=16,e.t0=e.catch(6),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}var rt=a(302),ot=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={item:null},e.uploadImg=function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.next=3,e.props.setUploading();case 3:return t.next=5,at.uploadImg(a);case 5:n=t.sent,e.setState({item:n},e.submitImage);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setFormValues=function(e){},e.submitImage=Object(v.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.item){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.props.onAddImage(e.state.item);case 4:e.setState({item:null});case 5:case"end":return t.stop()}}),t)}))),e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.item,this.state.item}},{key:"handleChange",value:function(e){console.log(e),this.uploadImg(e[0])}},{key:"render",value:function(){var e=this;return r.a.createElement(rt.a,{acceptedFiles:["image/*"],cancelButtonText:"cancel",submitButtonText:"submit",maxFileSize:5e5,open:this.props.isOpen,onClose:function(){return e.props.toggleOpen()},onSave:function(t){console.log("Files:",t),e.handleChange(t),e.props.toggleOpen()},showPreviews:!0,showFileNamesInPreview:!1})}}]),a}(n.Component),ct=a(181),it=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isEditing:!1,att:null,title:""},e.updateAttFromProps=function(){var t=Object(u.a)({},e.props.attachment),a=e.props.attachment.title;console.log(t,a),e.setState({att:t,title:a})},e.setEditing=function(t){return t?e.setState({isEditing:!0}):e.setState({isEditing:!1})},e.onChange=function(t){e.setState({title:t.target.value})},e.onRemove=function(t){e.setState({title:""},(function(){e.updateCard().then((function(){e.setState({att:null})}))}))},e.onSubmit=function(t){t.preventDefault(),e.updateCard()},e.updateCard=function(){return new Promise((function(t){var a=Object(u.a)({},e.state.att);a.title=e.state.title,e.props.onUpdate(a),e.setEditing(!1),t()}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){console.log(this),this.updateAttFromProps()}},{key:"componentDidUpdate",value:function(e,t){this.props.attachment!==e.attachment&&this.updateAttFromProps(),this.state.att!==t.att&&console.log(this.state.att)}},{key:"render",value:function(){var e=this,t=this.state.att;return t?r.a.createElement("div",{className:"card-attachment"},r.a.createElement("div",{className:"att-image",style:{backgroundImage:"url(".concat(t.src,")")}}),r.a.createElement("div",{className:"att-details-container"},r.a.createElement("div",{className:"att-title"},this.state.isEditing?r.a.createElement("form",{onSubmit:this.onSubmit,onBlur:function(){e.setEditing(!1)}},r.a.createElement("input",{autoFocus:!0,onChange:this.onChange,type:"text",value:this.state.title,required:!0})):r.a.createElement("h5",{onClick:function(){e.setEditing(!0)}},this.state.title)),r.a.createElement("div",{className:"att-date-added"},Le.a(t.createdAt))),r.a.createElement("div",{className:"att-remove"},r.a.createElement(L.a,{onClick:this.onRemove},r.a.createElement(De.a,null)))):r.a.createElement(r.a.Fragment,null)}}]),a}(n.Component);function st(e){return e.attachments?r.a.createElement("div",{className:"card-attachments-container"},e.attachments.map((function(t){return r.a.createElement(it,{key:t.id,onUpdate:e.onUpdate,attachment:t})}))):r.a.createElement(r.a.Fragment,null)}var lt=a(740),ut=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={cover:null},e.setCoverFromProps=function(){var t=e.props.card.cover;t||(t={id:null,value:null}),e.setState({cover:t})},e.colors=[{id:101,value:"#f9f9f9"},{id:102,value:"#F2D600"},{id:103,value:"#FF9F1A"},{id:104,value:"#f9f9f9"},{id:105,value:"#EB5A46"},{id:106,value:"#C377E0"},{id:107,value:"#028ad8"},{id:108,value:"#a7a7a7"}],e.onSelectCover=function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={id:a.id,color:a.value,src:a.src},e.setState({cover:n},e.props.onUpdate(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveCover=function(){e.setState({cover:null},(function(){console.log(e.state.cover),e.props.onUpdate(e.state.cover)}))},e.getImageEls=function(){var t=e.props.card.attachments;if(!t)return r.a.createElement(r.a.Fragment,null);var a=t.map((function(t){var a="single-image-choice";return e.state.cover.id===t.id&&(a+=" selected"),r.a.createElement("div",{key:t.id,className:a,onClick:function(){return e.onSelectCover(t)},style:{backgroundImage:"url(".concat(t.src,")")}})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"Images"),r.a.createElement("div",{className:"image-choice"},a))},e.getColorEls=function(){return e.colors.map((function(t){var a="color-choice";return e.state.cover.id===t.id&&(a+=" selected"),r.a.createElement("div",{key:t.id,className:a,onClick:function(){return e.onSelectCover(t)},style:{backgroundColor:t.value}})}))},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){}},{key:"componentDidMount",value:function(){this.setCoverFromProps()}},{key:"render",value:function(){return this.state.cover?r.a.createElement(U.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},open:!0,anchorEl:this.props.anchorEl.current,onClose:this.props.toggleList,onBackdropClick:this.props.toggleList},r.a.createElement("div",{className:"cover-selector-container"},r.a.createElement("div",{className:"cover-selector-header"},r.a.createElement("h5",null,"Cover"),r.a.createElement(lt.a,{onClick:this.props.toggleList})),r.a.createElement("div",{className:"cover-selector-colors"},r.a.createElement("h6",null,"Colors"),r.a.createElement("div",{className:"color-selection"},this.getColorEls())),r.a.createElement("div",{className:"cover-selector-images"},this.getImageEls()),r.a.createElement("div",{className:"cover-remove-container"},r.a.createElement("button",{className:"cancel-btn",onClick:this.onRemoveCover},"Remove Container")))):r.a.createElement(r.a.Fragment,null)}}]),a}(n.Component),dt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={groupId:null,groupName:"",card:null,commentsOnly:!1,isLabelPaletteShowing:!1,isCardMemeberShown:!1,isUploadZoneOpen:!1,isUploading:!1,isCoverSelectorShown:!1},e.ref=r.a.createRef(),e.getCardDetails=function(){e.props.board.groups.forEach((function(t){t.cards.forEach((function(a){if(a.id!==e.props.cardId);else{var n=t.id,r=t.title;e.setState({groupId:n,groupName:r,card:a})}}))}))},e.onCloseCard=function(){e.props.history.push("/board/".concat(e.props.boardId))},e.toggleCommentsOnly=function(){return e.state.commentsOnly?e.setState({commentsOnly:!1}):e.setState({commentsOnly:!0})},e.toggleLabelPalette=function(){e.setState({isLabelPaletteShowing:!e.state.isLabelPaletteShowing})},e.toggleDisplayMembers=function(){return e.state.isCardMemeberShown?e.setState({isCardMemeberShown:!1}):e.setState({isCardMemeberShown:!0})},e.toggleUploadDropzone=function(){return e.state.isUploadZoneOpen?e.setState({isUploadZoneOpen:!1}):e.setState({isUploadZoneOpen:!0})},e.toggleCoverSelector=function(){return e.state.isCoverSelectorShown?e.setState({isCoverSelectorShown:!1}):e.setState({isCoverSelectorShown:!0})},e.getLabels=function(){var t=e.state.card.labels;return t&&t.length?r.a.createElement("div",{className:"card-details-label-container"},r.a.createElement("h5",null,"Labels"),r.a.createElement(Ce,{onClickLabel:e.openEditLabelsModal,cardLabels:t,boardLabels:e.props.board.labels,preview:!1})):r.a.createElement(r.a.Fragment,null)},e.createActivity=function(t){var a={txt:t,commentTxt:"",card:{id:e.state.card.id,title:e.state.card.title}};return w.a.createActivity(a)},e.onArchiveCard=Object(v.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(u.a)({},e.state.card)).archivedAt=Date.now(),n=e.createActivity("archived"),t.next=5,e.submitCard(a,n);case 5:e.onCloseCard();case 6:case"end":return t.stop()}}),t)}))),e.onUpdateDueDate=function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=Object(u.a)({},e.state.card)).dueDate=a,e.setState({card:n},Object(v.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.createActivity("updated due date"),t.next=3,e.submitCard(n,a);case 3:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddComment=function(t){var a={txt:"",commentTxt:t,card:{id:e.state.card.id,title:e.state.card.title}},n=w.a.createActivity(a);e.props.addActivity(e.props.board,n)},e.onUpdateHeader=function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=Object(u.a)({},e.state.card)).title=a,e.setState({card:n},Object(v.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.createActivity("updated the title"),e.submitCard(n,a);case 2:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getCardDetailsMembers=function(){var t=e.state.card.members;if(!t||!t.length)return r.a.createElement(r.a.Fragment,null);var a=t.map((function(e,t){var a=e.fullName.split(" ").map((function(e){return e[0]}));return r.a.createElement("div",{key:100+t,className:"card-details-member"},r.a.createElement(I.a,null,a))}));return r.a.createElement("div",{className:"card-details-members"},r.a.createElement("h5",null,"Members"),r.a.createElement("div",null,a))},e.submitCard=function(t,a){return new Promise((function(n){e.props.updateCard(e.props.board,t,a).then((function(){return n()}))}))},e.onUpdateCardMembers=function(){var t=Object(v.a)(b.a.mark((function t(a,n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({card:a},Object(v.a)(b.a.mark((function t(){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.createActivity(n),t.next=3,e.submitCard(a,r);case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onUpdateCover=function(t){var a=Object(u.a)({},e.state.card);a.cover=t,e.setState({card:a},Object(v.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.createActivity("updated the cover"),e.submitCard(a,n);case 2:case"end":return t.stop()}}),t)}))))},e.onUpdateDesc=function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=Object(u.a)({},e.state.card)).description=a,e.setState({card:n},Object(v.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.createActivity("updated the description"),e.submitCard(n,a);case 2:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setUploading=function(){return new Promise((function(t){e.setState({isUploading:!0},t(!0))}))},e.onAddImage=function(t){var a=ct.cardService.createImage(t),n=Object(u.a)({},e.state.card);n.attachments||(n.attachments=[]),n.attachments.push(a);var r=e.createActivity("added an image");e.setState({card:n},Object(v.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.submitCard(n,r);case 2:e.setState({isUploading:!1});case 3:case"end":return t.stop()}}),t)}))))},e.onUpdateAttachments=function(){var t=Object(v.a)(b.a.mark((function t(a){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(u.a)({},e.state.card),r=n.attachments.findIndex((function(e){return e.id===a.id})),a.title.length?n.attachments[r]=a:n.attachments.splice(r,1),o=a.title.length?e.createActivity("edited the title of an image"):e.createActivity("removed an image"),e.setState({card:n},(function(){e.submitCard(n,o)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onUpdateChecklists=function(t,a){var n=Object(u.a)({},e.state.card);n.checklists||(n.checklists=[]),n.checklists.findIndex((function(e){return e.id===t.id}))>=0?n.checklists=n.checklists.map((function(e){return e.id===t.id?t:e})):n.checklists.push(t),n.checklists=n.checklists.filter((function(e){if(e.title)return e})),e.setState({card:n},(function(){if(a){var t=e.createActivity(a);e.submitCard(n,t)}else e.submitCard(n)}))},e.getFilteredActivities=function(){var t=e.state.card,a=e.props.board.activities.filter((function(e){return e.card.id===t.id}));return e.state.commentsOnly&&(a=a.filter((function(e){if(e.commentTxt.length)return e}))),a},e.getCardCover=function(){var t=e.state.card.cover;return t?t.src?r.a.createElement("div",{className:"card-details-cover-image",style:{backgroundImage:"url(".concat(t.src,")")}}):r.a.createElement("div",{className:"card-details-cover-color",style:{backgroundColor:t.color}}):r.a.createElement(r.a.Fragment,null)},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.cardId!==this.props.cardId&&this.getCardDetails()}},{key:"componentDidMount",value:function(){var e=this;this.props.board&&!Object.keys(!this.props.board)||this.props.loadBoard(this.props.boardId).then((function(){return e.getCardDetails()}))}},{key:"render",value:function(){var e=this.state.card;return e?r.a.createElement("div",{className:"card-details-background"},r.a.createElement("div",{className:"card-details-container"},this.getCardCover(),r.a.createElement("div",{className:"close-button"},r.a.createElement(L.a,{onClick:this.onCloseCard,"aria-label":"close"},r.a.createElement(be.a,null))),r.a.createElement("div",{className:"card-details-header-container"},r.a.createElement("div",{className:"card-details-title-container"},r.a.createElement(ye,{headerTxt:e.title,onUpdate:this.onUpdateHeader}),r.a.createElement("small",null,"in list ",r.a.createElement("span",null,this.state.groupName)))),r.a.createElement("div",{className:"card-details-attrs"},this.getCardDetailsMembers(),this.getLabels(),r.a.createElement("div",null,this.state.card.dueDate?r.a.createElement("h5",null,"Due Date"):r.a.createElement(r.a.Fragment,null),r.a.createElement($,{onUpdateDueDate:this.onUpdateDueDate,dueDate:e.dueDate,displayDate:!0,displayTime:!0}))),r.a.createElement("section",null,r.a.createElement("main",{className:"card-details-main"},r.a.createElement(Ee,{onUpdateDesc:this.onUpdateDesc,description:e.description}),r.a.createElement(st,{onUpdate:this.onUpdateAttachments,attachments:this.state.card.attachments}),r.a.createElement(Ie,{checklists:e.checklists,onUpdate:this.onUpdateChecklists}),r.a.createElement(ot,{onAddImage:this.onAddImage,setUploading:this.setUploading,toggleOpen:this.toggleUploadDropzone,isOpen:this.state.isUploadZoneOpen}),r.a.createElement("div",{className:"card-details-activity-log"},r.a.createElement("div",{className:"card-details-activities-title"},r.a.createElement(Fe.a,null),r.a.createElement("h5",null,"Activities"),r.a.createElement(T.a,{onClick:this.toggleCommentsOnly},this.state.commentsOnly?"Show Details":"Hide Details")),r.a.createElement(_e,{onAddComment:this.onAddComment}),r.a.createElement(Te,{boardId:this.props.board._id,displayMode:"card",activities:this.getFilteredActivities()}))),r.a.createElement("aside",{className:"card-details-sidebar",ref:this.ref},r.a.createElement(fe,{anchorRef:this.ref,addActivity:this.createActivity,isUploading:this.state.isUploading,toggleCoverSelector:this.toggleCoverSelector,toggleUploadDropzone:this.toggleUploadDropzone,toggleDisplayMembers:this.toggleDisplayMembers,dueDate:e.dueDate,toggleLabelPallete:this.toggleLabelPalette,onUpdateDueDate:this.onUpdateDueDate,onArchiveCard:this.onArchiveCard,onUpdateChecklists:this.onUpdateChecklists})))),r.a.createElement(U.a,{anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"left"},open:this.state.isLabelPaletteShowing,anchorEl:this.ref,onClose:this.toggleLabelPalette,onBackdropClick:this.toggleLabelPalette},r.a.createElement($e,{createActivity:this.createActivity,card:e})),this.state.isCardMemeberShown&&r.a.createElement(tt,{updateCardMembers:this.onUpdateCardMembers,anchorEl:this.ref,toggleList:this.toggleDisplayMembers,boardMembers:this.props.board.members,card:this.state.card,cardMembers:e.members}),this.state.isCoverSelectorShown&&r.a.createElement(ut,{card:this.state.card,anchorEl:this.ref,onUpdate:this.onUpdateCover,toggleList:this.toggleCoverSelector})):r.a.createElement("div",{className:"card-details-background"},r.a.createElement("div",{className:"card-details-container"},r.a.createElement(j.a,null)))}}]),a}(n.Component),pt={loadBoard:F,switchGroup:function(){},updateCard:R,addActivity:P},mt=Object(i.b)((function(e){return{board:e.boardReducer.board}}),pt)(Object(i.b)(B.f)(dt)),ft=a(731),ht=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchLetters:""},e.toggleUser=function(t){e.props.members.find((function(e){return e._id===t._id}))?e.props.removeMember(t._id,e.props.board):e.props.addToMembers(t,e.props.board)},e.getMembers=function(t){return e.props.members.find((function(e){return e._id===t}))},e.handleChange=function(t){var a=t.target.value;e.setState({searchLetters:a})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.members,n=t.allExistingUsers;return a?r.a.createElement(ft.a,{onClickAway:this.props.onCloseModal},r.a.createElement("div",{className:"add-member-modal"},r.a.createElement("h3",null,"Members"),r.a.createElement("input",{type:"search",onChange:this.handleChange,name:"search-member",id:"",autoCorrect:"off",autoComplete:"off"}),r.a.createElement("div",{className:"add-members-container"},this.state.searchLetters?n.map((function(t){if(t.fullName.toLowerCase().includes(e.state.searchLetters.toLocaleLowerCase()))return r.a.createElement("div",{key:t._id,className:"member-container",onClick:function(){return e.toggleUser(t)}},r.a.createElement(x,{name:t.fullName}),r.a.createElement("p",null,t.fullName),e.getMembers(t._id)&&r.a.createElement("div",null,r.a.createElement(Xe.a,null)))})):n.map((function(t){return r.a.createElement("div",{key:t._id,className:"member-container",onClick:function(){return e.toggleUser(t)}},r.a.createElement(x,{name:t.fullName}),r.a.createElement("p",null,t.fullName),e.getMembers(t._id)&&r.a.createElement("div",null,r.a.createElement(Xe.a,null)))}))))):r.a.createElement("div",null,"loading")}}]),a}(n.Component),bt={addToMembers:function(e,t){var a=e._id,n=e.fullName,r=e.imgUrl;return function(){var e=Object(v.a)(b.a.mark((function e(o){var c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={_id:a,fullName:n,imgUrl:r},(i=JSON.parse(JSON.stringify(t))).members.unshift(c),o({type:"SET_BOARD",board:i}),e.next=6,w.a.updateBoard(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},removeMember:function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=JSON.parse(JSON.stringify(t)),o=r.members.findIndex((function(t){return t._id===e})),r.members.splice(o,1),n({type:"SET_BOARD",board:r}),a.next=6,w.a.updateBoard(r);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},vt=Object(i.b)((function(e){return{board:e.boardReducer.board,members:e.boardReducer.board.members,allUsers:e.userReducer.users}}),bt)(ht),gt=(a(397),function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalShown:!1},e.onShowModal=function(){e.setState({isModalShown:!0})},e.onCloseModal=function(){e.setState({isModalShown:!1})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.members;return t?r.a.createElement("div",{className:"members-container"},r.a.createElement("div",{className:"member-preview",onClick:function(){return e.onShowModal()}},"+"),r.a.createElement("div",{className:"add-member-modal-container"},this.state.isModalShown&&r.a.createElement(vt,{onCloseModal:this.onCloseModal,allExistingUsers:this.props.allUsers})),t.map((function(e){return r.a.createElement(x,{key:e._id,name:e.fullName,img:e.imgUrl})}))):r.a.createElement("h4",null,"loading")}}]),a}(n.Component)),Et=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isChecked;return r.a.createElement("div",{className:"label-inner-container",onClick:function(){return e.props.onFilterByLabel(e.props.id)}},r.a.createElement("div",{className:"label ".concat(this.props.color)}),r.a.createElement("p",null,this.props.name),t&&r.a.createElement("div",null,r.a.createElement(Xe.a,null)))}}]),a}(n.Component),yt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onFilterByLabel=function(t){if(!e.props.currFilter||!e.props.currFilter.filterBy.txt){var a=[];if(e.props.currFilter&&e.props.currFilter.filterBy.labels){var n=(a=Object(l.a)(e.props.currFilter.filterBy.labels)).findIndex((function(e){return e===t}));-1!==n?a.splice(n,1):-1===n&&a.push(t)}else a.push(t);e.props.onSetFilterBy(e.props.board,{labels:a})}},e.onResetFilter=function(){e.props.onSetFilterBy(e.props.board,{labels:[]})},e}return Object(p.a)(a,[{key:"isChecked",value:function(e){if(this.props.currFilter&&this.props.currFilter.filterBy.labels)return-1!==Object(l.a)(this.props.currFilter.filterBy.labels).findIndex((function(t){return t===e}))}},{key:"render",value:function(){var e=this,t=this.props.board.labels;return r.a.createElement(ft.a,{onClickAway:this.props.toggleModal},r.a.createElement("div",{className:"label-filter"},r.a.createElement("h3",null,"Labels"),r.a.createElement("div",{className:"labels-container"},r.a.createElement("div",{className:"label-inner-container",onClick:function(){return e.onResetFilter()}},r.a.createElement("div",{className:"label grey"}),r.a.createElement("p",null,"No labels")),t.map((function(t){return r.a.createElement(Et,{name:t.name,color:t.color,id:t.id,key:t.id,onFilterByLabel:e.onFilterByLabel,isChecked:e.isChecked(t.id)})})))))}}]),a}(n.Component),Ct={onSetFilterBy:z},wt=Object(i.b)((function(e){return{board:e.boardReducer.board,currFilter:e.boardReducer.filterBy}}),Ct)(yt),Ot=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLabelModalShown:!1},e.handleChange=function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target,t.next=3,e.setState({search:{txt:n.value}});case 3:e.props.onFilter(e.state.search);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleLabel=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.toggleModal=function(){e.setState({isLabelModalShown:!e.state.isLabelModalShown})},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-filter-container"},r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{type:"search",id:"search",autoCorrect:"off",autoComplete:"off",className:"search-bar",onChange:this.handleChange}),r.a.createElement("div",{className:"search-icon-container"},r.a.createElement("span",{className:"material-icons"},"search"))),r.a.createElement("div",{className:"board-header-btn filter-btn",onClick:this.toggleModal},r.a.createElement("span",{className:"material-icons"},"sort")),this.state.isLabelModalShown&&r.a.createElement(wt,{toggleModal:this.toggleModal})))}}]),a}(n.Component),kt=a(81);var St=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadAllUsers();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"boards-header-container"},r.a.createElement("h3",null,this.props.title),r.a.createElement("div",{className:"members-container"},r.a.createElement(gt,{members:this.props.members,allUsers:this.props.allUsers})),r.a.createElement(Ot,{onFilter:this.props.onFilter}),r.a.createElement("div",{className:"board-header-btn",onClick:function(){return e.props.onToggleSidebar(!0)}},r.a.createElement("p",null,"Show Menu")))}}]),a}(n.Component),Nt={loadAllUsers:function(){return function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt.a.getUsersFromDb();case 2:a=e.sent,t({type:"SET_USERS",users:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},jt=Object(i.b)((function(e){return{board:e.boardReducer.board,allUsers:e.userReducer.users}}),Nt)(St),xt=a(294),At=a.n(xt),Dt=a(293),Mt=a.n(Dt),Bt=a(295),It=a.n(Bt),Lt=a(63),Tt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isOpen:!1,offsetTop:null,offsetLeft:null,width:null,txtValue:"",isMemberListOpen:!1},e.ref=r.a.createRef(),e.submitCard=function(){var t=Object(v.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.props.updateCard(e.props.board,a).then((function(){e.onClose(),t()}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClose=function(){e.props.onClose()},e.onUpdateDueDate=function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=Object(u.a)({},e.props.props.card)).dueDate=a,t.next=4,e.submitCard(n);case 4:e.addActivity("updated due date");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onUpdateHeader=Object(v.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(u.a)({},e.props.props.card),console.log(a),a.title=e.state.txtValue,t.next=5,e.submitCard(a);case 5:e.addActivity("updated the title");case 6:case"end":return t.stop()}}),t)}))),e.addActivity=function(){var t=Object(v.a)(b.a.mark((function t(a){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.props.card,r={txt:a,commentTxt:"",card:{id:n.id,title:n.title}},o=w.a.createActivity(r),t.next=5,e.props.addActivity(e.props.board,o);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChange=function(t){var a=t.target.value;e.setState({txtValue:a})},e.onKeyPress=function(t){if("Enter"===t.key)return e.onUpdateHeader()},e.toggleCardMembersMenu=function(){if(e.state.isMemberListOpen)return e.setState({isMemberListOpen:!1});e.setState({isMemberListOpen:!0})},e.onArchiveCard=Object(v.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(u.a)({},e.props.props.card)).archivedAt=Date.now(),t.next=4,e.submitCard(a);case 4:e.addActivity("archived");case 5:case"end":return t.stop()}}),t)}))),e.onUpdateCardMembers=function(){var t=Object(v.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({card:a},Object(v.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.submitCard(a);case 2:e.addActivity("edited the card members");case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getParentPos=function(){var t=e.props.anchorEl.current.parentElement.getBoundingClientRect();e.setState({offsetTop:t.top,offsetLeft:t.left,width:t.width})},e.getCardCover=function(){var t=e.props.props.card.cover;return t?t.src?r.a.createElement("div",{className:"card-preview-cover-image",style:{backgroundImage:"url(".concat(t.src,")")}}):r.a.createElement("div",{className:"card-preview-cover-color",style:{backgroundColor:t.color}}):r.a.createElement(r.a.Fragment,null)},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props),this.getParentPos(),this.getCurrTitle()}},{key:"getCurrTitle",value:function(){var e=this.props.props.card.title;this.setState({txtValue:e})}},{key:"render",value:function(){if(!this.state.offsetTop||!this.state.offsetLeft)return r.a.createElement("div",null);var e=this.props.props;return r.a.createElement(Oe.a,{onClose:this.props.onClose,open:!0},r.a.createElement("div",{className:"card-edit-container",onClick:function(e){return e.stopPropagation()},style:{left:"".concat(this.state.offsetLeft,"px"),top:"".concat(this.state.offsetTop,"px"),position:"fixed"}},this.state.isMemberListOpen?r.a.createElement(tt,{anchorEl:this.ref,updateCardMembers:this.onUpdateCardMembers,toggleList:this.toggleCardMembersMenu,boardMembers:this.props.board.members,card:e.card}):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"card-edit-left"},r.a.createElement("div",{className:"card-preview",style:{width:"".concat(this.state.width,"px")}},this.getCardCover(),this.props.cardStyle,r.a.createElement(Ce,{cardLabels:e.card.labels,boardLabels:e.board.labels,preview:!0}),r.a.createElement("form",null,r.a.createElement("textarea",{className:"card-preview-header card-preview-title-edit",autoFocus:!0,onKeyPress:this.onKeyPress,onChange:this.onChange,value:this.state.txtValue})),r.a.createElement("div",{className:"card-preview-attrs"},r.a.createElement(q,{dueDate:e.card.dueDate}),this.props.attrs)),r.a.createElement("button",{className:"save-btn",onClick:this.onUpdateHeader},"Save")),r.a.createElement("div",{className:"card-edit-right"},r.a.createElement("div",{className:"card-preview-edit-actions-container"},r.a.createElement(T.a,{onClick:this.onArchiveCard},r.a.createElement(oe.a,null)," ",r.a.createElement("span",null,"Archive Card")),r.a.createElement($,{dueDate:e.dueDate,onUpdateDueDate:this.onUpdateDueDate}),r.a.createElement(T.a,{ref:this.ref,onClick:this.toggleCardMembersMenu},r.a.createElement(le.a,null),r.a.createElement("span",null,"Members"))))))}}]),a}(n.Component),Ut={updateCard:R,addActivity:P},Ft=Object(i.b)((function(e){return{board:e.boardReducer.board}}),Ut)(Tt),Pt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isEditing:!1},e.ref=r.a.createRef(),e.onSetEditing=function(){e.setState({isEditing:!0})},e.onSetNotEditing=function(){e.setState({isEditing:!1})},e.onOpenCardActions=function(t){t.stopPropagation(),e.onSetEditing()},e.getCardPreviewStyle=function(){var t=e.props.card.style;return t&&Object.keys(t)&&t.bgColor?r.a.createElement("div",{className:"card-preview-style",style:{backgroundColor:t.bgColor}}):r.a.createElement("div",null)},e.getCardPreviewMembers=function(){var t=e.props.card.members;if(!t||!t.length)return r.a.createElement(r.a.Fragment,null);var a=t.map((function(e,t){var a=e.fullName.split(" ").map((function(e){return e[0]}));return r.a.createElement("div",{key:100+t,className:"card-preview-member"},r.a.createElement(I.a,null,a))}));return r.a.createElement("div",{className:"card-preview-members"},a)},e.getCardPreviewAttachments=function(){var t=e.props.card.attachments;return t&&Object.keys(t)&&t.length?r.a.createElement("div",{key:"0",className:"card-preview-attr"},r.a.createElement(Mt.a,{style:{fontSize:16}})):null},e.getCardPreviewHoldDesc=function(){var t=e.props.card.description;return t&&Object.keys(t)?r.a.createElement("div",{key:"1",className:"card-preview-attr"},r.a.createElement(At.a,{style:{fontSize:16}})):null},e.getCardPreviewComments=function(){var t=e.props.board.activities.filter((function(t){return t.card.id===e.props.card.id}));return(t=t.filter((function(e){return e.commentTxt?e:null})))&&t.length?r.a.createElement("div",{key:"3",className:"card-preview-attr"},r.a.createElement(It.a,{style:{fontSize:16}})," ",t.length):null},e.onOpenCardDetails=function(){var t=window.location.href;"/"!==t.charAt(t.length-1)&&(t+="/"),t+="".concat(e.props.card.id),window.location.assign(t)},e.getCardPreviewChecklist=function(){var t=e.props.card.checklists;if(!t||!t.length)return null;var a=0,n=0,o="";return t.forEach((function(e){e.todos.forEach((function(e){e.isDone&&(a+=1),n+=1}))})),n?(a===n&&(o=" card-preview-checklist-counter-done"),r.a.createElement("div",{key:"2",className:"card-preview-attr card-preview-checklist-counter".concat(o)},r.a.createElement(ae.a,{style:{fontSize:16}})," ",r.a.createElement("span",null,a,"/",n)," ")):null},e.getCardPreviewAttrs=function(){var t=[e.getCardPreviewAttachments(),e.getCardPreviewHoldDesc(),e.getCardPreviewChecklist(),e.getCardPreviewComments()];if(e.getCardPreviewMembers()||!t.every((function(e){return!e})))return r.a.createElement("div",{className:"card-preview-attrs"},t.map((function(e,t){return e||r.a.createElement(r.a.Fragment,{key:t})})))},e.getCardCover=function(){var t=e.props.card.cover;return t?t.src?r.a.createElement("div",{className:"card-preview-cover-image",style:{backgroundImage:"url(".concat(t.src,")")}}):r.a.createElement("div",{className:"card-preview-cover-color",style:{backgroundColor:t.color}}):r.a.createElement(r.a.Fragment,null)},e.onToggleLabels=function(t){return t.stopPropagation(),e.props.toggleFullLabels()},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Lt.b,{draggableId:this.props.card.id,index:this.props.index},(function(t){return r.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{className:"card-preview",onClick:e.onOpenCardDetails}),e.getCardPreviewStyle(),e.getCardCover(),r.a.createElement(Ce,{onClickLabel:e.onToggleLabels,isFull:e.props.fullLabel,cardLabels:e.props.card.labels,boardLabels:e.props.board.labels,preview:!0}),r.a.createElement("div",{className:"card-preview-header"},e.props.card.title),r.a.createElement("div",{ref:e.ref,onClick:e.onOpenCardActions,className:"card-preview-edit-container"},r.a.createElement(ze.a,{fontSize:"inherit"}),e.state.isEditing?r.a.createElement(Ft,{anchorEl:e.ref,props:e.props,onClose:e.onSetNotEditing,cardStyle:e.getCardPreviewStyle(),attrs:e.getCardPreviewAttrs()}):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"card-preview-attrs"},r.a.createElement(q,{dueDate:e.props.card.dueDate}),e.getCardPreviewAttrs(),e.getCardPreviewMembers()),t.placeholder)}))}}]),a}(n.Component),Rt={toggleFullLabels:function(){return function(e){e({type:"TOGGLE_FULL_LABEL"})}}},Gt=Object(i.b)((function(e){return{fullLabel:e.boardReducer.fullLabel,board:e.boardReducer.board}}),Rt)(Pt),_t=a(182),Vt=a.n(_t),zt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isEditing:!1,txtValue:""},e.onChange=function(t){var a=t.target.value;e.setState({txtValue:a})},e.onKeyPress=function(t){"Enter"===t.key&&e.onSubmit(t)},e.setEditing=function(){e.setState({isEditing:!0})},e.setNotEditing=function(){e.setState({isEditing:!1})},e.getIsEditing=function(){return e.state.isEditing?r.a.createElement("div",{className:"new-item-form"},r.a.createElement("form",{onKeyDown:e.onKeyPress,onBlur:e.setNotEditing,onSubmit:e.onSubmit},r.a.createElement("textarea",{placeholder:e.props.placeHolderTxt,autoFocus:!0,type:"text",onChange:e.onChange,value:e.state.txtValue}),r.a.createElement("div",{className:"save-btn-container"},r.a.createElement("button",{className:"save-btn",onMouseDown:e.onSubmit},e.props.addBtnTxt),r.a.createElement(be.a,{onClick:e.setNotEditing})))):r.a.createElement("div",{className:"new-item-btn",onClick:e.setEditing},r.a.createElement(Vt.a,{style:{fontSize:14}}),e.props.addItemTxt)},e.onSubmit=function(){var t=Object(v.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.txtValue){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.props.onAdd(e.state.txtValue);case 5:!1,"",e.setState({isEditing:!1,txtValue:""});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"new-item-container"},this.getIsEditing())}}]),a}(n.Component),Jt=a(181).cardService;var Ht=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).addCard=function(t){t.stopPropagation(),e.props.onAdd("New Card")},e.archiveAllCards=function(t){t.stopPropagation(),e.props.onArchiveAllCards(e.props.groupId,e.props.board),e.props.toggleMenu()},e.archiveGroup=function(t){t.stopPropagation(),e.props.onArchiveGroup(e.props.groupId,e.props.board),e.props.toggleMenu()},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(ft.a,{onClickAway:function(){return e.props.toggleMenu()}},r.a.createElement("div",{className:"group-menu-container"},r.a.createElement("div",null,"List Actions"),r.a.createElement("div",null,r.a.createElement("hr",null)),r.a.createElement("div",{onClick:this.addCard,className:"group-menu-item"},"Add Card..."),r.a.createElement("div",{onClick:this.archiveAllCards,className:"group-menu-item"},"Archive All Cards..."),r.a.createElement("div",null,r.a.createElement("hr",null)),r.a.createElement("div",{onClick:this.archiveGroup,className:"group-menu-item"},"Archive This Group...")))}}]),a}(n.Component),Yt={onArchiveGroup:function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.parse(JSON.stringify(t)),o=r.groups.findIndex((function(t){return t.id===e})),r.groups[o].archivedAt=Date.now(),n({type:"SET_BOARD",board:r}),a.next=7,w.a.updateBoard(r);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("error archiving group",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},onArchiveAllCards:function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r,o,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.parse(JSON.stringify(t)),o=r.groups.findIndex((function(t){return t.id===e})),c=r.groups[o].cards.map((function(e){var t=JSON.parse(JSON.stringify(e));return t.archivedAt=Date.now(),t})),r.groups[o].cards=c,n({type:"SET_BOARD",board:r}),a.next=8,w.a.updateBoard(r);case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("error archiving cards",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}},Xt=Object(i.b)((function(e){return{board:e.boardReducer.board}}),Yt)(Ht),Kt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={currGroupName:"",currGroupId:null,isMenuShown:!1,isChangeGroupShown:!1},e.onAddCard=function(t){return e.props.addCard(e.props.board,t,e.props.group.id)},e.getAddItemTxt=function(){return e.props.group.cards.length?"Add another card":"Add a card"},e.toggleMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.stopPropagation();var a=!e.state.isMenuShown;e.setState({isMenuShown:a})},e.closeChangeGroupName=function(t){e.setState({isChangeGroupShown:!1}),e.onSubmit(t)},e.onOpenChangeGroupName=function(t,a){e.setState({currGroupId:t,currGroupName:a,isChangeGroupShown:!0})},e.handleChangeGroupName=function(t){e.setState({currGroupName:t.target.value})},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.currGroupId,r=a.currGroupName;e.props.setNewGroupName(n,r,e.props.board),e.setState({isChangeGroupShown:!1})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.group;return r.a.createElement(Lt.b,{draggableId:t.id,index:this.props.index},(function(a){return r.a.createElement("div",Object.assign({},a.draggableProps,{ref:a.innerRef,className:"group-container"}),r.a.createElement("div",Object.assign({},a.dragHandleProps,{className:"group-header",onClick:function(){return e.onOpenChangeGroupName(t.id,t.title)}}),e.state.isChangeGroupShown?r.a.createElement(ft.a,{onClickAway:e.closeChangeGroupName},r.a.createElement("form",{onSubmit:e.onSubmit,className:"change-group-name"},r.a.createElement("input",{className:"change-group-name-input",type:"text",name:"group-name",onChange:e.handleChangeGroupName,defaultValue:t.title,autoFocus:!0,spellCheck:"false",autoComplete:"off",onFocus:function(e){return e.target.select()}}))):t.title,r.a.createElement("span",{onClick:e.toggleMenu,className:"material-icons dots-icon"},"more_horiz"),e.state.isMenuShown&&r.a.createElement(Xt,{toggleMenu:e.toggleMenu,groupId:t.id,onAdd:e.onAddCard})),r.a.createElement(Lt.c,{droppableId:t.id,type:"card"},(function(e){return r.a.createElement("div",Object.assign({className:"card-container",ref:e.innerRef},e.droppableProps),t.cards.map((function(e,t){if(!e.archivedAt)return r.a.createElement(Gt,{key:e.id,card:e,index:t})})),e.placeholder)})),r.a.createElement("div",{className:"new-card-btn-container"},r.a.createElement(zt,{addItemTxt:e.getAddItemTxt(),placeHolderTxt:"Add a title for this card...",addBtnTxt:"Add Card",onAdd:e.onAddCard})))}))}}]),a}(n.Component),Qt={addCard:function(e,t,a){return function(){var n=Object(v.a)(b.a.mark((function n(r){var o;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Jt.addCard(e,t,a);case 3:o=n.sent,r({type:"SET_BOARD",board:o}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("ReviewActions: err in addCard",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},setNewGroupName:function(e,t,a){return function(){var n=Object(v.a)(b.a.mark((function n(r){var o,c,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,o=a.groups.findIndex((function(t){return t.id===e})),t!==a.groups[o].title&&t.trim()){n.next=4;break}return n.abrupt("return");case 4:return c=JSON.parse(JSON.stringify(a)),i=t.replace(/\s+/g," "),c.groups[o].title=i.trim(),r({type:"SET_BOARD",board:c}),n.next=10,w.a.updateBoard(c);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log("error setting group name",n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}},qt=Object(i.b)((function(e){return{board:e.boardReducer.board}}),Qt)(Kt),Wt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={newGroupTitle:""},e.handleChange=function(t){var a=t.target.value;e.setState({newGroupTitle:a})},e.onSubmit=function(t){t.preventDefault(),e.state.newGroupTitle&&(e.props.onAddNewGroup(e.props.board,e.state.newGroupTitle),e.setState({newGroupTitle:""}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({newGroupTitle:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"new-group-form"},r.a.createElement("form",{onBlur:this.setNotEditing,onSubmit:this.onSubmit},r.a.createElement("input",{onBlur:function(){return e.props.closeNewGroup()},placeholder:"Enter list title",type:"text",autoFocus:!0,onChange:this.handleChange,value:this.state.newGroupTitle?this.state.newGroupTitle:""}),r.a.createElement("div",{className:"save-btn-container"},r.a.createElement("button",{className:"save-btn",onMouseDown:this.onSubmit},"Add List"),r.a.createElement(be.a,{onClick:function(){return e.props.closeNewGroup()}}))))}}]),a}(n.Component),Zt={onAddNewGroup:function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.parse(JSON.stringify(e)),o={id:Y(),title:t,cards:[],archivedAt:!1,style:{}},r.groups.push(o),n({type:"SET_BOARD",board:r}),a.next=7,w.a.updateBoard(r);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("error adding new group",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}},$t=Object(i.b)((function(e){return{board:e.boardReducer.board}}),Zt)(Wt),ea=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isNewGroupShown:!1,groups:null},e.closeNewGroup=function(){e.setState({isNewGroupShown:!1})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.groups;t.onAddGroup,t.style;return a?r.a.createElement("div",{className:"group-list-outer-container"},r.a.createElement(Lt.c,{droppableId:"changeToBoardId",direction:"horizontal",type:"group"},(function(e){return r.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,className:"group-list-container"}),a.map((function(e,t){if(!e.archivedAt)return r.a.createElement(qt,{key:e.id,group:e,index:t})})))})),r.a.createElement("div",{className:"new-group"},!this.state.isNewGroupShown&&r.a.createElement("div",{className:"add-new-group-text",onClick:function(){return e.setState({isNewGroupShown:!0})}},"+ Add another list"),this.state.isNewGroupShown&&r.a.createElement($t,{closeNewGroup:this.closeNewGroup}))):r.a.createElement("div",null)}}]),a}(n.Component),ta=a(73);a(266);function aa(e){return r.a.createElement("div",null,r.a.createElement(ta.a,null))}var na=a(741),ra=a(732),oa=a(722),ca=a(733),ia=a(734),sa=a(735),la=a(297),ua=a.n(la),da=a(298),pa=a.n(da),ma=a(299),fa=a.n(ma),ha=a(296),ba=a.n(ha),va=a(108),ga=a.n(va);function Ea(e){var t=e.titleTxt,a=e.onSetMenuOpt;return r.a.createElement("div",{className:"sidebar-header"},r.a.createElement("h4",null,t),r.a.createElement(L.a,{size:"small",onClick:function(){return a(null)}},r.a.createElement(ga.a,null)),r.a.createElement(ra.a,null))}var ya=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isEditDesc:!1,currDesc:null},e.setCurrDesc=function(t){var a=t.target.value;e.setState({currDesc:a})},e.onEditDesc=function(){var t=e.state.currDesc;if(t){var a=Object(u.a)(Object(u.a)({},e.props.board),{},{description:t});e.props.updateBoard(a)}e.setState({isEditDesc:!1})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.board,n=t.isShowing,o=t.onSetMenuOpt,c=this.state.isEditDesc;return r.a.createElement("div",{className:"sidebar-container"},r.a.createElement(na.a,{classes:{root:"sidebar"},className:"about-board",anchor:"right",open:n,BackdropProps:{hideBackdrop:!0},variant:"persistent"},r.a.createElement(Ea,{titleTxt:"ABOUT THIS BOARD",onSetMenuOpt:o}),r.a.createElement("div",{className:"about-container"},a.createdBy&&r.a.createElement("div",{className:"created-by"},r.a.createElement("h5",null,r.a.createElement(ba.a,null)," CREATED BY"),r.a.createElement("div",{className:"board-creator"},r.a.createElement(x,{name:a.createdBy.fullName}),r.a.createElement("span",null,a.createdBy.fullName))),r.a.createElement(ra.a,null),r.a.createElement("div",{className:"board-description"},r.a.createElement("div",{className:"description-header"},r.a.createElement("h5",null,r.a.createElement(ge.a,null)," DESCRIPTION"),r.a.createElement("button",{className:"edit-desc-btn",onClick:function(){return e.setState({isEditDesc:!e.state.isEditDesc})}},"Edit desciption")),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("textarea",{name:"boardDesc",autoFocus:!0,defaultValue:a.description,style:{resize:"none"},cols:"30",rows:"10",onChange:function(t){return e.setCurrDesc(t)},onBlur:function(){return e.setState({isEditDesc:!1})}}),r.a.createElement("div",{className:"save-cancel-btns"},r.a.createElement("button",{type:"button",className:"save-btn",onMouseDown:this.onEditDesc},"Save"),r.a.createElement("button",{className:"cancel-btn",onClick:function(){return e.setState({isEditDesc:!1})}},"Cancel"))),!c&&r.a.createElement("pre",{style:{cursor:"pointer"},onClick:function(){return e.setState({isEditDesc:!0})}},a.description)))))}}]),a}(n.Component),Ca={updateBoard:J},wa=Object(i.b)((function(e){return{board:e.boardReducer.board}}),Ca)(ya),Oa=(a.p,function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSetBoardStyle=function(t){var a=Object(u.a)(Object(u.a)({},e.props.board),{},{style:t});e.props.updateBoard(a),e.props.setStyle(a.style)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.board,t.isShowing),n=t.onSetMenuOpt;return r.a.createElement("div",{className:"about-board sidebar-container"},r.a.createElement(na.a,{classes:{root:"sidebar"},anchor:"right",open:a,BackdropProps:{hideBackdrop:!0},variant:"persistent"},r.a.createElement(Ea,{titleTxt:"CHANGE BACKGROUND",onSetMenuOpt:n}),r.a.createElement("div",{className:"changeBG-container"},r.a.createElement("div",{className:"style-pallete"},[{id:"bs101",fontClr:"#f9f9f9",bgImg:"url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708689/bg-1_ls68ox.jpg)"},{id:"bs102",fontClr:"#f9f9f9",bgImg:"url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708658/bg-2_r8mevb.jpg)"},{id:"bs103",fontClr:"#f9f9f9",bgImg:"url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708664/bg-3_vrhygl.jpg)"},{id:"bs104",fontClr:"#f9f9f9",bgImg:"url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708683/bg-4_jqpmcl.jpg)"},{id:"bs105",fontClr:"#f9f9f9",bgImg:"url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708662/bg-5_r4mz7j.jpg)"},{id:"bs106",fontClr:"#f9f9f9",bgImg:"url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708669/bg-6_tsrunp.jpg)"},{id:"bs107",fontClr:"#f9f9f9",bgImg:"url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708679/bg-7_g0tqic.jpg)"},{id:"bs108",fontClr:"#f9f9f9",bgImg:"url(https://res.cloudinary.com/duhz8ymod/image/upload/v1600708683/bg-8_hoe86h.jpg)"}].map((function(t){return r.a.createElement("div",{key:t.id,className:"bg-style",style:{backgroundColor:t.bgClr},onClick:function(){return e.onSetBoardStyle(t)}},r.a.createElement("div",{className:"img-container",style:{backgroundImage:t.bgImg,backgroundRepeat:"no-repeat",backgroundSize:"cover"}}),r.a.createElement("div",null,"Select"))}))))))}}]),a}(n.Component)),ka={updateBoard:J,setStyle:H},Sa=Object(i.b)((function(e){return{board:e.boardReducer.board}}),ka)(Oa),Na=a(189),ja=a.n(Na),xa=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isShowingCards:!0,archive:{archivedCards:[],archivedGroups:[]},filterBy:""},e.loadArchive=function(){var t=e.state.filterBy,a=e.props.board,n=a.groups.filter((function(e){return e.cards.find((function(e){return e.archivedAt}))}));n=n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{cards:e.cards.filter((function(e){return e.archivedAt&&(e.title.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()))}))})}));var r=a.groups.filter((function(e){return e.archivedAt&&e.title.toLowerCase().includes(t.toLowerCase())}));e.setState({archive:{archivedCards:n,archivedGroups:r}})},e.onOpenCardDetails=function(e){var t=window.location.href;t+=e,window.location.assign(t)},e.onUnArchiveCard=function(t){t.archivedAt=null,e.props.updateCard(e.props.board,t)},e.onDeleteCard=function(t){e.props.deleteCard(e.props.board,t)},e.onUnArchiveGroup=function(t){t.archivedAt=null,e.props.updateGroup(e.props.board,t)},e.onFilter=function(t){var a=t.target.value;e.setState((function(){return{filterBy:a}}),(function(){return e.loadArchive()}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadArchive();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e.board!==this.props.board&&this.loadArchive()}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,n=t.isShowing,o=t.onSetMenuOpt,c=this.state,i=c.isShowingCards,s=c.archive;return a.groups?s&&r.a.createElement("div",{className:"archive sidebar-container"},r.a.createElement(na.a,{classes:{root:"sidebar"},anchor:"right",open:n,BackdropProps:{hideBackdrop:!0},variant:"persistent"},r.a.createElement(Ea,{titleTxt:"ARCHIVE",onSetMenuOpt:o}),r.a.createElement("div",{className:"search-archive-container"},r.a.createElement("input",{type:"text",onChange:function(t){return e.onFilter(t)}}),r.a.createElement("button",{className:"toggle-archive-btn",onClick:function(){e.setState({isShowingCards:!e.state.isShowingCards,filterBy:""})}},"Switch to ",i?"groups":"cards")),r.a.createElement("div",{className:"archive-list-container"},i?s.archivedCards.map((function(t){if(0!==t.cards.length)return r.a.createElement(r.a.Fragment,{key:t.id},r.a.createElement("h5",null,t.title),t.cards.map((function(t){return r.a.createElement("div",{className:"archive-card-container",key:t.id},r.a.createElement("div",{className:"archive-card-preview",onClick:function(){return e.onOpenCardDetails(t.id)}},r.a.createElement("span",null,t.title)),r.a.createElement("div",{className:"buttons"},r.a.createElement(L.a,{onClick:function(){return e.onUnArchiveCard(t)}},r.a.createElement(ja.a,{fontSize:"small"})),r.a.createElement(L.a,{onClick:function(){return e.onDeleteCard(t.id)}},r.a.createElement(He.a,{fontSize:"small"}))))})))})):s.archivedGroups.map((function(t){return r.a.createElement(r.a.Fragment,{key:t.id},r.a.createElement("div",{className:"archive-group-preview"},r.a.createElement("h5",null,t.title)),r.a.createElement("div",{className:"buttons"},r.a.createElement(L.a,{onClick:function(){return e.onUnArchiveGroup(t)}},r.a.createElement(ja.a,{fontSize:"small"})),r.a.createElement(L.a,null,r.a.createElement(He.a,{fontSize:"small"}))))}))))):r.a.createElement("div",null,"Loading...")}}]),a}(n.Component),Aa={loadBoard:F,updateCard:R,deleteCard:function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r,o,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.parse(JSON.stringify(e)),o=r.groups.findIndex((function(e){return e.cards.find((function(e){return e.id===t}))})),c=r.groups[o].cards.findIndex((function(e){return e.id===t})),r.groups[o].cards.splice(c,1),n({type:"SET_BOARD",board:r}),a.next=8,w.a.updateBoard(r);case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("error deleting card",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},updateGroup:function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.parse(JSON.stringify(e)),o=r.groups.findIndex((function(e){return e.id===t.id})),r.groups[o]=t,n({type:"SET_BOARD",board:r}),a.next=7,w.a.updateBoard(r);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("error updating group",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}},Da=Object(i.b)((function(e){return{board:e.boardReducer.board}}),Aa)(xa),Ma=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isShowing,a=e.onSetMenuOpt;return r.a.createElement("div",{className:"sidebar-container"},r.a.createElement(na.a,{classes:{root:"sidebar"},className:"label-panel",anchor:"right",open:t,BackdropProps:{hideBackdrop:!0},variant:"persistent"},r.a.createElement(Ea,{titleTxt:"LABELS",onSetMenuOpt:a}),r.a.createElement($e,null)))}}]),a}(n.Component),Ba={addLabel:G,updateLabel:V,removeLabel:_},Ia=Object(i.b)((function(e){return{board:e.boardReducer.board}}),Ba)(Ma),La=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={selectedMenuOpt:null},e.onSetMenuOpt=function(t){e.setState({selectedMenuOpt:t})},e.DynamicCmp=function(){var t=e.state.selectedMenuOpt;switch(t){case"about":return r.a.createElement(wa,{isShowing:"about"===t,onSetMenuOpt:e.onSetMenuOpt});case"changeBG":return r.a.createElement(Sa,{isShowing:"changeBG"===t,onSetMenuOpt:e.onSetMenuOpt});case"archive":return r.a.createElement(Da,{isShowing:"archive"===t,onSetMenuOpt:e.onSetMenuOpt});case"labels":return r.a.createElement(Ia,{isShowing:"labels"===t,onSetMenuOpt:e.onSetMenuOpt});case null:return r.a.createElement(r.a.Fragment,null)}},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.board,n=t.isSidebarShowing,o=t.onToggleSidebar;return r.a.createElement("div",{className:"sidebar-container"},r.a.createElement(na.a,{className:"sidebar",anchor:"right",open:n,BackdropProps:{hideBackdrop:!0},variant:"persistent",onClose:function(){return o(!1)}},r.a.createElement("div",{className:"sidebar-header"},r.a.createElement("h4",null,"MENU"),r.a.createElement(L.a,{size:"small",onClick:function(){return o(!1)}},r.a.createElement(Qe.a,null))),r.a.createElement(ra.a,null),r.a.createElement(oa.a,null,r.a.createElement(ca.a,{button:!0,className:"menu-btn",onClick:function(){e.onSetMenuOpt("about")}},r.a.createElement(ia.a,null,r.a.createElement(ua.a,null)),r.a.createElement(sa.a,null,"About this board")),r.a.createElement(ca.a,{button:!0,className:"menu-btn",onClick:function(){e.onSetMenuOpt("changeBG")}},r.a.createElement(ia.a,null,r.a.createElement(pa.a,null)),r.a.createElement(sa.a,null,"Change background")),r.a.createElement(ca.a,{button:!0,className:"menu-btn",onClick:function(){e.onSetMenuOpt("archive")}},r.a.createElement(ia.a,null,r.a.createElement(oe.a,null)),r.a.createElement(sa.a,null,"Archive")),r.a.createElement(ca.a,{button:!0,className:"menu-btn",onClick:function(){e.onSetMenuOpt("labels")}},r.a.createElement(ia.a,null,r.a.createElement(ie.a,null)),r.a.createElement(sa.a,null,"Labels"))),r.a.createElement(ra.a,null),r.a.createElement("h5",null,r.a.createElement(fa.a,{size:"small"})," ACTIVITY LOG"),r.a.createElement(Te,{activities:a.activities,boardId:a._id})),this.DynamicCmp())}}]),a}(n.Component),Ta=Object(i.b)((function(e){return{board:e.boardReducer.board}}))(La),Ua=a(65),Fa=a(300),Pa=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isSidebarShowing:!1,prevBoard:null},e.remoteUpdate=function(t){var a=Object(Fa.detailedDiff)(t,e.props.board);if(!Object.keys(a.added).length&&!Object.keys(a.deleted).length&&!Object.keys(a.updated).length)return console.log("nothing to update");console.log(a),ta.b.success("The board has been updated!",{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},e.getBoardFromParams=Object(v.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.prev=1,t.next=4,e.props.loadBoard(a);case 4:e.props.setStyle(e.props.board.style),Ua.a.on("init board",(function(){return console.log(e.props.board._id)})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),ta.b.error("Oops! we seem to be missing the board you're looking for. going back to board selection.",{position:"bottom-right",autoClose:3500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),setTimeout((function(){e.props.history.push("/board")}),1e3);case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.onToggleSidebar=function(t){e.setState({isSidebarShowing:t})},e.onFilter=function(t){e.props.onSetFilterBy(e.props.board,t)},e.onAddGroup=function(e){return e},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t,a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,e.next=4,this.props.loadBoard(t);case 4:this.props.setStyle(this.props.board.style),Ua.a.setup(),Ua.a.on("init board",(function(){return console.log(a.props.board._id)})),Ua.a.emit("entered-board",this.props.board._id),Ua.a.on("board-updated",function(){var e=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(JSON.stringify(a.props.board)),e.next=3,a.props.loadBoard(t._id);case 3:a.remoteUpdate(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),ta.b.error("Oops! we seem to be missing the board you're looking for. going back to board selection.",{position:"bottom-right",autoClose:3500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),setTimeout((function(){a.props.history.push("/board")}),1e3);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){Ua.a.off("board-updated"),Ua.a.terminate()}},{key:"render",value:function(){var e=this.props.board;return e?r.a.createElement(r.a.Fragment,null,this.props.match.params.cardId?r.a.createElement(mt,{cardId:this.props.match.params.cardId,boardId:this.props.match.params.id,history:this.props.history}):r.a.createElement("div",null),r.a.createElement("div",{className:"board-container"},r.a.createElement(jt,{title:e.title,members:e.members,onToggleSidebar:this.onToggleSidebar,onFilter:this.onFilter,style:e.style,users:this.props.allUsers}),r.a.createElement(Ta,{board:e,isSidebarShowing:this.state.isSidebarShowing,onToggleSidebar:this.onToggleSidebar}),e.groups?r.a.createElement(ea,{style:e.style,onAddGroup:this.onAddGroup,groups:e.groups}):r.a.createElement(j.a,null))):r.a.createElement("div",null,"Loading...")}}]),a}(n.Component),Ra={loadBoard:F,onSetFilterBy:z,setStyle:H},Ga=Object(i.b)((function(e){return{board:e.boardReducer.board,filterBy:e.boardReducer.filterBy}}),Ra)(Pa),_a=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"new-board-color ".concat(this.props.isSelected?"colorSelected":""),style:{backgroundColor:"".concat(this.props.color)},onClick:function(){return e.props.onSetColor(e.props.color)}})}}]),a}(n.Component),Va=[{id:"bc101",name:"green",color:"#519839"},{id:"bc102",name:"yellow",color:"#D29034"},{id:"bc103",name:"blue",color:"#0079BF"},{id:"bc104",name:"brown",color:"#B04632"},{id:"bc105",name:"purple",color:"#89609E"},{id:"bc106",name:"pink",color:"#CD5A91"},{id:"bc107",name:"lightGreen",color:"#4BBF6B"},{id:"bc108",name:"teal",color:"#49A9D7"}],za=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectedColor:null,newBoardName:""},e.onSetColor=function(t){e.setState({selectedColor:t})},e.handleChange=function(t){e.setState({newBoardName:t.target.value})},e.onSubmit=function(t){t.preventDefault();var a=e.state.selectedColor,n=e.state.newBoardName;e.props.addNewBoard(n,a)},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({selectedColor:null,newBoardName:""})}},{key:"isSelected",value:function(e){return this.state.selectedColor===e}},{key:"render",value:function(){var e=this;return r.a.createElement(ft.a,{onClickAway:this.props.onCloseModal},r.a.createElement("div",{className:"add-board-container"},r.a.createElement("h3",null,"New board"),r.a.createElement("input",{onChange:this.handleChange,type:"text",placeholder:"New Board's Name",autoFocus:!0}),r.a.createElement("div",{className:"new-board-colors-container"},Va.map((function(t){return r.a.createElement(_a,{color:t.color,key:t.id,onSetColor:e.onSetColor,isSelected:e.isSelected(t.color)})}))),r.a.createElement("button",{onClick:this.onSubmit},"Add New Board")))}}]),a}(n.Component),Ja={addNewBoard:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var a=Object(v.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.addNewBoard(e,t);case 2:a.sent;case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},Ha=Object(i.b)((function(e){return{boardColors:e.boardReducer.board.boardColors}}),Ja)(za),Ya=a.p+"static/media/snorelax.d7380d15.png",Xa=(a(669),function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isNewBoardModalShown:!1},e.toggleModal=function(){e.setState({isNewBoardModalShown:!e.state.isNewBoardModalShown})},e.onCloseModal=function(){e.setState({isNewBoardModalShown:!1})},e.showLove=function(){alert("Snorelax Loves you \ud83d\udca4\ud83c\udf37")},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar-container"},r.a.createElement("div",{className:"navbar-left-container"},r.a.createElement("div",{className:"board-header-btn left"},r.a.createElement(s.c,{to:"main-url"},r.a.createElement("span",{className:"material-icons"},"home"))),r.a.createElement("div",{className:"board-header-btn left"},r.a.createElement(s.c,{to:"/board"},r.a.createElement("span",{className:"material-icons"},"view_list"),r.a.createElement("h4",{className:"boards-text"},"Boards")))),r.a.createElement("div",{onClick:this.showLove,style:{cursor:"pointer"},className:"header-logo"},r.a.createElement("img",{src:Ya,alt:""})),r.a.createElement("div",{className:"navbar-right-container"},r.a.createElement("div",{className:"board-header-btn right",onClick:this.toggleModal},r.a.createElement("span",{className:"material-icons"},"add")),this.state.isNewBoardModalShown&&r.a.createElement(Ha,{onCloseModal:this.onCloseModal}),r.a.createElement("div",{className:"board-header-btn right"},r.a.createElement(s.c,{to:"/login"},r.a.createElement("h4",{className:"login-text"},"Login")))))}}]),a}(n.Component)),Ka=a(190);function Qa(){var e=Object(Ka.b)({from:{opacity:0,transform:"translate3d(100%,0,0)"},to:{opacity:1,transform:"translate3d(0%,0,0)"},leave:{opacity:0,transform:"translate3d(-50%,0,0)"}});return r.a.createElement(Ka.a.div,{className:"login-container",style:e},r.a.createElement("h1",null,"this is login"))}var qa=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onDragEnd=function(t){var a=t.destination,n=t.source,r=t.draggableId,o=t.type;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index)){if("card"===o){var c=e.props.board.groups.findIndex((function(e){return e.id===n.droppableId})),i=e.props.board.groups.findIndex((function(e){return e.id===a.droppableId}));if(n.droppableId===a.droppableId){var s=e.props.board.groups.find((function(e){return e.id===n.droppableId})),d=s.cards.find((function(e){return e.id===r})),p=Array.from(s.cards);p.splice(n.index,1),p.splice(a.index,0,d);var m=Object(u.a)(Object(u.a)({},s),{},{cards:p}),f=Object(l.a)(e.props.board.groups);f[c]=m;var h=Object(u.a)(Object(u.a)({},e.props.board),{},{groups:f});return void e.props.updatePosition(h)}if(n.droppableId!==a.droppableId){var b=e.props.board.groups.find((function(e){return e.id===a.droppableId})),v=e.props.board.groups.find((function(e){return e.id===n.droppableId})),g=v.cards.find((function(e){return e.id===r})),E=v.cards.findIndex((function(e){return e.id===r})),y=Array.from(b.cards);y.splice(a.index,0,g),v.cards.splice(E,1);var C=Object(l.a)(e.props.board.groups);C[c]=v,C[i].cards=y;var w=Object(u.a)(Object(u.a)({},e.props.board),{},{groups:C});return void e.props.updatePosition(w)}}if("group"!==o);else{var O=Array.from(e.props.board.groups),k=e.props.board.groups.find((function(e){return e.id===r}));O.splice(n.index,1),O.splice(a.index,0,k);var S=Object(u.a)(Object(u.a)({},e.props.board),{},{groups:O});e.props.updatePosition(S)}}},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){kt.a.loginDefault(),ta.b.configure()}},{key:"render",value:function(){var e=this.props.style;return this.props.style?r.a.createElement(Lt.a,{onDragEnd:this.onDragEnd},r.a.createElement("div",{className:"app-bg",style:{backgroundImage:e.bgImg}},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(Xa,null)),r.a.createElement("main",{className:"app-main"},r.a.createElement(aa,null),r.a.createElement(B.c,null,r.a.createElement(B.a,{path:"/board/:id/:cardId?",component:Ga}),r.a.createElement(B.a,{path:"/login",component:Qa}),r.a.createElement(B.a,{component:M,path:"/:view"})))))):r.a.createElement("div",null,"loading")}}]),a}(n.Component),Wa={updateBoard:J,updatePosition:function(e){return function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_BOARD",board:e}),n=JSON.parse(JSON.stringify(e)),t.next=5,w.a.updateBoard(n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error updating board",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Za=Object(i.b)((function(e){return{board:e.boardReducer.board,style:e.boardReducer.style,filterBy:e.boardReducer.filterBy}}),Wa)(qa);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $a=a(40),en=a(301),tn={board:{},filterBy:null,style:{},fullLabel:!1},an=null;sessionStorage.user&&(an=JSON.parse(sessionStorage.user));var nn={loggedInUser:an,users:[]},rn=Object($a.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(u.a)(Object(u.a)({},e),{},{loggedInUser:t.user});case"USER_REMOVE":return Object(u.a)(Object(u.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(u.a)(Object(u.a)({},e),{},{users:t.users});default:return e}},boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_BOARD":return Object(u.a)(Object(u.a)({},e),{},{board:t.board});case"FILTER_BY":return Object(u.a)(Object(u.a)({},e),{},{filterBy:t});case"TOGGLE_FULL_LABEL":return e.fullLabel?Object(u.a)(Object(u.a)({},e),{},{fullLabel:!1}):Object(u.a)(Object(u.a)({},e),{},{fullLabel:!0});case"SET_STYLE":return Object(u.a)(Object(u.a)({},e),{},{style:t.style});default:return e}}}),on=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$a.d,cn=Object($a.e)(rn,on(Object($a.a)(en.a)));c.a.render(r.a.createElement(i.a,{store:cn},r.a.createElement(s.a,null,r.a.createElement(Za,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(8),c=a(272),i=a.n(c).a.create({withCredentials:!0});function s(e){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(r.a.mark((function e(t){var a,n,o,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"get",n=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,i({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return o=e.sent,e.abrupt("return",o.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}t.a={get:function(e,t){return s(e,"GET",t)},post:function(e,t){return s(e,"POST",t)},put:function(e,t){return s(e,"PUT",t)},delete:function(e,t){return s(e,"DELETE",t)}}},81:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(8);var c={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}},i=a(75),s={login:function(e){return u.apply(this,arguments)},logout:function(){return p.apply(this,arguments)},signup:function(e){return d.apply(this,arguments)},getUsers:function(){return c.query("user")},getById:function(e){return c.get("user",e)},remove:function(e){return c.remove("user",e)},update:function(e){return c.put("user",e)},loginDefault:function(){m({_id:"u900",username:"Guest",fullname:"Guesty guest",imgUrl:"https://images-na.ssl-images-amazon.com/images/I/41v4Cc8iZ-L._AC_.jpg"})},getLoggedInUser:function(){return c.loadFromStorage("user")},getUsersFromDb:function(){return l.apply(this,arguments)}};t.a=s;function l(){return(l=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.get("user"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(o.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.query("user");case 2:if(a=e.sent,!(n=a.find((function(e){return e.username===t.username})))){e.next=6;break}return e.abrupt("return",m(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.post("user",t);case 2:return a=e.sent,e.abrupt("return",m(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.clear();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return localStorage.setItem("user",JSON.stringify(e)),e}}},[[315,1,2]]]);
//# sourceMappingURL=main.ea2fb978.chunk.js.map